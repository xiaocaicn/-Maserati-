!function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=340)}(Array(18).concat([function(e,t,i){(function(t){var i=function(e){return e&&e.Math==Math&&e};e.exports=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof t&&t)||Function("return this")()}).call(this,i(31))},,,,,,function(e,t,i){var n=i(18),s=i(59),o=i(103),a=i(143),r=n.Symbol,l=s("wks");e.exports=function(e){return l[e]||(l[e]=a&&r[e]||(a?r:o)("Symbol."+e))}},,,,function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,i){var n=i(38);e.exports=function(e){if(!n(e))throw TypeError(String(e)+" is not an object");return e}},,function(e,t){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(e){"object"==typeof window&&(i=window)}e.exports=i},,,,,function(e,t,i){var n=i(18),s=i(66).f,o=i(43),a=i(44),r=i(78),l=i(136),d=i(84);e.exports=function(e,t){var i,c,h,u,p,f=e.target,g=e.global,m=e.stat;if(i=g?n:m?n[f]||r(f,{}):(n[f]||{}).prototype)for(c in t){if(u=t[c],h=e.noTargetGet?(p=s(i,c))&&p.value:i[c],!d(g?c:f+(m?".":"#")+c,e.forced)&&void 0!==h){if(typeof u==typeof h)continue;l(u,h)}(e.sham||h&&h.sham)&&o(u,"sham",!0),a(i,c,u,e)}}},,function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},,,function(e,t){var i={}.toString;e.exports=function(e){return i.call(e).slice(8,-1)}},function(e,t){var i={}.hasOwnProperty;e.exports=function(e,t){return i.call(e,t)}},function(e,t,i){var n=i(50),s=i(52),o=i(75);e.exports=n?function(e,t,i){return s.f(e,t,o(1,i))}:function(e,t,i){return e[t]=i,e}},function(e,t,i){var n=i(18),s=i(59),o=i(43),a=i(42),r=i(78),l=i(102),d=i(79),c=d.get,h=d.enforce,u=String(l).split("toString");s("inspectSource",(function(e){return l.call(e)})),(e.exports=function(e,t,i,s){var l=!!s&&!!s.unsafe,d=!!s&&!!s.enumerable,c=!!s&&!!s.noTargetGet;"function"==typeof i&&("string"!=typeof t||a(i,"name")||o(i,"name",t),h(i).source=u.join("string"==typeof t?t:"")),e!==n?(l?!c&&e[t]&&(d=!0):delete e[t],d?e[t]=i:o(e,t,i)):d?e[t]=i:r(t,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&c(this).source||l.call(this)}))},,,,,,function(e,t,i){var n=i(28);e.exports=!n((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},function(e,t,i){var n=i(50),s=i(101),o=i(29),a=i(76),r=Object.defineProperty;t.f=n?r:function(e,t,i){if(o(e),t=a(t,!0),o(i),s)try{return r(e,t,i)}catch(e){}if("get"in i||"set"in i)throw TypeError("Accessors not supported");return"value"in i&&(e[t]=i.value),e}},function(e,t,i){var n=i(82),s=Math.min;e.exports=function(e){return e>0?s(n(e),9007199254740991):0}},,,,,function(e,t,i){var n=i(67),s=i(51);e.exports=function(e){return n(s(e))}},function(e,t,i){var n=i(68),s=i(134);(e.exports=function(e,t){return s[e]||(s[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.4.1",mode:n?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t,i){var n=i(138),s=i(18),o=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?o(n[e])||o(s[e]):n[e]&&n[e][t]||s[e]&&s[e][t]}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},function(e,t){e.exports={}},,,,function(e,t,i){var n=i(50),s=i(133),o=i(75),a=i(58),r=i(76),l=i(42),d=i(101),c=Object.getOwnPropertyDescriptor;t.f=n?c:function(e,t){if(e=a(e),t=r(t,!0),d)try{return c(e,t)}catch(e){}if(l(e,t))return o(!s.f.call(e,t),e[t])}},function(e,t,i){var n=i(28),s=i(41),o="".split;e.exports=n((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==s(e)?o.call(e,""):Object(e)}:Object},function(e,t){e.exports=!1},function(e,t,i){var n=i(51);e.exports=function(e){return Object(n(e))}},function(e,t,i){"use strict";var n=i(28);e.exports=function(e,t){var i=[][e];return!i||!n((function(){i.call(null,t||function(){throw 1},1)}))}},function(e,t,i){"use strict";var n,s,o=i(120),a=RegExp.prototype.exec,r=String.prototype.replace,l=a,d=(n=/a/,s=/b*/g,a.call(n,"a"),a.call(s,"a"),0!==n.lastIndex||0!==s.lastIndex),c=void 0!==/()??/.exec("")[1];(d||c)&&(l=function(e){var t,i,n,s,l=this;return c&&(i=new RegExp("^"+l.source+"$(?!\\s)",o.call(l))),d&&(t=l.lastIndex),n=a.call(l,e),d&&n&&(l.lastIndex=l.global?n.index+n[0].length:t),c&&n&&n.length>1&&r.call(n[0],i,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(n[s]=void 0)})),n}),e.exports=l},,,,function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,i){var n=i(38);e.exports=function(e,t){if(!n(e))return e;var i,s;if(t&&"function"==typeof(i=e.toString)&&!n(s=i.call(e)))return s;if("function"==typeof(i=e.valueOf)&&!n(s=i.call(e)))return s;if(!t&&"function"==typeof(i=e.toString)&&!n(s=i.call(e)))return s;throw TypeError("Can't convert object to primitive value")}},function(e,t,i){var n=i(18),s=i(38),o=n.document,a=s(o)&&s(o.createElement);e.exports=function(e){return a?o.createElement(e):{}}},function(e,t,i){var n=i(18),s=i(43);e.exports=function(e,t){try{s(n,e,t)}catch(i){n[e]=t}return t}},function(e,t,i){var n,s,o,a=i(135),r=i(18),l=i(38),d=i(43),c=i(42),h=i(80),u=i(81),p=r.WeakMap;if(a){var f=new p,g=f.get,m=f.has,v=f.set;n=function(e,t){return v.call(f,e,t),t},s=function(e){return g.call(f,e)||{}},o=function(e){return m.call(f,e)}}else{var y=h("state");u[y]=!0,n=function(e,t){return d(e,y,t),t},s=function(e){return c(e,y)?e[y]:{}},o=function(e){return c(e,y)}}e.exports={set:n,get:s,has:o,enforce:function(e){return o(e)?s(e):n(e,{})},getterFor:function(e){return function(t){var i;if(!l(t)||(i=s(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return i}}}},function(e,t,i){var n=i(59),s=i(103),o=n("keys");e.exports=function(e){return o[e]||(o[e]=s(e))}},function(e,t){e.exports={}},function(e,t){var i=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:i)(e)}},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t,i){var n=i(28),s=/#|\.prototype\./,o=function(e,t){var i=r[a(e)];return i==d||i!=l&&("function"==typeof t?n(t):!!t)},a=o.normalize=function(e){return String(e).replace(s,".").toLowerCase()},r=o.data={},l=o.NATIVE="N",d=o.POLYFILL="P";e.exports=o},function(e,t,i){var n=i(86),s=i(67),o=i(69),a=i(53),r=i(141),l=[].push,d=function(e){var t=1==e,i=2==e,d=3==e,c=4==e,h=6==e,u=5==e||h;return function(p,f,g,m){for(var v,y,A=o(p),$=s(A),S=n(f,g,3),E=a($.length),C=0,T=m||r,b=t?T(p,E):i?T(p,0):void 0;E>C;C++)if((u||C in $)&&(y=S(v=$[C],C,A),e))if(t)b[C]=y;else if(y)switch(e){case 3:return!0;case 5:return v;case 6:return C;case 2:l.call(b,v)}else if(c)return!1;return h?-1:d||c?c:b}};e.exports={forEach:d(0),map:d(1),filter:d(2),some:d(3),every:d(4),find:d(5),findIndex:d(6)}},function(e,t,i){var n=i(61);e.exports=function(e,t,i){if(n(e),void 0===t)return e;switch(i){case 0:return function(){return e.call(t)};case 1:return function(i){return e.call(t,i)};case 2:return function(i,n){return e.call(t,i,n)};case 3:return function(i,n,s){return e.call(t,i,n,s)}}return function(){return e.apply(t,arguments)}}},function(e,t,i){"use strict";var n=i(36),s=i(85).find,o=i(109),a=!0;"find"in[]&&Array(1).find((function(){a=!1})),n({target:"Array",proto:!0,forced:a},{find:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}}),o("find")},function(e,t,i){var n=i(29),s=i(145),o=i(83),a=i(81),r=i(111),l=i(77),d=i(80)("IE_PROTO"),c=function(){},h=function(){var e,t=l("iframe"),i=o.length;for(t.style.display="none",r.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),h=e.F;i--;)delete h.prototype[o[i]];return h()};e.exports=Object.create||function(e,t){var i;return null!==e?(c.prototype=n(e),i=new c,c.prototype=null,i[d]=e):i=h(),void 0===t?i:s(i,t)},a[d]=!0},function(e,t,i){var n=i(44),s=i(147),o=Object.prototype;s!==o.toString&&n(o,"toString",s,{unsafe:!0})},function(e,t,i){var n=i(52).f,s=i(42),o=i(24)("toStringTag");e.exports=function(e,t,i){e&&!s(e=i?e:e.prototype,o)&&n(e,o,{configurable:!0,value:t})}},function(e,t,i){"use strict";var n=i(36),s=i(71);n({target:"RegExp",proto:!0,forced:/./.exec!==s},{exec:s})},function(e,t,i){"use strict";var n=i(43),s=i(44),o=i(28),a=i(24),r=i(71),l=a("species"),d=!o((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),c=!o((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var i="ab".split(e);return 2!==i.length||"a"!==i[0]||"b"!==i[1]}));e.exports=function(e,t,i,h){var u=a(e),p=!o((function(){var t={};return t[u]=function(){return 7},7!=""[e](t)})),f=p&&!o((function(){var t=!1,i=/a/;return"split"===e&&((i={}).constructor={},i.constructor[l]=function(){return i},i.flags="",i[u]=/./[u]),i.exec=function(){return t=!0,null},i[u](""),!t}));if(!p||!f||"replace"===e&&!d||"split"===e&&!c){var g=/./[u],m=i(u,""[e],(function(e,t,i,n,s){return t.exec===r?p&&!s?{done:!0,value:g.call(t,i,n)}:{done:!0,value:e.call(i,t,n)}:{done:!1}})),v=m[0],y=m[1];s(String.prototype,e,v),s(RegExp.prototype,u,2==t?function(e,t){return y.call(e,this,t)}:function(e){return y.call(e,this)}),h&&n(RegExp.prototype[u],"sham",!0)}}},function(e,t,i){var n=i(41),s=i(71);e.exports=function(e,t){var i=e.exec;if("function"==typeof i){var o=i.call(e,t);if("object"!=typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==n(e))throw TypeError("RegExp#exec called on incompatible receiver");return s.call(e,t)}},function(e,t,i){"use strict";var n=i(92),s=i(166),o=i(29),a=i(51),r=i(116),l=i(121),d=i(53),c=i(93),h=i(71),u=i(28),p=[].push,f=Math.min,g=!u((function(){return!RegExp(4294967295,"y")}));n("split",2,(function(e,t,i){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,i){var n=String(a(this)),o=void 0===i?4294967295:i>>>0;if(0===o)return[];if(void 0===e)return[n];if(!s(e))return t.call(n,e,o);for(var r,l,d,c=[],u=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,g=new RegExp(e.source,u+"g");(r=h.call(g,n))&&!((l=g.lastIndex)>f&&(c.push(n.slice(f,r.index)),r.length>1&&r.index<n.length&&p.apply(c,r.slice(1)),d=r[0].length,f=l,c.length>=o));)g.lastIndex===r.index&&g.lastIndex++;return f===n.length?!d&&g.test("")||c.push(""):c.push(n.slice(f)),c.length>o?c.slice(0,o):c}:"0".split(void 0,0).length?function(e,i){return void 0===e&&0===i?[]:t.call(this,e,i)}:t,[function(t,i){var s=a(this),o=null==t?void 0:t[e];return void 0!==o?o.call(t,s,i):n.call(String(s),t,i)},function(e,s){var a=i(n,e,this,s,n!==t);if(a.done)return a.value;var h=o(e),u=String(this),p=r(h,RegExp),m=h.unicode,v=(h.ignoreCase?"i":"")+(h.multiline?"m":"")+(h.unicode?"u":"")+(g?"y":"g"),y=new p(g?h:"^(?:"+h.source+")",v),A=void 0===s?4294967295:s>>>0;if(0===A)return[];if(0===u.length)return null===c(y,u)?[u]:[];for(var $=0,S=0,E=[];S<u.length;){y.lastIndex=g?S:0;var C,T=c(y,g?u:u.slice(S));if(null===T||(C=f(d(y.lastIndex+(g?0:S)),u.length))===$)S=l(u,S,m);else{if(E.push(u.slice($,S)),E.length===A)return E;for(var b=1;b<=T.length-1;b++)if(E.push(T[b]),E.length===A)return E;S=$=C}}return E.push(u.slice($)),E}]}),!g)},,,,,,,function(e,t,i){var n=i(50),s=i(28),o=i(77);e.exports=!n&&!s((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},function(e,t,i){var n=i(59);e.exports=n("native-function-to-string",Function.toString)},function(e,t){var i=0,n=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++i+n).toString(36)}},function(e,t,i){var n=i(105),s=i(83).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,s)}},function(e,t,i){var n=i(42),s=i(58),o=i(106).indexOf,a=i(81);e.exports=function(e,t){var i,r=s(e),l=0,d=[];for(i in r)!n(a,i)&&n(r,i)&&d.push(i);for(;t.length>l;)n(r,i=t[l++])&&(~o(d,i)||d.push(i));return d}},function(e,t,i){var n=i(58),s=i(53),o=i(139),a=function(e){return function(t,i,a){var r,l=n(t),d=s(l.length),c=o(a,d);if(e&&i!=i){for(;d>c;)if((r=l[c++])!=r)return!0}else for(;d>c;c++)if((e||c in l)&&l[c]===i)return e||c||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},function(e,t,i){var n,s,o=i(18),a=i(108),r=o.process,l=r&&r.versions,d=l&&l.v8;d?s=(n=d.split("."))[0]+n[1]:a&&(!(n=a.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=a.match(/Chrome\/(\d+)/))&&(s=n[1]),e.exports=s&&+s},function(e,t,i){var n=i(60);e.exports=n("navigator","userAgent")||""},function(e,t,i){var n=i(24),s=i(88),o=i(43),a=n("unscopables"),r=Array.prototype;null==r[a]&&o(r,a,s(null)),e.exports=function(e){r[a][e]=!0}},function(e,t,i){var n=i(105),s=i(83);e.exports=Object.keys||function(e){return n(e,s)}},function(e,t,i){var n=i(60);e.exports=n("document","documentElement")},function(e,t,i){var n=i(41),s=i(24)("toStringTag"),o="Arguments"==n(function(){return arguments}());e.exports=function(e){var t,i,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),s))?i:o?n(t):"Object"==(a=n(t))&&"function"==typeof t.callee?"Arguments":a}},function(e,t,i){var n=i(51),s="["+i(114)+"]",o=RegExp("^"+s+s+"*"),a=RegExp(s+s+"*$"),r=function(e){return function(t){var i=String(n(t));return 1&e&&(i=i.replace(o,"")),2&e&&(i=i.replace(a,"")),i}};e.exports={start:r(1),end:r(2),trim:r(3)}},function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},function(e,t,i){"use strict";var n,s,o,a,r=i(36),l=i(68),d=i(18),c=i(60),h=i(150),u=i(44),p=i(151),f=i(59),g=i(90),m=i(152),v=i(38),y=i(61),A=i(153),$=i(41),S=i(154),E=i(158),C=i(116),T=i(117).set,b=i(159),M=i(160),w=i(161),I=i(119),R=i(162),k=i(79),x=i(84),P=i(24),_=i(107),D=P("species"),O="Promise",L=k.get,H=k.set,V=k.getterFor(O),B=h,N=d.TypeError,F=d.document,W=d.process,G=f("inspectSource"),q=c("fetch"),z=I.f,Y=z,j="process"==$(W),U=!!(F&&F.createEvent&&d.dispatchEvent),K=x(O,(function(){var e=G(B)!==String(B);if(66===_)return!0;if(!e&&!j&&"function"!=typeof PromiseRejectionEvent)return!0;if(l&&!B.prototype.finally)return!0;if(_>=51&&/native code/.test(B))return!1;var t=B.resolve(1),i=function(e){e((function(){}),(function(){}))};return(t.constructor={})[D]=i,!(t.then((function(){}))instanceof i)})),X=K||!E((function(e){B.all(e).catch((function(){}))})),Q=function(e){var t;return!(!v(e)||"function"!=typeof(t=e.then))&&t},J=function(e,t,i){if(!t.notified){t.notified=!0;var n=t.reactions;b((function(){for(var s=t.value,o=1==t.state,a=0;n.length>a;){var r,l,d,c=n[a++],h=o?c.ok:c.fail,u=c.resolve,p=c.reject,f=c.domain;try{h?(o||(2===t.rejection&&ie(e,t),t.rejection=1),!0===h?r=s:(f&&f.enter(),r=h(s),f&&(f.exit(),d=!0)),r===c.promise?p(N("Promise-chain cycle")):(l=Q(r))?l.call(r,u,p):u(r)):p(s)}catch(e){f&&!d&&f.exit(),p(e)}}t.reactions=[],t.notified=!1,i&&!t.rejection&&ee(e,t)}))}},Z=function(e,t,i){var n,s;U?((n=F.createEvent("Event")).promise=t,n.reason=i,n.initEvent(e,!1,!0),d.dispatchEvent(n)):n={promise:t,reason:i},(s=d["on"+e])?s(n):"unhandledrejection"===e&&w("Unhandled promise rejection",i)},ee=function(e,t){T.call(d,(function(){var i,n=t.value;if(te(t)&&(i=R((function(){j?W.emit("unhandledRejection",n,e):Z("unhandledrejection",e,n)})),t.rejection=j||te(t)?2:1,i.error))throw i.value}))},te=function(e){return 1!==e.rejection&&!e.parent},ie=function(e,t){T.call(d,(function(){j?W.emit("rejectionHandled",e):Z("rejectionhandled",e,t.value)}))},ne=function(e,t,i,n){return function(s){e(t,i,s,n)}},se=function(e,t,i,n){t.done||(t.done=!0,n&&(t=n),t.value=i,t.state=2,J(e,t,!0))},oe=function(e,t,i,n){if(!t.done){t.done=!0,n&&(t=n);try{if(e===i)throw N("Promise can't be resolved itself");var s=Q(i);s?b((function(){var n={done:!1};try{s.call(i,ne(oe,e,n,t),ne(se,e,n,t))}catch(i){se(e,n,i,t)}})):(t.value=i,t.state=1,J(e,t,!1))}catch(i){se(e,{done:!1},i,t)}}};K&&(B=function(e){A(this,B,O),y(e),n.call(this);var t=L(this);try{e(ne(oe,this,t),ne(se,this,t))}catch(e){se(this,t,e)}},(n=function(e){H(this,{type:O,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=p(B.prototype,{then:function(e,t){var i=V(this),n=z(C(this,B));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=j?W.domain:void 0,i.parent=!0,i.reactions.push(n),0!=i.state&&J(this,i,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),s=function(){var e=new n,t=L(e);this.promise=e,this.resolve=ne(oe,e,t),this.reject=ne(se,e,t)},I.f=z=function(e){return e===B||e===o?new s(e):Y(e)},l||"function"!=typeof h||(a=h.prototype.then,u(h.prototype,"then",(function(e,t){var i=this;return new B((function(e,t){a.call(i,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof q&&r({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return M(B,q.apply(d,arguments))}}))),r({global:!0,wrap:!0,forced:K},{Promise:B}),g(B,O,!1,!0),m(O),o=c(O),r({target:O,stat:!0,forced:K},{reject:function(e){var t=z(this);return t.reject.call(void 0,e),t.promise}}),r({target:O,stat:!0,forced:l||K},{resolve:function(e){return M(l&&this===o?B:this,e)}}),r({target:O,stat:!0,forced:X},{all:function(e){var t=this,i=z(t),n=i.resolve,s=i.reject,o=R((function(){var i=y(t.resolve),o=[],a=0,r=1;S(e,(function(e){var l=a++,d=!1;o.push(void 0),r++,i.call(t,e).then((function(e){d||(d=!0,o[l]=e,--r||n(o))}),s)})),--r||n(o)}));return o.error&&s(o.value),i.promise},race:function(e){var t=this,i=z(t),n=i.reject,s=R((function(){var s=y(t.resolve);S(e,(function(e){s.call(t,e).then(i.resolve,n)}))}));return s.error&&n(s.value),i.promise}})},function(e,t,i){var n=i(29),s=i(61),o=i(24)("species");e.exports=function(e,t){var i,a=n(e).constructor;return void 0===a||null==(i=n(a)[o])?t:s(i)}},function(e,t,i){var n,s,o,a=i(18),r=i(28),l=i(41),d=i(86),c=i(111),h=i(77),u=i(118),p=a.location,f=a.setImmediate,g=a.clearImmediate,m=a.process,v=a.MessageChannel,y=a.Dispatch,A=0,$={},S=function(e){if($.hasOwnProperty(e)){var t=$[e];delete $[e],t()}},E=function(e){return function(){S(e)}},C=function(e){S(e.data)},T=function(e){a.postMessage(e+"",p.protocol+"//"+p.host)};f&&g||(f=function(e){for(var t=[],i=1;arguments.length>i;)t.push(arguments[i++]);return $[++A]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},n(A),A},g=function(e){delete $[e]},"process"==l(m)?n=function(e){m.nextTick(E(e))}:y&&y.now?n=function(e){y.now(E(e))}:v&&!u?(o=(s=new v).port2,s.port1.onmessage=C,n=d(o.postMessage,o,1)):!a.addEventListener||"function"!=typeof postMessage||a.importScripts||r(T)?n="onreadystatechange"in h("script")?function(e){c.appendChild(h("script")).onreadystatechange=function(){c.removeChild(this),S(e)}}:function(e){setTimeout(E(e),0)}:(n=T,a.addEventListener("message",C,!1))),e.exports={set:f,clear:g}},function(e,t,i){var n=i(108);e.exports=/(iphone|ipod|ipad).*applewebkit/i.test(n)},function(e,t,i){"use strict";var n=i(61),s=function(e){var t,i;this.promise=new e((function(e,n){if(void 0!==t||void 0!==i)throw TypeError("Bad Promise constructor");t=e,i=n})),this.resolve=n(t),this.reject=n(i)};e.exports.f=function(e){return new s(e)}},function(e,t,i){"use strict";var n=i(29);e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,i){"use strict";var n=i(164).charAt;e.exports=function(e,t,i){return t+(i?n(e,t).length:1)}},function(e,t,i){"use strict";var n=i(92),s=i(29),o=i(51),a=i(165),r=i(93);n("search",1,(function(e,t,i){return[function(t){var i=o(this),n=null==t?void 0:t[e];return void 0!==n?n.call(t,i):new RegExp(t)[e](String(i))},function(e){var n=i(t,e,this);if(n.done)return n.value;var o=s(e),l=String(this),d=o.lastIndex;a(d,0)||(o.lastIndex=0);var c=r(o,l);return a(o.lastIndex,d)||(o.lastIndex=d),null===c?-1:c.index}]}))},function(e,t,i){"use strict";var n=i(36),s=i(124);n({target:"Array",proto:!0,forced:[].forEach!=s},{forEach:s})},function(e,t,i){"use strict";var n=i(85).forEach,s=i(70);e.exports=s("forEach")?function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}:[].forEach},function(e,t,i){var n=i(18),s=i(172),o=i(124),a=i(43);for(var r in s){var l=n[r],d=l&&l.prototype;if(d&&d.forEach!==o)try{a(d,"forEach",o)}catch(e){d.forEach=o}}},function(e,t,i){"use strict";var n=i(36),s=i(106).indexOf,o=i(70),a=[].indexOf,r=!!a&&1/[1].indexOf(1,-0)<0,l=o("indexOf");n({target:"Array",proto:!0,forced:r||l},{indexOf:function(e){return r?a.apply(this,arguments)||0:s(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,i){var n=i(29),s=i(175);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,i={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(i,[]),t=i instanceof Array}catch(e){}return function(i,o){return n(i),s(o),t?e.call(i,o):i.__proto__=o,i}}():void 0)},function(e,t,i){"use strict";var n,s,o,a=i(129),r=i(43),l=i(42),d=i(24),c=i(68),h=d("iterator"),u=!1;[].keys&&("next"in(o=[].keys())?(s=a(a(o)))!==Object.prototype&&(n=s):u=!0),null==n&&(n={}),c||l(n,h)||r(n,h,(function(){return this})),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:u}},function(e,t,i){var n=i(42),s=i(69),o=i(80),a=i(248),r=o("IE_PROTO"),l=Object.prototype;e.exports=a?Object.getPrototypeOf:function(e){return e=s(e),n(e,r)?e[r]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?l:null}},,function(e,t,i){},function(e,t,i){"use strict";var n=i(36),s=i(85).filter;n({target:"Array",proto:!0,forced:!i(144)("filter")},{filter:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,i){"use strict";var n={}.propertyIsEnumerable,s=Object.getOwnPropertyDescriptor,o=s&&!n.call({1:2},1);t.f=o?function(e){var t=s(this,e);return!!t&&t.enumerable}:n},function(e,t,i){var n=i(18),s=i(78),o=n["__core-js_shared__"]||s("__core-js_shared__",{});e.exports=o},function(e,t,i){var n=i(18),s=i(102),o=n.WeakMap;e.exports="function"==typeof o&&/native code/.test(s.call(o))},function(e,t,i){var n=i(42),s=i(137),o=i(66),a=i(52);e.exports=function(e,t){for(var i=s(t),r=a.f,l=o.f,d=0;d<i.length;d++){var c=i[d];n(e,c)||r(e,c,l(t,c))}}},function(e,t,i){var n=i(60),s=i(104),o=i(140),a=i(29);e.exports=n("Reflect","ownKeys")||function(e){var t=s.f(a(e)),i=o.f;return i?t.concat(i(e)):t}},function(e,t,i){e.exports=i(18)},function(e,t,i){var n=i(82),s=Math.max,o=Math.min;e.exports=function(e,t){var i=n(e);return i<0?s(i+t,0):o(i,t)}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,i){var n=i(38),s=i(142),o=i(24)("species");e.exports=function(e,t){var i;return s(e)&&("function"!=typeof(i=e.constructor)||i!==Array&&!s(i.prototype)?n(i)&&null===(i=i[o])&&(i=void 0):i=void 0),new(void 0===i?Array:i)(0===t?0:t)}},function(e,t,i){var n=i(41);e.exports=Array.isArray||function(e){return"Array"==n(e)}},function(e,t,i){var n=i(28);e.exports=!!Object.getOwnPropertySymbols&&!n((function(){return!String(Symbol())}))},function(e,t,i){var n=i(28),s=i(24),o=i(107),a=s("species");e.exports=function(e){return o>=51||!n((function(){var t=[];return(t.constructor={})[a]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},function(e,t,i){var n=i(50),s=i(52),o=i(29),a=i(110);e.exports=n?Object.defineProperties:function(e,t){o(e);for(var i,n=a(t),r=n.length,l=0;r>l;)s.f(e,i=n[l++],t[i]);return e}},function(e,t,i){"use strict";var n=i(36),s=i(67),o=i(58),a=i(70),r=[].join,l=s!=Object,d=a("join",",");n({target:"Array",proto:!0,forced:l||d},{join:function(e){return r.call(o(this),void 0===e?",":e)}})},function(e,t,i){"use strict";var n=i(112),s={};s[i(24)("toStringTag")]="z",e.exports="[object z]"!==String(s)?function(){return"[object "+n(this)+"]"}:s.toString},function(e,t,i){var n=i(36),s=i(149);n({global:!0,forced:parseInt!=s},{parseInt:s})},function(e,t,i){var n=i(18),s=i(113).trim,o=i(114),a=n.parseInt,r=/^[+-]?0[Xx]/,l=8!==a(o+"08")||22!==a(o+"0x16");e.exports=l?function(e,t){var i=s(String(e));return a(i,t>>>0||(r.test(i)?16:10))}:a},function(e,t,i){var n=i(18);e.exports=n.Promise},function(e,t,i){var n=i(44);e.exports=function(e,t,i){for(var s in t)n(e,s,t[s],i);return e}},function(e,t,i){"use strict";var n=i(60),s=i(52),o=i(24),a=i(50),r=o("species");e.exports=function(e){var t=n(e),i=s.f;a&&t&&!t[r]&&i(t,r,{configurable:!0,get:function(){return this}})}},function(e,t){e.exports=function(e,t,i){if(!(e instanceof t))throw TypeError("Incorrect "+(i?i+" ":"")+"invocation");return e}},function(e,t,i){var n=i(29),s=i(155),o=i(53),a=i(86),r=i(156),l=i(157),d=function(e,t){this.stopped=e,this.result=t};(e.exports=function(e,t,i,c,h){var u,p,f,g,m,v,y,A=a(t,i,c?2:1);if(h)u=e;else{if("function"!=typeof(p=r(e)))throw TypeError("Target is not iterable");if(s(p)){for(f=0,g=o(e.length);g>f;f++)if((m=c?A(n(y=e[f])[0],y[1]):A(e[f]))&&m instanceof d)return m;return new d(!1)}u=p.call(e)}for(v=u.next;!(y=v.call(u)).done;)if("object"==typeof(m=l(u,A,y.value,c))&&m&&m instanceof d)return m;return new d(!1)}).stop=function(e){return new d(!0,e)}},function(e,t,i){var n=i(24),s=i(62),o=n("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(s.Array===e||a[o]===e)}},function(e,t,i){var n=i(112),s=i(62),o=i(24)("iterator");e.exports=function(e){if(null!=e)return e[o]||e["@@iterator"]||s[n(e)]}},function(e,t,i){var n=i(29);e.exports=function(e,t,i,s){try{return s?t(n(i)[0],i[1]):t(i)}catch(t){var o=e.return;throw void 0!==o&&n(o.call(e)),t}}},function(e,t,i){var n=i(24)("iterator"),s=!1;try{var o=0,a={next:function(){return{done:!!o++}},return:function(){s=!0}};a[n]=function(){return this},Array.from(a,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!s)return!1;var i=!1;try{var o={};o[n]=function(){return{next:function(){return{done:i=!0}}}},e(o)}catch(e){}return i}},function(e,t,i){var n,s,o,a,r,l,d,c,h=i(18),u=i(66).f,p=i(41),f=i(117).set,g=i(118),m=h.MutationObserver||h.WebKitMutationObserver,v=h.process,y=h.Promise,A="process"==p(v),$=u(h,"queueMicrotask"),S=$&&$.value;S||(n=function(){var e,t;for(A&&(e=v.domain)&&e.exit();s;){t=s.fn,s=s.next;try{t()}catch(e){throw s?a():o=void 0,e}}o=void 0,e&&e.enter()},A?a=function(){v.nextTick(n)}:m&&!g?(r=!0,l=document.createTextNode(""),new m(n).observe(l,{characterData:!0}),a=function(){l.data=r=!r}):y&&y.resolve?(d=y.resolve(void 0),c=d.then,a=function(){c.call(d,n)}):a=function(){f.call(h,n)}),e.exports=S||function(e){var t={fn:e,next:void 0};o&&(o.next=t),s||(s=t,a()),o=t}},function(e,t,i){var n=i(29),s=i(38),o=i(119);e.exports=function(e,t){if(n(e),s(t)&&t.constructor===e)return t;var i=o.f(e);return(0,i.resolve)(t),i.promise}},function(e,t,i){var n=i(18);e.exports=function(e,t){var i=n.console;i&&i.error&&(1===arguments.length?i.error(e):i.error(e,t))}},function(e,t){e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},function(e,t,i){"use strict";var n=i(92),s=i(29),o=i(53),a=i(51),r=i(121),l=i(93);n("match",1,(function(e,t,i){return[function(t){var i=a(this),n=null==t?void 0:t[e];return void 0!==n?n.call(t,i):new RegExp(t)[e](String(i))},function(e){var n=i(t,e,this);if(n.done)return n.value;var a=s(e),d=String(this);if(!a.global)return l(a,d);var c=a.unicode;a.lastIndex=0;for(var h,u=[],p=0;null!==(h=l(a,d));){var f=String(h[0]);u[p]=f,""===f&&(a.lastIndex=r(d,o(a.lastIndex),c)),p++}return 0===p?null:u}]}))},function(e,t,i){var n=i(82),s=i(51),o=function(e){return function(t,i){var o,a,r=String(s(t)),l=n(i),d=r.length;return l<0||l>=d?e?"":void 0:(o=r.charCodeAt(l))<55296||o>56319||l+1===d||(a=r.charCodeAt(l+1))<56320||a>57343?e?r.charAt(l):o:e?r.slice(l,l+2):a-56320+(o-55296<<10)+65536}};e.exports={codeAt:o(!1),charAt:o(!0)}},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,i){var n=i(38),s=i(41),o=i(24)("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==s(e))}},function(e,t){window.MASERATI=window.MASERATI||{},MASERATI.AdobeTracking=MASERATI.AdobeTracking||{},MASERATI.AdobeTracking.tracker={setMediaName:function(e){"object"==typeof digitalData?(void 0===digitalData.pageInfo&&(digitalData.pageInfo={}),digitalData.pageInfo.mediaName=e):MASERATI.Helpers.log("set tracking data to undefined digitalData.pageInfo.mediaName: "+e)},setVehicleModelName:function(e){"object"==typeof digitalData?(void 0===digitalData.pageInfo&&(digitalData.pageInfo={}),digitalData.pageInfo.vehicleModelName=e):MASERATI.Helpers.log("set tracking data to undefined digitalData.pageInfo.vehicleModelName: "+e)},set360VehicleModelName:function(e){"object"==typeof digitalData?(void 0===digitalData.pageInfo&&(digitalData.pageInfo={}),null!=digitalData.pageInfo.vehicleModelName&&(digitalData.pageInfo.vehicleModelNameBkp=digitalData.pageInfo.vehicleModelName),digitalData.pageInfo.vehicleModelName=e):MASERATI.Helpers.log("set tracking data to undefined digitalData.pageInfo.vehicleModelName: "+e)},restoreVehicleModelName:function(){"object"==typeof digitalData?(void 0===digitalData.pageInfo&&(digitalData.pageInfo={}),null!=digitalData.pageInfo.vehicleModelName&&null!=digitalData.pageInfo.vehicleModelNameBkp&&(digitalData.pageInfo.vehicleModelName=digitalData.pageInfo.vehicleModelNameBkp)):MASERATI.Helpers.log("set tracking data to undefined digitalData")},setGalleryAction:function(e){"object"==typeof digitalData?(void 0===digitalData.pageInfo&&(digitalData.pageInfo={}),console.log("gallery tracker value: "+e),digitalData.pageInfo.gallery=e):MASERATI.Helpers.log("set tracking data to undefined digitalData.pageInfo.gallery: "+e)},setTrimAction:function(e){"object"==typeof digitalData?(void 0===digitalData.pageInfo&&(digitalData.pageInfo={}),console.log("gallery tracker value: "+e),digitalData.pageInfo.trimSlider=e):MASERATI.Helpers.log("set tracking data to undefined digitalData.pageInfo.trimSlider: "+e)},setV360Action:function(e){"object"==typeof digitalData?(void 0===digitalData.pageInfo&&(digitalData.pageInfo={}),console.log("V360 tracker value: "+e),digitalData.pageInfo.view360=e):MASERATI.Helpers.log("set tracking data to undefined digitalData.pageInfo.view360: "+e)},setSatelliteTrack:function(e){"undefined"!=typeof _satellite&&"function"==typeof _satellite.track?_satellite.track(e):MASERATI.Helpers.log("set tracking data to undefined _satellite.track() function: "+e)},canBeEnabled:function(){return"undefined"!=typeof _satellite&&"function"==typeof _satellite.track&&"object"==typeof digitalData}},window.MASERATI=MASERATI},function(e,t){MASERATI.Animations={opacityDelay:300,ctaScrollSpeed:1500,ctaEasing:"easeOutQuint",newsListEasing:"easeInQuad",newsListDuration:300,newsListAjaxEasing:"easeInQuad",newsListAjaxDuration:1200,pageListEasing:"easeInQuad",pageListDuration:300,gallerySlideEasing:"easeInQuad",gallerySlideDuration:300,loadingIconDuration:1500,loadingIconEasing:"easeOutQuint",openOverlaySlideSpeed:500,videoCtaFadeSpeed:750,videoCtaPauseBetween:100}},function(e,t){var i;void 0!==document.hidden?i="hidden":void 0!==document.mozHidden?i="mozHidden":void 0!==document.msHidden?i="msHidden":void 0!==document.webkitHidden&&(i="webkitHidden"),MASERATI.BatteryDrain={visibilityChangeSupport:function(){return!(void 0===document.addEventListener||void 0===document[i])}}},function(e,t,i){var n=i(44),s=Date.prototype,o=s.toString,a=s.getTime;new Date(NaN)+""!="Invalid Date"&&n(s,"toString",(function(){var e=a.call(this);return e==e?o.call(this):"Invalid Date"}))},function(e,t,i){"use strict";var n=i(44),s=i(29),o=i(28),a=i(120),r=RegExp.prototype,l=r.toString,d=o((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),c="toString"!=l.name;(d||c)&&n(RegExp.prototype,"toString",(function(){var e=s(this),t=String(e.source),i=e.flags;return"/"+t+"/"+String(void 0===i&&e instanceof RegExp&&!("flags"in r)?a.call(e):i)}),{unsafe:!0})},function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(e,t,i){"use strict";var n=i(50),s=i(18),o=i(84),a=i(44),r=i(42),l=i(41),d=i(174),c=i(76),h=i(28),u=i(88),p=i(104).f,f=i(66).f,g=i(52).f,m=i(113).trim,v=s.Number,y=v.prototype,A="Number"==l(u(y)),$=function(e){var t,i,n,s,o,a,r,l,d=c(e,!1);if("string"==typeof d&&d.length>2)if(43===(t=(d=m(d)).charCodeAt(0))||45===t){if(88===(i=d.charCodeAt(2))||120===i)return NaN}else if(48===t){switch(d.charCodeAt(1)){case 66:case 98:n=2,s=49;break;case 79:case 111:n=8,s=55;break;default:return+d}for(a=(o=d.slice(2)).length,r=0;r<a;r++)if((l=o.charCodeAt(r))<48||l>s)return NaN;return parseInt(o,n)}return+d};if(o("Number",!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var S,E=function(e){var t=arguments.length<1?0:e,i=this;return i instanceof E&&(A?h((function(){y.valueOf.call(i)})):"Number"!=l(i))?d(new v($(t)),i,E):$(t)},C=n?p(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),T=0;C.length>T;T++)r(v,S=C[T])&&!r(E,S)&&g(E,S,f(v,S));E.prototype=y,y.constructor=E,a(s,"Number",E)}},function(e,t,i){var n=i(38),s=i(127);e.exports=function(e,t,i){var o,a;return s&&"function"==typeof(o=t.constructor)&&o!==i&&n(a=o.prototype)&&a!==i.prototype&&s(e,a),e}},function(e,t,i){var n=i(38);e.exports=function(e){if(!n(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},function(e,t,i){"use strict";var n=i(36),s=i(177).left;n({target:"Array",proto:!0,forced:i(70)("reduce")},{reduce:function(e){return s(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},function(e,t,i){var n=i(61),s=i(69),o=i(67),a=i(53),r=function(e){return function(t,i,r,l){n(i);var d=s(t),c=o(d),h=a(d.length),u=e?h-1:0,p=e?-1:1;if(r<2)for(;;){if(u in c){l=c[u],u+=p;break}if(u+=p,e?u<0:h<=u)throw TypeError("Reduce of empty array with no initial value")}for(;e?u>=0:h>u;u+=p)u in c&&(l=i(l,c[u],u,d));return l}};e.exports={left:r(!1),right:r(!0)}},function(e,t,i){var n=i(36),s=i(69),o=i(110);n({target:"Object",stat:!0,forced:i(28)((function(){o(1)}))},{keys:function(e){return o(s(e))}})},function(e,t){MASERATI.YuokuInterface=function(e,t,i){this.caller=e,this.containerDiv=this.caller.videoTag||$("#"+this.caller.videoTagId),this.videoId=this.caller.videoId,this.playerIFrame=null,this.autoplay=i,t&&(MASERATI.Helpers.log("Insert video 1"),this.insertVideo())},MASERATI.YuokuInterface.prototype.getIframeId=function(){return"youku-"+this.videoId},MASERATI.YuokuInterface.prototype.deleteVideo=function(){null!=this.playerIFrame&&(MASERATI.Helpers.log("delete Video YouKu"),this.playerIFrame.remove(),this.playerIFrame=null)},MASERATI.YuokuInterface.prototype.insertVideo=function(){MASERATI.Helpers.log("Inserting video "+this.videoId);var e=this.getIframeId(),t=this.autoplay?"&autoplay=true":"",i=$("<iframe />",{name:e,id:e,width:"100%",height:"100%",frameborder:"0",allowfullscreen:!0,src:"//player.youku.com/embed/"+this.videoId+"?wmode=opaque"+t});this.containerDiv.append(i),this.playerIFrame=i},MASERATI.YuokuInterface.prototype.playVideo=function(){null!==this.playerIFrame?MASERATI.Helpers.log("already loaded YouKu "+this.playerIFrame):(MASERATI.Helpers.log("Insert video 2"),this.insertVideo())},MASERATI.YuokuInterface.prototype.pauseVideo=function(){this.stopVideo()},MASERATI.YuokuInterface.prototype.stopVideo=function(){MASERATI.Helpers.log("stop Video YouKu"),this.deleteVideo()},MASERATI.YuokuInterface.prototype.getVideoData=function(){return{title:this.videoId}}},function(e,t){MASERATI.YoutubeManager={initialized:!1,promise:null,init:function(){if(!this.initialized&&!$(document.body).hasClass("disable-youtube")){var e=document.createElement("script");e.src="https://www.youtube.com/iframe_api";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t),this.promise=$.Deferred(),this.initialized=!0}},chainCallback:function(e){this.promise.done(e)},resolve:function(e){this.promise.resolve(e)},addVideoCallback:function(e){this.init(),this.chainCallback(e)}},MASERATI.getYouTubePlayer=function(e,t,i,n,s){return new YT.Player(e.videoTagId,{playerVars:{showinfo:0,rel:0,autoplay:!0===s?1:0,mute:!0===s?1:0,fs:void 0!==t?t:1,controls:void 0!==i?i:1,cc_load_policy:!0===n?1:0},videoId:e.videoId,events:{onReady:function(t){e.onPlayerReady(t)},onStateChange:function(t){e.onPlayerStateChange(t)},onError:function(t){e.onPlayerError&&e.onPlayerError(t)}}})},window.onYouTubeIframeAPIReady=function(){MASERATI.YoutubeManager.resolve()}},function(e,t){var i;"function"==typeof Event?i=new Event("FooterLibs"):(i=document.createEvent("Event")).initEvent("FooterLibs",!0,!0),document.dispatchEvent(i)},function(e,t,i){e.exports=i(183)},function(e,t,i){var n;n=function(e,t,i){"use strict";return function(){for(var i=[["Afghanistan (‫افغانستان‬‎)","af","93"],["Albania (Shqipëri)","al","355"],["Algeria (‫الجزائر‬‎)","dz","213"],["American Samoa","as","1684"],["Andorra","ad","376"],["Angola","ao","244"],["Anguilla","ai","1264"],["Antigua and Barbuda","ag","1268"],["Argentina","ar","54"],["Armenia (Հայաստան)","am","374"],["Aruba","aw","297"],["Australia","au","61",0],["Austria (Österreich)","at","43"],["Azerbaijan (Azərbaycan)","az","994"],["Bahamas","bs","1242"],["Bahrain (‫البحرين‬‎)","bh","973"],["Bangladesh (বাংলাদেশ)","bd","880"],["Barbados","bb","1246"],["Belarus (Беларусь)","by","375"],["Belgium (België)","be","32"],["Belize","bz","501"],["Benin (Bénin)","bj","229"],["Bermuda","bm","1441"],["Bhutan (འབྲུག)","bt","975"],["Bolivia","bo","591"],["Bosnia and Herzegovina (Босна и Херцеговина)","ba","387"],["Botswana","bw","267"],["Brazil (Brasil)","br","55"],["British Indian Ocean Territory","io","246"],["British Virgin Islands","vg","1284"],["Brunei","bn","673"],["Bulgaria (България)","bg","359"],["Burkina Faso","bf","226"],["Burundi (Uburundi)","bi","257"],["Cambodia (កម្ពុជា)","kh","855"],["Cameroon (Cameroun)","cm","237"],["Canada","ca","1",1,["204","226","236","249","250","289","306","343","365","387","403","416","418","431","437","438","450","506","514","519","548","579","581","587","604","613","639","647","672","705","709","742","778","780","782","807","819","825","867","873","902","905"]],["Cape Verde (Kabu Verdi)","cv","238"],["Caribbean Netherlands","bq","599",1],["Cayman Islands","ky","1345"],["Central African Republic (République centrafricaine)","cf","236"],["Chad (Tchad)","td","235"],["Chile","cl","56"],["China (中国)","cn","86"],["Christmas Island","cx","61",2],["Cocos (Keeling) Islands","cc","61",1],["Colombia","co","57"],["Comoros (‫جزر القمر‬‎)","km","269"],["Congo (DRC) (Jamhuri ya Kidemokrasia ya Kongo)","cd","243"],["Congo (Republic) (Congo-Brazzaville)","cg","242"],["Cook Islands","ck","682"],["Costa Rica","cr","506"],["Côte d’Ivoire","ci","225"],["Croatia (Hrvatska)","hr","385"],["Cuba","cu","53"],["Curaçao","cw","599",0],["Cyprus (Κύπρος)","cy","357"],["Czech Republic (Česká republika)","cz","420"],["Denmark (Danmark)","dk","45"],["Djibouti","dj","253"],["Dominica","dm","1767"],["Dominican Republic (República Dominicana)","do","1",2,["809","829","849"]],["Ecuador","ec","593"],["Egypt (‫مصر‬‎)","eg","20"],["El Salvador","sv","503"],["Equatorial Guinea (Guinea Ecuatorial)","gq","240"],["Eritrea","er","291"],["Estonia (Eesti)","ee","372"],["Ethiopia","et","251"],["Falkland Islands (Islas Malvinas)","fk","500"],["Faroe Islands (Føroyar)","fo","298"],["Fiji","fj","679"],["Finland (Suomi)","fi","358",0],["France","fr","33"],["French Guiana (Guyane française)","gf","594"],["French Polynesia (Polynésie française)","pf","689"],["Gabon","ga","241"],["Gambia","gm","220"],["Georgia (საქართველო)","ge","995"],["Germany (Deutschland)","de","49"],["Ghana (Gaana)","gh","233"],["Gibraltar","gi","350"],["Greece (Ελλάδα)","gr","30"],["Greenland (Kalaallit Nunaat)","gl","299"],["Grenada","gd","1473"],["Guadeloupe","gp","590",0],["Guam","gu","1671"],["Guatemala","gt","502"],["Guernsey","gg","44",1],["Guinea (Guinée)","gn","224"],["Guinea-Bissau (Guiné Bissau)","gw","245"],["Guyana","gy","592"],["Haiti","ht","509"],["Honduras","hn","504"],["Hong Kong (香港)","hk","852"],["Hungary (Magyarország)","hu","36"],["Iceland (Ísland)","is","354"],["India (भारत)","in","91"],["Indonesia","id","62"],["Iran (‫ایران‬‎)","ir","98"],["Iraq (‫العراق‬‎)","iq","964"],["Ireland","ie","353"],["Isle of Man","im","44",2],["Israel (‫ישראל‬‎)","il","972"],["Italy (Italia)","it","39",0],["Jamaica","jm","1",4,["876","658"]],["Japan (日本)","jp","81"],["Jersey","je","44",3],["Jordan (‫الأردن‬‎)","jo","962"],["Kazakhstan (Казахстан)","kz","7",1],["Kenya","ke","254"],["Kiribati","ki","686"],["Kosovo","xk","383"],["Kuwait (‫الكويت‬‎)","kw","965"],["Kyrgyzstan (Кыргызстан)","kg","996"],["Laos (ລາວ)","la","856"],["Latvia (Latvija)","lv","371"],["Lebanon (‫لبنان‬‎)","lb","961"],["Lesotho","ls","266"],["Liberia","lr","231"],["Libya (‫ليبيا‬‎)","ly","218"],["Liechtenstein","li","423"],["Lithuania (Lietuva)","lt","370"],["Luxembourg","lu","352"],["Macau (澳門)","mo","853"],["Macedonia (FYROM) (Македонија)","mk","389"],["Madagascar (Madagasikara)","mg","261"],["Malawi","mw","265"],["Malaysia","my","60"],["Maldives","mv","960"],["Mali","ml","223"],["Malta","mt","356"],["Marshall Islands","mh","692"],["Martinique","mq","596"],["Mauritania (‫موريتانيا‬‎)","mr","222"],["Mauritius (Moris)","mu","230"],["Mayotte","yt","262",1],["Mexico (México)","mx","52"],["Micronesia","fm","691"],["Moldova (Republica Moldova)","md","373"],["Monaco","mc","377"],["Mongolia (Монгол)","mn","976"],["Montenegro (Crna Gora)","me","382"],["Montserrat","ms","1664"],["Morocco (‫المغرب‬‎)","ma","212",0],["Mozambique (Moçambique)","mz","258"],["Myanmar (Burma) (မြန်မာ)","mm","95"],["Namibia (Namibië)","na","264"],["Nauru","nr","674"],["Nepal (नेपाल)","np","977"],["Netherlands (Nederland)","nl","31"],["New Caledonia (Nouvelle-Calédonie)","nc","687"],["New Zealand","nz","64"],["Nicaragua","ni","505"],["Niger (Nijar)","ne","227"],["Nigeria","ng","234"],["Niue","nu","683"],["Norfolk Island","nf","672"],["North Korea (조선 민주주의 인민 공화국)","kp","850"],["Northern Mariana Islands","mp","1670"],["Norway (Norge)","no","47",0],["Oman (‫عُمان‬‎)","om","968"],["Pakistan (‫پاکستان‬‎)","pk","92"],["Palau","pw","680"],["Palestine (‫فلسطين‬‎)","ps","970"],["Panama (Panamá)","pa","507"],["Papua New Guinea","pg","675"],["Paraguay","py","595"],["Peru (Perú)","pe","51"],["Philippines","ph","63"],["Poland (Polska)","pl","48"],["Portugal","pt","351"],["Puerto Rico","pr","1",3,["787","939"]],["Qatar (‫قطر‬‎)","qa","974"],["Réunion (La Réunion)","re","262",0],["Romania (România)","ro","40"],["Russia (Россия)","ru","7",0],["Rwanda","rw","250"],["Saint Barthélemy","bl","590",1],["Saint Helena","sh","290"],["Saint Kitts and Nevis","kn","1869"],["Saint Lucia","lc","1758"],["Saint Martin (Saint-Martin (partie française))","mf","590",2],["Saint Pierre and Miquelon (Saint-Pierre-et-Miquelon)","pm","508"],["Saint Vincent and the Grenadines","vc","1784"],["Samoa","ws","685"],["San Marino","sm","378"],["São Tomé and Príncipe (São Tomé e Príncipe)","st","239"],["Saudi Arabia (‫المملكة العربية السعودية‬‎)","sa","966"],["Senegal (Sénégal)","sn","221"],["Serbia (Србија)","rs","381"],["Seychelles","sc","248"],["Sierra Leone","sl","232"],["Singapore","sg","65"],["Sint Maarten","sx","1721"],["Slovakia (Slovensko)","sk","421"],["Slovenia (Slovenija)","si","386"],["Solomon Islands","sb","677"],["Somalia (Soomaaliya)","so","252"],["South Africa","za","27"],["South Korea (대한민국)","kr","82"],["South Sudan (‫جنوب السودان‬‎)","ss","211"],["Spain (España)","es","34"],["Sri Lanka (ශ්‍රී ලංකාව)","lk","94"],["Sudan (‫السودان‬‎)","sd","249"],["Suriname","sr","597"],["Svalbard and Jan Mayen","sj","47",1],["Swaziland","sz","268"],["Sweden (Sverige)","se","46"],["Switzerland (Schweiz)","ch","41"],["Syria (‫سوريا‬‎)","sy","963"],["Taiwan (台灣)","tw","886"],["Tajikistan","tj","992"],["Tanzania","tz","255"],["Thailand (ไทย)","th","66"],["Timor-Leste","tl","670"],["Togo","tg","228"],["Tokelau","tk","690"],["Tonga","to","676"],["Trinidad and Tobago","tt","1868"],["Tunisia (‫تونس‬‎)","tn","216"],["Turkey (Türkiye)","tr","90"],["Turkmenistan","tm","993"],["Turks and Caicos Islands","tc","1649"],["Tuvalu","tv","688"],["U.S. Virgin Islands","vi","1340"],["Uganda","ug","256"],["Ukraine (Україна)","ua","380"],["United Arab Emirates (‫الإمارات العربية المتحدة‬‎)","ae","971"],["United Kingdom","gb","44",0],["United States","us","1",0],["Uruguay","uy","598"],["Uzbekistan (Oʻzbekiston)","uz","998"],["Vanuatu","vu","678"],["Vatican City (Città del Vaticano)","va","39",1],["Venezuela","ve","58"],["Vietnam (Việt Nam)","vn","84"],["Wallis and Futuna (Wallis-et-Futuna)","wf","681"],["Western Sahara (‫الصحراء الغربية‬‎)","eh","212",1],["Yemen (‫اليمن‬‎)","ye","967"],["Zambia","zm","260"],["Zimbabwe","zw","263"],["Åland Islands","ax","358",1]],n=0;n<i.length;n++){var s=i[n];i[n]={name:s[0],iso2:s[1],dialCode:s[2],priority:s[3]||0,areaCodes:s[4]||null}}function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.intlTelInputGlobals={getInstance:function(t){var i=t.getAttribute("data-intl-tel-input-id");return e.intlTelInputGlobals.instances[i]},instances:{}};var a=0,r={allowDropdown:!0,autoHideDialCode:!0,autoPlaceholder:"polite",customContainer:"",customPlaceholder:null,dropdownContainer:null,excludeCountries:[],formatOnDisplay:!0,geoIpLookup:null,hiddenInput:"",initialCountry:"",localizedCountries:null,nationalMode:!0,onlyCountries:[],placeholderNumberType:"MOBILE",preferredCountries:["us","gb"],separateDialCode:!1,utilsScript:""},l=["800","822","833","844","855","866","877","880","881","882","883","884","885","886","887","888","889"];e.addEventListener("load",(function(){e.intlTelInputGlobals.windowLoaded=!0}));var d=function(e,t){for(var i=Object.keys(e),n=0;n<i.length;n++)t(i[n],e[i[n]])},c=function(t){d(e.intlTelInputGlobals.instances,(function(i){e.intlTelInputGlobals.instances[i][t]()}))},h=function(){function n(e,t){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.id=a++,this.telInput=e,this.activeItem=null,this.highlightedItem=null;var s=t||{};this.options={},d(r,(function(e,t){i.options[e]=s.hasOwnProperty(e)?s[e]:t})),this.hadInitialPlaceholder=Boolean(e.getAttribute("placeholder"))}var s,h,u;return s=n,(h=[{key:"_init",value:function(){var e=this;if(this.options.nationalMode&&(this.options.autoHideDialCode=!1),this.options.separateDialCode&&(this.options.autoHideDialCode=this.options.nationalMode=!1),this.isMobile=/Android.+Mobile|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),this.isMobile&&(t.body.classList.add("iti-mobile"),this.options.dropdownContainer||(this.options.dropdownContainer=t.body)),"undefined"!=typeof Promise){var i=new Promise((function(t,i){e.resolveAutoCountryPromise=t,e.rejectAutoCountryPromise=i})),n=new Promise((function(t,i){e.resolveUtilsScriptPromise=t,e.rejectUtilsScriptPromise=i}));this.promise=Promise.all([i,n])}else this.resolveAutoCountryPromise=this.rejectAutoCountryPromise=function(){},this.resolveUtilsScriptPromise=this.rejectUtilsScriptPromise=function(){};this.selectedCountryData={},this._processCountryData(),this._generateMarkup(),this._setInitialState(),this._initListeners(),this._initRequests()}},{key:"_processCountryData",value:function(){this._processAllCountries(),this._processCountryCodes(),this._processPreferredCountries(),this.options.localizedCountries&&this._translateCountriesByLocale(),(this.options.onlyCountries.length||this.options.localizedCountries)&&this.countries.sort(this._countryNameSort)}},{key:"_addCountryCode",value:function(e,t,i){this.countryCodes.hasOwnProperty(t)||(this.countryCodes[t]=[]);var n=i||0;this.countryCodes[t][n]=e}},{key:"_processAllCountries",value:function(){if(this.options.onlyCountries.length){var e=this.options.onlyCountries.map((function(e){return e.toLowerCase()}));this.countries=i.filter((function(t){return e.indexOf(t.iso2)>-1}))}else if(this.options.excludeCountries.length){var t=this.options.excludeCountries.map((function(e){return e.toLowerCase()}));this.countries=i.filter((function(e){return-1===t.indexOf(e.iso2)}))}else this.countries=i}},{key:"_translateCountriesByLocale",value:function(){for(var e=0;e<this.countries.length;e++){var t=this.countries[e].iso2.toLowerCase();this.options.localizedCountries.hasOwnProperty(t)&&(this.countries[e].name=this.options.localizedCountries[t])}}},{key:"_countryNameSort",value:function(e,t){return e.name.localeCompare(t.name)}},{key:"_processCountryCodes",value:function(){this.countryCodes={};for(var e=0;e<this.countries.length;e++){var t=this.countries[e];if(this._addCountryCode(t.iso2,t.dialCode,t.priority),t.areaCodes)for(var i=0;i<t.areaCodes.length;i++)this._addCountryCode(t.iso2,t.dialCode+t.areaCodes[i])}}},{key:"_processPreferredCountries",value:function(){this.preferredCountries=[];for(var e=0;e<this.options.preferredCountries.length;e++){var t=this.options.preferredCountries[e].toLowerCase(),i=this._getCountryData(t,!1,!0);i&&this.preferredCountries.push(i)}}},{key:"_createEl",value:function(e,i,n){var s=t.createElement(e);return i&&d(i,(function(e,t){return s.setAttribute(e,t)})),n&&n.appendChild(s),s}},{key:"_generateMarkup",value:function(){this.telInput.setAttribute("autocomplete","off");var e="intl-tel-input";this.options.allowDropdown&&(e+=" allow-dropdown"),this.options.separateDialCode&&(e+=" separate-dial-code"),this.options.customContainer&&(e+=" ",e+=this.options.customContainer);var t=this._createEl("div",{class:e});if(this.telInput.parentNode.insertBefore(t,this.telInput),this.flagsContainer=this._createEl("div",{class:"flag-container"},t),t.appendChild(this.telInput),this.selectedFlag=this._createEl("div",{class:"selected-flag",role:"combobox","aria-owns":"country-listbox"},this.flagsContainer),this.selectedFlagInner=this._createEl("div",{class:"iti-flag"},this.selectedFlag),this.options.separateDialCode&&(this.selectedDialCode=this._createEl("div",{class:"selected-dial-code"},this.selectedFlag)),this.options.allowDropdown&&(this.selectedFlag.setAttribute("tabindex","0"),this.dropdownArrow=this._createEl("div",{class:"iti-arrow"},this.selectedFlag),this.countryList=this._createEl("ul",{class:"country-list hide",id:"country-listbox","aria-expanded":"false",role:"listbox"}),this.preferredCountries.length&&(this._appendListItems(this.preferredCountries,"preferred"),this._createEl("li",{class:"divider",role:"separator","aria-disabled":"true"},this.countryList)),this._appendListItems(this.countries,"standard"),this.options.dropdownContainer?(this.dropdown=this._createEl("div",{class:"intl-tel-input iti-container"}),this.dropdown.appendChild(this.countryList)):this.flagsContainer.appendChild(this.countryList)),this.options.hiddenInput){var i=this.options.hiddenInput,n=this.telInput.getAttribute("name");if(n){var s=n.lastIndexOf("[");-1!==s&&(i="".concat(n.substr(0,s),"[").concat(i,"]"))}this.hiddenInput=this._createEl("input",{type:"hidden",name:i}),t.appendChild(this.hiddenInput)}}},{key:"_appendListItems",value:function(e,t){for(var i="",n=0;n<e.length;n++){var s=e[n];i+="<li class='country ".concat(t,"' tabIndex='-1' id='iti-item-").concat(s.iso2,"' role='option' data-dial-code='").concat(s.dialCode,"' data-country-code='").concat(s.iso2,"'>"),i+="<div class='flag-box'><div class='iti-flag ".concat(s.iso2,"'></div></div>"),i+="<span class='country-name'>".concat(s.name,"</span>"),i+="<span class='dial-code'>+".concat(s.dialCode,"</span>"),i+="</li>"}this.countryList.insertAdjacentHTML("beforeend",i)}},{key:"_setInitialState",value:function(){var e=this.telInput.value,t=this._getDialCode(e),i=this._isRegionlessNanp(e),n=this.options,s=n.initialCountry,o=n.nationalMode,a=n.autoHideDialCode,r=n.separateDialCode;t&&!i?this._updateFlagFromNumber(e):"auto"!==s&&(s?this._setFlag(s.toLowerCase()):t&&i?this._setFlag("us"):(this.defaultCountry=this.preferredCountries.length?this.preferredCountries[0].iso2:this.countries[0].iso2,e||this._setFlag(this.defaultCountry)),e||o||a||r||(this.telInput.value="+".concat(this.selectedCountryData.dialCode))),e&&this._updateValFromNumber(e)}},{key:"_initListeners",value:function(){this._initKeyListeners(),this.options.autoHideDialCode&&this._initBlurListeners(),this.options.allowDropdown&&this._initDropdownListeners(),this.hiddenInput&&this._initHiddenInputListener()}},{key:"_initHiddenInputListener",value:function(){var e=this;this._handleHiddenInputSubmit=function(){e.hiddenInput.value=e.getNumber()},this.telInput.form&&this.telInput.form.addEventListener("submit",this._handleHiddenInputSubmit)}},{key:"_getClosestLabel",value:function(){for(var e=this.telInput;e&&"LABEL"!==e.tagName;)e=e.parentNode;return e}},{key:"_initDropdownListeners",value:function(){var e=this;this._handleLabelClick=function(t){e.countryList.classList.contains("hide")?e.telInput.focus():t.preventDefault()};var t=this._getClosestLabel();t&&t.addEventListener("click",this._handleLabelClick),this._handleClickSelectedFlag=function(){!e.countryList.classList.contains("hide")||e.telInput.disabled||e.telInput.readOnly||e._showDropdown()},this.selectedFlag.addEventListener("click",this._handleClickSelectedFlag),this._handleFlagsContainerKeydown=function(t){e.countryList.classList.contains("hide")&&-1!==["ArrowUp","ArrowDown"," ","Enter"].indexOf(t.key)&&(t.preventDefault(),t.stopPropagation(),e._showDropdown()),"Tab"===t.key&&e._closeDropdown()},this.flagsContainer.addEventListener("keydown",this._handleFlagsContainerKeydown)}},{key:"_initRequests",value:function(){var t=this;this.options.utilsScript&&!e.intlTelInputUtils?e.intlTelInputGlobals.windowLoaded?e.intlTelInputGlobals.loadUtils(this.options.utilsScript):e.addEventListener("load",(function(){e.intlTelInputGlobals.loadUtils(t.options.utilsScript)})):this.resolveUtilsScriptPromise(),"auto"===this.options.initialCountry?this._loadAutoCountry():this.resolveAutoCountryPromise()}},{key:"_loadAutoCountry",value:function(){e.intlTelInputGlobals.autoCountry?this.handleAutoCountry():e.intlTelInputGlobals.startedLoadingAutoCountry||(e.intlTelInputGlobals.startedLoadingAutoCountry=!0,"function"==typeof this.options.geoIpLookup&&this.options.geoIpLookup((function(t){e.intlTelInputGlobals.autoCountry=t.toLowerCase(),setTimeout((function(){return c("handleAutoCountry")}))}),(function(){return c("rejectAutoCountryPromise")})))}},{key:"_initKeyListeners",value:function(){var e=this;this._handleKeyupEvent=function(){e._updateFlagFromNumber(e.telInput.value)&&e._triggerCountryChange()},this.telInput.addEventListener("keyup",this._handleKeyupEvent),this._handleClipboardEvent=function(){setTimeout(e._handleKeyupEvent)},this.telInput.addEventListener("cut",this._handleClipboardEvent),this.telInput.addEventListener("paste",this._handleClipboardEvent)}},{key:"_cap",value:function(e){var t=this.telInput.getAttribute("maxlength");return t&&e.length>t?e.substr(0,t):e}},{key:"_initBlurListeners",value:function(){var e=this;this._handleSubmitOrBlurEvent=function(){e._removeEmptyDialCode()},this.telInput.form&&this.telInput.form.addEventListener("submit",this._handleSubmitOrBlurEvent),this.telInput.addEventListener("blur",this._handleSubmitOrBlurEvent)}},{key:"_removeEmptyDialCode",value:function(){if("+"===this.telInput.value.charAt(0)){var e=this._getNumeric(this.telInput.value);e&&this.selectedCountryData.dialCode!==e||(this.telInput.value="")}}},{key:"_getNumeric",value:function(e){return e.replace(/\D/g,"")}},{key:"_trigger",value:function(e){var i=t.createEvent("Event");i.initEvent(e,!0,!0),this.telInput.dispatchEvent(i)}},{key:"_showDropdown",value:function(){this.countryList.classList.remove("hide"),this.countryList.setAttribute("aria-expanded","true"),this._setDropdownPosition(),this.activeItem&&(this._highlightListItem(this.activeItem,!1),this._scrollTo(this.activeItem,!0)),this._bindDropdownListeners(),this.dropdownArrow.classList.add("up"),this._trigger("open:countrydropdown")}},{key:"_toggleClass",value:function(e,t,i){i&&!e.classList.contains(t)?e.classList.add(t):!i&&e.classList.contains(t)&&e.classList.remove(t)}},{key:"_setDropdownPosition",value:function(){var i=this;if(this.options.dropdownContainer&&this.options.dropdownContainer.appendChild(this.dropdown),!this.isMobile){var n=this.telInput.getBoundingClientRect(),s=e.pageYOffset||t.documentElement.scrollTop,o=n.top+s,a=this.countryList.offsetHeight,r=o+this.telInput.offsetHeight+a<s+e.innerHeight,l=o-a>s;if(this._toggleClass(this.countryList,"dropup",!r&&l),this.options.dropdownContainer){var d=!r&&l?0:this.telInput.offsetHeight;this.dropdown.style.top="".concat(o+d,"px"),this.dropdown.style.left="".concat(n.left+t.body.scrollLeft,"px"),this._handleWindowScroll=function(){return i._closeDropdown()},e.addEventListener("scroll",this._handleWindowScroll)}}}},{key:"_getClosestListItem",value:function(e){for(var t=e;t&&t!==this.countryList&&!t.classList.contains("country");)t=t.parentNode;return t===this.countryList?null:t}},{key:"_bindDropdownListeners",value:function(){var e=this;this._handleMouseoverCountryList=function(t){var i=e._getClosestListItem(t.target);i&&e._highlightListItem(i,!1)},this.countryList.addEventListener("mouseover",this._handleMouseoverCountryList),this._handleClickCountryList=function(t){var i=e._getClosestListItem(t.target);i&&e._selectListItem(i)},this.countryList.addEventListener("click",this._handleClickCountryList);var i=!0;this._handleClickOffToClose=function(){i||e._closeDropdown(),i=!1},t.documentElement.addEventListener("click",this._handleClickOffToClose);var n="",s=null;this._handleKeydownOnDropdown=function(t){t.preventDefault(),"ArrowUp"===t.key||"ArrowDown"===t.key?e._handleUpDownKey(t.key):"Enter"===t.key?e._handleEnterKey():"Escape"===t.key?e._closeDropdown():/^[a-zA-ZÀ-ÿ ]$/.test(t.key)&&(s&&clearTimeout(s),n+=t.key.toLowerCase(),e._searchForCountry(n),s=setTimeout((function(){n=""}),1e3))},t.addEventListener("keydown",this._handleKeydownOnDropdown)}},{key:"_handleUpDownKey",value:function(e){var t="ArrowUp"===e?this.highlightedItem.previousElementSibling:this.highlightedItem.nextElementSibling;t&&(t.classList.contains("divider")&&(t="ArrowUp"===e?t.previousElementSibling:t.nextElementSibling),this._highlightListItem(t,!0))}},{key:"_handleEnterKey",value:function(){this.highlightedItem&&this._selectListItem(this.highlightedItem)}},{key:"_searchForCountry",value:function(e){for(var t=0;t<this.countries.length;t++)if(this._startsWith(this.countries[t].name,e)){var i=this.countryList.querySelector("#iti-item-".concat(this.countries[t].iso2));this._highlightListItem(i,!1),this._scrollTo(i,!0);break}}},{key:"_startsWith",value:function(e,t){return e.substr(0,t.length).toLowerCase()===t}},{key:"_updateValFromNumber",value:function(t){var i=t;if(this.options.formatOnDisplay&&e.intlTelInputUtils&&this.selectedCountryData){var n=!this.options.separateDialCode&&(this.options.nationalMode||"+"!==i.charAt(0)),s=intlTelInputUtils.numberFormat,o=s.NATIONAL,a=s.INTERNATIONAL,r=n?o:a;i=intlTelInputUtils.formatNumber(i,this.selectedCountryData.iso2,r)}i=this._beforeSetNumber(i),this.telInput.value=i}},{key:"_updateFlagFromNumber",value:function(e){var t=e,i="1"===this.selectedCountryData.dialCode;t&&this.options.nationalMode&&i&&"+"!==t.charAt(0)&&("1"!==t.charAt(0)&&(t="1".concat(t)),t="+".concat(t));var n=this._getDialCode(t),s=this._getNumeric(t),o=null;if(n){var a=this.countryCodes[this._getNumeric(n)],r=-1!==a.indexOf(this.selectedCountryData.iso2),l="+1"===n&&s.length>=4;if(("1"!==this.selectedCountryData.dialCode||!this._isRegionlessNanp(s))&&(!r||l))for(var d=0;d<a.length;d++)if(a[d]){o=a[d];break}}else"+"===t.charAt(0)&&s.length?o="":t&&"+"!==t||(o=this.defaultCountry);return null!==o&&this._setFlag(o)}},{key:"_isRegionlessNanp",value:function(e){var t=this._getNumeric(e);if("1"===t.charAt(0)){var i=t.substr(1,3);return-1!==l.indexOf(i)}return!1}},{key:"_highlightListItem",value:function(e,t){var i=this.highlightedItem;i&&i.classList.remove("highlight"),this.highlightedItem=e,this.highlightedItem.classList.add("highlight"),t&&this.highlightedItem.focus()}},{key:"_getCountryData",value:function(e,t,n){for(var s=t?i:this.countries,o=0;o<s.length;o++)if(s[o].iso2===e)return s[o];if(n)return null;throw new Error("No country data for '".concat(e,"'"))}},{key:"_setFlag",value:function(e){var t=this.selectedCountryData.iso2?this.selectedCountryData:{};this.selectedCountryData=e?this._getCountryData(e,!1,!1):{},this.selectedCountryData.iso2&&(this.defaultCountry=this.selectedCountryData.iso2),this.selectedFlagInner.setAttribute("class","iti-flag ".concat(e));var i=e?"".concat(this.selectedCountryData.name,": +").concat(this.selectedCountryData.dialCode):"Unknown";if(this.selectedFlag.setAttribute("title",i),this.options.separateDialCode){var n=this.selectedCountryData.dialCode?"+".concat(this.selectedCountryData.dialCode):"";this.selectedDialCode.innerHTML=n,this.telInput.style.paddingLeft="".concat(this.selectedFlag.offsetWidth+6,"px")}if(this._updatePlaceholder(),this.options.allowDropdown){var s=this.activeItem;if(s&&(s.classList.remove("active"),s.setAttribute("aria-selected","false")),e){var o=this.countryList.querySelector("#iti-item-".concat(e));o.setAttribute("aria-selected","true"),o.classList.add("active"),this.activeItem=o,this.countryList.setAttribute("aria-activedescendant",o.getAttribute("id"))}}return t.iso2!==e}},{key:"_updatePlaceholder",value:function(){var t="aggressive"===this.options.autoPlaceholder||!this.hadInitialPlaceholder&&"polite"===this.options.autoPlaceholder;if(e.intlTelInputUtils&&t){var i=intlTelInputUtils.numberType[this.options.placeholderNumberType],n=this.selectedCountryData.iso2?intlTelInputUtils.getExampleNumber(this.selectedCountryData.iso2,this.options.nationalMode,i):"";n=this._beforeSetNumber(n),"function"==typeof this.options.customPlaceholder&&(n=this.options.customPlaceholder(n,this.selectedCountryData)),this.telInput.setAttribute("placeholder",n)}}},{key:"_selectListItem",value:function(e){var t=this._setFlag(e.getAttribute("data-country-code"));this._closeDropdown(),this._updateDialCode(e.getAttribute("data-dial-code"),!0),this.telInput.focus();var i=this.telInput.value.length;this.telInput.setSelectionRange(i,i),t&&this._triggerCountryChange()}},{key:"_closeDropdown",value:function(){this.countryList.classList.add("hide"),this.countryList.setAttribute("aria-expanded","false"),this.dropdownArrow.classList.remove("up"),t.removeEventListener("keydown",this._handleKeydownOnDropdown),t.documentElement.removeEventListener("click",this._handleClickOffToClose),this.countryList.removeEventListener("mouseover",this._handleMouseoverCountryList),this.countryList.removeEventListener("click",this._handleClickCountryList),this.options.dropdownContainer&&(this.isMobile||e.removeEventListener("scroll",this._handleWindowScroll),this.dropdown.parentNode&&this.dropdown.parentNode.removeChild(this.dropdown)),this._trigger("close:countrydropdown")}},{key:"_scrollTo",value:function(i,n){var s=this.countryList,o=e.pageYOffset||t.documentElement.scrollTop,a=s.offsetHeight,r=s.getBoundingClientRect().top+o,l=r+a,d=i.offsetHeight,c=i.getBoundingClientRect().top+o,h=c+d,u=c-r+s.scrollTop,p=a/2-d/2;if(c<r)n&&(u-=p),s.scrollTop=u;else if(h>l){n&&(u+=p);var f=a-d;s.scrollTop=u-f}}},{key:"_updateDialCode",value:function(e,t){var i,n=this.telInput.value,s="+".concat(e);if("+"===n.charAt(0)){var o=this._getDialCode(n);i=o?n.replace(o,s):s}else{if(this.options.nationalMode||this.options.separateDialCode)return;if(n)i=s+n;else{if(!t&&this.options.autoHideDialCode)return;i=s}}this.telInput.value=i}},{key:"_getDialCode",value:function(e){var t="";if("+"===e.charAt(0))for(var i="",n=0;n<e.length;n++){var s=e.charAt(n);if(!isNaN(parseInt(s,10))&&(i+=s,this.countryCodes[i]&&(t=e.substr(0,n+1)),4===i.length))break}return t}},{key:"_getFullNumber",value:function(){var e=this.telInput.value.trim(),t=this.selectedCountryData.dialCode,i=this._getNumeric(e),n="1"===i.charAt(0)?i:"1".concat(i);return(this.options.separateDialCode&&"+"!==e.charAt(0)?"+".concat(t):e&&"+"!==e.charAt(0)&&"1"!==e.charAt(0)&&t&&"1"===t.charAt(0)&&4===t.length&&t!==n.substr(0,4)?t.substr(1):"")+e}},{key:"_beforeSetNumber",value:function(e){var t=e;if(this.options.separateDialCode){var i=this._getDialCode(t);if(i){null!==this.selectedCountryData.areaCodes&&(i="+".concat(this.selectedCountryData.dialCode));var n=" "===t[i.length]||"-"===t[i.length]?i.length+1:i.length;t=t.substr(n)}}return this._cap(t)}},{key:"_triggerCountryChange",value:function(){this._trigger("countrychange")}},{key:"handleAutoCountry",value:function(){"auto"===this.options.initialCountry&&(this.defaultCountry=e.intlTelInputGlobals.autoCountry,this.telInput.value||this.setCountry(this.defaultCountry),this.resolveAutoCountryPromise())}},{key:"handleUtils",value:function(){e.intlTelInputUtils&&(this.telInput.value&&this._updateValFromNumber(this.telInput.value),this._updatePlaceholder()),this.resolveUtilsScriptPromise()}},{key:"destroy",value:function(){var t=this.telInput.form;if(this.options.allowDropdown){this._closeDropdown(),this.selectedFlag.removeEventListener("click",this._handleClickSelectedFlag),this.flagsContainer.removeEventListener("keydown",this._handleFlagsContainerKeydown);var i=this._getClosestLabel();i&&i.removeEventListener("click",this._handleLabelClick)}this.hiddenInput&&t&&t.removeEventListener("submit",this._handleHiddenInputSubmit),this.options.autoHideDialCode&&(t&&t.removeEventListener("submit",this._handleSubmitOrBlurEvent),this.telInput.removeEventListener("blur",this._handleSubmitOrBlurEvent)),this.telInput.removeEventListener("keyup",this._handleKeyupEvent),this.telInput.removeEventListener("cut",this._handleClipboardEvent),this.telInput.removeEventListener("paste",this._handleClipboardEvent),this.telInput.removeAttribute("data-intl-tel-input-id");var n=this.telInput.parentNode;n.parentNode.insertBefore(this.telInput,n),n.parentNode.removeChild(n),delete e.intlTelInputGlobals.instances[this.id]}},{key:"getExtension",value:function(){return e.intlTelInputUtils?intlTelInputUtils.getExtension(this._getFullNumber(),this.selectedCountryData.iso2):""}},{key:"getNumber",value:function(t){if(e.intlTelInputUtils){var i=this.selectedCountryData.iso2;return intlTelInputUtils.formatNumber(this._getFullNumber(),i,t)}return""}},{key:"getNumberType",value:function(){return e.intlTelInputUtils?intlTelInputUtils.getNumberType(this._getFullNumber(),this.selectedCountryData.iso2):-99}},{key:"getSelectedCountryData",value:function(){return this.selectedCountryData}},{key:"getValidationError",value:function(){if(e.intlTelInputUtils){var t=this.selectedCountryData.iso2;return intlTelInputUtils.getValidationError(this._getFullNumber(),t)}return-99}},{key:"isValidNumber",value:function(){var t=this._getFullNumber().trim(),i=this.options.nationalMode?this.selectedCountryData.iso2:"";return e.intlTelInputUtils?intlTelInputUtils.isValidNumber(t,i):null}},{key:"setCountry",value:function(e){var t=e.toLowerCase();this.selectedFlagInner.classList.contains(t)||(this._setFlag(t),this._updateDialCode(this.selectedCountryData.dialCode,!1),this._triggerCountryChange())}},{key:"setNumber",value:function(e){var t=this._updateFlagFromNumber(e);this._updateValFromNumber(e),t&&this._triggerCountryChange()}},{key:"setPlaceholderNumberType",value:function(e){this.options.placeholderNumberType=e,this._updatePlaceholder()}}])&&o(s.prototype,h),u&&o(s,u),n}();e.intlTelInputGlobals.getCountryData=function(){return i};var u=function(e,i,n){var s=t.createElement("script");s.onload=function(){c("handleUtils"),i&&i()},s.onerror=function(){c("rejectUtilsScriptPromise"),n&&n()},s.className="iti-load-utils",s.async=!0,s.src=e,t.body.appendChild(s)};return e.intlTelInputGlobals.loadUtils=function(t){if(!e.intlTelInputUtils&&!e.intlTelInputGlobals.startedLoadingUtilsScript){if(e.intlTelInputGlobals.startedLoadingUtilsScript=!0,"undefined"!=typeof Promise)return new Promise((function(e,i){return u(t,e,i)}));u(t)}return null},e.intlTelInputGlobals.defaults=r,e.intlTelInputGlobals.version="15.1.0",function(t,i){var n=new h(t,i);return n._init(),t.setAttribute("data-intl-tel-input-id",n.id),e.intlTelInputGlobals.instances[n.id]=n,n}}()}(window,document),e.exports?e.exports=n:window.intlTelInput=n},function(e,t,i){function n(e){for(var t=e+"=",i=document.cookie.split(";"),n=0;n<i.length;n++){for(var s=i[n];" "==s.charAt(0);)s=s.substring(1);if(0==s.indexOf(t))return s.substring(t.length,s.length)}return null}window.setCookie=function(e,t,i){var n=new Date;n.setTime(n.getTime()+24*i*60*60*1e3);var s="expires="+n.toUTCString();document.cookie=e+"="+t+"; "+s+";path=${cookiePath}"},window.deleteCookie=function(e,t,i){n(e)&&(document.cookie=e+"="+(t?";path="+t:"")+(i?";domain="+i:"")+";expires=Thu, 01 Jan 1970 00:00:01 GMT")},window.getCookie=n},function(e,t){window.MASERATI=window.MASERATI||{},MASERATI.Constants={stateClassOpen:"maseratiIsOpen"},$((function(){MASERATI.Helpers.bindSubmit(),MASERATI.Helpers.scrollAnimationsInit(),MASERATI.Helpers.checkExternalAnchor(),MASERATI.Helpers.Mobile.setDeviceCookie(),MASERATI.Helpers.initVerticalLayout(),$("input, textarea").placeholder()}))},function(e,t){MASERATI.V360ExteriorOverlay=function(e,t){this.$el=e,this.$parent=t,this.$walkaround=this.$el.children(".walkaround"),this.$controls=this.$walkaround.children(".controls"),this.$hotspotContainer=this.$controls.children(".hotspot_container"),this.$arcLabelsContainer=this.$controls.find(".labels_container"),this.$vbuttons=this.$walkaround.children(".view-buttons"),this.$overlay=this.$walkaround.children(".overlay"),this.$scenes=this.$walkaround.children(".scenes"),this.$dataObj=this.$walkaround.children('div[data-type="data"]'),this.$dragExpMsg=this.$controls.find(".drag-to-explore"),this.$carPositions=["front","right","left","rear"],this.steps,this.startStep,this.svgPath,this.moving,this.dragging,this.dragStartX,this.dragStartY,this.dragSensitivity=20,this.isChanged=!1,this.init()},MASERATI.V360ExteriorOverlay.prototype.init=function(){this.data=this.loadData(),this.initWalkaround(),this.bindEvents(),this.$el.hasClass("active")||this.$el.hide()},MASERATI.V360ExteriorOverlay.prototype.loadData=function(){this.scenes=exteriorTrims.scenes||{},this.steps=parseInt(this.$dataObj.children('div[data-type="steps"]').data("value"),10),this.startStep=parseInt(this.$dataObj.children('div[data-type="startStep"]').data("value"),10),this.svgPath=this.$dataObj.children('div[data-type="svgPath"]').data("value"),this.$dataObj.remove()},MASERATI.V360ExteriorOverlay.prototype.initWalkaround=function(){this.initScenes(),this.initControls()},MASERATI.V360ExteriorOverlay.prototype.initScenes=function(){let e=this;var t=this.$scenes.children(".scene.dummy");let i="";for(var n in this.scenes)if(this.scenes.hasOwnProperty(n)){""==i&&(i=n);var s=t.clone();s.attr("data-scene",n);var o={};for(var a in this.scenes[n].orientations)switch(a){case"landscape":case"portrait":o=this.scenes[n].orientations[a],this.appendImagesOnScene(s,o,a).remove();var r=this.appendHotspotsOnScene(n,e,a)}this.$scenes.append(s)}r.remove(),t.remove(),this.$scenes.find(".dummy").removeClass("dummy");var l=this.$scenes.children(".scene:first-child").addClass("active");let d=this.$parent.$el.attr("data-orientation"),c=l.children(".images_container."+d);this.lazyLoadImage(c,this.startStep,!0),c.find("img.active").load((function(){e.repositionHotspots()})),this.$hotspotContainer.find(".custom-hotspot").removeClass("currentScene"),this.$hotspotContainer.find(".custom-hotspot[data-scene='"+i+"']").addClass("currentScene")},MASERATI.V360ExteriorOverlay.prototype.initControls=function(){this.loadArc(),this.toggleHotspotsVisibility(),this.toggleArcLabelsVisibility()},MASERATI.V360ExteriorOverlay.prototype.loadArc=function(){var e=this;let t=MASERATI.Helpers.pad(this.$walkaround.data("step"),2),i=this.$controls.children(".arc");i.load(this.svgPath+"arc-"+t+".svg",(function(){e.bindArcEvents(i),e.fixDotLabelPosition(),i.find("svg #dot_front, svg #dot_left, svg #dot_right, svg #dot_rear").attr({tabindex:0,role:"button"}),MASERATI.Wcag.EnterBind(i)}))},MASERATI.V360ExteriorOverlay.prototype.bindArcEvents=function(e){var t=this;e.find("svg #dot_front").click((function(){MASERATI.AdobeTracking.tracker.setV360Action("360view:front"),MASERATI.AdobeTracking.tracker.setSatelliteTrack("View360LinkEngage"),t.animateToStep(t.getStep("front"))})),e.find("svg #dot_right").click((function(){MASERATI.AdobeTracking.tracker.setV360Action("360view:right"),MASERATI.AdobeTracking.tracker.setSatelliteTrack("View360LinkEngage"),t.animateToStep(t.getStep("right"))})),e.find("svg #dot_left").click((function(){MASERATI.AdobeTracking.tracker.setV360Action("360view:left"),MASERATI.AdobeTracking.tracker.setSatelliteTrack("View360LinkEngage"),t.animateToStep(t.getStep("left"))})),e.find("svg #dot_rear").click((function(){MASERATI.AdobeTracking.tracker.setV360Action("360view:rear"),MASERATI.AdobeTracking.tracker.setSatelliteTrack("View360LinkEngage"),t.animateToStep(t.getStep("rear"))})),e.find("svg #dot_front").mouseenter((function(){t.toggleVisibilityLabelMouseOver("front",!0)})).mouseleave((function(){t.toggleVisibilityLabelMouseOver("front",!1)})),e.find("svg #dot_right").mouseenter((function(){t.toggleVisibilityLabelMouseOver("right",!0)})).mouseleave((function(){t.toggleVisibilityLabelMouseOver("right",!1)})),e.find("svg #dot_left").mouseenter((function(){t.toggleVisibilityLabelMouseOver("left",!0)})).mouseleave((function(){t.toggleVisibilityLabelMouseOver("left",!1)})),e.find("svg #dot_rear").mouseenter((function(){t.toggleVisibilityLabelMouseOver("rear",!0)})).mouseleave((function(){t.toggleVisibilityLabelMouseOver("rear",!1)})),t.$carPositions.forEach((function(i){e.find("svg #dot_"+i)[0].addEventListener("keydown",(function(e){switch(KEY_ESC=27,KEY_ENTER=13,e.keyCode){case KEY_ESC:return void t.$vbuttons.find(".exterior").focus();case KEY_ENTER:return void setTimeout((function(){t.$hotspotContainer.find(".custom-hotspot.currentScene."+i+":first").focus()}),1200)}}))}))},MASERATI.V360ExteriorOverlay.prototype.getStep=function(e){let t=1;switch(e){case"front":break;case"right":t=1+Math.round(this.steps/4);break;case"rear":t=1+Math.round(this.steps/2);break;case"left":t=this.steps+1-Math.round(this.steps/4)}return t},MASERATI.V360ExteriorOverlay.prototype.animateToStep=function(e){var t=this;if(this.moving)return;let i=this.$walkaround.data("step"),n=(e-i+this.steps)%this.steps>this.steps/2?-1:1;this.moving=setInterval((function(){e==i?(clearInterval(t.moving),t.moving=null):(i+=n,i<1&&(i+=t.steps),i>t.steps&&(i%=t.steps),t.gotoStep(i))}),66)},MASERATI.V360ExteriorOverlay.prototype.gotoStep=function(e){var t=this;if(this.$dragExpMsg.is(":visible")&&(this.$dragExpMsg.hide(),t.$parent.$el.addClass("user-rotate-interaction"),t.$parent.showPriceModelActive()),this.closeOverlay(),this.$arcLabelsContainer.children(".arc-label").removeClass("hover"),e>=1&&e<=this.steps){this.$walkaround.data("step",e);var i=t.$scenes.children(".scene.active"),n=t.$parent.$el.data("orientation");i.each((function(i,s){var o=$(s).find(".images_container."+n);t.lazyLoadImage(o,e)})),this.toggleHotspotsVisibility(),this.toggleArcLabelsVisibility(),this.loadArc()}},MASERATI.V360ExteriorOverlay.prototype.toggleHotspotsVisibility=function(){let e=this.$walkaround.data("step"),t=this;this.$hotspotContainer.removeClass("front right left rear"),this.$carPositions.forEach((function(i){e==t.getStep(i)&&t.$hotspotContainer.addClass(i).attr("position",i)}))},MASERATI.V360ExteriorOverlay.prototype.repositionHotspots=function(){if(!this.$el.hasClass("active"))return;let e=this.$parent.$el.attr("data-orientation"),t=this.$scenes.find(".scene.active .images_container."+e+" img.active"),i=this.$controls.find(".custom-hotspot"),n=this.$walkaround.width(),s=this.$walkaround.height(),o=t[0].naturalWidth,a=t[0].naturalHeight,r=i.width(),l=1;l=n/s<o/a?this.$walkaround.height()/a:this.$walkaround.width()/o,i.each((function(){let e=parseInt($(this).attr("x-offset"),10),t=parseInt($(this).attr("y-offset"),10),i=$('html[dir="rtl"]').length>0?"right":"left";$(this).css(i,n/2+l*e-r/2+"px"),$(this).css("top",s/2+l*t-r/2+"px")}))},MASERATI.V360ExteriorOverlay.prototype.fixDotLabelPosition=function(){var e=this,t=e.$parent.$el.offset().top,i=$(".new-menu").height();this.$carPositions.forEach((function(n){let s=e.$controls.children(".arc").find("svg #dot_"+n);var o=s.offset();let a=e.$arcLabelsContainer.children("#dot-lbl-"+n),r=a.width(),l=s[0].getBoundingClientRect().width;o.left=o.left-r/2+l/2,o.top=o.top-t+i,a.css(o)}))},MASERATI.V360ExteriorOverlay.prototype.toggleArcLabelsVisibility=function(){let e=this.$walkaround.data("step"),t=this;this.$arcLabelsContainer.removeClass("front right left rear"),this.$carPositions.forEach((function(i){e!=t.getStep(i)||t.$dragExpMsg.is(":visible")||t.$arcLabelsContainer.addClass(i)}))},MASERATI.V360ExteriorOverlay.prototype.toggleVisibilityLabelMouseOver=function(e,t){t?this.$arcLabelsContainer.children("#dot-lbl-"+e).addClass("hover"):this.$arcLabelsContainer.children("#dot-lbl-"+e).removeClass("hover")},MASERATI.V360ExteriorOverlay.prototype.appendHotspotsOnScene=function(e,t,i){var n=this.$controls.children(".hotspot_container"),s=n.children("div.dummy"),o=this.scenes[e].orientations[i].hotspots||{},a=o.length;console.log(a);for(let m=0;m<o.length;m++){let o=this.scenes[e].orientations[i].hotspots[m],v=o.positions||{};for(var r in o.container=".walkaround",v)if(v.hasOwnProperty(r)){var l=s.clone(),d=l.children("div.label-of-hotspot").children("span"),c=l.children("div.line-for-label"),h=l.children("div.label-of-hotspot"),u=v[r].x,p=v[r].y;if(parseInt(o.lineLength)<0)if(MASERATI.Helpers.getWindowWidth()<768){var f=parseInt(o.lineLength)*parseInt(-1)+parseInt(10)+parseInt(s.outerHeight());c.css("bottom","30px"),c.css("height",o.lineLength*parseInt(-1)),h.css("bottom",f+"px"),c.css("top","unset"),h.css("top","unset")}else{f=parseInt(o.lineLength)*parseInt(-1)+parseInt(8)+parseInt(s.outerHeight());c.css("bottom","42px"),c.css("height",o.lineLength*parseInt(-1)),h.css("bottom",f+"px"),c.css("top","unset"),h.css("top","unset"),navigator.userAgent.indexOf("7.0")>0&&h.css("left","-105px")}else{var g=parseInt(o.lineLength)+parseInt(10)+parseInt(s.outerHeight());c.css("top",o.lineLength+"px"),c.css("height",o.lineLength),h.css("top",g+"px"),c.css("bottom","unset"),h.css("bottom","unset"),navigator.userAgent.indexOf("7.0")>0&&h.css("left","-105px")}d.text(o.labelText),l.addClass(r),l.removeClass("dummy"),l.attr("data-scene",e),l.attr("data-orientation",i),l.attr("x-offset",u),l.attr("y-offset",p),l.attr("aria-label",o.title),l.attr("data-index",o.index),l.attr("data-overlayId",o.overlayId),l.on("click",(function(){t.$parent.openOverlay(this,o,a)})),n.append(l)}}let m=$('.hotspot_container div[data-overlayId]:not([data-overlayId=""])');return m.length&&m.each((function(){new MASERATI.OverlayComponent($(this))})),MASERATI.Wcag.EnterBind(this.$el),s},MASERATI.V360ExteriorOverlay.prototype.lazyLoadImage=function(e,t,n){var s=$(e).find("img");if(n){this.lazyLoadNextImageFromStep(4,s,t),this.lazyLoadPrevImageFromStep(4,s,t)}else for(i=0;i<s.length;i++){var o=$(s[i]);o.one("load",(function(){$(this).addClass("lazy-loaded")})),o.data("src")&&(o.attr("src",o.data("src")),o.removeAttr("data-src"),o.removeData("src")),o.data("srcset")&&(o.attr("srcset",o.data("srcset")),o.removeAttr("data-srcset"),o.removeData("srcset"))}$(s).removeClass("active"),$(e).find("img:nth-child("+t+")").addClass("active")},MASERATI.V360ExteriorOverlay.prototype.lazyLoadNextImageFromStep=function(e,t,i){for(x=e;x>0;x--){var n=t[i-1+x],s=$(n);s.one("load",(function(){$(this).addClass("lazy-loaded")})),s.data("src")&&(s.attr("src",s.data("src")),s.removeAttr("data-src"),s.removeData("src")),s.data("srcset")&&(s.attr("srcset",s.data("srcset")),s.removeAttr("data-srcset"),s.removeData("srcset"))}},MASERATI.V360ExteriorOverlay.prototype.lazyLoadPrevImageFromStep=function(e,t,i){for(y=-1;y<=e+1;y++){var n=t[(i-y).mod(this.steps)],s=$(n);s.one("load",(function(){$(this).addClass("lazy-loaded")})),s.data("src")&&(s.attr("src",s.data("src")),s.removeAttr("data-src"),s.removeData("src")),s.data("srcset")&&(s.attr("srcset",s.data("srcset")),s.removeAttr("data-srcset"),s.removeData("srcset"))}},MASERATI.V360ExteriorOverlay.prototype.appendImagesOnScene=function(e,t,i){var n=e.children(".images_container."+i),s=n.children("img.dummy");for(let e=1;e<=this.steps;e++){var o=s.clone();e==this.startStep&&o.addClass("active");let i="";i="Y"==t.addOriginalPath||"y"==t.addOriginalPath||"true"==t.addOriginalPath||"True"==t.addOriginalPath||"TRUE"==t.addOriginalPath||!1?t.imgRoot+t.imgBaseName+MASERATI.Helpers.pad(e,2)+"/original/"+t.imgBaseName+MASERATI.Helpers.pad(e,2)+t.imgExtension:t.imgRoot+t.imgBaseName+MASERATI.Helpers.pad(e,2)+t.imgExtension,o.attr("data-src",i),t.hasOwnProperty("imgsAltDescription")&&o.attr("alt",t.imgsAltDescription[MASERATI.Helpers.pad(e,2)]),n.append(o)}return s},MASERATI.V360ExteriorOverlay.prototype.bindEvents=function(){var e=this;$(window).keydown((function(t){e.rotateFromKeyboard(t)})),this.$walkaround.bind("touchstart mousedown",(function(t){e.startRotate(t)})),this.$walkaround.bind("touchmove mousemove",(function(t){e.dragRotate(t)})),this.$walkaround.bind("touchend mouseup",(function(t){e.endRotate(t)})),$(window).resize((function(){window.innerHeight>window.innerWidth?e.$parent.$el.attr("data-orientation","portrait"):e.$parent.$el.attr("data-orientation","landscape"),e.repositionHotspots(),e.fixDotLabelPosition()})),$(window).on("orientationchange",(function(t){var i="portrait"==e.$parent.$el.data("orientation")?"landscape":"portrait";e.$parent.$el.attr("data-orientation",i),e.$parent.$el.data("orientation",i);var n=e.$scenes.children(".scene.active").find(".images_container."+i),s=e.$walkaround.data("step");e.lazyLoadImage(n,s),e.repositionHotspots(),e.fixDotLabelPosition()})),this.$overlay.children(".overlay-close").click((function(){e.closeOverlay()})),$(".custom-hotspot",e.$hotspotContainer).each((function(t,i){i.addEventListener("keydown",(function(t){switch(KEYCODE_ESC=27,KEYCODE_LEFT=37,KEYCODE_RIGHT=39,t.keyCode){case KEYCODE_LEFT:case KEYCODE_RIGHT:e.rotateFromKeyboard(t);break;case KEYCODE_ESC:let i=e.$hotspotContainer.attr("position");e.$controls.children(".arc").find("svg #dot_"+i).focus()}}))}))},MASERATI.V360ExteriorOverlay.prototype.rotateFromKeyboard=function(e){!this.moving&&this.$el.hasClass("active")&&MASERATI.Helpers.inViewport(this.$el)&&(37==e.keyCode?(this.closeOverlay(),this.clockwiseRotate()):39==e.keyCode&&(this.closeOverlay(),this.counterclockwiseRotate()))},MASERATI.V360ExteriorOverlay.prototype.startRotate=function(e){this.dragging=!0,this.dragStartX="mousedown"==e.type?e.clientX:e.originalEvent.targetTouches[0].clientX,this.dragStartY="mousedown"==e.type?e.clientY:e.originalEvent.targetTouches[0].clientY},MASERATI.V360ExteriorOverlay.prototype.dragRotate=function(e){if(this.dragging){var t="mousemove"==e.type?e.clientX:e.originalEvent.targetTouches[0].clientX,i="mousemove"==e.type?e.clientY:e.originalEvent.targetTouches[0].clientY;this.isChanged=t!=this.dragStartX,Math.abs(i-this.dragStartY)<.7*Math.abs(t-this.dragStartX)&&(e.preventDefault(),this.closeOverlay(),t-this.dragStartX>this.dragSensitivity?(this.dragStartX=t,this.dragStartY=i,this.counterclockwiseRotate()):t-this.dragStartX<-this.dragSensitivity&&(this.dragStartX=t,this.dragStartY=i,this.clockwiseRotate()))}},MASERATI.V360ExteriorOverlay.prototype.endRotate=function(e){this.dragging=!1,this.isChanged&&(MASERATI.AdobeTracking.tracker.setSatelliteTrack("View360Interaction"),setTimeout((function(){MASERATI.AdobeTracking.tracker.restoreVehicleModelName()}),500),this.isChanged=!1)},MASERATI.V360ExteriorOverlay.prototype.clockwiseRotate=function(){let e=this.$walkaround.data("step")-1;e<1&&(e+=this.steps),this.gotoStep(e)},MASERATI.V360ExteriorOverlay.prototype.counterclockwiseRotate=function(){let e=this.$walkaround.data("step")+1;e>this.steps&&(e%=this.steps),this.gotoStep(e)},MASERATI.V360ExteriorOverlay.prototype.percentageSeen=function(){if(this.$el.hasClass("animated"))return!0;var e=this.$el.offset().top,t=$(window).scrollTop()+$(window).height();if(t>=e+.3*$(window).height()){var i=this.startStep;return this.animateToStep(i),this.$el.addClass("animated"),console.log("v360: 30%"),!0}if(t>=e+.2*$(window).height()){i=(this.startStep+3)%36;return this.animateToStep(i),console.log("v360: 20%"),!1}if(t>=e+.1*$(window).height()){i=(this.startStep+6)%36;return this.animateToStep(i),console.log("v360: 10%"),!1}return!1},MASERATI.V360ExteriorOverlay.prototype.closeOverlay=function(){this.$walkaround.find(".custom-hotspot.active").focus(),this.$overlay.removeClass("opened"),this.$overlay.find(".overlay-close, .overlay-description, .cta a").removeAttr("role"),this.$overlay.attr("tabindex","-1"),this.$overlay.find(".overlay-close, .overlay-description, .cta a").attr("tabindex","-1"),this.$walkaround.find(".custom-hotspot").removeClass("off active")},MASERATI.V360ExteriorOverlay.prototype.loadScene=function(e){var t=this.$parent.$el.data("orientation"),i=this.$scenes.children('.scene[data-scene="'+e+'"]'),n=i.find(".images_container."+t),s=this.$walkaround.data("step");i.length>0&&(this.lazyLoadImage(n,s,!0),this.$scenes.children(".scene").not(i).removeClass("active"),i.addClass("active"),this.$hotspotContainer.find(".custom-hotspot").removeClass("currentScene"),this.$hotspotContainer.find(".custom-hotspot[data-scene='"+e+"']").addClass("currentScene"))},MASERATI.V360ExteriorOverlay.prototype.changeScene=function(e){this.closeOverlay(),this.loadScene(e)},MASERATI.V360ExteriorOverlay.prototype.onShown=function(){this.repositionHotspots(),this.fixDotLabelPosition()}},function(e,t){MASERATI.V360InteriorOverlay=function(e,t){this.$el=e,this.$parent=t,this.$panorama=this.$el.children(".panorama"),this.$controls=this.$panorama.children(".controls"),this.$overlay=this.$panorama.children(".overlay"),this.$vbuttons=this.$panorama.children(".view-buttons"),this.$dataObj=this.$panorama.children('div[data-type="data"]'),this.panoramaId="panorama-"+Math.floor(1e3*Math.random()),this.autoload=!1,this.viewer,this.scenes,this.loaderHTML,this.firstScene,this.forceScene,this.init()},MASERATI.V360InteriorOverlay.prototype.init=function(){this.data=this.loadData(),this.initPanorama(),this.bindEvents(),this.$el.hasClass("active")||this.$el.hide()},MASERATI.V360InteriorOverlay.prototype.refresh=function(){this.viewer.destroy(),this.initPannellum(),this.$vbuttons.insertAfter(".pnlm-render-container",this.$panorama),this.$controls.insertAfter(".pnlm-render-container",this.$panorama),this.$panorama.append(this.$overlay),this.bindEvents()},MASERATI.V360InteriorOverlay.prototype.loadData=function(){this.loaderHTML=this.$dataObj.find('div[data-type="common"] div[data-type="loading"]').html(),this.scenes=interiorTrims.scenes||{},this.$dataObj.remove()},MASERATI.V360InteriorOverlay.prototype.initPanorama=function(){this.$panorama.attr("id",this.panoramaId),this.parseScenes(),this.initPannellum()},MASERATI.V360InteriorOverlay.prototype.parseScenes=function(){var e=this;for(var t in this.scenes)if(null==this.firstScene&&(this.firstScene=t),this.scenes.hasOwnProperty(t)&&null!=this.scenes[t].hotSpots){var i=this.scenes[t].hotSpots.length;console.log(i),this.scenes[t].hotSpots.forEach((function(t){t.clickHandlerFunc=function(n){e.$parent.openOverlay(n,t.clickHandlerArgs,i)}}))}},MASERATI.V360InteriorOverlay.prototype.initPannellum=function(){var e=this.getParams();this.viewer=pannellum.viewer(this.panoramaId,e)},MASERATI.V360InteriorOverlay.prototype.bindEvents=function(){var e=this;this.viewer.on("load",(function(){e.$panorama.removeClass("loading"),e.$controls.removeClass("hidden"),e.$vbuttons.insertAfter(".pnlm-render-container",e.$panorama),e.$controls.insertAfter(".pnlm-render-container",e.$panorama),e.hotspotsTabNavigation(),e.setLabelsHotspots(),e.viewer.isOrientationSupported()||e.$controls.find("#orientation").remove()})),this.viewer.on("error",(function(){e.$panorama.removeClass("loading"),e.$controls.addClass("hidden")})),this.$controls.find("#zoom-in").click((function(t){e.viewer.setHfov(e.viewer.getHfov()-10)})),this.$controls.find("#zoom-out").click((function(t){e.viewer.setHfov(e.viewer.getHfov()+10)})),this.$controls.find("#fullscreen").click((function(t){e.viewer.toggleFullscreen()})),this.$controls.find("#orientation").click((function(t){e.viewer.isOrientationActive()?(e.viewer.stopOrientation(),this.innerHTML="&#x25ca;"):(e.viewer.startOrientation(),this.innerHTML="&#x25ce;")})),this.$overlay.children(".overlay-close").click((function(){e.closeOverlay()})),MASERATI.Wcag.EnterBind(this.$controls)},MASERATI.V360InteriorOverlay.prototype.getParams=function(){return{default:{firstScene:this.firstScene,sceneFadeDuration:1e3,autoLoad:this.autoload,maxHfov:90,hfov:75,minHfov:window.innerWidth<window.innerHeight?25:50,yaw:-15.5,pitch:-14.5,orientationOnByDefault:!0,showControls:!1},scenes:this.scenes,strings:{loadButtonLabel:this.loaderHTML,loadingLabel:this.loaderHTML}}},MASERATI.V360InteriorOverlay.prototype.closeOverlay=function(){this.$panorama.find(".custom-hotspot.active").focus(),this.$overlay.removeClass("opened"),this.$overlay.find(".overlay-close, .overlay-description, .cta a").removeAttr("role"),this.$overlay.attr("tabindex","-1"),this.$overlay.find(".overlay-close, .overlay-description, .cta a").attr("tabindex","-1"),this.$panorama.find(".custom-hotspot").removeClass("off active")},MASERATI.V360InteriorOverlay.prototype.setLabelsHotspots=function(){var e=this,t=e.$panorama.find(".custom-hotspot");e.scenes;0==e.$panorama.find(".hotspot-for-label").length&&(t.addClass("hotspot-for-label"),t.append('<div class="line-for-label"></div><div class="label-of-hotspot"><span class="spanForText"></span></div>')),$(".custom-hotspot",e.$panorama).each((function(i,n){var s=e.viewer.getConfig().hotSpots[i],o=s.lineLength,a=$(n).children("div.line-for-label"),r=$(n).children("div.label-of-hotspot");$(n).attr("data-index",s.clickHandlerArgs.index),$(n).attr("data-overlayId",s.clickHandlerArgs.overlayId);var l=s.labelText;if($(n).children("div.label-of-hotspot").children("span.spanForText").text(l),parseInt(o)<0)if(MASERATI.Helpers.getWindowWidth()<768){var d=parseInt(o)*parseInt(-1)+parseInt(10)+parseInt(t.outerHeight());a.css("bottom","30px"),a.css("height",o*parseInt(-1)),r.css("bottom",d+"px"),a.css("top","unset"),r.css("top","unset")}else{d=parseInt(o)*parseInt(-1)+parseInt(8)+parseInt(t.outerHeight());a.css("bottom","45px"),a.css("height",o*parseInt(-1)),r.css("bottom",d+"px"),a.css("top","unset"),r.css("top","unset"),navigator.userAgent.indexOf("7.0")>0&&r.css("left","-105px")}else{var c=parseInt(o)+parseInt(10)+parseInt(t.outerHeight());a.css("top",o+"px"),a.css("height",o),r.css("top",c+"px"),a.css("bottom","unset"),r.css("bottom","unset"),navigator.userAgent.indexOf("7.0")>0&&r.css("left","-105px")}}));let i=$('div.custom-hotspot[data-overlayId]:not([data-overlayId=""])');i.length&&i.each((function(){new MASERATI.OverlayComponent($(this))}))},MASERATI.V360InteriorOverlay.prototype.hotspotsTabNavigation=function(){var e=this;e.$panorama.find(".custom-hotspot").attr({tabindex:0,role:"button"}),MASERATI.Wcag.EnterBind(e.$panorama);let t=$(".custom-hotspot",e.$panorama);KEYCODE_TAB=9,KEYCODE_ESC=27,t.each((function(t,i){i.addEventListener("keydown",(function(t){if(t.keyCode!==KEYCODE_ESC&&("Tab"===t.key||t.keyCode===KEYCODE_TAB||t.keyCode===KEYCODE_ESC))if(t.shiftKey){var i=$(this)[0];let n=$(this).index()-2,s=e.viewer.getConfig().hotSpots[n];void 0!==s&&(t.preventDefault(),e.viewer.lookAt(s.pitch,s.yaw,e.viewer.hfov,1e3,(function(){$(i).prev().focus()})))}else{i=$(this)[0];let n=$(this).index(),s=e.viewer.getConfig().hotSpots[n];void 0!==s&&(t.preventDefault(),e.viewer.lookAt(s.pitch,s.yaw,e.viewer.hfov,1e3,(function(){$(i).next().focus()})))}}))}))},MASERATI.V360InteriorOverlay.prototype.changeScene=function(e){this.closeOverlay(),this.$el.hasClass("active")?this.viewer&&(this.viewer.isLoaded()?(this.$panorama.addClass("loading"),this.viewer.loadScene(e,this.viewer.getPitch(),this.viewer.getYaw(),this.viewer.getHfov())):(this.firstScene=e,this.refresh())):this.forceScene=e},MASERATI.V360InteriorOverlay.prototype.onShown=function(){this.$panorama.find(".pnlm-load-button").trigger("click"),this.$panorama.find(".pnlm-load-button, .pnlm-load-box").hide(),null!=this.forceScene&&this.forceScene!=this.viewer.getScene()&&this.changeScene(this.forceScene)}},function(e,t){MASERATI.V360Overlay=function(e){this.$el=e,this.$exterior=this.$el.children(".exterior"),this.$interior=this.$el.children(".interior"),this.$ctaOverlay=this.$el.find(".overlay .cta"),this.$vbuttons=this.$el.find(".view-buttons"),this.$vbtnInt=this.$vbuttons.children(".interior"),this.$vbtnExt=this.$vbuttons.children(".exterior"),this.$models=this.$el.find(".models .model"),this.$switchBtnLeft=this.$el.find(".a-left"),this.$switchBtnRight=this.$el.find(".a-right"),this.$bSwitchBtnLeft=this.$el.find(".b-left"),this.$bSwitchBtnRight=this.$el.find(".b-right"),this.documentDirection="rtl"===$("html").attr("dir")?"rtl":"ltr",this.loadComponent(),this.exteriorObj,this.interiorObj,this.switchingTimer,this.init()},MASERATI.V360Overlay.prototype.switchLeft=function(){var e=this.$switchBtnRight,t=this.$switchBtnLeft,i=this.$el.find(".a-active");e.removeClass("active-case"),t.addClass("active-case"),i.css("opacity","1"),i.css("left","0%"),setTimeout((function(){i.css("opacity","0")}),300)},MASERATI.V360Overlay.prototype.switchRight=function(){var e=this.$switchBtnRight,t=this.$switchBtnLeft,i=this.$el.find(".a-active");e.addClass("active-case"),t.removeClass("active-case"),i.css("opacity","1"),i.css("left","50%"),setTimeout((function(){i.css("opacity","0")}),300)},MASERATI.V360Overlay.prototype.bSwitchLeft=function(){var e=this.$bSwitchBtnRight,t=this.$bSwitchBtnLeft,i=this.$el.find(".b-active");e.removeClass("b-active-case"),t.addClass("b-active-case"),i.css("opacity","1"),i.css("left","0%"),setTimeout((function(){i.css("opacity","0")}),300)},MASERATI.V360Overlay.prototype.bSwitchRight=function(){var e=this.$bSwitchBtnRight,t=this.$bSwitchBtnLeft,i=this.$el.find(".b-active");e.addClass("b-active-case"),t.removeClass("b-active-case"),i.css("opacity","1"),i.css("left","50%"),setTimeout((function(){i.css("opacity","0")}),300)},MASERATI.V360Overlay.prototype.init=function(){window.innerHeight>window.innerWidth?this.$el.attr("data-orientation","portrait"):this.$el.attr("data-orientation","landscape");var e=this;this.$exterior.each((function(){e.exteriorObj=new MASERATI.V360ExteriorOverlay($(this),e)})),this.$interior.each((function(){e.interiorObj=new MASERATI.V360InteriorOverlay($(this),e)})),this.$vbtnInt.click((function(){e.showInterior()})),this.$vbtnExt.click((function(){e.showExterior()})),this.$models.click((function(){e.changeScene($(this))})),this.$switchBtnLeft.click((function(){e.switchLeft()})),this.$switchBtnRight.click((function(){e.switchRight()})),this.$bSwitchBtnLeft.click((function(){e.bSwitchLeft()})),this.$bSwitchBtnRight.click((function(){e.bSwitchRight()})),this.inViewHandler()},MASERATI.V360Overlay.prototype.showInterior=function(){this.swicthExtInt(this.$interior,this.$vbtnInt,this.$exterior,this.$vbtnExt);var e=this;requestAnimationFrame((function(){e.interiorObj.onShown()}))},MASERATI.V360Overlay.prototype.showExterior=function(){this.swicthExtInt(this.$exterior,this.$vbtnExt,this.$interior,this.$vbtnInt);var e=this;requestAnimationFrame((function(){e.exteriorObj.onShown()}))},MASERATI.V360Overlay.prototype.swicthExtInt=function(e,t,i,n){var s=this;e.show(),requestAnimationFrame((function(){n.removeClass("active"),i.removeClass("active"),t.addClass("active"),e.addClass("active"),s.switchingTimer&&clearTimeout(s.switchingTimer),s.switchingTimer=setTimeout((function(){i.hide()}),300)}))},MASERATI.V360Overlay.prototype.changeScene=function(e){if(!e.hasClass("active")){this.$models.removeClass("active"),e.addClass("active");var t=e.data("scene");this.interiorObj&&this.interiorObj.changeScene(t),this.exteriorObj&&this.exteriorObj.changeScene(t),this.showPriceModelActive()}},MASERATI.V360Overlay.prototype.scrollTo360Component=function(){var e=0,t=this.$el[0],i=$("body").find("#maserati_menu").length>0&&!$("body").find("#maserati_menu").hasClass("not-sticky");i=i||$("body").find("#maserati_menu_2018").length>0&&!$("body").find("#maserati_menu_2018").hasClass("not-sticky");var n=$("body").find(".nav-anchor").length>0;i&&(e=$("#maserati_menu").outerHeight()||$("#maserati_menu_2018").outerHeight()),n&&$(t).offset().top>$(window).height()&&(e=$("body").find(".nav-anchor").outerHeight()),$(t).velocity("scroll",{duration:MASERATI.Animations.ctaScrollSpeed,easing:MASERATI.Animations.ctaEasing,offset:-e})},MASERATI.V360Overlay.prototype.openOverlay=function(e,t,i){if(!t)return;console.log("Handling click on hotspot"),console.log(this.$el),this.scrollTo360Component(),console.log(i),t.index="rtl"===this.documentDirection?i-t.index-1:t.index,console.log(t);let n=$('[data-overlayElementId="'+t.overlayId+'"]');n.attr("data-index",t.index),n.trigger("indexChange"),$(e.srcElement||e).parents(t.container).find(".custom-hotspot").removeClass("active"),(e.srcElement||e).classList.add("active"),MASERATI.AdobeTracking.tracker.setV360Action(t.hotspostTracking+t.id),MASERATI.AdobeTracking.tracker.setSatelliteTrack("View360LinkEngage")},MASERATI.V360Overlay.prototype.changeCtaStyle=function(e,t){switch(t){case"white":e.attr("class","cta border-grey");break;default:e.attr("class","cta bg-blue color-white")}},MASERATI.V360Overlay.prototype.trapOverlayFocus=function(e){var t=this,i=e[0].querySelectorAll("a[href]:not([disabled]), .overlay-close, .overlay-description"),n=i[i.length-2],s=i[0],o=i[i.length-1];KEYCODE_TAB=9,KEYCODE_ESC=27,$(window).on("keydown",(function(i){i.keyCode===KEYCODE_ESC&&e.hasClass("opened")&&(t.exteriorObj.closeOverlay(),t.interiorObj.closeOverlay())})),s.addEventListener("keydown",(function(e){if("Tab"===e.key||e.keyCode===KEYCODE_TAB||e.keyCode===KEYCODE_ESC)if(e.shiftKey)document.activeElement===n&&(d.focus(),e.preventDefault());else if(e.keyCode===KEYCODE_ESC)t.exteriorObj.closeOverlay(),t.interiorObj.closeOverlay();else if(document.activeElement===s)return void e.preventDefault()})),n.addEventListener("keydown",(function(e){if("Tab"===e.key||e.keyCode===KEYCODE_TAB||e.keyCode===KEYCODE_ESC)if(e.shiftKey){if(document.activeElement===n)return void e.preventDefault()}else e.keyCode===KEYCODE_ESC&&(t.exteriorObj.closeOverlay(),t.interiorObj.closeOverlay())})),o.addEventListener("keydown",(function(i){i.keyCode===KEYCODE_ESC&&e.hasClass("opened")&&(t.exteriorObj.closeOverlay(),t.interiorObj.closeOverlay())})),i[1].focus()},MASERATI.V360Overlay.prototype.showPriceModelActive=function(){this.$el.hasClass("user-rotate-interaction")&&(this.$el.find(".single-model").removeClass("active-show-price"),this.$el.find(".models").find(".model.active").parent(".single-model").addClass("active-show-price"))},MASERATI.V360Overlay.prototype.inViewHandler=function(){var e=this;function t(){e.loadComponent()&&$(window).off("scroll",t)}$(window).on("scroll",t)},MASERATI.V360Overlay.prototype.loadComponent=function(){var e=this.$el.offset().top+.01*$(window).height();return e=e<0?0:e,!this.$el.hasClass("in-view")&&$(window).scrollTop()+$(window).height()>=e&&this.$el.addClass("in-view"),this.$el.hasClass("in-view")},$((function(){$(".v360Overlay.component").each((function(){new MASERATI.V360Overlay($(this))}))}))},function(e,t){MASERATI.AccordionItem=function(e){this.$el=e,this.loadComponent(),this.init()},MASERATI.AccordionItem.prototype.init=function(){this.bind()},MASERATI.AccordionItem.prototype.bind=function(){void 0!==this.$el.find(".overlayComponent")[0]&&this.$el.find(".overlayComponent")[0].addEventListener("closed",this.closeOverlay.bind(this)),this.$el.find(".more").on("click",this.moreButtonClick.bind(this)),this.inViewHandler()},MASERATI.AccordionItem.prototype.closeOverlay=function(){this.$el.toggleClass("active")},MASERATI.AccordionItem.prototype.moreButtonClick=function(e){e.preventDefault(),this.$el.toggleClass("active");var t=this.$el.find(".expanded"),i=this.$el.hasClass("active")?"slideDown":"slideUp";void 0!==this.$el.find(".more").attr("aria-expanded")&&this.$el.find(".more").attr("aria-expanded",this.$el.hasClass("active")?"true":"false");var n=$("#maserati_menu, #maserati_menu_2018");t.velocity("stop").velocity(i,{duration:300,complete:function(){t.velocity("scroll",{offset:-n.height(),duration:MASERATI.Animations.ctaScrollSpeed,easing:MASERATI.Animations.ctaEasing})}})},MASERATI.AccordionItem.prototype.inViewHandler=function(){var e=this;function t(){e.loadComponent()&&$(window).off("scroll",t)}$(window).on("scroll",t)},MASERATI.AccordionItem.prototype.loadComponent=function(){var e=this.$el.offset().top+.01*$(window).height();return e=e<0?0:e,!this.$el.hasClass("in-view")&&$(window).scrollTop()+$(window).height()>=e&&this.$el.addClass("in-view"),this.$el.hasClass("in-view")},$((function(){$(".accordion-item").each((function(){new MASERATI.AccordionItem($(this))}))}))},function(e,t){MASERATI.MHEV=function(e){this.$el=e,this.slides=this.$el.find(".slides").find(".slide"),this.currentIndex=0,this.slidesNum=this.$el.find(".slides").find(".slide").length,this.blockScroll=!1,this.slowTime=1500,this.fastTime=750,this.interaction=0,this.bind(),this.resize(),$(window).scrollTop(0)},MASERATI.MHEV.prototype.resize=function(){this.slides.each((function(){var e=$(this),t=e.find(".text"),i=e.find(".image-container");"block"==i.find(".image.portrait").css("display")?(i.find(".image.portrait").css("height","100%"),i.find(".image-box").css("height","calc(100% - "+t.outerHeight()+"px)")):(i.find(".image.portrait").css("height","auto"),i.find(".image-box").css("height","auto")),"center"!=i.data("vpos")&&"center"==i.data("hpos")&&"none"==i.find(".image.portrait").css("display")&&(i.find(".image").not(".portrait").css("height","100%"),i.find(".image-box").css("height","calc(100% - "+t.outerHeight()+"px)"))}))},MASERATI.MHEV.prototype.bind=function(){var e=this;$(window).on("resize",(function(){e.resize()})),$(window).bind("touchstart",(function(e){ts=e.originalEvent.touches[0].clientY})),e.$el.data("finish",!1),$(window).on("touchend",(function(t){e.scrollHandler(t,e)})),$(window)[0].addEventListener("wheel",(function(t){e.scrollHandler(t,e)})),this.slides.eq(this.currentIndex).addClass("current")},MASERATI.MHEV.prototype.scrollHandler=function(e,t){switch(e.type){case"touchend":var i=e.originalEvent.changedTouches[0].clientY;ts>i+5?n="scrollDown":ts<i-5&&(n="scrollUp");break;case"wheel":var n=e.deltaY>0?"scrollDown":"scrollUp"}scrollTopBK=$(window).scrollTop();var s=t.$el.offset().top-$("body").find(".new-menu").height();if(!t.$el.hasClass("fixed")&&(scrollTopBK>=s&&!t.$el.data("finish")&&"scrollDown"==n||scrollTopBK<=s&&t.$el.data("finish")&&"scrollUp"==n))return t.$el.addClass("fixed"),$("body").addClass("blocked-scroll"),$("body").find(".new-menu.stuck").css("width","100%"),void(0==t.interaction&&(t.scrollDown(),t.interaction++));if(t.$el.hasClass("fixed")&&!t.blockScroll)switch(t.interaction++,t.interaction>1&&t.$el.find(".discover-more").fadeOut("slow"),n){case"scrollDown":t.scrollDown()?(console.log("scrollDown: "+t.blockScroll),MASERATI.ScrollController.scrollBlock=!0):(MASERATI.ScrollController.scrollBlock=!1,t.$el.removeClass("fixed"),$("body").removeClass("blocked-scroll"),t.$el.data("finish",!0),$(window).scrollTop(s));break;case"scrollUp":t.scrollUp()?MASERATI.ScrollController.scrollBlock=!0:(MASERATI.ScrollController.scrollBlock=!1,t.$el.removeClass("fixed"),$("body").removeClass("blocked-scroll"),t.$el.data("finish",!1),$(window).scrollTop(s))}},MASERATI.MHEV.prototype.scrollUp=function(){switch(this.slides.eq(this.currentIndex).data("status")){case"entrance":return this.animation(this.currentIndex,"entrance",!0),!0;case"exit":return this.animation(this.currentIndex,"exit",!0),!0;case"":return this.prevSlide()}return!1},MASERATI.MHEV.prototype.scrollDown=function(){switch(this.slides.eq(this.currentIndex).data("status")){case"":return this.animation(this.currentIndex,"entrance",!1),!0;case"entrance":return this.animation(this.currentIndex,"exit",!1),!0;case"exit":return this.nextSlide()}return!1},MASERATI.MHEV.prototype.nextSlide=function(){return!(this.currentIndex>=this.slidesNum-1)&&(this.slides.eq(this.currentIndex).removeClass("current"),this.slides.eq(this.currentIndex+1).attr("class","slide"),this.currentIndex++,this.slides.eq(this.currentIndex).addClass("current"),this.animation(this.currentIndex,"entrance",!1),!0)},MASERATI.MHEV.prototype.prevSlide=function(){return!(this.currentIndex<=0)&&(this.slides.eq(this.currentIndex).removeClass("current"),this.currentIndex--,this.slides.eq(this.currentIndex).addClass("current"),!0)},MASERATI.MHEV.prototype.positionShape=function(){this.slides.closest(".current").each((function(){var e=$(this),t=e.find(".shape"),i=e.find(".image-box");if(!(e.find(".image-box").find(".image").length<=0)){if(e.find(".image-box").find(".image.portrait").is(":visible"))var n=e.find(".image-box").find(".image.portrait");else n=e.find(".image-box").find(".image").not(".portrait");t.css("top",i.position().top+n.position().top+n.height()/2-t.height()/2),t.css("left",i.position().left+n.position().left+n.width()/2-t.width()/2)}}))},MASERATI.MHEV.prototype.animation=function(e,t,i){this.positionShape(),this.blockScroll=!0;var n=this,s=this.slides.eq(e);s.attr("data-status",t),s.data("status",t);var o=s.data("animation")[t],a=o.background.indexOf("Fast")>0?n.fastTime:o.background.length>0?n.slowTime:0,r=o.text.indexOf("Fast")>0?n.fastTime:o.text.length>0?n.slowTime:0,l=o.image.indexOf("Fast")>0?n.fastTime:o.image.length>0?n.slowTime:0,d=i?"Rewind":"",c=a;r>c&&(c=r),l>c&&(c=l),s.find(".background").attr("data-animate",o.background+d),s.find(".text").attr("data-animate",o.text+d),s.find(".image-container").attr("data-animate",o.image+d),this.animationSlide(o.image+d,s.find(".image-box"),s.find(".image-container"),i),setTimeout((function(){if(i)switch(s.data("status")){case"entrance":s.attr("data-status",""),s.data("status","");break;case"exit":s.attr("data-status","entrance"),s.data("status","entrance")}else switch(s.data("status")){case"entrance":s.data("skip")&&n.animation(n.currentIndex,"exit",!1)}n.blockScroll=!1}),c)},MASERATI.MHEV.prototype.animationSlide=function(e,t,i,n){var s=i.height()-t.height(),o=i.width()-t.width(),a=e.indexOf("Out")>=0,r=e.indexOf("Slow")>=0?this.slowTime:this.fastTime;if(MASERATI.Helpers.Mobile.isMobile()&&this.$el.find(".image.portrait").is(":visible")){if(e.startsWith("slideToLeft"))return void i.animate({bottom:n?0:s,opacity:a&&!n?0:1},r);if(e.startsWith("slideToRight"))return void i.animate({top:n?0:s,opacity:a&&!n?0:1},r)}e.startsWith("slideToLeft")?i.animate({right:n?0:o,opacity:a&&!n?0:1},r):e.startsWith("slideToRight")?i.animate({left:n?0:o,opacity:a&&!n?0:1},r):e.startsWith("slideToTop")?i.animate({bottom:n?0:s,opacity:a&&!n?0:1},r):e.startsWith("slideToBottom")&&i.animate({top:n?0:s,opacity:a&&!n?0:1},r)},$((function(){$(".mhev").each((function(){new MASERATI.MHEV($(this))}))}))},function(e,t){MASERATI.CtaToolBuildPrice=function(e){this.$activeClass="subActive",this.$el=e,this.$tooltip=this.$el.find(".tooltip"),this.compares=0,this.maxCompares=4,this.init()},MASERATI.CtaToolBuildPrice.prototype.init=function(){this.reset(),this.bind(),this.mobileInit(),this.toggleModelYear(),this.selectModel(),this.initStandardEquipement()},MASERATI.CtaToolBuildPrice.prototype.bind=function(){var e=this,t=$(window).width();e.$el.find(".custom-select").on("click",(function(){$(this).toggleClass("open")}));var i=e.$el.find(".desktop").find(".models").find(".model");i.on("mouseenter focusin",(function(){e.enterModel($(this))})),i.on("mouseleave focusout",(function(){e.exitModel($(this))})),i.on("click",(function(t){t.preventDefault(),e.toggleSubElement($(this))})),e.$el.find('form[name=country] input[type="submit"]').on("click",(function(t){return t.preventDefault(),e.$el.find(".countrySelectorContainer").velocity("slideUp",500),e.$el.find(".generalContainer").velocity("slideDown",{duration:500,delay:500}),!1})),e.checkHash(),this.$el.find(".cta-tool-build-price__error .close").on("click",(function(){e.$el.find(".cta-tool-build-price__error").velocity("slideUp")})),this.$el.find(".load-configuration__error .close").on("click",(function(){e.$el.find(".load-configuration__error").velocity("slideUp")})),this.$el.find("form.load-configuration__form").submit((function(t){return e.$el.find(".configurationcode_popuphelp").hide(),e.validateConfigurationLoad($(this))}));var n=this.$el.find(".help-tooltip-anchor");n.on("mouseenter focusin",(function(){e.showOnHover()&&e.$tooltip.velocity("fadeIn",{duration:300})})),n.on("mouseleave focusout",(function(){e.showOnHover()&&e.$tooltip.hide()})),n.on("click",(function(t){t.preventDefault(),e.showOnClick()&&e.$tooltip.toggle()})),this.$el.find(".models").on("keydown",(function(t){e.switchTab(t)})),this.$tooltip.find(".close").on("click",(function(t){t.preventDefault(),e.$tooltip.hide()})),this.$el.find(".desktop").find(".add-compare-container").find("[type=checkbox]").on("click",(function(){if($(this).prop("checked")){$(this).closest(".model").clone(!0,!0).insertBefore(e.$el.find(".sub-models.compare-tab-container").find(".model.selectors").first()),e.compares++}else{var t=$(this).attr("id");e.$el.find(".checkbox-alias[for="+t+"]").eq(1).closest(".model").remove(),e.compares--}if(e.compares>1?e.$el.find(".desktop").find(".compare-button").removeClass("hide"):e.$el.find(".desktop").find(".compare-button").addClass("hide"),e.compares>e.maxCompares){var i=e.$el.find(".compare-tab-container").find(".model.visible").last().find(".add-compare-container").find("label.checkbox-alias").attr("for");e.$el.find("#"+i).eq(0).click()}0==e.compares&&e.$el.find(".legend").addClass("hide")})),this.$el.find(".mobile").find(".add-compare-container").find("[type=checkbox]").on("click",(function(){$(this).prop("checked")?e.compares++:e.compares--,e.compares>1?e.$el.find(".mobile").find(".compare-button").removeClass("hide"):e.$el.find(".mobile").find(".compare-button").addClass("hide")})),e.$el.find(".desktop").find(".compare-button").click((function(){e.$el.find(".model.compare-tab").click()})),e.$el.find(".mobile").find(".compare-button").on("click",(function(){e.$el.find(".mobile").find(".compare-tab").removeClass("hide")})),e.$el.find("select.trims").change((function(){var t=$(this).find("option:selected").index(),i=$(this).closest(".model");i.find(".accordion-container").addClass("hidden"),i.find(".accordion-container").eq(t-1).removeClass("hidden"),i.$el.find("select").removeClass("open"),e.$el.find(".legend").removeClass("hide")})),e.$el.find(".accordion-header").on("click",(function(){var t=$(this).parent();t.hasClass("collapsed")?(e.$el.find(".accordion").addClass("collapsed"),e.$el.find(".model").find(".accordion-container").each((function(){$(this).find(".accordion").eq(t.index()).removeClass("collapsed")}))):e.$el.find(".accordion").addClass("collapsed")})),e.$el.find(".standard-equipment").find(".detail-container").find(".nav-anchor-equipment").find(".anchor").on("click",(function(){e.scrollSemaphone=!0;var t=$(this);t.siblings().removeClass("selected"),t.addClass("selected");var i=t.closest(".detail-container").find(".scroll-section"),n=t.data("anchorid"),s=i.find('[data-anchorid="'+n+'"]').position().top;i.animate({scrollTop:s},400,(function(){e.CenterMobileAnchors(200),setTimeout((function(){e.scrollSemaphone=!1}),200)}))})),e.$el.find(".standard-equipment").find(".close, .closer-panel").on("click",(function(){$(this).closest(".standard-equipment").removeClass("show"),$("body").removeClass("locked")})),e.$el.find(".standard-equipment-button").on("click",(function(){$(this).closest(".model").find(".standard-equipment").addClass("show"),$("body").addClass("locked")})),e.$el.find(".standard-equipment").find(".detail-container").find(".scroll-section").scroll((function(t){if(e.scrollSemaphone)return t.preventDefault(),!1;var i=$(this);i.find(".equipment-container").each((function(t,n){if($(this).position().top>=0){var s=$(this).data("anchorid");return i.siblings(".nav-anchor-equipment").find(".anchor").removeClass("selected"),i.siblings(".nav-anchor-equipment").find('[data-anchorid="'+s+'"]').addClass("selected"),e.CenterMobileAnchors(0),!1}}));var n=$(this).siblings(".nav-anchor-equipment").find(".anchor");n.each((function(){var e=$(this).data("anchorid"),t=i.find('[data-anchorid="'+e+'"]');!$(this).hasClass("selected")&&i.scrollTop()>=t.position().top&&i.scrollTop()<=t.position().top+t.outerHeight()&&(n.removeClass("selected"),$(this).addClass("selected"))}))}));$(window).on("resize",MASERATI.Helpers.debounce(function(){$(window).width()!==t&&(this.onResize(),t=$(window).width())}.bind(this),500))},MASERATI.CtaToolBuildPrice.prototype.initStandardEquipement=function(){this.$el.find(".standard-equipment").each((function(){$(this).find(".detail-container").find(".nav-anchor-equipment").find(".anchor").first().addClass("selected")}))},MASERATI.CtaToolBuildPrice.prototype.CenterMobileAnchors=function(e){if(this.isMobile()){for(var t=0,i=this.$el.find(".standard-equipment.show").find(".anchor.selected"),n=0;n<i.index();n++)t+=this.$el.find(".standard-equipment.show").find(".nav-anchor-equipment").find(".anchor").eq(n).innerWidth();var s=this.$el.find(".standard-equipment.show").find(".nav-anchor-equipment").innerWidth(),o=i.innerWidth();position=t+(o/2-s/2),this.$el.find(".standard-equipment.show").find(".nav-anchor-equipment").animate({scrollLeft:position},e,(function(){}))}},MASERATI.CtaToolBuildPrice.prototype.isMobile=function(){return"none"!=this.$el.find(".mobile").css("display")},MASERATI.CtaToolBuildPrice.prototype.reset=function(){var e=this.$el.find('[id^="compareCheckBox"]');e.length>0&&e.prop("checked",!1)},MASERATI.CtaToolBuildPrice.prototype.selectModel=function(){var e=this,t=this.$el.find(".model.selectors");t.find(".custom-select.models").on("change",(function(){var e=$(this).find(":selected"),i=t.find(".custom-select.versions");i.find("option").hide(),i.find('option[data-filter="'+e.data("value")+'"]').show(),i.removeClass("blocked")})),t.find(".custom-select.versions").on("change",(function(){var i=$(this).find(":selected").text(),n=e.$el.find('.model[data-model="'+i+'"]');n.find('.btnMY[data-model="'+i+'"]').click(),n.find(".add-compare-container").find("[type=checkbox]").click(),t.find(".custom-select.versions").val(t.find(".custom-select.versions").find("option").eq(0).text()),t.find(".custom-select.versions").addClass("blocked"),t.find(".custom-select.models").val(t.find(".custom-select.models").find("option").eq(0).text())}))},MASERATI.CtaToolBuildPrice.prototype.showOnHover=function(){return!MASERATI.Helpers.Mobile.isMobile()},MASERATI.CtaToolBuildPrice.prototype.showOnClick=function(){return!this.showOnHover()},MASERATI.CtaToolBuildPrice.prototype.validateConfigurationLoad=function(e){if(null===e.find("input[name=configurationcode]").val().match(/[a-zA-Z0-9]{4,6}/)){var t=e.parents(".load-configuration-wrapper").find(".load-configuration__error");return t.velocity("slideDown",(function(){MASERATI.Helpers.Mobile.isMobile()&&t.velocity("scroll",{offset:-$("#maserati_menu, #maserati_menu_2018").height(),duration:MASERATI.Animations.ctaScrollSpeed,easing:MASERATI.Animations.ctaEasing})})),!1}return this.$el.find(".load-configuration__error").velocity("slideUp"),!0},MASERATI.CtaToolBuildPrice.prototype.checkHash=function(e){var t=window.location.hash,i=/bp-([a-zA-Z\d\-]+)/.exec(t);if(null!==i){var n=this.$el.find(".models").find('.model[data-model="'+i[1]+'"]');this.toggleSubElement(n)}},MASERATI.CtaToolBuildPrice.prototype.switchTab=function(e){if(this.$el.hasClass(this.$activeClass)){var t=this.$el.find(".models .row .model."+this.$activeClass);37===e.keyCode?(t.attr("tabindex","-1"),e.preventDefault(),t.is(":first-child")?this.$el.find(".models .row .model").last().attr("tabindex","0").trigger("click"):t.prev().attr("tabindex","0").trigger("click")):39===e.keyCode&&(e.preventDefault(),t.attr("tabindex","-1"),t.is(":last-child")?this.$el.find(".models .row .model").first().attr("tabindex","0").trigger("click"):t.next().attr("tabindex","0").trigger("click"))}},MASERATI.CtaToolBuildPrice.prototype.enterModel=function(e){this.$el.hasClass(this.$activeClass)?e.removeClass("unhighlighted"):(e.siblings().not("."+this.$activeClass).addClass("unhighlighted"),e.removeClass("unhighlighted"))},MASERATI.CtaToolBuildPrice.prototype.exitModel=function(e){this.$el.hasClass(this.$activeClass)?e.hasClass(this.$activeClass)||e.addClass("unhighlighted"):(e.removeClass("unhighlighted"),e.siblings().not("."+this.$activeClass).removeClass("unhighlighted"))},MASERATI.CtaToolBuildPrice.prototype.toggleSubElement=function(e){$(e).focus();var t=e.data("tab"),i=$("#table-"+t);i.is(":visible")?(e.removeClass(this.$activeClass),this.$el.removeClass(this.$activeClass),i.hide(),$(e).attr("aria-selected","false"),$(e).siblings("aria-selected","false"),$(e).attr("role","button"),$(e).siblings().attr("role","button"),$(e).siblings().attr("tabindex","0")):(e.addClass(this.$activeClass).siblings(".model").removeClass(this.$activeClass).addClass("unhighlighted"),this.$el.addClass(this.$activeClass),i.siblings(".sub-models").hide(),i.css("display","table"),$(e).attr("aria-selected","true"),$(e).siblings().attr("aria-selected","false"),$(e).attr("role","tab"),$(e).siblings().attr("role","tab"),$(e).siblings().attr("tabindex","-1"),$(e).attr("tabindex","0"))},MASERATI.CtaToolBuildPrice.prototype.mobileInit=function(){var e=this,t=$("#maserati_menu, #maserati_menu_2018");this.$el.find(".mobile > .model").on("click",(function(){var i="#table-"+$(this).data("tab");MASERATI.Helpers.getWindowWidth()<768&&$(i+"-smartphone").length&&(i+="-smartphone"),e.$el.find(".active").not($(this)).not(i).removeClass("active"),$(this).add(i).toggleClass("active");var n=$(i),s=$(".dealer-intro-title__text.maserati_menu_otherelement"),o=s.length?t.height()+s.outerHeight():t.height();n.hasClass("active")&&n.velocity("scroll",{offset:t.length?-o:0,duration:MASERATI.Animations.ctaScrollSpeed,easing:MASERATI.Animations.ctaEasing})}))},MASERATI.CtaToolBuildPrice.prototype.onResize=function(){this.$el.removeClass("subActive").find(".subActive, .active").removeClass("subActive active"),this.$el.find(".desktop .sub-models").hide()},MASERATI.CtaToolBuildPrice.prototype.toggleModelYear=function(){this.$el.find(".btnMY").on("click",(function(){var e=$(this).attr("data-my"),t=$(this).parent().parent().parent();t.find(".btnMY").removeClass("activeMY"),t.find('div[data-my="'+e+'"]').addClass("activeMY"),t.find('div[data-my="'+e+'"]').removeClass("triggerMY"),t.find(".model").removeClass("visible"),t.find('div[data-attribute="'+e+'"]').addClass("visible"),t.find('div[data-attribute="'+e+'"]').find('div[data-my="'+e+'"]').focus()}))},$((function(){$(".cta-tool-build-price").each((function(){new MASERATI.CtaToolBuildPrice($(this))}))}))},function(e,t,i){MASERATI.ScrollController=function(){this.scrollBlock=!1,this.init(),this.bindEvents(),this.safeTime=150,this.animationTime=250;let e=MASERATI.Helpers.getUrlParameter("safeTime");e&&""!=e&&void 0!==e&&(console.log("safe time"+e),this.safeTime=e);let t=MASERATI.Helpers.getUrlParameter("animationTime");t&&""!=t&&void 0!==t&&(console.log("animationTime"+t),this.animationTime=t)},MASERATI.ScrollController.prototype.init=function(){this.scrollableAnchors=$(".c-anchor")},MASERATI.ScrollController.prototype.bindEvents=function(){var e=this;$(window).bind("mousewheel DOMMouseScroll",(function(t){clearTimeout($.data(this,"scrollTimer")),$.data(this,"scrollTimer",setTimeout((function(){e.scrollCheck(t)}),e.safeTime))})),$(document).keyup((function(t){var i=t.keyCode?t.keyCode:t.which;"34"==i?e.scrollDown():"33"==i&&e.scrollUp()}))},MASERATI.ScrollController.prototype.scrollCheck=function(e){e.originalEvent.wheelDelta>0||e.originalEvent.detail<0?this.scrollUp():this.scrollDown()},MASERATI.ScrollController.prototype.scrollUp=function(){var e=!this.scrollBlock,t=$("#maserati_menu_2018 .content").height();let i=this;$(this.scrollableAnchors.get().reverse()).each((function(n,s){if(s.getBoundingClientRect().top>=t&&e&&s.getBoundingClientRect().top<=120+t)return console.log("Safe Area "+s.getBoundingClientRect().top),!1;if(s.getBoundingClientRect().top<=t&&e){var o=$(s).offset().top-t;return $("html, body").animate({scrollTop:o},i.animationTime,(function(){return!1})),!1}}))},MASERATI.ScrollController.prototype.scrollDown=function(){var e=this,t=!this.scrollBlock;$(e.scrollableAnchors).each((function(i,n){if(e.itemInViewPort(n)&&i+1<=e.scrollableAnchors.length&&t){var s=$(e.scrollableAnchors[i]).offset().top,o=$("#maserati_menu_2018 .content").height();return s=s-$(e.scrollableAnchors[i]).height()-o,$("html, body").animate({scrollTop:s},e.animationTime,(function(){return!1})),!1}}))},MASERATI.ScrollController.prototype.itemInViewPort=function(e){var t=e.getBoundingClientRect(),i=$("#maserati_menu_2018 .content").height();return t.top>=i&&t.left>=0&&t.right<=window.innerWidth&&t.bottom+70<=window.innerHeight},$((function(){$("body[data-scrollblock='true']").length>0&&(MASERATI.ScrollController=new MASERATI.ScrollController)}))},function(e,t){MASERATI.MClassicSingleModel=function(e){this.$element=e,this.$galleryContainer=e.find(".classic__description__gallery__container"),this.$controls=e.find(".classic__description__gallery__controls"),this.$images=this.$galleryContainer.find(".classic__description__image"),this.$imagesTags=this.$galleryContainer.find(".classic__description__image img"),this.$currentImage=$(this.$images.get(0)),this.init(),this.isAnimating=!1,this.preventClick=!1,this.animatingClass="animating"},MASERATI.MClassicSingleModel.prototype.onImgLoad=function(e,t){$(e).each((function(){this.complete||$(this).height()>0?t.apply(this):$(this).on("load",(function(){t.apply(this)}))}))},MASERATI.MClassicSingleModel.prototype.init=function(){this.setupEnvironment(),this.createNavigation(),this.setupEvents()},MASERATI.MClassicSingleModel.prototype.setupEnvironment=function(){this.$currentImage.addClass("current");var e=this;this.onImgLoad(this.$imagesTags.get(0),(function(){e.updateGalleryHeight(e.$currentImage),e.$galleryContainer.addClass("loaded")}))},MASERATI.MClassicSingleModel.prototype.createNavigation=function(){this.$images.each(function(e,t){t.dataset.image=e+1,this.$controls.append($("<div>",{class:"description__gallery__button"+(0===e?" current":""),"data-image":e+1}))}.bind(this))},MASERATI.MClassicSingleModel.prototype.setupEvents=function(){this.$controls.find(".description__gallery__button").each(function(e,t){$(t).click(this.goToImage.bind(this,t.dataset.image))}.bind(this)),this.$images.each(function(e,t){$(t).on("transitionend",function(){window.requestAnimationFrame(function(){this.isAnimating=!1,this.preventClick=!1,$(t).removeClass(this.animatingClass+" to-left to-right from-left from-right")}.bind(this))}.bind(this))}.bind(this)),$(window).on("resize",MASERATI.Helpers.debounce(function(){this.updateGalleryHeight(this.$currentImage),$(window).width()<768&&(this.preventClick=!1)}.bind(this),250)),this.$galleryContainer.on("swipeleft",function(){this.preventClick||(this.preventClick=!0,this.goToNext())}.bind(this)),this.$galleryContainer.on("swiperight",function(){this.preventClick||(this.preventClick=!0,this.goToPrev())}.bind(this)),this.$element.find(".classic__description__gallery__next").on("click",function(){this.preventClick||this.goToNext()}.bind(this)),this.$element.find(".classic__description__gallery__prev").on("click",function(){this.preventClick||this.goToPrev()}.bind(this))},MASERATI.MClassicSingleModel.prototype.goToImage=function(e){if(!this.isAnimating){var t=this.$controls.find(".description__gallery__button.current").index()+1;if(t!==(e=parseInt(e))){this.isAnimating=!0;var i=e>t?"from-right":"from-left",n=e>t?"to-left":"to-right";this.$controls.find(".description__gallery__button.current").removeClass("current"),$(this.$controls.find(".description__gallery__button").get(e-1)).addClass("current");var s=this.$images.parent().find('[data-image="'+e+'"]');s.addClass(i),this.$currentImage.addClass(this.animatingClass),window.requestAnimationFrame(function(){window.requestAnimationFrame(function(){s.addClass(this.animatingClass+" current"),this.$currentImage.addClass(n),this.$currentImage.removeClass("current"),this.$currentImage=s}.bind(this))}.bind(this))}}},MASERATI.MClassicSingleModel.prototype.goToNext=function(){var e=this.$images.length,t=parseInt(this.$currentImage.get(0).dataset.image)+1;t>e?$(this.$controls.find(".description__gallery__button").get(0)).trigger("click"):$(this.$controls.find(".description__gallery__button").get(t-1)).trigger("click")},MASERATI.MClassicSingleModel.prototype.goToPrev=function(){var e=this.$images.length,t=parseInt(this.$currentImage.get(0).dataset.image)-1;t<=0?$(this.$controls.find(".description__gallery__button").get(e-1)).trigger("click"):$(this.$controls.find(".description__gallery__button").get(t-1)).trigger("click")},MASERATI.MClassicSingleModel.prototype.updateGalleryHeight=function(e){var t=Math.max.apply(null,this.$images.find("img").map((function(){return $(this).height()})).get());this.$galleryContainer.css("height",t),e.find("img").css("top",t/2)},$((function(){$(".classic__model__description").each((function(){new MASERATI.MClassicSingleModel($(this))}))}))},function(e,t){MASERATI.MClassicSearch=function(e){this.$element=e,this.$container=e.find(".classic__models__container"),this.$placeHolder=this.$element.find(".classic__search__selectors--placeholder"),this.$selects=e.find(".classic__search__selectors select"),this.$familySelect=this.$selects.parent().find('[data-search="family"]'),this.$versionSelect=this.$selects.parent().find('[data-search="version"]'),this.$yearsSelect=this.$selects.parent().find('[data-search="years"]'),this.$familyOptions=this.$familySelect.find('option:not([value="*"])'),this.$versionsOptions=this.$versionSelect.find('option:not([value="*"])'),this.$yearsOptions=this.$yearsSelect.find('option:not([value="*"])'),this.$clonedFamilySelectOptions=this.$familyOptions.clone(),this.$clonedVersionSelectOptions=this.$versionsOptions.clone(),this.$clonedYearsSelectOptions=this.$yearsOptions.clone(),this.$currentFamily=this.getCurrentFamily(),this.$currentVersion=this.getCurrentVersion(),this.$currentYears=this.getCurrentYears(),this.selects=this.getSelectsJSON(),this.isScrollingToResults=!1,this.shouldScrollAfterReflow=!1,this.shouldScrollAtAll=!1,this.layoutInverted=!1,this.init()},MASERATI.MClassicSearch.prototype.init=function(){this.normalizeFamilyOptions(),this.loadFilters(),this.setupFilterEvents(),this.initWaypoints(),this.initIsotope(),this.setupIsotopeEvents(),this.setupResizeEvents(),this.setupClickEvent(),this.renewFilters(!0),this.recalcPlaceholderMargin()},MASERATI.MClassicSearch.prototype.initIsotope=function(){window.isotopic=this.$isotopeElement=this.$container.isotope({itemSelector:".classic__models__model",layoutMode:"packery",percentPosition:!0,packery:{gutter:20},visibleStyle:{opacity:1},hiddenStyle:{opacity:0},getSortData:{order:"[data-order] parseInt"},sortBy:"order",transitionDuration:200})},MASERATI.MClassicSearch.prototype.getCurrentFamily=function(){return this.$familySelect.find(":selected")},MASERATI.MClassicSearch.prototype.getCurrentVersion=function(){return this.$versionSelect.find(":selected")},MASERATI.MClassicSearch.prototype.getCurrentYears=function(){return this.$yearsSelect.find(":selected")},MASERATI.MClassicSearch.prototype.getSelectsJSON=function(){return{family:{select:this.$familySelect,options:this.$familyOptions,current:this.$currentFamily},version:{select:this.$versionSelect,options:this.$versionsOptions,current:this.$currentVersion},years:{select:this.$yearsSelect,options:this.$yearsOptions,current:this.$currentYears}}},MASERATI.MClassicSearch.prototype.updateCurrentSelectedValues=function(){this.selects.family.current=this.getCurrentFamily(),this.selects.version.current=this.getCurrentVersion(),this.selects.years.current=this.getCurrentYears()},MASERATI.MClassicSearch.prototype.setupFilterEvents=function(e){this.$selects.each(function(e,t){$(t).change(function(){this.saveFilters(),this.renewFilters(),this.updateCurrentSelectedValues(),this.checkNoResultsStatus()}.bind(this))}.bind(this)),this.$selects.click(function(){this.shouldScrollAfterReflow=!0}.bind(this)),this.selects.family.select.change(function(e){this.checkOriginalEvent(e,this.familyChangeHandler.bind(this))}.bind(this)),this.selects.version.select.change(function(e){this.checkOriginalEvent(e,this.versionChangeHandler.bind(this))}.bind(this)),this.selects.years.select.change(function(e){this.checkOriginalEvent(e,this.yearsChangeHandler.bind(this))}.bind(this))},MASERATI.MClassicSearch.prototype.checkOriginalEvent=function(e,t){void 0!==e.originalEvent&&t()},MASERATI.MClassicSearch.prototype.familyChangeHandler=function(){MASERATI.Helpers.log("familyChangeHandler"),this.setupSwitchLayout(),MASERATI.Helpers.log("resetting years"),this.resetYearsIfWillNotBeShown(this.selects.family),MASERATI.Helpers.log("updating years"),this.shouldDependOnFamily(this.selects.years),MASERATI.Helpers.log("resetting versions"),this.shouldResetVersions(),MASERATI.Helpers.log("updating versions"),this.shouldDependOnYearsAndFamilies(this.selects.version),this.autoSelectLoneOptions()},MASERATI.MClassicSearch.prototype.versionChangeHandler=function(){MASERATI.Helpers.log("versionChangeHandler");var e=this.getCurrentFamily().val(),t=this.getCurrentVersion().val(),i=this.selects.version.current[0].dataset.category;MASERATI.Helpers.log("cur family",e,"curVersionFamily ",i),"*"!==t?(MASERATI.Helpers.log("Reset years"),this.resetYearsIfWillNotBeShown(this.selects.version),MASERATI.Helpers.log("Years depend on versions"),this.shouldDependOnVersions(this.selects.years),"*"===e&&(MASERATI.Helpers.log("Families  depend on versions"),this.shouldDependOnVersions(this.selects.family),MASERATI.Helpers.log("Versions updated based on family"),this.resetSelectOptions(this.selects.version),this.$clonedVersionSelectOptions.each(function(e,n){n.dataset.category===i&&(n.dataset.category==t&&(n.selected="selected"),this.$versionSelect.append(n))}.bind(this)))):"*"!==e&&(MASERATI.Helpers.log("Reset years"),this.resetYearsIfWillNotBeShown(this.selects.version),MASERATI.Helpers.log("Current family is selected, years based on family"),this.shouldDependOnFamily(this.selects.years))},MASERATI.MClassicSearch.prototype.yearsChangeHandler=function(){MASERATI.Helpers.log("yearsChangeHandler"),this.allFamiliesSelected()?this.shouldDependOnYears(this.selects.version):(MASERATI.Helpers.log("a family is selected, do not filter families based on years"),this.allVersionsSelected()||(MASERATI.Helpers.log("a version is selected, deselect if it will not be shown"),this.resetVersionIfWillNotBeShown(this.selects.years)),this.shouldDependOnYearsAndFamilies(this.selects.version)),this.autoSelectLoneOptions()},MASERATI.MClassicSearch.prototype.initWaypoints=function(){$(".classic__search__selectors").waypoint({handler:function(e){"up"===e?$(".classic__search__selectors").removeClass("stickied"):$(".classic__search__selectors").addClass("stickied")},offset:$("#maserati_menu, #maserati_menu_2018").height()}),$(".classic__search__models").waypoint({handler:function(e){"up"===e?$(".classic__search__back").removeClass("stickied"):$(".classic__search__back").addClass("stickied")},offset:$("#maserati_menu, #maserati_menu_2018").height()}),$(".classic__search__models").waypoint({handler:function(e){MASERATI.Helpers.log("stick bottom in view",e),"up"===e?$(".classic__search__back").removeClass("toBottom"):$(".classic__search__back").addClass("toBottom")},offset:"bottom-in-view"})},MASERATI.MClassicSearch.prototype.setupIsotopeEvents=function(){this.$isotopeElement.on("layoutComplete",this.waitTransitionAndReLayout.bind(this))},MASERATI.MClassicSearch.prototype.setupResizeEvents=function(){$(window).on("resize",this.debounce(function(){this.$element.find(".classic__models__model").each(function(e,t){$(t).find(".classic__model__content__container").css("height",$(t).outerHeight()),$(t).find(".classic__model__content__container").css("width",$(t).outerWidth())}.bind(this)),this.recalcPlaceholderMargin()}.bind(this),150))},MASERATI.MClassicSearch.prototype.setupSwitchLayout=function(){MASERATI.Helpers.log("switch layout"),this.layoutInverted=!this.layoutInverted},MASERATI.MClassicSearch.prototype.setupClickEvent=function(){this.$element.find(".classic__search__back").click((function(){var e=$("#maserati_menu, #maserati_menu_2018").outerHeight()+30;$(".classic__search__selectors").velocity("scroll",{duration:500,easing:"easeOutCubic",offset:-e,complete:function(){}})})),this.$element.find(".classic__models__model").each((function(e,t){$(t).click((function(){window.location=$(this).find(".classic__model__cta a").attr("href")}))}))},MASERATI.MClassicSearch.prototype.renewFilters=function(e){var t=$(this.$isotopeElement.isotope("getItemElements"));if(e){var i=!1;this.reflowElements(t),t.one("transitionend",(function(){i=!0}));var n=function(){this.$isotopeElement.isotope("layout"),i||window.requestAnimationFrame(n)}.bind(this);n()}this.lastFilters=void 0===this.lastFilters?"*":this.lastFilters;var s=this.getFiltersValues(),o=function(){return"*"===this.lastFilters?t:this.$container.find(this.lastFilters)}.bind(this)(),a=function(){return"*"===s?t:this.$container.find(s)}.bind(this)(),r=function(){return $($(a).not(o).get())}.bind(this)();(function(){if("*"===s)return $([]);var e="*"===this.lastFilters?"":this.lastFilters;return this.$element.parent().find(".classic__models__container > "+e+":not("+s+")")}).bind(this)().each((function(e,t){$(t).addClass("scale-out")})),r.each((function(e,t){$(t).addClass("scale-out")})),window.setTimeout(function(){this.reflowElements(a),this.$isotopeElement.isotope({filter:s,getSortData:{order:"[data-order] parseInt"},sortBy:"order"})}.bind(this),220),this.lastFilters=s},MASERATI.MClassicSearch.prototype.isTopScrollWithinMargin=function(e,t){var i=Math.round($(window).scrollTop())-Math.round(e[0].offsetTop-t);return Math.abs(i)<10},MASERATI.MClassicSearch.prototype.scrollToTopOfResults=function(){var e=$("#maserati_menu, #maserati_menu_2018").outerHeight(),t=document.getElementsByClassName("classic__search__selectors stickied");t.length>0&&("fixed"===window.getComputedStyle(t[0]).getPropertyValue("position")&&(e+=$(t[0]).outerHeight()));var i=$(".classic__search__models"),n=!1;this.isTopScrollWithinMargin(i,e)&&(n=!0);var s=this;n||this.isScrollingToResults||(this.$selects.each((function(e,t){t.blur()})),this.isScrollingToResults=!0,i.velocity("scroll",{duration:500,easing:"easeOutCubic",offset:-e,complete:function(){s.isScrollingToResults=!1,s.shouldScrollAfterReflow=!1}}))},MASERATI.MClassicSearch.prototype.waitTransitionAndReLayout=function(e,t){t.length&&(MASERATI.Helpers.log("relayout, has items"),this.hideNoResults()),window.setTimeout(function(){this.$element.find(".classic__models__model").each((function(e,t){$(t).removeClass("scale-out")})),t.length?this.hideNoResults():(MASERATI.Helpers.log("relayout, no items"),this.showNoResults()),this.shouldScrollAtAll&&this.shouldScrollAfterReflow&&this.scrollToTopOfResults(),Waypoint.refreshAll()}.bind(this),240)},MASERATI.MClassicSearch.prototype.reflowElements=function(e){var t=this.layoutInverted?"-inverted":"";this.removeExtraClasses(e);for(var i=e,n=i.length,s=n%6,o=1,a=null,r=1;r<=n-s;r++)a=i.get(r-1),$(a).addClass("pack-6-"+(r%6||6)+t),a.setAttribute("data-pack-class","pack-6-"+(r%6||6)+t),a.setAttribute("data-order",o),o+=1,$(a).find(".classic__model__content__container").css("height",$(a).outerHeight()),$(a).find(".classic__model__content__container").css("width",$(a).outerWidth());for(var l=n-s,d=1;d<=s;d++)a=i.get(l-1+d),$(a).addClass("pack-"+s+"-"+d%6),a.setAttribute("data-pack-class","pack-"+s+"-"+d%6),a.setAttribute("data-order",o),o+=1,$(a).find(".classic__model__content__container").css("height",$(a).outerHeight()),$(a).find(".classic__model__content__container").css("width",$(a).outerWidth())},MASERATI.MClassicSearch.prototype.getFiltersValues=function(){var e=[],t=[];this.$selects.each((function(i,n){if("*"!==n.value)if("years"!==n.dataset.search)e.push("[data-"+n.dataset.search+'="'+n.value+'"]');else for(var s=parseInt(n.value.substr(0,4)),o=parseInt(n.value.substr(5)),a=s;a<=o;a++)t.push('[data-years*="'+a+'"]')}));var i=[];if(t.length){for(var n=0;n<t.length;n++)i.push(t[n]+e.join(""));return i.join(",")}return e.length?e.join(""):"*"},MASERATI.MClassicSearch.prototype.autoSelectLoneOptions=function(){},MASERATI.MClassicSearch.prototype.matchYear=function(e,t){if(void 0===t)return!0;var i=t.substr(1,t.length-2);i=i.split(",").map((function(e){return parseInt(e)}));for(var n=e.split(",").map((function(e){return parseInt(e)})),s=0;s<i.length;s++)if(n[0]<=i[s]&&i[s]<=n[1])return!0;return!1},MASERATI.MClassicSearch.prototype.saveFilters=function(){this.$selects.each(function(e,t){sessionStorage.setItem(t.getAttribute("id"),t.value)}.bind(this))},MASERATI.MClassicSearch.prototype.urlFamilyParameterCheckAndSelect=function(e){MASERATI.Helpers.log("received a category from URL: ",e);var t=!1;this.$familyOptions.each(function(i,n){MASERATI.Helpers.log("checking parameter on option: ",n,n.value+" <> "+e),n.value===e&&(n.selected="selected",t=!0)}.bind(this));var i=$("#maserati_menu, #maserati_menu_2018").height();return $(".classic__search__selectors--placeholder").velocity("scroll",{duration:500,easing:"easeOutCubic",offset:-i,complete:function(){that.isScrollingToResults=!1,that.shouldScrollAfterReflow=!1}}),t},MASERATI.MClassicSearch.prototype.loadFilters=function(){var e=MASERATI.Helpers.getUrlParameter("category");if(MASERATI.Helpers.log("received a category from URL: ",e),!1!==e&&this.urlFamilyParameterCheckAndSelect(e)){this.updateCurrentSelectedValues(),MASERATI.Helpers.log("triggering family change"),this.shouldDependOnFamily(this.selects.years),this.shouldDependOnFamily(this.selects.version),this.$selects.each(function(t,i){"classic__selector__family"===i.getAttribute("id")?sessionStorage.setItem(i.getAttribute("id"),e):sessionStorage.setItem(i.getAttribute("id"),"*")}.bind(this)),MASERATI.Helpers.log("changing history state from ",location.href);var t=location.href.replace("?category="+e,"").replace("category="+e,"");MASERATI.Helpers.log("changing history state to ",t),history.replaceState({},"",t)}else this.$selects.each(function(e,t){if(sessionStorage.getItem(t.getAttribute("id")))switch(t.value=sessionStorage.getItem(t.getAttribute("id")),MASERATI.Helpers.log("updating select id "+e+", value is "+t.value,t.name),this.updateCurrentSelectedValues(),t.name){case"family":this.familyChangeHandler();break;case"version":this.versionChangeHandler();break;case"year":this.yearsChangeHandler()}}.bind(this))},MASERATI.MClassicSearch.prototype.normalizeFamilyOptions=function(){this.selects.family.options.each(function(e,t){var i=t.dataset.category,n=[];this.selects.version.select.find('[data-category="'+i+'"]').each((function(e,t){for(var i=t.dataset.years.substr(1,t.dataset.years.length-2).split(","),s=0;s<i.length;s++)n.push(i[s])})),t.dataset.years="["+$.unique(n).join(",")+"]"}.bind(this)),this.$clonedFamilySelectOptions.each(function(e,t){var i=t.dataset.category,n=[];this.selects.version.select.find('[data-category="'+i+'"]').each((function(e,t){for(var i=t.dataset.years.substr(1,t.dataset.years.length-2).split(","),s=0;s<i.length;s++)n.push(i[s])})),t.dataset.years="["+$.unique(n).join(",")+"]"}.bind(this))},MASERATI.MClassicSearch.prototype.resetSelectOptions=function(e){e===this.selects.version?this.$versionSelect.find("option").not(":first").remove():e===this.selects.years?this.$yearsSelect.find("option").not(":first").remove():e===this.selects.family&&this.$familySelect.find("option").not(":first").remove()},MASERATI.MClassicSearch.prototype.shouldDependOnFamily=function(e){e===this.selects.years?(this.resetSelectOptions(e),MASERATI.Helpers.log("matching years with family"),this.$clonedYearsSelectOptions.each(function(e,t){var i=this.allFamiliesSelected(),n=this.matchYear(t.value,this.selects.family.current[0].dataset.years);i?MASERATI.Helpers.log("all families are selected"):n&&MASERATI.Helpers.log("Matches years",t.value,this.selects.family.current[0].dataset.years),(i||n)&&this.$yearsSelect.append(t)}.bind(this))):(this.resetSelectOptions(e),this.$clonedVersionSelectOptions.each(function(e,t){(this.allFamiliesSelected()||t.dataset.category===this.selects.family.current.val())&&this.$versionSelect.append(t)}.bind(this)))},MASERATI.MClassicSearch.prototype.shouldDependOnVersions=function(e){e===this.selects.years?(this.resetSelectOptions(e),this.$clonedYearsSelectOptions.each(function(e,t){(this.allVersionsSelected()||this.matchYear(t.value,this.selects.version.current[0].dataset.years))&&this.$yearsSelect.append(t)}.bind(this))):this.selects.family.options.each(function(e,t){t.dataset.category===this.selects.version.current[0].dataset.category&&(t.selected="selected")}.bind(this))},MASERATI.MClassicSearch.prototype.shouldDependOnYears=function(e){e===this.selects.version?(this.resetSelectOptions(e),this.$clonedVersionSelectOptions.each(function(e,t){(this.allYearsSelected()||this.matchYear(this.selects.years.current.val(),t.dataset.years))&&this.$versionSelect.append(t)}.bind(this))):(this.resetSelectOptions(e),this.$clonedFamilySelectOptions.each(function(e,t){(this.allYearsSelected()||this.matchYear(this.selects.years.current.val(),t.dataset.years))&&this.$familySelect.append(t)}.bind(this)))},MASERATI.MClassicSearch.prototype.shouldDependOnYearsAndFamilies=function(e){this.resetSelectOptions(e),this.$clonedVersionSelectOptions.each(function(e,t){!this.allFamiliesSelected()&&t.dataset.category!==this.selects.family.current.val()||!this.allYearsSelected()&&!this.matchYear(this.selects.years.current.val(),t.dataset.years)||this.$versionSelect.append(t)}.bind(this))},MASERATI.MClassicSearch.prototype.resetYearsIfWillNotBeShown=function(e){e===this.selects.family?this.allFamiliesSelected()||this.matchYear(this.selects.years.current.val(),this.selects.family.current[0].dataset.years)||this.shouldResetYears():this.allVersionsSelected()||this.matchYear(this.selects.years.current.val(),this.selects.version.current[0].dataset.years)||this.shouldResetYears()},MASERATI.MClassicSearch.prototype.resetFamilyIfWillNotBeShown=function(e){e===this.selects.years&&((this.allYearsSelected()||this.allFamiliesSelected()||this.matchYear(this.selects.years.current.val(),this.selects.family.current[0].dataset.years))&&(this.allVersionsSelected()||this.allFamiliesSelected()||this.selects.family.current.val()===this.selects.version.current[0].dataset.category)||this.shouldResetFamilies())},MASERATI.MClassicSearch.prototype.resetVersionIfWillNotBeShown=function(e){e===this.selects.years&&((this.allYearsSelected()||this.allVersionsSelected()||this.matchYear(this.selects.years.current.val(),this.selects.version.current[0].dataset.years))&&(this.allFamiliesSelected()||this.allVersionsSelected()||this.selects.family.current.val()===this.selects.version.current[0].dataset.category)||this.shouldResetVersions())},MASERATI.MClassicSearch.prototype.shouldResetVersions=function(){this.selects.version.select.val("*"),this.selects.version.select.change()},MASERATI.MClassicSearch.prototype.shouldResetFamilies=function(){this.selects.family.select.val("*"),this.selects.family.select.change()},MASERATI.MClassicSearch.prototype.shouldResetYears=function(){this.selects.years.select.val("*"),this.selects.years.select.change()},MASERATI.MClassicSearch.prototype.checkNoResultsStatus=function(){this.$isotopeElement.isotope("getFilteredItemElements").length?this.hideNoResults():this.showNoResults()},MASERATI.MClassicSearch.prototype.showNoResults=function(){this.$element.find(".classic__search__noresults").addClass("active")},MASERATI.MClassicSearch.prototype.hideNoResults=function(){this.$element.find(".classic__search__noresults").removeClass("active")},MASERATI.MClassicSearch.prototype.debounce=function(e,t,i){var n;return function(){var s=this,o=arguments,a=function(){n=null,i||e.apply(s,o)},r=i&&!n;clearTimeout(n),n=setTimeout(a,t),r&&e.apply(s,o)}},MASERATI.MClassicSearch.prototype.allYearsSelected=function(){return"*"===this.selects.years.current.val()},MASERATI.MClassicSearch.prototype.allVersionsSelected=function(){return"*"===this.selects.version.current.val()},MASERATI.MClassicSearch.prototype.allFamiliesSelected=function(){return"*"===this.selects.family.current.val()},MASERATI.MClassicSearch.prototype.recalcPlaceholderMargin=function(){this.$placeHolder.css("height",this.$element.find(".classic__search__selectors").outerHeight()+"px")},MASERATI.MClassicSearch.prototype.removeExtraClasses=function(e){var t=function(){for(var e=[],t=1;t<=6;t++)for(var i=1;i<=t;i++)e.push("pack-"+t+"-"+i),e.push("pack-"+t+"-"+i+"-inverted");return e.join(" ")}();$(e).each((function(e,i){$(i).removeClass(t)}))},$((function(){$(".classic__search").each((function(){new MASERATI.MClassicSearch($(this))}))}))},function(module,exports){MASERATI.ConfiguratorPop=MASERATI.ConfiguratorPop||{},MASERATI.ConfiguratorPop.open=function(e,t,i,n){MASERATI.ConfiguratorPop.$focusOnClose=$(document.activeElement),MASERATI.Helpers.log("open",e,t,i,n),MASERATI.ConfiguratorPop.$isMounted?MASERATI.ConfiguratorPop.updateData({name:e,modelName:t,modelYear:n},i):(MASERATI.Helpers.log("trying to mount"),MASERATI.ConfiguratorPop.component.addEventListener("mounted",MASERATI.ConfiguratorPop.updateData.bind(void 0,{name:e,modelName:t,modelYear:n},i)),MASERATI.ConfiguratorPop.start()),$(this.component).find(".maserati__configurator-pop__close-button").focus()},MASERATI.ConfiguratorPop.close=function(){MASERATI.ConfiguratorPop.hide(),MASERATI.ConfiguratorPop.clearErrors(),null!=MASERATI.ConfiguratorPop.$focusOnClose&&MASERATI.ConfiguratorPop.$focusOnClose.focus()},MASERATI.ConfiguratorPop.baseClass="maserati__configurator-pop__",MASERATI.ConfiguratorPop.show=function(){MASERATI.ConfiguratorPop.component.setAttribute("class",MASERATI.ConfiguratorPop.baseClass+"wrapper active"),MASERATI.ConfiguratorPop.component.dispatchEvent(new CustomEvent("shown"))},MASERATI.ConfiguratorPop.hide=function(){MASERATI.ConfiguratorPop.component.setAttribute("class",MASERATI.ConfiguratorPop.baseClass+"wrapper"),MASERATI.ConfiguratorPop.component.dispatchEvent(new CustomEvent("hide"))},MASERATI.ConfiguratorPop.clearErrors=function(){MASERATI.ConfiguratorPop.$refs.select.setAttribute("class","beautify"),MASERATI.ConfiguratorPop.$refs.errorBox.setAttribute("class",MASERATI.ConfiguratorPop.baseClass+"error-box"),MASERATI.ConfiguratorPop.$refs.button.setAttribute("class","cta border-grey")},MASERATI.ConfiguratorPop.updateData=function(e,t){MASERATI.Helpers.log("updateData",e,t),MASERATI.ConfiguratorPop.updateModel(e),MASERATI.ConfiguratorPop.updateImage(t),$(MASERATI.ConfiguratorPop.$refs.wrapper).addClass("active"),MASERATI.ConfiguratorPop.component.dispatchEvent(new CustomEvent("updated"))},MASERATI.ConfiguratorPop.updateOptions=function(e){MASERATI.ConfiguratorPop.$refs.select.options.length=1;for(var t=0;t<e.length;t++){var i=document.createElement("option");i.setAttribute("value",e[t].id),i.innerText=e[t].description,MASERATI.ConfiguratorPop.$refs.select.appendChild(i)}},MASERATI.ConfiguratorPop.start=function(){MASERATI.ConfiguratorPop.beforeCreate()},MASERATI.ConfiguratorPop.beforeCreate=function(){MASERATI.ConfiguratorPop.component.addEventListener("created",MASERATI.ConfiguratorPop.reactive),MASERATI.ConfiguratorPop.component.addEventListener("created",MASERATI.ConfiguratorPop.init),MASERATI.ConfiguratorPop.component.addEventListener("updated",MASERATI.ConfiguratorPop.show),MASERATI.ConfiguratorPop.component.addEventListener("updated",(function(){MASERATI.ConfiguratorPop.$isMounted=!0})),MASERATI.ConfiguratorPop.component.dispatchEvent(new CustomEvent("created"))},MASERATI.ConfiguratorPop.init=function(){MASERATI.Helpers.log("init");var e=MASERATI.ConfiguratorPop.component;e.getElementsByClassName(MASERATI.ConfiguratorPop.baseClass+"close-button")[0].addEventListener("click",MASERATI.ConfiguratorPop.close);var t=e.getElementsByClassName(MASERATI.ConfiguratorPop.baseClass+"select")[0];t.addEventListener("change",(function(e){MASERATI.ConfiguratorPop.updateCountry(e.target.value)})),t.addEventListener("service-update",(function(e){MASERATI.ConfiguratorPop.updateOptions(e.detail)}));var i=e.getElementsByClassName(MASERATI.ConfiguratorPop.baseClass+"outlink")[0];i.addEventListener("click",MASERATI.ConfiguratorPop.callShoppingTool);var n=e.getElementsByClassName(MASERATI.ConfiguratorPop.baseClass+"image")[0],s=e.getElementsByClassName(MASERATI.ConfiguratorPop.baseClass+"description-wrapper")[0],o=e.getElementsByClassName(MASERATI.ConfiguratorPop.baseClass+"model-name")[0],a=e.getElementsByClassName(MASERATI.ConfiguratorPop.baseClass+"error-box")[0],r=e.getElementsByClassName("cta")[0],l=$(e).find(".maserati__configurator-pop__close-button"),d=$(e).find(".maserati__configurator-pop__outlink");$(e).on("keydown",(function(e){"Tab"===e.key||9===e.keyCode?e.shiftKey?$(document.activeElement).is(l)&&(e.preventDefault(),d.focus()):$(document.activeElement).is(d)&&(e.preventDefault(),l.focus()):27==e.keyCode&&$el.find(".close").click()})),MASERATI.ConfiguratorPop.$refs={image:n,description:s,modelName:o,select:t,button:r,outLink:i,errorBox:a,wrapper:e},MASERATI.ConfiguratorPop.component.dispatchEvent(new CustomEvent("mounted"))},MASERATI.ConfiguratorPop.callShoppingTool=function(e){void 0===MASERATI.ConfiguratorPop.country?(MASERATI.ConfiguratorPop.$refs.select.setAttribute("class","beautify error"),e.preventDefault()):MASERATI.ConfiguratorPop.service.countryHasModel(MASERATI.ConfiguratorPop.country,MASERATI.ConfiguratorPop.model)||(MASERATI.ConfiguratorPop.$refs.errorBox.setAttribute("class",MASERATI.ConfiguratorPop.baseClass+"error-box active"),MASERATI.ConfiguratorPop.$refs.button.setAttribute("class","cta border-grey"),e.preventDefault())},MASERATI.ConfiguratorPop.reactive=function(){MASERATI.Helpers.log("reactive"),MASERATI.ConfiguratorPop.component.addEventListener("country-changed",(function(){MASERATI.ConfiguratorPop.updateLink()})),MASERATI.ConfiguratorPop.component.addEventListener("model-changed",(function(){MASERATI.ConfiguratorPop.updateLink()})),MASERATI.ConfiguratorPop.component.addEventListener("country-changed",(function(){MASERATI.ConfiguratorPop.$refs.select.setAttribute("class","beautify"),MASERATI.ConfiguratorPop.$refs.errorBox.setAttribute("class",MASERATI.ConfiguratorPop.baseClass+"error-box"),MASERATI.ConfiguratorPop.$refs.button.setAttribute("class","cta bg-blue color-white")})),MASERATI.ConfiguratorPop.component.addEventListener("country-changed",(function(){MASERATI.ConfiguratorPop.service.countryHasModel(MASERATI.ConfiguratorPop.country,MASERATI.ConfiguratorPop.model)||(MASERATI.ConfiguratorPop.$refs.errorBox.setAttribute("class",MASERATI.ConfiguratorPop.baseClass+"error-box active"),MASERATI.ConfiguratorPop.$refs.button.setAttribute("class","cta border-grey"))})),MASERATI.ConfiguratorPop.component.addEventListener("model-changed",(function(){MASERATI.ConfiguratorPop.$refs.modelName.innerText=MASERATI.ConfiguratorPop.model.name,MASERATI.ConfiguratorPop.$refs.errorBox.setAttribute("class",MASERATI.ConfiguratorPop.baseClass+"error-box")})),MASERATI.ConfiguratorPop.component.addEventListener("model-changed",(function(){MASERATI.Helpers.log("here, model change"),MASERATI.ConfiguratorPop.service.getCountriesByModel(MASERATI.ConfiguratorPop.model,(function(e){MASERATI.ConfiguratorPop.$refs.select.dispatchEvent(new CustomEvent("service-update",{detail:e}))}))}))},MASERATI.ConfiguratorPop.updateCountry=function(e){MASERATI.ConfiguratorPop.country="false"===e?void 0:e,MASERATI.ConfiguratorPop.component.dispatchEvent(new CustomEvent("country-changed"))},MASERATI.ConfiguratorPop.updateModel=function(e){MASERATI.ConfiguratorPop.model=e,MASERATI.ConfiguratorPop.component.dispatchEvent(new CustomEvent("model-changed"))},MASERATI.ConfiguratorPop.getCCLink=function(){var e=MASERATI.ConfiguratorPop.component.hasAttribute("data-maserati-cc-link")?MASERATI.ConfiguratorPop.component.getAttribute("data-maserati-cc-link"):"http://integration.cms.maserati.com/shoppingtool/build-and-price/international/en";return MASERATI.Helpers.log("setting getCCLink URL:",e),e},MASERATI.ConfiguratorPop.updateLink=function(){MASERATI.ConfiguratorPop.$refs.outLink.setAttribute("href",MASERATI.ConfiguratorPop.getCCLink()+"?currentCountry="+MASERATI.ConfiguratorPop.country+"&modelName="+MASERATI.ConfiguratorPop.model.modelName+("-1"!==MASERATI.ConfiguratorPop.model.modelYear?"&suggestedModelYear="+MASERATI.ConfiguratorPop.model.modelYear:""))},MASERATI.ConfiguratorPop.updateImage=function(e){MASERATI.ConfiguratorPop.$refs.image.setAttribute("src",e)},MASERATI.ConfiguratorPop.updateDescription=function(e){MASERATI.ConfiguratorPop.$refs.description.innerText=e},MASERATI.ConfiguratorPop.updateLinkText=function(e){MASERATI.ConfiguratorPop.$refs.outLink.innerText=e},MASERATI.ConfiguratorPop.updateSelectText=function(e){MASERATI.ConfiguratorPop.$refs.select.querySelector("option").innerText=e},MASERATI.ConfiguratorPop.service=MASERATI.ConfiguratorPop.service||{},MASERATI.ConfiguratorPop.service.getUrl=function(){var e=MASERATI.ConfiguratorPop.component.hasAttribute("data-maserati-countrylist-ws")?MASERATI.ConfiguratorPop.component.getAttribute("data-maserati-countrylist-ws"):"http://test.configurator.maserati.com/gtcc/countryList.json";return MASERATI.Helpers.log("calling service at URL:",e),e},MASERATI.ConfiguratorPop.service.cache={},MASERATI.ConfiguratorPop.service.getCountriesByModel=function(e,t){var i=e.modelName;$.ajax({dataType:"jsonp",url:MASERATI.ConfiguratorPop.service.getUrl()+"?modelName="+MASERATI.ConfiguratorPop.model.modelName,success:function(e){MASERATI.ConfiguratorPop.service.cache[i]=e,t(e.countryList)}})},MASERATI.ConfiguratorPop.service.countryHasModel=function(e,t){for(var i=t.modelName,n=MASERATI.ConfiguratorPop.service.cache[i].countryList,s=0;s<n.length;s++)if(n[s].id.toString()===e.toString())return n[s].modelInRange;throw new Error("system is desynchronized")},MASERATI.ConfiguratorPop.helper=MASERATI.ConfiguratorPop.helper||{},MASERATI.ConfiguratorPop.helper.initStarter=function(DOMElement){DOMElement.addEventListener("click",(function(e){e.preventDefault(),eval("var prop = "+DOMElement.getAttribute("data-configurator-pop-prop")),MASERATI.ConfiguratorPop.open(prop.verboseName,prop.modelName,prop.imgSrc,prop.modelYear||"-1")}))},$((function(){var e=$(".maserati__configurator-pop__wrapper");e.length&&(MASERATI.ConfiguratorPop.component=e[0],$('[data-async-component="configurator-pop"]').each((function(){MASERATI.ConfiguratorPop.helper.initStarter(this)})))}))},function(e,t){MASERATI.ContentCarousel=function(e){this.$el=e,this.init()},MASERATI.ContentCarousel.prototype.init=function(e){this.$slidesContainer=this.$el.find(".main-slide"),this.$slides=this.$slidesContainer.find(".slide"),this.$prevTrigger=this.$el.find(".prevTrigger"),this.$nextTrigger=this.$el.find(".nextTrigger"),this.$navsContainer=this.$el.find(".navigation"),this.$navs=this.$navsContainer.find(".navigation-item"),this.$mobileTextContainer=this.$el.find(".mobile-text-container"),this.$titleMobile=this.$el.find(".title-mobile"),this.$subtitleMobile=this.$el.find(".subtitle-mobile"),this.$lastFocusedSlide=null,this.documentDirection="rtl"===$("html").attr("dir")?"rtl":"ltr",this.currentSlide=1,this.totalSlides=this.$slides.length,this.totalSlides<=0||(this.type=e,this.slideAmount="dealer"==this.type?-10:-25,this.slideAmountMob=-80,this.delay=25,this.numberOfSlidesInDesktop=2,"rtl"===this.documentDirection&&(this.slideAmount*=-1,this.slideAmountMob*=-1,this.$slidesContainer.attr("dir","rtl")),""===this.$el.find(".content-carousel__slide--title").text()&&""===this.$el.find(".content-carousel__slide--subtitle").text()&&(this.$navsContainer.addClass("notext"),this.$mobileTextContainer.hide()),this.bindEvents(),this.refreshSlides(),this.refreshTriggers(),this.loadComponent(),this.bind())},MASERATI.ContentCarousel.prototype.triggerSlideChangeEvent=function(){MASERATI.AdobeTracking.tracker.setSatelliteTrack("GalleryEngage"),this.$el[0].dispatchEvent(new CustomEvent("slidechange"))},MASERATI.ContentCarousel.prototype.bindEvents=function(){var e=this;this.$prevTrigger.click((function(){e.prev()})),this.$nextTrigger.click((function(){e.next()})),this.$slidesContainer.on("swipeleft",(function(){e.next()})),this.$slidesContainer.on("swiperight",(function(){e.prev()})),this.$prevTrigger.on("swipeleft",(function(){e.next()})),this.$prevTrigger.on("swiperight",(function(){e.prev()})),this.$nextTrigger.on("swipeleft",(function(){e.next()})),this.$nextTrigger.on("swiperight",(function(){e.prev()})),this.$navs.click((function(){e.gotoSlide(this)})),this.$mobileTextContainer.click((function(){this.classList.add("expanded")})),this.$slides.find("a").focus((function(){e.focusSlide(this,!0)})),this.$slides.find("a").blur((function(){e.focusSlide(this,!1)})),this.$prevTrigger.focus((function(){e.$el.addClass("hovered")})),this.$prevTrigger.blur((function(){e.$el.removeClass("hovered")})),this.$nextTrigger.focus((function(){e.$el.addClass("hovered")})),this.$nextTrigger.blur((function(){e.$el.removeClass("hovered")})),$(window).resize((function(){e.$slidesContainer.addClass("no-animate"),e.move(0),requestAnimationFrame((function(){e.$slidesContainer.removeClass("no-animate")}))}))},MASERATI.ContentCarousel.prototype.areSlidesAnimating=function(){return this.$slidesContainer.hasClass("velocity-animating")},MASERATI.ContentCarousel.prototype.setSlidesAnimating=function(){return this.$slidesContainer.addClass("velocity-animating")},MASERATI.ContentCarousel.prototype.unsetSlidesAnimating=function(){return this.$slidesContainer.removeClass("velocity-animating")},MASERATI.ContentCarousel.prototype.prev=function(){MASERATI.Helpers.log("Tracker setGalleryAction arrow"),MASERATI.AdobeTracking.tracker.setGalleryAction("content-carousel:arrow"),this.areSlidesAnimating()||(this.triggerSlideChangeEvent(),"rtl"==this.documentDirection?this.move(1):this.move(-1))},MASERATI.ContentCarousel.prototype.next=function(){MASERATI.Helpers.log("Tracker setGalleryAction arrow"),MASERATI.AdobeTracking.tracker.setGalleryAction("content-carousel:arrow"),this.areSlidesAnimating()||(this.triggerSlideChangeEvent(),"rtl"==this.documentDirection?this.move(-1):this.move(1))},MASERATI.ContentCarousel.prototype.move=function(e){var t=this,i=window.innerWidth<1024?this.slideAmountMob:this.slideAmount,n=window.innerWidth<1024?0:this.numberOfSlidesInDesktop;this.currentSlide+e>this.totalSlides-n&&(e=this.totalSlides-1-this.currentSlide),this.currentSlide+e<1&&(e=1-this.currentSlide),"dealer"==t.type&&1==this.currentSlide?(this.setSlidesAnimating(),this.$slidesContainer.css("transform","translateX("+(this.currentSlide+e-1)*(2*i)+"%)")):(this.setSlidesAnimating(),this.$slidesContainer.css("transform","translateX("+(this.currentSlide+e-1)*i+"%)")),this.currentSlide+e>2&&(this.setSlidesAnimating(),this.$slidesContainer.css("transform","translateX("+(this.currentSlide+e-1)*i+"%)")),this.currentSlide+=e,setTimeout((function(){t.refreshSlides(),t.refreshTriggers(),t.unsetSlidesAnimating()}),this.delay),this.update()},MASERATI.ContentCarousel.prototype.refreshSlides=function(){var e=$(this.$slides.get(this.currentSlide-1));this.$slides.removeClass("active"),e.addClass("active");var t=$(this.$navs.get(this.currentSlide-1));this.$navs.removeClass("active").attr("aria-selected","false"),t.addClass("active").attr("aria-selected","true");var i=e.find(".content-carousel__slide--title").text(),n=e.find(".content-carousel__slide--subtitle").text();this.$titleMobile.text(i),this.$subtitleMobile.text(n),this.$mobileTextContainer.find(".ctaContainer").remove(),this.$mobileTextContainer.append(e.find(".content-carousel__slide--cta").clone(!0));let s=this.$mobileTextContainer.get(0);s&&(s.classList.add("expandable"),s.classList.remove("expanded")),s&&s.scrollHeight<=s.clientHeight&&s.classList.remove("expandable");let o=this.getVisibleSlidesSelector();this.$slides.filter(o).children("a").attr("tabindex","0")},MASERATI.ContentCarousel.prototype.refreshTriggers=function(){this.$prevTrigger.show(),this.$nextTrigger.show(),this.$el.removeClass("first last"),1==this.currentSlide&&("rtl"==this.documentDirection?this.$nextTrigger.hide():this.$prevTrigger.hide(),"rtl"==this.documentDirection?this.$el.addClass("last"):this.$el.addClass("first"));var e=window.innerWidth<1024?0:this.numberOfSlidesInDesktop;this.currentSlide+e==this.totalSlides&&("rtl"==this.documentDirection?this.$prevTrigger.hide():this.$nextTrigger.hide(),"rtl"==this.documentDirection?this.$el.addClass("first"):this.$el.addClass("last"))},MASERATI.ContentCarousel.prototype.gotoSlide=function(e){if(MASERATI.Helpers.log("Tracker setGalleryAction dot"),MASERATI.AdobeTracking.tracker.setGalleryAction("content-carousel:dot"),!$(e).hasClass("active")){var t=this.$navs.filter(".active").index(),i=this.$navs.index(e);this.areSlidesAnimating()||(this.triggerSlideChangeEvent(),this.move(i-t))}},MASERATI.ContentCarousel.prototype.focusSlide=function(e,t){let i=$(e).closest(".slide"),n=i.find(":focus").length>0;t&&n?(i.addClass("hovered"),this.focusMove()):t||n||(i.removeClass("hovered"),this.$lastFocusedSlide=i)},MASERATI.ContentCarousel.prototype.focusMove=function(){if(this.$lastFocusedSlide){let e=this.getVisibleSlidesSelector(),t=$(":focus").closest(".slide").not(e),i="rtl"==this.documentDirection?MASERATI.Helpers.isAfter:MASERATI.Helpers.isBefore,n="rtl"==this.documentDirection?MASERATI.Helpers.isBefore:MASERATI.Helpers.isAfter;i(this.$lastFocusedSlide,t)?this.next():n(this.$lastFocusedSlide,t)&&this.prev()}},MASERATI.ContentCarousel.prototype.getVisibleSlidesSelector=function(){let e="";for(let t=1;t<=this.numberOfSlidesInDesktop;t++)e+=", .active"+new Array(t+1).join(" + .slide");return window.innerWidth<1024?".active":".active"+e},MASERATI.ContentCarousel.prototype.bind=function(){this.inViewHandler()},MASERATI.ContentCarousel.prototype.inViewHandler=function(){var e=this;function t(){e.loadComponent()&&$(window).off("scroll",t)}$(window).on("scroll",t),t()},MASERATI.ContentCarousel.prototype.loadComponent=function(){var e=this.$el.offset().top+.01*$(window).height();return e=e<0?0:e,!this.$el.hasClass("in-view")&&$(window).scrollTop()+$(window).height()>=e&&(this.update(),this.$el.addClass("in-view")),this.$el.hasClass("in-view")},MASERATI.ContentCarousel.prototype.update=function(){numberOfSlides=(window.innerWidth<1024?2:4)+this.currentSlide-1,this.$el.find(".slide").slice(0,numberOfSlides).each((function(){var e=$(this).find("img").not(".lazy-loaded");e.one("load",(function(){e.addClass("lazy-loaded")})),e.data("src")&&(e.attr("src",e.data("src")),e.removeAttr("data-src"),e.removeData("src")),e.data("srcset")&&(e.attr("srcset",e.data("srcset")),e.removeAttr("data-srcset"),e.removeData("srcset"))}))},$((function(){$(".content-carousel").each((function(){var e=new MASERATI.ContentCarousel($(this));this.ContentCarousel=e}))}))},function(e,t){var i=window.MASERATICOOKIE||{config:!1};i.CookieBar=function(e,t){this.$element=e,this.$config=t,this.$active=!1,this.checkCookie(t),this.bindClose(this.$element.find(".privacy-close"),this.$config)},i.CookieBar.prototype.singleSettedCookies=function(){if(!Cookies.get(i.config.cookieName))try{let e=0!=MASERATI.Helpers.getUrlParameter2("utm_campaign")?MASERATI.Helpers.getUrlParameter2("utm_campaign"):"NA",t=0!=MASERATI.Helpers.getUrlParameter2("utm_medium")?MASERATI.Helpers.getUrlParameter2("utm_medium"):"NA",i=0!=MASERATI.Helpers.getUrlParameter2("utm_source")?MASERATI.Helpers.getUrlParameter2("utm_source"):"NA",n=0!=MASERATI.Helpers.getUrlParameter2("utm_content")?MASERATI.Helpers.getUrlParameter2("utm_content"):"NA",s=0!=MASERATI.Helpers.getUrlParameter2("utm_term")?MASERATI.Helpers.getUrlParameter2("utm_term"):"NA";Cookies.set("adb_tracking-code",e+"|"+t+"|"+i+"|"+n+"|"+s),Cookies.set("adb_referrer",document.referrer)}catch(e){console.log(e.message)}},i.CookieBar.prototype.multipleSettedCookies=function(){try{WTLCookie(),console.log("WTLCookie")}catch(e){console.log(e.message)}try{loadGTMCookies(),console.log("loadGTMCookies")}catch(e){console.log(e.message)}},i.CookieBar.prototype.bindClose=function(e,t){var i=this,n=window.location.href;$("html").on("click keydown",(function(e){if(void 0!==e.originalEvent&&e.originalEvent.isTrusted){if("keydown"!=e.type||13==e.which)if(n.indexOf("maseratiusa")>=0)$(e.target).parents("#splash-page").length>0||$(e.target).is("#splash-page")||$(e.target).parents("#splash-page-3").length>0||$(e.target).is("#splash-page-3")||($(e.target).hasClass("close")?(e.preventDefault(),e.stopPropagation(),i.$element.removeClass("active")):$(e.target).parents("#cookieAlert").length>0||$(e.target).is("#cookieAlert")||$(e.target).parents("#countryAlert").length>0||$(e.target).is("#countryAlert")||i.$element.removeClass("active"));else{if("true"==Cookies.get(t.cookieName)||n.indexOf("maseratica")>=0)return;console.log("HTML click"),$(e.target).parents("#splash-page").length>0||$(e.target).is("#splash-page")||$(e.target).parents("#splash-page-3").length>0||$(e.target).is("#splash-page-3")||($(e.target).hasClass("close")?(e.preventDefault(),e.stopPropagation(),i.$element.removeClass("active"),i.singleSettedCookies(),Cookies.set(t.cookieName,"true",{expires:30,path:t.cookiePath}),i.multipleSettedCookies()):$(e.target).parents("#cookieAlert").length>0||$(e.target).is("#cookieAlert")||$(e.target).parents("#countryAlert").length>0||$(e.target).is("#countryAlert")||(i.$element.removeClass("active"),i.singleSettedCookies(),Cookies.set(t.cookieName,"true",{expires:30,path:t.cookiePath}),i.multipleSettedCookies()))}}else console.log("Not trusted click event")}))},i.CookieBar.prototype.checkCookie=function(e){var t=window.location.href;"true"==Cookies.get(e.cookieName)||t.indexOf("maseratiusa")>=0||t.indexOf("maseratica")>=0?"true"!=Cookies.get(e.cookieName)&&t.indexOf("maseratiusa")>=0?(this.$element.addClass("active"),this.singleSettedCookies(),Cookies.set(e.cookieName,"true",{expires:30,path:e.cookiePath}),this.multipleSettedCookies()):t.indexOf("maseratica")>=0?(this.$element.removeClass("active"),this.singleSettedCookies(),Cookies.set(e.cookieName,"true",{expires:30,path:e.cookiePath}),this.multipleSettedCookies()):(this.singleSettedCookies(),this.multipleSettedCookies()):this.$element.addClass("active")},$((function(){!1!==i.config&&new i.CookieBar($("#cookieAlert"),i.config)}))},function(e,t){MASERATI.CountryAlert=function(e){this.$element=e,this.$ctaSite=this.$element.find(".country-site"),this.init(),this.bindEvents()},MASERATI.CountryAlert.prototype.init=function(){var e=this;MASERATI.Utilities.IpDetection(),$(IP_DETECTION).bind("done",(function(t,i){$.getJSON(pathCountryDetect+"?country="+i.country,(function(t){!t.nowebsite&&t.suggestRedirectEnabled&&(e.$element.find(".country-fullname").html(t.name),e.$element.find(".country-isocode").html(t.isocode.toUpperCase()),null!=t.languages[i["browser-lang"]]?e.$element.find(".country-site").attr("href",t.languages[i["browser-lang"]].website):e.$element.find(".country-site").attr("href",t.languages[Object.keys(t.languages)[0]].website),e.$element.removeClass("hidden"))}))}))},MASERATI.CountryAlert.prototype.bindEvents=function(){this.$ctaSite.click((function(){Cookies.set("ip_location",$(this).data("country"),{expires:180}),Cookies.set("ip_location_suggestion_accepted","yes",{expires:180}),Cookies.set("ip_location_redirect_rejected","",{expires:0})}))},$((function(){var e=$("#countryAlert.suggestion-box");e.length&&new MASERATI.CountryAlert(e)}))},function(e,t){var i={};window.IP_DETECTION=i,MASERATI.Utilities=new function(){this.IpDetection=function(){$.ajax({url:"/action/public/ip",cache:!1,beforeSend:function(e,t){var i=t.url;i=i.replace("?_=","?_refresh_="),t.url=i}}).done((function(e){var t=e.replace('"',"").toLowerCase(),n=window.navigator.userLanguage||window.navigator.language;n=n.split("-")[0],$(i).trigger("done",{country:t,"browser-lang":n})}))},this.GenerateTemplates=function(e,t){var i="",n=$(e),s=(n.text()||n.html()).replace(/(^\s*|\s*$)/,"").replace(/(\>|\})\s*/g,"$1");return $.each(t,(function(e,t){i+=s.replace(/\$\[([^\]]+)\]/g,(function(e,i){return void 0===t[i]?"":t[i]}))})),i},this.UrlExists=function(e,t){jQuery.ajax({url:e,dataType:"text",type:"GET",complete:function(e){"function"==typeof t&&t.apply(this,[e.status])}})}}},function(e,t){MASERATI.CountrySelector=function(e,t){this.$element=e,this.$labels=e.find(".label"),this.$accordions=this.$element.find(".label + ul"),this.$trigger=t,this.opened=!1,this.focusedElement=void 0,this.elFirstFocusableElement=e.find(".close"),this.elLastFocusableElement=e.find("a").last(),this.bindEvents(),this.focusChange(this.$element,this.elFirstFocusableElement,this.elLastFocusableElement)},MASERATI.CountrySelector.prototype.open=function(e){if(this.focusedElement=document.activeElement,e.show(),!e.hasClass("velocity-animating")){var t=e.is("ul")?"slideDown":{opacity:1,top:"0%"};e.is("ul")&&MASERATI.Helpers.getWindowWidth()>=1024||e.velocity(t,{duration:MASERATI.Animations.openOverlaySlideSpeed,complete:function(){e.toggleClass("opened"),e.find(".close").focus()}})}},MASERATI.CountrySelector.prototype.close=function(e){if($(this.focusedElement).focus(),!e.hasClass("velocity-animating")){var t=e.is("ul")?"slideUp":{opacity:0,top:"100%"};e.is("ul")&&MASERATI.Helpers.getWindowWidth()>=1024||e.velocity(t,{duration:MASERATI.Animations.openOverlaySlideSpeed,complete:function(){e.toggleClass("opened"),e.hide()}})}},MASERATI.CountrySelector.prototype.toggleMenu=function(e){e.hasClass("opened")?this.close(e):this.open(e)},MASERATI.CountrySelector.prototype.bindEvents=function(){var e=this;this.$labels.click((function(){e.toggleMenu($(this).siblings("ul"))})),$(".country-selector-open").click((function(t){return t.preventDefault(),e.open(e.$element),!1})),this.$element.find(".close").click((function(){e.close(e.$element)}))},MASERATI.CountrySelector.prototype.focusChange=function(e,t,i){e.on("keydown",(function(n){"Tab"===n.key||9===n.keyCode?n.shiftKey?$(document.activeElement).is(t)&&(n.preventDefault(),i.focus()):$(document.activeElement).is(i)&&(n.preventDefault(),t.focus()):27==n.keyCode&&e.find(".close").click()}))},$((function(){var e=$("#country-selector"),t=$(".country-selector-open");e.length&&new MASERATI.CountrySelector(e,t)}))},function(e,t){MASERATI.CtaComparator=function(e){this.$el=e,this.$overlayComponent=this.$el.find(".overlay"),this.$modelsList=this.$el.find(".models-list"),this.$stickyBar=this.$el.find(".sticky-bar"),this.featuresOffesetTop=0,this.vModelsList=null,this.vStickyBar=null,this.vOverlayCompare=null,Vue.config.devtools=!0,this.modelsList=[],this.modelsSelected=[],this.modelsListLabel={},this.overlayLabelsList={},this.listTechData=[],this.modelsDataToCompare=[],this.orderedGroupList={},this.equipmentTypeList={},this.filters={models:[],bodytype:[],traction:[],engine:[]},this.getLabels(),this.ModelListComponent(),this.StickyBarComponent(),this.OverlayCompareComponent(),this.getModels(),this.showModelComparable(),this.bind()},MASERATI.CtaComparator.prototype.getLabels=function(){var e=this.$el.find(".component-labels");this.modelsListLabel=JSON.parse(JSON.stringify(e[0].dataset));var t=this.$el.find(".overlay-labels");this.overlayLabelsList=JSON.parse(JSON.stringify(t[0].dataset))},MASERATI.CtaComparator.prototype.getModelistTemplate=function(){return'<section class="template" v-bind:class="{nomore: (modelsSelected.length==2)}"> <div class="row" v-for="modelFamily in modelsList" v-bind:data-modelFamily="modelFamily.modelFamily"> <div class="model-family-name"><div class="inner">{modelFamily.modelFamilyName}</div></div><div class="model-card" v-for="model in modelFamily.models" v-bind:class="{selected: model.selected, \'removed\': model.removed}" v-on:click="toggleSelectedModel(model, modelFamily.modelFamily)" v-bind:data-bodytype="model.bodyType" v-bind:data-traction="model.traction" v-bind:data-engine="model.engine" v-bind:data-name="model.name" tabindex="0" role="button"> <span class="add" v-bind:data-label="labels.add"></span> <span class="remove" v-bind:data-label="labels.remove"></span> <div class="model-data"> <div> <div class="model-year">{model.year}</div><div class="model-name">{model.name}</div></div><div class="model-thumbnail"> <img alt="" v-bind:src=\'getSpecificModelImage(model.modelcode, modelFamily.modelFamily, model.year, model.modelname)\'> </div><div class="model-price-container"> <span>{labels.price}</span> <div class="model-price">{model.currency}{formatPrice(model.price)}</div></div></div></div></div><div class="message-no-results">{labels.emptylist}</div></section>'},MASERATI.CtaComparator.prototype.ModelListComponent=function(){var e=this;Vue.component("model-list",{props:["modelsList","modelsSelected","labels"],template:e.getModelistTemplate(),methods:{getModelImage:e.getModelImage,getSpecificModelImage:e.getSpecificModelImage,formatPrice:e.formatPrice,toggleSelectedModel:function(t,i){t.modelFamily=i,e.toggleSelectedModel(t,e)}},delimiters:["{","}"]})},MASERATI.CtaComparator.prototype.getStickyBarTemplate=function(){return'<section class="template"> <div class="container"> <div class="text"> <span>{labels.stickybarcomparelabel}</span> </div><div class="compare-models"> <div class="c-column"> <div v-if="modelsSelected.length > 0" class="model-selected"> <img class="model-thumbnail" v-bind:src=\'getModelImage(modelsSelected[0].modelname, "side")\' alt=""> <div class="model-info"> <div class="model-year">{modelsSelected[0].year}</div><div class="model-name">{modelsSelected[0].name}</div></div><div v-on:click="toggleSelectedModel(modelsSelected[0])" v-on:keyup.enter="toggleSelectedModel(modelsSelected[0])" class="remove" tabindex="0" role="button"></div></div><div v-else class="car-placeholder"> <img v-bind:src="images.placeholder" alt=""> <div class="add" v-bind:data-label="labels.add"></div></div></div><div class="c-column"> <div v-if="modelsSelected.length > 1" class="model-selected"> <img class="model-thumbnail" v-bind:src=\'getModelImage(modelsSelected[1].modelname, "side")\' alt=""> <div class="model-info"> <div class="model-year">{modelsSelected[1].year}</div><div class="model-name">{modelsSelected[1].name}</div></div><div v-on:click="toggleSelectedModel(modelsSelected[1])" v-on:keyup.enter="toggleSelectedModel(modelsSelected[1])" class="remove" tabindex="0" role="button"></div></div><div v-else class="car-placeholder"> <img v-bind:src="images.placeholder" alt=""> <div class="add" v-bind:data-label="labels.add"></div></div></div></div><div class="cta-container"> <div class="cta bg-blue color-white disabled"> <a href="javascript:void(0);" id="compare-models" target="" class="" v-bind:data-linktracking="labels.ctacomparemodel" data-overlayid="compareFeatures" data-enabled="false" enabled="false">{labels.comparebutton}</a> </div></div></div><div class="loading-container"> <div class="compare-loader"> <div class="dot"></div><div class="dot"></div><div class="dot"></div></div></div></section>'},MASERATI.CtaComparator.prototype.StickyBarComponent=function(){var e=this;Vue.component("sticky-bar",{props:["modelsSelected","labels"],data:function(){return{images:{placeholder:e.$el.find("sticky-bar").data("placeholder")}}},template:e.getStickyBarTemplate(),methods:{getModelImage:e.getModelImage,toggleSelectedModel:function(t){e.toggleSelectedModel(t,e)}},watch:{modelsSelected:e.enableCompareButton},delimiters:["{","}"]})},MASERATI.CtaComparator.prototype.getOverlayTemplate=function(){return'<div class="overlayData"> <span class="close" v-on:click="closeOverlay" aria-label="close overlay" tabindex="0" role="button"> </span> <div class="overlay-container" v-if="modelsSelected.length > 1"> <div class="header header-feature"> <div class="grid"> <div class="c-column left"> <div class="model left"> <div class="container-column-reverse"> <div class="model-info"> <div class="model-year"> <span>{compareData.modelA[trimModelA].modelYear}</span> <strong>{modelsSelected[0].name}</strong> </div></div><div class="model-thumbnail"> <img alt="" v-bind:src=\'getSpecificModelImage(modelsSelected[0].modelcode, modelsSelected[0].modelFamily, modelsSelected[0].year, modelsSelected[0].modelname)\'> </div><div> <div class="custom-select" v-bind:class="{notVisible: objSize(compareData.modelA) <=1}"> <div class="header" v-show="trimModelA !=\'none\'"> <div class="value">{trimModelA}</div><div class="close" id="resetModelA" v-on:click="resetTrim(\'modelA\')"></div></div><select id="modelA" v-model="trimModelA" v-on:change="selectTrim"> <option v-for="modelA in compareData.modelA" v-bind:value="modelA.trim" v-bind:hidden="modelA.trim==\'none\' ? true : false" >{modelA.trim==\'none\' ? labels.selecttrim : modelA.trim}</option> </select> </div><div class="model-price-container"> <span>{labels.priceonoverlay}</span> <div class="model-price">{compareData.modelA[trimModelA].currency}{formatPrice(compareData.modelA[trimModelA].price)}</div></div><div class="cta bg-blue color-white"> <a v-bind:href="byoURI(compareData.modelA[trimModelA].modelName, compareData.modelA[trimModelA].modelYear)" target="" v-bind:data-linktracking="labels.ctatrackingconfiguremodela">{labels.configurebutton}</a> </div></div></div></div></div><div class="c-column mid"> <div class="title">{labels.comparefeaturetitle}</div><div class="subtitle">{labels.comparefeaturesubtitle}</div><a v-bind:data-linktracking="labels.ctatrackingbeginnewcomparison" href="javascript:void(0)" tabindex="-1" style="display:block; z-index: 999;"> <div class="toggle-labels"> <label class="features-difference labels-container" v-on:click.prevent="showFeaturesDifference()" v-on:keyup.enter="showFeaturesDifference()" v-bind:class="{checked: showDifference}" for="toggle-differences" role="checkbox" tabindex="0"> <span class="label left">{labels.seeall}</span> <input id="toggle-differences" type="checkbox" name="difference" data-trackingfield=""> <span class="label right">{labels.difference}</span> </label> </div></a> <a class="link link-new-comparison" v-on:click="closeOverlay" v-bind:data-linktracking="labels.ctatrackingbeginnewcomparison">{labels.newcomparisonbutton}</a> </div><div class="c-column right"> <div class="model right"> <div class="container-column-reverse"> <div class="model-info"> <div class="model-year"> <span>{compareData.modelB[trimModelB].modelYear}</span> <strong>{modelsSelected[1].name}</strong> </div></div><div class="model-thumbnail"> <img alt="" v-bind:src=\'getSpecificModelImage(modelsSelected[1].modelcode, modelsSelected[1].modelFamily, modelsSelected[1].year, modelsSelected[1].modelname)\'> </div><div> <div class="custom-select" v-bind:class="{notVisible: objSize(compareData.modelB) <=1}"> <div class="header" v-show="trimModelB !=\'none\'"> <div class="value">{trimModelB}</div><div class="close" id="resetModelA" v-on:click="resetTrim(\'modelB\')"></div></div><select id="modelB" v-model="trimModelB" v-on:change="selectTrim"> <option v-for="modelB in compareData.modelB" v-bind:value="modelB.trim" v-bind:hidden="modelB.trim==\'none\' ? true : false" >{modelB.trim==\'none\' ? labels.selecttrim : modelB.trim}</option> </select> </div><div class="model-price-container"> <span>{labels.priceonoverlay}</span> <div class="model-price">{compareData.modelB[trimModelB].currency}{formatPrice(compareData.modelB[trimModelB].price)}</div></div><div class="cta bg-blue color-white"> <a v-bind:href="byoURI(compareData.modelB[trimModelB].modelName, compareData.modelB[trimModelB].modelYear)" target="" v-bind:data-linktracking="labels.ctatrackingconfiguremodelb">{labels.configurebutton}</a> </div></div></div></div></div></div><div class="mobile-link"> <a class="link" v-bind:data-linktracking="labels.ctatrackingbeginnewcomparison" v-bind:href="labels.urlctabeginnewcomparison">{labels.newcomparisonbutton}</a> </div></div><div class="features"> <div class="grid" data-features="techData"> <div class="feature-title">{labels.techdatasectiontitle}</div><ul class="features-list"> <li v-for="tech in techData"> <div class="c-column">{tech.valueModelA}</div><div class="c-column middle">{tech.label}</div><div class="c-column">{tech.valueModelB}</div></li></ul> </div><div v-bind:class="{showDifference: showDifference}" v-for="eqGroup in equipments" class="grid" v-bind:data-features="eqGroup.label" v-if="Object.keys(eqGroup.eqList).length > 0"> <div class="feature-title" v-bind:class="{\'no-diff\': !eqGroup.differenceType}">{eqGroup.label}</div><ul class="features-list"> <li v-for="(eq,key) in eqGroup.eqList" v-bind:code="key" v-if="!((eq.typeA==eq.typeB) && showDifference)"> <div class="c-column"><span>{eq.typeA}</span></div><div class="c-column middle"> <span>{eq.label}</span> </div><div class="c-column"><span>{eq.typeB}</span></div></li></ul> </div></div></div></div>'},MASERATI.CtaComparator.prototype.OverlayCompareComponent=function(){var e=this;Vue.component("overlay-compare",{props:["modelsSelected","compareData","techData","equipments","showDifference","trimModelA","trimModelB","labels","closeOverlay"],template:e.getOverlayTemplate(),methods:{getModelImage:e.getModelImage,getSpecificModelImage:e.getSpecificModelImage,getOverlayTemplate:e.getOverlayTemplate,formatPrice:e.formatPrice,showFeaturesDifference:function(e){this.showDifference?this.showDifference=!1:this.showDifference=!0},selectTrim:function(){this.techData=e.mergeTechData(this.compareData,e.listTechData,this.trimModelA,this.trimModelB),this.equipments=e.mergeEquipments(e.orderedGroupList,e.equipmentTypeList,this.compareData,this.trimModelA,this.trimModelB)},resetTrim:function(e){"modelA"==e?this.trimModelA="none":this.trimModelB="none",this.selectTrim()},objSize:function(e){return Object.keys(e).length},byoURI:e.byoURI},updated:function(){e.getHeaderHeight()},delimiters:["{","}"]})},MASERATI.CtaComparator.prototype.bind=function(){this.bindFilterQuality(),this.bindOverlayCompare(),MASERATI.Wcag.EnterBind(this.$el)},MASERATI.CtaComparator.prototype.bindFilterQuality=function(){var e=this;e.$el.find(".filter-quality").find(".header-button").on("click",(function(){$(this).toggleClass("open"),e.$el.find(".filter-quality").find(".accordion").toggleClass("open")})),this.$el.find(".filter-quality").find(".quality").each((function(){var t=$(this),i=t.find(".custom-select-multi"),n=t.find(".custom-select-multi").find("select"),s=n.find(".all").val(),o=t.find(".row-group.header").find(".row").find(".col").last(),a=t.data("label"),r=e.$el.find(".filter-quality").find(".summary");t.find(".row-group.header").on("click",(function(){e.$el.find(".filter-quality").find(".quality").find(".custom-select-multi.open").not($(this).parent()).removeClass("open"),$(this).parent().toggleClass("open")})),i.find(".row-group.body").find(".row.all").on("click",(function(){i.find(".row-group.body").find(".row").removeClass("selected"),i.find(".row-group.body").find(".row.all").addClass("selected"),n.val([]),n.change()})),i.find(".row-group.body").find(".row").not(".all").on("click",(function(){var e=$(this),t=n.find("option").eq(e.index()).val(),s=n.val();i.find(".row-group.body").find(".row.all").removeClass("selected"),e.hasClass("selected")?(e.removeClass("selected"),s.splice(s.indexOf(t),1)):(e.addClass("selected"),s.push(t)),0==s.length?i.find(".row-group.body").find(".row.all").click():(n.val(s),n.change())})),i.find("select").on("change",(function(){var t=$(this).val()||[];0==(defaultFilterIndex=t.indexOf(s))&&t.length>1&&t.splice(defaultFilterIndex,1),e.filters[$(this).data("type")]=t,e.filterModels(),0==t.length?$(this).val([s]):$(this).val(t),"all"==$(this).val()?(o.text("0 "+a),o.addClass("hidden")):(o.text($(this).val().length+" "+a),o.removeClass("hidden"));let i=0;for(filter in e.filters)i+=e.filters[filter].length;r.text(i+" "+a),i>0?r.removeClass("hidden"):r.addClass("hidden")}))})),this.$el.on("mouseup",(function(t){var i=e.$el.find(".filter-quality .custom-select-multi");i.is(t.target)||0!==i.has(t.target).length||i.removeClass("open")}))},MASERATI.CtaComparator.prototype.bindOverlayCompare=function(){var e=this;this.$el.find("#compare-models").on("click",(function(t){"true"==$(e.$el).find("#compare-models").attr("enabled")&&($(e.$el).addClass("compare-loading"),e.getCompareModels())})),$(window).on("resize",(function(){e.getHeaderHeight()})),window.addEventListener("orientationchange",(function(){e.getHeaderHeight()}),!1)},MASERATI.CtaComparator.prototype.byoURI=function(e,t){var i=location.pathname.substring(1).split("/"),n=location.origin,s=i[1];return n+"/"+i[0]+"/"+s+"/shopping-tools/configurator?modelName="+e+"&modelYear="+t},MASERATI.CtaComparator.prototype.bindScrollOverlayCompare=function(){var e=$(this.vOverlayCompare.$el).find(".header-feature"),t=e.data("outerHeight"),i=$(this.vOverlayCompare.$el).find(".features")[0].getBoundingClientRect().top,n=MASERATI.Helpers.Mobile.isMobile()?57:78;MASERATI.Helpers.Mobile.isMobile()?i>=this.featuresOffesetTop?(e.removeClass("hide-overlay-header"),e.height(t)):(e.addClass("hide-overlay-header"),e.height(n)):i>this.featuresOffesetTop?(e.removeClass("hide-overlay-header"),e.height(t)):i<=0&&i<this.featuresOffesetTop&&(e.addClass("hide-overlay-header"),e.height(n)),this.featuresOffesetTop=i},MASERATI.CtaComparator.prototype.filterBy=function(e,t){for(var i=!1,n=0;n<e.length;n++){if(t==e[n].toLowerCase()){i=!1;break}i=!0}return i},MASERATI.CtaComparator.prototype.filterModels=function(){for(var e=0,t=0;t<this.modelsList.length;t++)for(var i=this.modelsList[t],n=0;n<i.models.length;n++){var s=i.models[n];(s.removed=this.filterBy(this.filters.models,s.modelname.toLowerCase()))?e++:(s.removed=this.filterBy(this.filters.bodytype,s.bodytype.toLowerCase()))?e++:(s.removed=this.filterBy(this.filters.traction,s.traction.toLowerCase()))?e++:(s.removed=this.filterBy(this.filters.engine,s.engine.toLowerCase()))&&e++}this.$el.find(".model-card").length==e?(this.$el.find(".message-no-results").show(),this.$el.find(".model-family-name").addClass("hide")):(this.$el.find(".message-no-results").hide(),this.$el.find(".model-family-name").removeClass("hide"))},MASERATI.CtaComparator.prototype.getModels=function(){this.modelsList=this.getDataModelList(),this.vModelsList=new Vue({name:"vModelsList",el:this.$modelsList[0],data:{modelsList:this.modelsList,modelsSelected:this.modelsSelected,labels:this.modelsListLabel},delimiters:["{","}"]})},MASERATI.CtaComparator.prototype.showModelComparable=function(){this.vStickyBar=new Vue({name:"stickyBar",el:this.$stickyBar[0],data:{modelsSelected:this.modelsSelected,labels:this.modelsListLabel},delimiters:["{","}"]})},MASERATI.CtaComparator.prototype.getDataModelList=function(){let e=[];return this.$el.find(".models-data").find("> .row").each((function(t,i){let n={models:[]};n.modelFamily=i.dataset.modelfamily,n.modelFamilyName=i.dataset.modelfamilyname,$(i).find("> .model-card").each((function(e,t){let i=JSON.parse(JSON.stringify(t.dataset));i.selected=!1,i.removed=!1,n.models.push(i)})),e.push(n)})),e},MASERATI.CtaComparator.prototype.getModelImage=function(e,t){return location.protocol+"//"+location.host+"/"+("content/dam/maserati/international/Models/default/2019/"+e+"/"+e+"_"+t+".png")},MASERATI.CtaComparator.prototype.getSpecificModelImage=function(e,t,i,n){var s=location.protocol+"//"+location.host+"/",o="content/dam/maserati/international/Models/default/"+i+"/"+t+"/versions/"+e+".jpg";return 0==t.length?this.getModelImage(n,"front"):s+o},MASERATI.CtaComparator.prototype.toggleSelectedModel=function(e,t){if(e.selected)t.modelsSelected.splice(this.modelsSelected.indexOf(e),1);else{if(this.modelsSelected.length>=2)return;this.modelsSelected.push(e)}e.selected=!e.selected},MASERATI.CtaComparator.prototype.enableCompareButton=function(){let e=$(this.$el).find("#compare-models");2==this.modelsSelected.length?(e.attr("enabled",!0),e.parent(".cta").removeClass("disabled")):(e.attr("enabled",!1),e.parent(".cta").addClass("disabled"))},MASERATI.CtaComparator.prototype.getCompareModels=function(){var e=this,t=e.modelsSelected[0].modelcode.toString(),i=e.modelsSelected[1].modelcode.toString();$.when(e.getModelDataToCompare(t),e.getModelDataToCompare(i)).done((function(t,i){e.modelsDataToCompare.push(t,i),2==e.modelsDataToCompare.length&&e.manipulateDataFromService(e.modelsDataToCompare)}))},MASERATI.CtaComparator.prototype.getModelDataToCompare=function(e){var t={async:!0,crossDomain:!0,url:this.$el.attr("data-base-url")+"/cc/adm/frontend/countryModelEquipmentForComparison/"+this.$el.attr("data-country")+"/"+e+"/"+this.$el.attr("data-languages"),method:"GET",dataType:"jsonp"};return $.ajax(t).pipe((function(e){return e}))},MASERATI.CtaComparator.prototype.manipulateDataFromService=function(e){let t=Object.assign({modelA:e[0].results,modelB:e[1].results});this.orderedGroupList=e[0].orderedGroupList,this.equipmentTypeList=e[0].equipmentTypeList;let i={modelA:{},modelB:{}};for(a=0;a<t.modelA.length;a++){var n=t.modelA[a].trim;i.modelA[n]=t.modelA[a]}for(b=0;b<t.modelB.length;b++){n=t.modelB[b].trim;i.modelB[n]=t.modelB[b]}this.listTechData=this.$overlayComponent.find(".list-techData").attr("data-tech").split(",");var s=this.mergeTechData(i,this.listTechData,"",""),o=this.mergeEquipments(this.orderedGroupList,this.equipmentTypeList,i,"","");this.fillOverlayCompareData(i,s,o)},MASERATI.CtaComparator.prototype.mergeTechData=function(e,t,i,n){var s=""==i?"none":i,o=""==n?"none":n,a=Object.assign({modelA:e.modelA[s].techData,modelB:e.modelB[o].techData}),r={},l={};return t.forEach((function(e){if(a.modelA.hasOwnProperty(e)){let t=a.modelA[e].label;try{t==a.modelB[e].label&&(l=Object.assign({label:t,valueModelA:a.modelA[e].value,valueModelB:a.modelB[e].value}),r[e]=l)}catch(e){}}})),r},MASERATI.CtaComparator.prototype.mergeEquipments=function(e,t,i,n,s){var o=""==n?"none":n,a=""==s?"none":s;let r={};i.modelA[o].comparisonEquipments.forEach((function(e){r[Object.keys(e)[0]]=e[Object.keys(e)[0]]}));let l={};i.modelB[a].comparisonEquipments.forEach((function(e){l[Object.keys(e)[0]]=e[Object.keys(e)[0]]}));let d=this.intersectionEquipments(t,r,l),c={};for(var h in e)for(var u in c[h]={},c[h].label=e[h],c[h].eqList={},c[h].differenceType=!1,d)d[u].group==h&&(c[h].eqList[u]=d[u],d[u].typeA!=d[u].typeB&&(c[h].differenceType=!0));return c},MASERATI.CtaComparator.prototype.intersectionEquipments=function(e,t,i){var n=this;let s=Object.keys(t).filter((function(e){return i.hasOwnProperty(e)})),o=Object.keys(t).filter((function(e){return!i.hasOwnProperty(e)})),a=Object.keys(i).filter((function(e){return!t.hasOwnProperty(e)})),r={};return void 0!==s&&s.length>0&&$.each(s,(function(n,s){r[s]=Object.assign({label:t[s].label,group:t[s].group,typeA:e.hasOwnProperty(t[s].type)?e[t[s].type]:"",typeB:e.hasOwnProperty(i[s].type)?e[i[s].type]:""})})),void 0!==o&&o.length>0&&$.each(o,(function(i,s){r[s]=Object.assign({label:t[s].label,group:t[s].group,typeA:e.hasOwnProperty(t[s].type)?e[t[s].type]:"",typeB:n.overlayLabelsList.notavailable})})),void 0!==a&&a.length>0&&$.each(a,(function(t,s){r[s]=Object.assign({label:i[s].label,group:i[s].group,typeA:n.overlayLabelsList.notavailable,typeB:e.hasOwnProperty(i[s].type)?e[i[s].type]:""})})),r},MASERATI.CtaComparator.prototype.fillOverlayCompareData=function(e,t,i){var n=this;n.$el.removeClass("compare-loading"),$("body").addClass("locked"),null!=n.vOverlayCompare?(n.vOverlayCompare.compareData=e,n.vOverlayCompare.techData=t,n.vOverlayCompare.overlayOpen=!0):n.vOverlayCompare=new Vue({name:"vOverlay",el:n.$overlayComponent[0],data:{modelsSelected:n.modelsSelected,compareData:e,techData:t,equipments:i,labels:n.overlayLabelsList,showDifference:!1,trimModelA:"none",trimModelB:"none",overlayOpen:!0},methods:{closeOverlay:function(){n.modelsDataToCompare=[],this.trimModelA="none",this.trimModelB="none",this.overlayOpen=!1,$("body").removeClass("locked"),$(".overlay-container").animate({scrollTop:0},0)}},mounted:function(){this.$nextTick((function(){n.getHeaderHeight(),$(n.vOverlayCompare.$el).find(".overlay-container")[0].addEventListener("scroll",(function(e){n.bindScrollOverlayCompare()}),!1)}))},delimiters:["{","}"]})},MASERATI.CtaComparator.prototype.getHeaderHeight=function(){if(null!=this.vOverlayCompare){var e=void 0!==this.vOverlayCompare?$(this.vOverlayCompare.$el).find(".header-feature"):this.$el.find(".overlay").find(".header-feature"),t=$(this.vOverlayCompare.$el).find(".features").outerWidth();if(e.width(t),e.hasClass("hide-overlay-header")){if(e.addClass("opacity-header"),void 0!==e[0]){e[0].style.removeProperty("height");var i=e.outerHeight();e.data("outerHeight",i),MASERATI.Helpers.Mobile.isMobile()?e.height(57):e.height(78),e.next(".features").css("margin-top",i),e.removeClass("opacity-header")}}else if(void 0!==e[0]){e[0].style.removeProperty("height");i=e.outerHeight();e.data("outerHeight",i),e.height(i),e.next(".features").css("margin-top",i)}}},MASERATI.CtaComparator.prototype.formatPrice=function(e){return(e/1).toFixed(2).replace(".",",").toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},$((function(){$(".cta-comparator").each((function(){new MASERATI.CtaComparator($(this))}))}))},function(e,t){$((function(){CurrentOffertsNewVue=function(e,t){t.currentOffers=t.currentOffers.map((function(e){return e.lease={},e.lease.amount=null==e.lease_amount?"":e.lease_amount,e.lease.disclaimer=null==e.lease_disclaimer?"":e.lease_disclaimer,e.lease.amountDescription1=null==e.lease_note?"":e.lease_note,e.lease.amountDescription2=null==e.lease_total_note?"":e.lease_total_note,e.lease.visibility=e.lease.amount.length>0&&e.lease.disclaimer.length>0&&e.lease.amountDescription1.length>0&&e.lease.amountDescription2.length>0,e.finance={},e.finance.amount=null==e.finance_apr_text?"":e.finance_apr_text,e.finance.amountDescription1=null==e.finance_note?"":e.finance_note,e.finance.amountDescription2=null==e.finance_total_note?"":e.finance_total_note,e.finance.visibility=e.finance.amount.length>0&&e.finance.amountDescription1.length>0&&e.finance.amountDescription2.length>0,e.tracking={},e.tracking.vehicleDetails="cta:offers:"+e.modelYear+e.modelName+":vehicle-details",e.tracking.termsCondition="cta:offers:"+e.modelYear+e.modelName+":terms-condition",e.disclaimer=e.disclaimer,e.modelFilter=e.modelDescr.toLowerCase().split(" ")[0],e.disclaimerVisibility=null!=e.disclaimer&&e.disclaimer.length>0,e.detailVisibility=null!=e.description&&e.description.length>0,e.modelLink="",e.ctas=[],null!=e.cta_label&&null!=e.cta_link&&e.cta_style&&e.ctas.push({label:e.cta_label,link:e.cta_link,isBlue:"cta-blue"==e.cta_style,isGrey:"cta-white"==e.cta_style}),null!=e.cta_label&&null!=e.cta2_link&&null!=e.cta2_style&&null!=e.cta2_label&&null!=e.cta2_link&&e.cta2_style&&e.ctas.push({label:e.cta2_label,link:e.cta2_link,isBlue:"cta-blue"==e.cta2_style,isGrey:"cta-white"==e.cta2_style}),e})),new Vue({el:e.find(".grid-vue")[0],data:{currentOffers:t.currentOffers,labels:function(e){var t=e.find(".labels");return JSON.parse(JSON.stringify(t[0].dataset))}(e),imageAction:e.data("imageaction"),noResults:0==t.currentOffers.length?"block":"none"},methods:{modelImage:function(e,t,i){return"https://www.maserati.com/"+("content/dam/maserati/international/Models/default/"+i+"/"+t+"/versions/"+e+".jpg")}},template:'<section> <div class="grid"> <div class="car-container"> <div class="more-details" v-for="(item, index) in currentOffers" v-bind:class="{active: index==0}" v-bind:data-model="item.modelFilter" v-bind:data-year="item.modelYear"> <div class="grid-item"> <div class="inner-grid-item"> <div class="header"> <div class="year">{item.modelYear}</div><div class="title">{item.title}</div><div class="subtitle">{item.subtitle}</div></div><div class="container"> <a tabindex="-1" :href="imageAction==\'modelPage\' ? item.modelLink : false" target="_blank" class="image" v-bind:class="{\'img-view-details\': (imageAction==\'vehicleDetails\')}" v-bind:style="{backgroundImage: \'url(\' + modelImage(item.modelName, item.modelFamily, item.modelYear) + \')\'}"></a> <div class="view-details" role="button" aria-pressed="false" aria-label="show details" v-bind:data-linktracking="item.tracking.vehicleDetails" v-if="item.detailVisibility"> <span>{labels.vehicledetails}</span> <div class="icon"></div></div><div class="description"> <div v-if="item.lease.visibility" class="lease"> <div class="label">{labels.leasefor}</div><div class="amount"> <div class="value">{item.lease.amount}</div><div class="note">{item.lease.amountDescription1}</div></div><div class="label">{labels.totalsigning + " " + item.lease.amountDescription1}</div><div class="price-diclaimer">{item.lease.disclaimer}</div></div><div v-if="item.finance.visibility" class="finance"> <div class="label">{labels.financefor}</div><div class="amount"> <div class="value">{item.finance.amount}</div><div class="note">{item.finance.amountDescription1}</div></div><div class="label">{item.finance.amountDescription2}</div></div></div></div><div class="cta-container"> <div v-for="cta in item.ctas" v-bind:class="{\'bg-blue\': cta.isBlue, \'color-white\': cta.isBlue, \'border-grey\': cta.isGrey}" class="cta"> <a v-bind:href="cta.link" v-bind:data-linktracking="cta.tracking">{cta.label}</a> </div></div></div><div class="terms-button" tabindex="0" role="button" aria-pressed="false" aria-label="show terms disclaimer" v-bind:data-linktracking="item.tracking.termsCondition" v-if="item.disclaimerVisibility"> *{labels.termscondictions}</div><div class="popup terms"> <div class="close" role="button" aria-pressed="false" aria-label="close terms disclaimer"></div><div class="title">{labels.termscondictions}</div><div class="content">{item.disclaimer}</div></div><div class="popup details"> <div class="close" role="button" aria-pressed="false" aria-label="close details disclaimer"></div><div class="year">{item.modelYear}</div><div class="title">{item.title}</div><div class="sub-title">{item.description}</div><div class="label">{labels.vehicledetails}</div><div class="content">{item.description}</div></div></div></div></div></div><div v-bind:style="{display: noResults}" class="message-no-results">{labels.notresults}</div></section>',mounted:function(){this.$nextTick((function(){new MASERATI.CurrentOffers($(this.$el).parents(".currentOffertsNew"))}))},delimiters:["{","}"]})},$(".currentOffertsNew").each((function(){var e=$(this),t={async:!0,crossDomain:!0,url:e.attr("data-baseUrl")+"?country="+e.attr("data-country")+"&language="+e.attr("data-language")+"&modelName="+e.attr("data-modelName"),method:"GET",dataType:"jsonp"};$.ajax(t).pipe((function(t){CurrentOffertsNewVue(e,t.result)}),(function(){CurrentOffertsNewVue(e,{currentOffers:[]})}))}))}))},function(e,t){MASERATI.CurrentOffers=function(e){this.$el=e,this.$grid=this.$el.find(".grid"),this.$years=this.$el.find(".years"),this.$models=this.$el.find(".models"),this.$carContainer=this.$grid.find(".car-container"),this.currentElement=null,this.animationDelay=300,this.hideAnimationQueue,this.showAnimationQueue,this.animateAlreadyVisible=!0,this.multiSelect=!1,this.bindEvents(),this.setFilters(),this.handleUrlFilters(),this.arrangeSize(),this.bind()},MASERATI.CurrentOffers.prototype.updateNoResults=function(){0==this.$el.find(".car-container .more-details:not(.hide)").length?this.$el.find(".message-no-results").fadeIn():this.$el.find(".message-no-results").hide()},MASERATI.CurrentOffers.prototype.handleUrlFilters=function(){let e=MASERATI.Helpers.getUrlParameter("filterModel");console.log("Filtered model: "+e),void 0!==e&&e&&(console.log("Filtering models per value"),$(".filter[data-filter='"+e+"']").length>0&&$(".filter[data-filter='"+e+"']").click())},MASERATI.CurrentOffers.prototype.bindEvents=function(){var e=this;this.$el.find(".view-details").on("click",(function(){e.toggleDisclaimer($(this).parents(".grid-item").find(".popup.details"))})),this.$el.find(".img-view-details").on("click",(function(){e.toggleDisclaimer($(this).parents(".grid-item").find(".popup.details"))})),this.$el.find(".img-view-details").css("cursor","pointer"),this.$el.find(".terms-button").on("click",(function(){e.toggleDisclaimer($(this).parents(".grid-item").find(".popup.terms"))})),this.$el.find('.close[role="button"]').on("click",(function(){e.toggleDisclaimer($(this).parents(".popup"))}))},MASERATI.CurrentOffers.prototype.setFilters=function(){var e=this,t=this.$el.find(".filter");0!=t.length&&(this.multiSelect&&t.addClass("selected"),e.$el.find(".filter").on("keydown",(function(t){t.stopPropagation();var i=$(t.currentTarget),n=void 0;37===event.keyCode?n=i.is(":first-child")?e.$el.find(".filter").last():i.prev():39===event.keyCode?n=i.is(":last-child")?i.parent().find(".filter").first():i.next():36===event.keyCode?n=i.parent().find(".filter").first():35===event.keyCode&&(n=i.parent().find(".filter").last()),null!=n&&(n.trigger("click"),n.focus())})),t.click((function(){$(this).siblings().attr("tabindex","-1"),$(this).attr("tabindex","0"),e.filterItems($(this))})))},MASERATI.CurrentOffers.prototype.toggleDisclaimer=function(e){e.hasClass("open")?this.hidePopup(e):this.showPopup(e)},MASERATI.CurrentOffers.prototype.showPopup=function(e){e.show(),e.addClass("open")},MASERATI.CurrentOffers.prototype.hidePopup=function(e){e.removeClass("open")},MASERATI.CurrentOffers.prototype.filterItems=function(e){var t=this;this.$grid.find(".plus.open").click(),this.styleFilters(e);var i=this.getFilters(this.$models),n=this.getFilters(this.$years);this.animateOffers(i,n),setTimeout((function(){t.arrangeSize()}),this.animationDelay)},MASERATI.CurrentOffers.prototype.styleFilters=function(e){var t=e.parent();e.toggleClass("selected"),this.multiSelect?(e.filter(".all.selected").siblings().addClass("selected"),e.not(".all,.selected").siblings(".all").removeClass("selected"),0==t.children(":not(.all):not(.selected)").length&&t.children(".all").addClass("selected")):e.siblings().removeClass("selected"),0==t.children(".selected").length&&t.children(".all").addClass("selected")},MASERATI.CurrentOffers.prototype.getFilters=function(e){return e.find(".selected:not(.all), .all.selected~.filter").map((function(){return $(this).data("filter")})).get()},MASERATI.CurrentOffers.prototype.animateOffers=function(e,t){var i=this;this.$carContainer.addClass("animating"),this.resetDelayedAnimationQueue(),this.$el.find(".more-details").each((function(){var n=$(this);e.indexOf(n.data("model"))>=0&&t.indexOf(n.data("year"))>=0?i.showCard(n):i.hideCard(n)})),this.runDelayedAnimationQueue()},MASERATI.CurrentOffers.prototype.hideCard=function(e){this.hidePopup(e.find(".plus.open, .popup.open"));let t=e.position();e.data("left",t.left).data("top",t.top),e.css("height",e.height()),e.addClass("hide"),this.enqueueDelayedAnimation(e,!0)},MASERATI.CurrentOffers.prototype.showCard=function(e){e.css("position","").css("left","").css("top","").data("left","").data("top",""),e.css("height",""),this.prepareClone(e),this.enqueueDelayedAnimation(e,!1)},MASERATI.CurrentOffers.prototype.enqueueDelayedAnimation=function(e,t){t?this.hideAnimationQueue.push(e):this.showAnimationQueue.push(e)},MASERATI.CurrentOffers.prototype.resetDelayedAnimationQueue=function(){this.hideAnimationQueue=[],this.showAnimationQueue=[]},MASERATI.CurrentOffers.prototype.runDelayedAnimationQueue=function(){this.runDelayedHideAnimationQueue(),this.runDelayedShowAnimationQueue()},MASERATI.CurrentOffers.prototype.runDelayedHideAnimationQueue=function(){for(var e=null,t=this,i=[];e=this.hideAnimationQueue.pop();)e.css("position","absolute").css("left",e.data("left")).css("top",e.data("top")),i.push(e);setTimeout((function(){for(;e=i.pop();)e.hide();t.destroyClones(),t.$carContainer.removeClass("animating")}),this.animationDelay)},MASERATI.CurrentOffers.prototype.runDelayedShowAnimationQueue=function(){for(var e=null,t=this,i=[];e=this.showAnimationQueue.pop();)e.show(),i.push(e);requestAnimationFrame((function(){for(;e=i.pop();)e.removeClass("hide"),t.animateClone(e);t.updateNoResults()}))},MASERATI.CurrentOffers.prototype.animateClone=function(e){if(this.animateAlreadyVisible&&e.hasClass("clone")){let t=e.data("original").position();e.css("left",t.left).css("top",t.top)}},MASERATI.CurrentOffers.prototype.prepareClone=function(e){if(this.animateAlreadyVisible&&!e.hasClass("hide")){let t=e.position(),i=e.clone().css("position","absolute").css("left",t.left).css("top",t.top).addClass("clone").data("original",e).appendTo(e.parent());this.enqueueDelayedAnimation(i,!1),e.addClass("cloned")}},MASERATI.CurrentOffers.prototype.destroyClones=function(){this.$grid.find(".clone").remove(),this.$grid.find(".cloned").removeClass("cloned")},MASERATI.CurrentOffers.prototype.arrangeSize=function(){var e=this.$el.find(".more-details").not(".hide").find(".grid-item"),t=3;if(!MASERATI.Helpers.Mobile.isMobile()){window.innerWidth<1280&&(t=2);for(var i=0;i<e.length;i+=t)this.arrangeSizeRow(e.slice(i,i+t))}},MASERATI.CurrentOffers.prototype.arrangeSizeRow=function(e){var t=0,i=0,n=0,s=0;e.height(""),e.find(".header").height(""),e.find(".container").height(""),e.find(".cta-container").height(""),e.each((function(){var e=$(this);s<=e.height()&&(s=e.height()),t<=e.find(".header").height()&&(t=e.find(".header").height()),i<=e.find(".container").height()&&(i=e.find(".container").height()),n<=e.find(".cta-container").height()&&(n=e.find(".cta-container").height())})),e.each((function(){$(this).height(s),$(this).find(".header").height(t),$(this).find(".container").height(i),$(this).find(".cta-container").height(n)}))},MASERATI.CurrentOffers.prototype.bind=function(){var e=this;$(window).resize((function(){e.arrangeSize()}))},$((function(){$(".currentOfferts").each((function(){new MASERATI.CurrentOffers($(this))}))}))},function(e,t){MASERATI.DealerAddress=function(e){this.$element=e,this.$dealers=this.$element.find(".dealer-address__office"),this.tablet=768,this.desktop=1024,this.initEvents()},MASERATI.DealerAddress.prototype.initEvents=function(){this.checkDealerName();var e=this,t=MASERATI.Helpers.debounce((function(){e.checkDealerName()}),0);$(window).bind("resize",(function(){t()}))},MASERATI.DealerAddress.prototype.checkDealerName=function(){let e=0,t=0,i=this.$dealers.length;if(window.innerWidth>=this.desktop?t=3:window.innerWidth>=this.tablet&&(t=2),t>0&&i>1)for(this.$dealers.find(".dealer-name").height("");e+1<i;){let i=0,n=this.$dealers.slice(e,e+t);n.each((function(){i=Math.max(i,$(this).find(".dealer-name").height())})),n.find(".dealer-name").height(i),e+=t}},$((function(){$("body").on("DOMSubtreeModified",".dealer-address",(function(){""!=this.innerHTML&&new MASERATI.DealerAddress($(this))}))}))},function(e,t){MASERATI.DealerFooter=function(e){this.$element=e,this.init()},MASERATI.DealerFooter.prototype.init=function(){var e=document.getElementById("lang-change");null!=e&&(e.onchange=function(){window.location.href=this.value})},$((function(){var e=$("#maserati_footer_dealers");e.length&&new MASERATI.DealerFooter(e)}))},function(e,t){MASERATI.DealerHeroImageHome=function(e,t){this.$element=e,this.$scrollDown=this.$element.find(".downArrow"),this.$offset=t,this.initEvents()},MASERATI.DealerHeroImageHome.prototype.initEvents=function(){var e=this;this.$element.find(".title-cta-table .title, .title-cta-table .subtitle").click((function(){$(".title-cta-table .cta.cta-button a")[0].click()})),this.$scrollDown&&this.$scrollDown.click((function(){$($(this).attr("data-to")).velocity("scroll",{offset:-e.$offset})}))},$((function(){$(".hero-image-home-dealers").each((function(){new MASERATI.DealerHeroImageHome($(this),$("#maserati_menu_dealers").height())}))}))},function(module,exports){MASERATI.DealerIntro=function(intro){this.$mobileTrigger=document.querySelector(".dealer-intro-title__mobileTrigger");var hook=intro.querySelector(".dealer-intro-title__text__waypoint"),menuElement=document.querySelector("#maserati_menu, #maserati_menu_2018"),customOffset=eval(intro.dataset.customOffset),offset=void 0===customOffset?this.dealerIntroOffset(menuElement):customOffset,waypoint=new Waypoint({element:hook,handler:this.dealerIntroHandler,offset:offset});this.$mobileTrigger.addEventListener("click",this.mobileTriggerHandler)},MASERATI.DealerIntro.prototype.mobileTriggerHandler=function(){$("body").toggleClass("isMobileIntroOpened")},MASERATI.DealerIntro.prototype.dealerIntroOffset=function(e){return null===e?0:e.getBoundingClientRect().height},MASERATI.DealerIntro.prototype.dealerIntroHandler=function(e){if(!(document.getElementById("maserati_menu")||document.getElementById("maserati_menu_2018")).classList.contains("not-sticky")){var t=this.element.parentElement.querySelector(".dealer-intro-title__text");if(t)("up"===e?t.classList.remove:t.classList.add).call(t.classList,"dealer-intro-title__text--visible")}};var dealerIntroNodeList=document.querySelectorAll(".dealer-intro-title"),dealerIntroArray=Array.prototype.slice.call(dealerIntroNodeList);dealerIntroArray.forEach((function(e){new MASERATI.DealerIntro(e)}))},function(e,t){MASERATI.DealerMenu=function(e){this.$element=e;var t=document.querySelectorAll(this.$element),i=Array.prototype.slice.call(t);this.init(i)},MASERATI.DealerMenu.prototype.closeMenu=function(){var e=document.querySelector(this.$element+" .maserati-menu__dealers__field.maserati-menu__dealers__field--active");e&&e.classList.remove("maserati-menu__dealers__field--active");var t=document.querySelector(this.$element+" .maserati-menu__dealers__list-wrapper.maserati-menu__dealers__list-wrapper--active");t&&t.classList.remove("maserati-menu__dealers__list-wrapper--active")},MASERATI.DealerMenu.prototype.init=function(e){e.forEach((function(e){var t=e.querySelectorAll(".maserati-menu__dealers__main__text");Array.prototype.slice.call(t).forEach((function(e){if(e){e.addEventListener("click",(function(t){e.classList.contains("with-subitems")&&t.preventDefault();var i=e.parentElement;if(i.classList.contains("maserati-menu__dealers__field--active"))i.classList.remove("maserati-menu__dealers__field--active");else{for(var n=document.querySelectorAll(".maserati-menu__dealers__field--active"),s=0;s<n.length;s++)n[s].classList.remove("maserati-menu__dealers__field--active");i.classList.add("maserati-menu__dealers__field--active")}}));var t=e.parentElement.querySelectorAll(".maserati-menu__dealers__sub__fields__field a"),i=Array.prototype.slice.call(t);null!==i&&i.forEach((function(e){e&&e.addEventListener("click",(function(e){var t=$(this).attr("href");if(t.includes("#")&&(window.location.pathname.substring(window.location.pathname.lastIndexOf("/")+1)===$(this).attr("href").split("#")[0].substring($(this).attr("href").split("#")[0].lastIndexOf("/")+1)&&t.includes("#"))){var i=t.split("#")[1];e.preventDefault(),MASERATI.Helpers.scrollTo("#"+i)}var n=document.querySelector(".maserati-menu__dealers__mobile-close");n?(console.log("closing mobile menu"),n.click()):console.log(n)}))}),this)}}),this);var i=e.querySelector(".maserati-menu__dealers__hamburger");null!==i&&i.addEventListener("click",(function(e){i.parentElement.querySelector(".maserati-menu__dealers__list-wrapper").classList.add("maserati-menu__dealers__list-wrapper--active"),$("body").removeClass("isMobileIntroOpened")}));var n=e.querySelectorAll(".maserati-menu__dealers__mobile-close, .maserati-menu__dealers__field.ctaContainer a");if(null!==n)for(var s=0;s<n.length;s++)n[s].addEventListener("click",(function(e){var t=$(this).attr("href");if(t.includes("#")){var i=window.location.pathname.substring(window.location.pathname.lastIndexOf("/")+1);if(i===(t.split("#")[0].substring(t.split("#")[0].lastIndexOf("/")+1)||i)){var n=t.split("#")[1];e.preventDefault(),MASERATI.Helpers.scrollTo("#"+n)}}})),n[s].addEventListener("click",this.closeMenu.bind(this))}),this)},$((function(){new MASERATI.DealerMenu(".maserati-menu__dealers")}))},function(e,t){MASERATI.CustomDisclaimer=function(e,t){this.$element=e,this.$trigger=t,this.opened=!1,this.bindEvents()},MASERATI.CustomDisclaimer.prototype.populate=function(e,t){var i=$(t).data("item");if(null!=i){var n=e.find(".content"),s=n.data("prefix"),o=$("#"+s+i).html();n.html(o).prepend("<span>"+i+".</span>")}},MASERATI.CustomDisclaimer.prototype.open=function(e){e.addClass("opened")},MASERATI.CustomDisclaimer.prototype.close=function(e){e.removeClass("opened")},MASERATI.CustomDisclaimer.prototype.bindEvents=function(){var e=this;$(".customDisclaimer").click((function(t){t.preventDefault();var i=$(this).data("item"),n=$("#custom-disclaimer").find("span").text();return""!=n&&(n=n.substring(0,n.length-1)),e.$element.hasClass("opened")&&n==i?e.close(e.$element):(e.populate(e.$element,this),e.open(e.$element)),!1})),this.$element.find(".close2").click((function(){e.close(e.$element)}))},$((function(){var e=$("#custom-disclaimer"),t=$(".customDisclaimer");e.length&&new MASERATI.CustomDisclaimer(e,t)}))},function(e,t){MASERATI.DynamicControls=function(e){this.$element=e,this.initActions(),this.bindEvents()},MASERATI.DynamicControls.prototype.initActions=function(){this.components=$("."+this.$element.attr("data-components")).toArray(),this.components.forEach((function(e,t){this[t]=MASERATI.Helpers.referenceMirror(e)}),this.components),MASERATI.Helpers.log(this.components);var e=this.$element.find(".action").toArray();this.actions=[],this.components.length>0&&this.components.length==e.length&&e.forEach((function(e,t){this.actions.push(new MASERATI.DynamicControlsAction($(e),this.components[t]))}),this)},MASERATI.DynamicControls.prototype.bindEvents=function(){var e=this,t=$("#maserati_menu, #maserati_menu_2018");e.$element.find(".action").click((function(){e.$element.find(".action").attr("aria-expanded","false"),$(this).attr("aria-expanded","true"),e.$element.find(".actionsTable").hasClass("active")?(e.scrollToMedia(e,t),e.$element.find(".overlay-close").focus()):e.$element.find(".overlay").velocity("fadeIn",{complete:function(){e.$element.find(".actionsTable").addClass("active"),e.scrollToMedia(e,t),e.$element.find(".overlay-close").focus()}}),e.deActivateAllBut(!0,$(this)[0])})),e.$element.find(".overlay-close").click((function(){e.$element.find(".overlay").velocity("fadeOut",{begin:function(){e.$element.find(".action").velocity({opacity:0},{queue:!1}),e.$element.velocity("scroll",{offset:(-t.length?-t.height():0)-30,duration:MASERATI.Animations.ctaScrollSpeed,easing:MASERATI.Animations.ctaEasing})},complete:function(){e.$element.find(".actionsTable").removeClass("active"),e.$element.find(".action").velocity({opacity:1},{queue:!1}),e.deActivateAll(!0),e.$element.find(".action[aria-expanded='true']").attr("aria-expanded","false").focus()}})}))},MASERATI.DynamicControls.prototype.scrollToMedia=function(e,t){e.$element.velocity("scroll",{offset:e.$element.outerHeight()+(t.length?-t.height():0),duration:MASERATI.Animations.ctaScrollSpeed,easing:MASERATI.Animations.ctaEasing})},MASERATI.DynamicControls.prototype.deActivateAll=function(e){this.actions.forEach((function(t){t.deActivate(e)}))},MASERATI.DynamicControls.prototype.deActivateAllBut=function(e,t){this.actions.forEach((function(i){i.$element[0]!==t&&i.deActivate(e)}))},MASERATI.DynamicControlsAction=function(e,t){this.$element=e,this.component=t,this.active=!1,this.bindEvents()},MASERATI.DynamicControlsAction.prototype.bindEvents=function(){var e=this;this.$element.click((function(){e.activate(!0)}))},MASERATI.DynamicControlsAction.prototype.activate=function(e){var t=this;t.component.$element.hasClass("active")||(t.component.triggerPlayerOpenEvent(),this.component.$element.velocity("slideDown",{begin:function(){t.component.$element.addClass("active")},complete:function(){e&&"function"==typeof t.component.play&&(t.component.play(),t.component.$element.addClass("active")),t.active=!0}}))},MASERATI.DynamicControlsAction.prototype.deActivate=function(e){var t=this;MASERATI.Helpers.log("deactivate",this.component),this.component.$element.velocity("slideUp",{begin:function(){t.component.$element.removeClass("active"),1==t.active&&(e&&"function"==typeof t.component.stop&&t.component.stop(),t.active=!1)}})},$(window).load((function(){$(".dynamic-controls").each((function(){new MASERATI.DynamicControls($(this))}))}))},function(e,t){MASERATI.FeaturesGallery=function(e,t,i){if(this.$el=e,this.$slidesContainer=this.$el.find(".main-slide"),this.$slides=this.$slidesContainer.find(".slide"),this.$pauseTrigger=this.$el.find(".pauseTrigger, .thumbs-pause"),this.$pauseTriggerCircle=this.$pauseTrigger.find("svg circle"),this.$prevTrigger=this.$el.find(".prevTrigger"),this.$nextTrigger=this.$el.find(".nextTrigger"),this.$thumbsContainer=this.$el.find(".thumbs"),this.$thumbs=this.$el.find(".thumb"),this.$dotsContainer=this.$el.find(".thumbs"),this.$dots=this.$el.find(".thumbs .item"),this.$menuStickyWrapper=$("nav"),this.delay=t,this.infiniteScrolling=i,this.forcePaused=!1,this.noVertical=!1,this.documentDirection="rtl"===$("html").attr("dir")?"rtl":"ltr",this.pointer="rtl"===this.documentDirection?this.infiniteScrolling?-100*(this.$slides.length-2):-100*(this.$slides.length-1):0,this.endPoint=-100*(this.$slides.length-1),this.imageDelta=this.getImageDelta(15),this.deltaDuration=300,this.deltaEasing="ease-in",this.thumbsOpacity=.4,this.thumbsDuration=300,this.thumbsEasing="ease-in",this.slideDuration=300,this.slideEasing="ease-in","rtl"===this.documentDirection){this.$slidesContainer.append(this.$slides.get().reverse()),this.$slidesContainer.velocity({translateX:this.pointer+"%"},{duration:0,easing:this.deltaEasing}),this.$dotsContainer.append(this.$dots.get().reverse())}this.moveThumbs(),this.initFeeling(),this.bindEvents(),this.handleVertical(),this.refreshSlides(),this.refreshPlaceholders(),this.inViewHandler(),this.loadComponent()},MASERATI.FeaturesGallery.prototype.getImageDelta=function(e){var t=e;return null!=this.$el.data("delta")&&this.$slidesContainer.find(".text-container:not(.right) .cta").length>0&&(t=this.$el.data("delta")),t},MASERATI.FeaturesGallery.prototype.moveThumbs=function(){this.$el.hasClass("topThumbs")&&this.$slidesContainer.detach().appendTo(this.$el)},MASERATI.FeaturesGallery.prototype.initFeeling=function(){var e=this;this.delay>0&&!1!==this.delay&&this.initWaypoints(this.delay),this.$thumbs.hover((function(){$(this).velocity("stop").velocity({opacity:1},{duration:e.thumbsDuration,easing:e.thumbsEasing})}),(function(){$(this).velocity("stop").velocity({opacity:e.thumbsOpacity},{duration:e.thumbsDuration,easing:e.thumbsEasing})})),this.infiniteScrolling&&("ltr"===this.documentDirection?(this.$slidesContainer.prepend(this.$slides.last().clone(!0).addClass("ghost-slide")),this.$slidesContainer.append(this.$slides.first().clone(!0).addClass("ghost-slide"))):(this.$slidesContainer.prepend(this.$slides.first().clone(!0).addClass("ghost-slide")),this.$slidesContainer.append(this.$slides.last().clone(!0).addClass("ghost-slide"))),this.$thumbsContainer.prepend('<div class="thumb ghost-thumb" style="display: none;"></div>'),this.$thumbsContainer.append('<div class="thumb ghost-thumb" style="display: none;"></div>'),this.$dotsContainer.prepend('<a class="item ghost-item" style="display: none;"></a>'),this.$dotsContainer.append('<a class="item ghost-item" style="display: none;"></a>'),this.endPoint=-100*(this.$slides.length-1),this.$slides=this.$slidesContainer.find(".slide"),this.$thumbs=this.$el.find(".thumb"),this.$dots=this.$el.find(".thumbs .item"),"ltr"===this.documentDirection?(this.pointer=-100,this.$slidesContainer.velocity({translateX:this.pointer+"%"},{duration:0,easing:e.deltaEasing})):(this.pointer=this.infiniteScrolling?-100*(this.$slides.length-2):-100*(this.$slides.length-1),this.$slidesContainer.velocity({translateX:this.pointer+"%"},{duration:0,easing:e.deltaEasing})),this.refreshSlides())},MASERATI.FeaturesGallery.prototype.triggerSlideChangeEvent=function(){MASERATI.AdobeTracking.tracker.setSatelliteTrack("GalleryEngage"),this.$el[0].dispatchEvent(new CustomEvent("slidechange"))},MASERATI.FeaturesGallery.prototype.bindEvents=function(){var e=this;this.$prevTrigger.click((function(){console.log("prev"),e.triggerSlideChangeEvent(),e.prev()})),this.$nextTrigger.click((function(){console.log("next"),e.triggerSlideChangeEvent(),e.next()}));let t=this.$el.find(".cta").add(this.$prevTrigger).add(this.$nextTrigger).add(this.$pauseTrigger).add(this.$slides);t.focus((function(){e.$el.addClass("focused")})),t.blur((function(){e.$el.removeClass("focused")})),this.$thumbs.click((function(){e.pointer=-100*(e.$thumbs.toArray().indexOf(this)+1),e.prev(),e.refreshSlides()})),this.$dots.click((function(){e.pointer=-100*(e.$dots.toArray().indexOf(this)+1),e.triggerSlideChangeEvent(),e.prev(),e.refreshSlides()})),this.$el.on("swipeleft",(function(){e.triggerSlideChangeEvent(),e.next()})),this.$el.on("swiperight",(function(){e.triggerSlideChangeEvent(),e.prev()})),$(window).on("orientationchange",(function(){e.refreshPlaceholders()}))},MASERATI.FeaturesGallery.prototype.refreshPlaceholders=function(){let e=screen.msOrientation||(screen.orientation||screen.mozOrientation||{}).type;!e&&window.orientation%180==0||e&&e.startsWith&&e.startsWith("portrait")?this.$el.addClass("portraitOrientation"):this.$el.removeClass("portraitOrientation")},MASERATI.FeaturesGallery.prototype.handleVertical=function(){var e=this;this.$slides.each((function(){let t=$(this),i=t.find(".background.landscape"),n=t.find(".background.portrait");if(i.length<=0||n.length<=0||i.length!=n.length)return e.noVertical=!0,e.$el.addClass("no-vertical"),!1;for(let t=0;t<i.length;t++)if(i[t].src==n[t].src||i[t].srcset==n[t].srcset)return e.noVertical=!0,e.$el.addClass("no-vertical"),!1})),this.noVertical&&this.$slides.each((function(){let t=$(this),i=t.find(".img-disclaimer:not(:empty)");i.length>0&&(!t.hasClass("fullScreen")||t.children("img.background").length<=1||MASERATI.Helpers.isSmallDeviceLandscape())&&(i.css({position:"relative"}),e.fitDisclaimer(i),$(window).resize((function(){e.fitDisclaimer(i)})))}))},MASERATI.FeaturesGallery.prototype.fitDisclaimer=function(e){let t=e.outerHeight();e.css({marginTop:-t})},MASERATI.FeaturesGallery.prototype.focusWithin=function(e){this.$slidesContainer.find(":focus").length>0&&e.focus()},MASERATI.FeaturesGallery.prototype.keyboardMove=function(e){37==e.keyCode?(this.triggerSlideChangeEvent(),this.prev()):39==e.keyCode&&(this.triggerSlideChangeEvent(),this.next())},MASERATI.FeaturesGallery.prototype.next=function(){var e=this;this.infiniteScrolling?this.pointer<=this.endPoint-100?(this.pointer-=100,this.$slidesContainer.velocity({translateX:this.pointer+"%"},{begin:function(){},duration:this.slideDuration,easing:this.slideEasing,complete:function(){e.pointer=-100,e.$slidesContainer.velocity({translateX:e.pointer+"%"},{duration:0,easing:e.deltaEasing}),e.refreshSlides()}})):(this.pointer-=100,this.$slidesContainer.velocity({translateX:this.pointer+"%"},{duration:this.slideDuration,easing:this.slideEasing,complete:function(){e.refreshSlides()}})):this.pointer<=this.endPoint?(this.$slidesContainer.velocity({translateX:this.pointer-this.imageDelta+"%"},{duration:this.deltaDuration,easing:this.deltaEasing,complete:function(t){$(t).velocity({translateX:e.endPoint+"%"},{duration:e.deltaDuration,easing:e.deltaEasing})}}),this.pointer=this.endPoint):(this.pointer-=100,this.$slidesContainer.velocity({translateX:this.pointer+"%"},{duration:this.slideDuration,easing:this.slideEasing,complete:function(){e.refreshSlides()}}))},MASERATI.FeaturesGallery.prototype.prev=function(){var e=this;this.infiniteScrolling?this.pointer>-200?(this.pointer+=100,this.$slidesContainer.velocity({translateX:this.pointer+"%"},{begin:function(){e.deinitTriggersAnimation()},duration:this.slideDuration,easing:this.slideEasing,complete:function(){e.pointer=-100*(e.$slides.length-2),e.$slidesContainer.velocity({translateX:e.pointer+"%"},{duration:0,easing:e.deltaEasing,complete:function(){e.focusWithin(e.$slidesContainer.find(".active"))}}),e.refreshSlides(!0)}})):(this.pointer+=100,this.$slidesContainer.velocity({translateX:this.pointer+"%"},{duration:this.slideDuration,easing:this.slideEasing,complete:function(){e.refreshSlides()}})):this.pointer>-100?(this.$slidesContainer.velocity({translateX:this.imageDelta+"%"},{duration:this.deltaDuration,easing:this.deltaEasing,complete:function(t){$(t).velocity({translateX:"0%"},{duration:e.deltaDuration,easing:e.deltaEasing})}}),this.pointer=0):(this.pointer+=100,this.$slidesContainer.velocity({translateX:this.pointer+"%"},{duration:this.slideDuration,easing:this.slideEasing,complete:function(){e.refreshSlides()}}))},MASERATI.FeaturesGallery.prototype.triggerAction=function(e,t){"prev"==e?"start"==t?this.$slidesContainer.velocity("stop").velocity({translateX:this.pointer+this.imageDelta+"%"},{duration:this.deltaDuration,easing:this.deltaEasing}):this.$slidesContainer.velocity("stop").velocity({translateX:this.pointer+"%"},{duration:this.deltaDuration,easing:this.deltaEasing}):"start"==t?this.$slidesContainer.velocity("stop").velocity({translateX:this.pointer-this.imageDelta+"%"},{duration:this.deltaDuration,easing:this.deltaEasing}):this.$slidesContainer.velocity("stop").velocity({translateX:this.pointer+"%"},{duration:this.deltaDuration,easing:this.deltaEasing})},MASERATI.FeaturesGallery.prototype.deinitTriggersAnimation=function(){this.$prevTrigger.unbind("hover"),this.$nextTrigger.unbind("hover")},MASERATI.FeaturesGallery.prototype.refreshThumbs=function(){var e=this,t=$(this.$thumbs.get(this.$slidesContainer.find(".active").index())),i=$(this.$dots.get(this.$slidesContainer.find(".active").index())),n=this.$dots.filter(":focus");this.$thumbs.each((function(){$(this).velocity("stop").velocity({opacity:e.thumbsOpacity},{duration:e.thumbsDuration,easing:e.thumbsEasing}),$(this).removeClass("active")})),t.velocity("stop").velocity({opacity:1},{duration:e.thumbsDuration,easing:e.thumbsEasing,complete:function(){t.addClass("active")}}),this.$dots.removeClass("active").attr("tabindex","-1"),i.addClass("active").attr("tabindex","0"),n.length>0&&i.focus()},MASERATI.FeaturesGallery.prototype.refreshSlides=function(e){var t=$(this.$slides.get(Math.floor(this.pointer/-100)));this.$slides.removeClass("active").attr("tabindex","-1"),this.$slides.find("a,[role=button]").attr("tabindex","-1"),t.addClass("active").attr("tabindex","0"),t.find("a,[role=button]").attr("tabindex","0"),this.refreshThumbs(),e||this.focusWithin(t),t.find(".text-container.lightgrey").length>0?this.$dotsContainer.addClass("black"):this.$dotsContainer.removeClass("black"),t.hasClass("right")?this.$dotsContainer.addClass("right"):this.$dotsContainer.removeClass("right"),t.hasClass("left")?this.$dotsContainer.addClass("left"):this.$dotsContainer.removeClass("left"),t.hasClass("lightgrey")?this.$dotsContainer.addClass("lightgrey"):this.$dotsContainer.removeClass("lightgrey"),this.update()},MASERATI.FeaturesGallery.prototype.initWaypoints=function(e){this.$el.waypoint({handler:function(e){},offset:"40%"}),this.$el.waypoint({handler:function(e){},offset:"-80%"})},MASERATI.FeaturesGallery.prototype.bind=function(){this.inViewHandler()},MASERATI.FeaturesGallery.prototype.inViewHandler=function(){var e=this;function t(){e.loadComponent()&&$(window).off("scroll",t)}$(window).on("scroll",t)},MASERATI.FeaturesGallery.prototype.loadComponent=function(){var e=this.$el.offset().top+.01*$(window).height();return e=e<0?0:e,!this.$el.hasClass("in-view")&&$(window).scrollTop()+$(window).height()>=e&&(this.update(),this.$el.addClass("in-view")),this.$el.hasClass("in-view")},MASERATI.FeaturesGallery.prototype.update=function(){this.$el.find(".slide.active").find("img.lazy-load").not(".lazy-loaded").each((function(){var e=$(this);e.one("load",(function(){e.addClass("lazy-loaded")})),e.data("src")&&(e.attr("src",e.data("src")),e.removeAttr("data-src"),e.removeData("src")),e.data("srcset")&&(e.attr("srcset",e.data("srcset")),e.removeAttr("data-srcset"),e.removeData("srcset"))}))},$((function(){$(".features-gallery").each((function(){new MASERATI.FeaturesGallery($(this),6e3,!0)}))}))},function(e,t){MASERATI.Footer=function(e){this.$element=e,this.init()},MASERATI.Footer.prototype.init=function(){var e=document.getElementById("lang-change");null!=e&&(e.onchange=function(){window.location.href=this.value})},$((function(){var e=$("#maserati_footer");e.length&&new MASERATI.Footer(e)}))},function(e,t){MASERATI.Footer2018=function(e){this.$el=e,this.init(),this.searchBind()},MASERATI.Footer2018.prototype.init=function(){var e=document.getElementById("lang-change");null!=e&&(e.onchange=function(){window.location.href=this.value})},MASERATI.Footer2018.prototype.printDealerDesktop=function(e,t){t=this.$el.find(".dealers-container").find(".list.template-definitions");for(var i=0;i<e.length;i++){var n=e[i],s=t.find(".element.template-definitions").clone();s.removeClass("template-definitions"),s.find(".dealer-name").text(n.dealerName),e.length>1&&s.find(".dealer-name").removeClass("hide"),s.find(".telephone").find("a").attr("href","tel:"+n.phone).text(n.phone),s.find(".address").text(n.address),s.find(".location").find("a").attr("href","https://www.google.com/maps/place/"+n.location),n.openingResult.length>0?s.find(".openingTimes").find(".times").html(decodeURI(n.openingResult)):s.find(".openingTimes").find(".times").html(decodeURI(e[i-1].openingResult)),s.appendTo(t.find(".list-left").find(".elements"))}t.removeClass("template-definitions")},MASERATI.Footer2018.prototype.printDealerMobile=function(e,t){t=this.$el.find(".dealers-container-mobile").find(".dealer-submenu-mobile.template-definitions");for(var i=0;i<e.length;i++){var n=e[i],s=t.find(".sub.template-definitions").first().clone(!0,!0);s.removeClass("template-definitions"),e.length>1?s.addClass("multi"):s.addClass("single"),s.find(".brand-li").find(".name").text(n.dealerName),s.find(".references").find(".telephone").find("a").attr("href","tel:"+n.phone),s.find(".address").text(n.address),s.find(".references").find(".location").find("a").attr("href","https://www.google.com/maps/place/"+n.location),n.openingResult.length>0?s.find(".openingTimes").find(".times").html(decodeURI(n.openingResult)):s.find(".openingTimes").find(".times").html(decodeURI(e[i-1].openingResult)),s.appendTo(t)}t.removeClass("template-definitions"),this.bind()},MASERATI.Footer2018.prototype.bind=function(){this.$el.find(".brand-li").click((function(){$(this).hasClass("open")?($(this).removeClass("open"),$(this).closest(".sub").find("ul").hide()):($(this).addClass("open"),$(this).closest(".sub").find("ul").show())}))},MASERATI.Footer2018.prototype.searchBind=function(){var e=this,t=this.$el.find(".footer-search-box.form-inline-input");t.attr("autocomplete","off"),e.$el.find(".search-overlay").length>0&&(t.focus((function(e){e.preventDefault(),e.target.focus({preventScroll:!0})})),t.focusin((function(t){e.$el.find(".search-overlay").addClass("show"),e.$el.find(".search").addClass("fixed");var i=e.$el.offset().top;$("html, body").animate({scrollTop:i},0,null),setTimeout((function(){$("body").one("click",(function(){e.$el.find(".search").removeClass("fixed"),e.$el.find(".search-overlay").removeClass("show")}))}),500)})),t.focusout((function(t){0==e.$el.find(".quick-links").length?e.$el.find(".search").removeClass("fixed"):e.$el.find(".quick-links").find(".links").find(".link").first().find("a").focus()})),e.$el.find(".quick-links").find(".links").find(".link").last().find("a").keydown((function(e){9==e.keyCode&&$("body").click()})))},$((function(){var e=$("#maserati_footer_2018");e.length&&(MASERATI.Helpers.Footer2018=new MASERATI.Footer2018(e))}))},function(e,t){MASERATI.footerStayUpToDate=function(e){var t=this;t.el=e,$(window).on("scroll",(function(e){$(window).scrollTop()>=$(t.el).height()?$(t.el).removeClass("hidden"):$(t.el).addClass("hidden")}))},$((function(){$(".stay-container").each((function(){new MASERATI.footerStayUpToDate($(this))}))}))},function(e,t){MASERATI.CtaToolWebToLead=function(e){this.$element=e,this.$formElement=this.$element.find("form"),this.$errorBox=this.$element.find(".errorBox"),this.$errorText=this.$errorBox.find('div[role="error"]'),this.$inputs=this.$element.find("input,select"),this.$getGeolocalization=this.$element.find(".getGeolocalization"),this.init(),this.checkPreferredModel(),this.checkZipCode()},MASERATI.CtaToolWebToLead.prototype.checkPreferredModel=function(){let e=MASERATI.Helpers.prefillManager.getPreferredModel(),t=!1,i=$('select[name="model_of_interest"]'),n=0,s=setInterval((function(){if($("option",$(i)).length>1){if(t=!0,e&&t)if(!$(i).val()||n<2){let t=!1;$('select[name="model_of_interest"] option').each((function(n){var s=new RegExp("^"+e,"i");t||(s.test($(this).val())&&($(this).prop("selected",!0),$(i).addClass("_hasvalue"),t=!0),"grancabrio"==e&&(s=new RegExp("^GranTurismo Convertible","i")).test($(this).val())&&($(this).prop("selected",!0),$(i).addClass("_hasvalue"),t=!0))})),clearInterval(s)}else n++}else 3==n?clearInterval(s):n++}),500)},MASERATI.CtaToolWebToLead.prototype.checkZipCode=function(){if($('input[data-trackingfield="zipcode"]').length>0){MASERATI.Helpers.prefillManager.getGeolocalizationZipCode((function(e){e?$('input[data-trackingfield="zipcode"]').length>0&&($(".getGeolocalization").css("display","none"),$('input[data-trackingfield="zipcode"]').val(e).addClass("_hasvalue"),$('input[data-trackingfield="zipcode"]')[0].dispatchEvent(new CustomEvent("change")),setTimeout((function(){$('input[data-trackingfield="zipcode"]')[0].dispatchEvent(new CustomEvent("change"))}),1e3)):$(".getGeolocalization").css("display","block")}))}else console.log("No zip code field in page. Skipping.")},MASERATI.CtaToolWebToLead.prototype.init=function(){var e=this;this.$formElement.on("valid",(function(t){e.$errorBox.removeClass("open")})),0==this.$element.parents(".vertical-layout-container-img-background").length?this.$formElement.on("error",(function(t){e.$errorBox.velocity("scroll",{duration:MASERATI.Animations.ctaScrollSpeed,easing:MASERATI.Animations.ctaEasing,offset:-$("#maserati_menu, #maserati_menu_2018").height(),complete:function(t){e.$errorBox.addClass("open")}}),e.$errorText.focus()})):this.$formElement.on("error",(function(t){e.$errorBox.velocity("scroll",{duration:MASERATI.Animations.ctaScrollSpeed,easing:MASERATI.Animations.ctaEasing,container:e.$element,complete:function(t){e.$errorBox.addClass("open")}}),e.$errorText.focus()})),this.$inputs.on("blur change",(function(e){""==this.value?this.classList.remove("_hasvalue"):this.classList.add("_hasvalue"),this.checkValidity()?this.classList.remove("error"):this.classList.add("error")})),this.$inputs.on("focus",(function(e){this.classList.add("_hasvalue")})),this.$inputs.each((function(e){""==this.value?this.classList.remove("_hasvalue"):this.classList.add("_hasvalue")})),this.$inputs.on("change",(function(e){""==this.value?this.classList.remove("_hasvalue"):this.classList.add("_hasvalue"),this.checkValidity()?this.classList.remove("error"):this.classList.add("error")})),this.$getGeolocalization.on("click",(function(e){MASERATI.Helpers.prefillManager.getGeolocalizationZipCode((function(e){e?$('input[data-trackingfield="zipcode"]').length>0&&($(".getGeolocalization").css("display","none"),$('input[data-trackingfield="zipcode"]').val(e).addClass("_hasvalue"),$('input[data-trackingfield="zipcode"]')[0].dispatchEvent(new CustomEvent("change")),setTimeout((function(){$('input[data-trackingfield="zipcode"]')[0].dispatchEvent(new CustomEvent("change"))}),1e3)):$(".getGeolocalization").css("display","block")}))})),requestAnimationFrame((function(){$(".awesomplete").each((function(){var e=$(this).children("input:first").attr("name");$("label[for="+e+"]").appendTo($(this)).css("transform","translateX(-26px)")}))}))},$((function(){$(".cta-tool-webtolead").not(".webtolead-2019").each((function(){new MASERATI.CtaToolWebToLead($(this))}))})),MASERATI.CtaToolNewsletter=function(e){this.$element=e,this.$close=this.$element.find(".close"),this.$form=this.$element.find(".form"),this.$formElement=this.$element.find("form"),this.$errorBox=this.$element.find(".errorBox"),this.$errorText=this.$errorBox.find('div[role="error"]'),this.$inputs=this.$element.find("input,select"),MASERATI.Helpers.referenceCreate(this.$element.get(0),this),this.init()},MASERATI.CtaToolNewsletter.prototype.slideToggle=function(){var e=this;if("none"!==e.$close.css("display")&&!e.$close.hasClass("velocity-animating")&&!e.$form.hasClass("velocity-animating")){var t="none"!==e.$form.css("display");e.$close.velocity("stop").velocity({rotateZ:t?"0":"45deg"},{duration:500,complete:function(){e.$element.velocity("scroll",{offset:-110})}}),e.$form.velocity({opacity:t?0:1},{duration:200}),e.$form.velocity("slide"+(t?"Up":"Down")),t?e.$element.removeClass(MASERATI.Constants.stateClassOpen):e.$element.addClass(MASERATI.Constants.stateClassOpen)}},MASERATI.CtaToolNewsletter.prototype.init=function(){var e=this;this.$close.click((function(){e.slideToggle()})),this.$element.children(".title").click((function(){e.slideToggle()})),this.$formElement.on("valid",(function(t){e.$errorBox.removeClass("open")})),this.$formElement.on("error",(function(t){e.$errorBox.velocity("scroll",{duration:MASERATI.Animations.ctaScrollSpeed,easing:MASERATI.Animations.ctaEasing,offset:-$("#maserati_menu, #maserati_menu_2018").height(),complete:function(t){e.$errorBox.addClass("open")}}),e.$errorText.focus()})),this.$inputs.on("blur change",(function(e){""==this.value?this.classList.remove("_hasvalue"):this.classList.add("_hasvalue"),this.checkValidity()?this.classList.remove("error"):this.classList.add("error")})),this.$inputs.on("focus",(function(e){this.classList.add("_hasvalue")})),this.$inputs.each((function(e){""==this.value?this.classList.remove("_hasvalue"):this.classList.add("_hasvalue")})),requestAnimationFrame((function(){$(".awesomplete").each((function(){var e=$(this).children("input:first").attr("name");$("label[for="+e+"]").appendTo($(this)).css("transform","translateX(-26px)")}))}))},MASERATI.CtaToolNewsletter.prototype.openFromCta=function(e){this.$element.hasClass(MASERATI.Constants.stateClassOpen)?this.$element.velocity("scroll",{duration:MASERATI.Animations.ctaScrollSpeed,easing:MASERATI.Animations.ctaEasing,offset:-e}):(this.$element.velocity("scroll",{duration:MASERATI.Animations.ctaScrollSpeed,easing:MASERATI.Animations.ctaEasing,offset:-e}),this.slideToggle())},$((function(){$(".cta-tool-newsletter").each((function(){new MASERATI.CtaToolNewsletter($(this))}))})),MASERATI.CtaToolWebToLead2019=function(e){this.$el=e,this.$formElement=this.$el.find("form"),this.$errorBox=this.$el.find(".errorBox"),this.$errorText=this.$errorBox.find('div[role="error"]'),this.$inputs=this.$el.find("input,select"),this.$getGeolocalization=this.$el.find(".search-nearby:not(.disabled)"),this.$getAllDealer=this.$el.find("#getAllDealers"),this.$searchDealerByzip=this.$el.find("#dealer-search"),this.$dealerSelected=this.$el.find('input[name="preferred_dealer"]'),this.$getAllDealer=this.$el.find("#getAllDealers"),this.init(),this.checkPreferredModel(),this.checkZipCode()},MASERATI.CtaToolWebToLead2019.prototype.checkPreferredModel=function(){var e=this;let t=MASERATI.Helpers.prefillManager.getPreferredModel(),i=!1,n=e.$el.find("#model-list"),s=0,o=setInterval((function(){if($("div.slide",$(n)).length>1){if(i=!0,t&&i)if(s<2){let i=!1;e.$el.find('input[name="model_of_interest"]').each((function(e){var n=new RegExp("^"+t,"i");i||(n.test($(this).val())&&($(this).prop("checked",!0),i=!0),"grancabrio"==t&&(n=new RegExp("^GranTurismo Convertible","i")).test($(this).val())&&($(this).prop("checked",!0),i=!0))})),clearInterval(o)}else s++}else 3==s?clearInterval(o):s++}),500)},MASERATI.CtaToolWebToLead2019.prototype.checkZipCode=function(){var e=this;MASERATI.Helpers.prefillManager.getGeolocalizationZipCode((function(t){t?e.$el.find('input[data-trackingfield="zipcode"]').length>0&&(e.$el.find('input[data-trackingfield="zipcode"]').val(t).addClass("_hasvalue"),e.$el.find('input[data-trackingfield="zipcode"]')[0].dispatchEvent(new CustomEvent("change")),setTimeout((function(){e.$el.find('input[data-trackingfield="zipcode"]')[0].dispatchEvent(new CustomEvent("change")),e.$el.find(".suggested-dealer").show()}),1e3)):e.$el.find(".search-nearby").css("display","block")}))},MASERATI.CtaToolWebToLead2019.prototype.init=function(){var e=this;this.$formElement.on("valid",(function(t){e.$errorBox.removeClass("open")})),0==this.$el.parents(".vertical-layout-container-img-background").length?this.$formElement.on("error",(function(t){e.$errorBox.velocity("scroll",{duration:MASERATI.Animations.ctaScrollSpeed,easing:MASERATI.Animations.ctaEasing,offset:e.$el.find("#maserati_menu, #maserati_menu_2018").height()-50,complete:function(t){e.$errorBox.addClass("open")}}),e.$errorText.focus()})):this.$formElement.on("error",(function(t){e.$errorBox.velocity("scroll",{duration:MASERATI.Animations.ctaScrollSpeed,easing:MASERATI.Animations.ctaEasing,container:e.$el,complete:function(t){e.$errorBox.addClass("open")}}),e.$errorText.focus()})),this.$inputs.on("blur change",(function(e){""==this.value?this.classList.remove("_hasvalue"):this.classList.add("_hasvalue"),this.checkValidity()?this.classList.remove("error"):this.classList.add("error")})),this.$inputs.on("focus",(function(e){this.classList.add("_hasvalue")})),this.$inputs.each((function(e){""==this.value?this.classList.remove("_hasvalue"):this.classList.add("_hasvalue")})),this.$inputs.on("change",(function(e){""==this.value?this.classList.remove("_hasvalue"):this.classList.add("_hasvalue"),this.checkValidity()?this.classList.remove("error"):this.classList.add("error")})),this.$getGeolocalization.on("click",(function(t){$(this).hasClass("disabled")||MASERATI.Helpers.prefillManager.getGeolocalizationZipCode((function(t){t?e.$el.find('input[data-trackingfield="zipcode"]').length>0&&(e.$el.find('input[data-trackingfield="zipcode"]').val(t).addClass("_hasvalue"),e.$el.find('input[data-trackingfield="zipcode"]')[0].dispatchEvent(new CustomEvent("change")),setTimeout((function(){e.$el.find('input[data-trackingfield="zipcode"]')[0].dispatchEvent(new CustomEvent("change"))}),1e3),e.$el.find(".suggested-dealer").show()):e.$el.find(".getGeolocalization").css("display","block")}))})),this.$searchDealerByzip.on("click",(function(t){e.$el.find('input[name="zipcode"]').val()?(e.$el.find('input[name="zipcode"]').removeClass("required"),e.$el.find("#all-dealer-container").hide(),e.$el.find(".suggested-dealer").show(),e.$el.find(".suggested-dealer label").trigger("click")):e.$el.find('input[name="zipcode"]').addClass("required")})),this.$getAllDealer.on("click",(function(t){e.$el.find(".search-nearby").parent(".cta-blue").addClass("disabled"),e.$el.find(".search-nearby").addClass("disabled"),e.$el.find(".suggested-dealer").hide(),e.$el.find("#all-dealer-container .slide").show(),e.$el.find("#nearbyDealer input").prop("checked",!1),e.$el.find("#all-dealer-container").show();let i=e.$el.find(".dealer-info.found").attr("data-index");i?e.$el.find("#dealerGroup_test")[0].WebtoLeadDealerGroup.goToSlide(i):MASERATI.Helpers.Mobile.isMobile()&&e.$el.find("#dealerGroup_test")[0].WebtoLeadDealerGroup.next()})),this.$dealerSelected.on("blur change",(function(t){this.$dealerSuggested.removeClass("selected"),e.$el.find("#dealer-group").find('input[name="preferred_dealer"]').parents("#webtolead-2019 .text-container").removeClass("dealer-selected"),$(this).is(":checked")&&$(this).parents("#webtolead-2019 .text-container").addClass("dealer-selected")})),requestAnimationFrame((function(){e.$el.find(".awesomplete").each((function(){var t=$(this).children("input:first").attr("name");e.$el.find("label[for="+t+"]").appendTo($(this)).css("transform","translateX(-26px)")}))}));var t=document.querySelector("#mobile"),i=$("#webtolead-2019").data("country");window.intlTelInput(t,{initialCountry:i,hiddenInput:"mobile",separateDialCode:!0,autoPlaceholder:"polite",customPlaceholder:function(e,t){return $("#webtolead-2019").find("label[for=phone]").text().trim()},formatOnDisplay:!1})},MASERATI.WebtoLeadModelList=function(e){this.$el=e,this.init()},MASERATI.WebtoLeadModelList.prototype.init=function(){if(this.$prev=this.$el.find(".prev"),this.$next=this.$el.find(".next"),this.$newsList=this.$el.find("#model-list"),this.$slides=this.$el.find(".slide"),this.scrollSpeed=500,this.currentElement=0,this.numElements=this.$el.find(".slide").length,this.viewportWidth=this.$newsList.width(),0!=this.numElements){if(this.isRtl="rtl"===$("html").attr("dir"),this.isRtl&&(this.$prev=this.$el.find(".next"),this.$next=this.$el.find(".prev")),this.isRtl?this.$next.hide():this.$prev.hide(),this.numElements>0&&this.bindEvents(),MASERATI.Helpers.Mobile.isMobile()){this.$slides.last().prependTo(this.$newsList),this.$el.find(".active").removeClass("active"),this.$slides=this.$el.find(".slide"),this.$slides.first().addClass("active"),this.currentElement=0}MASERATI.Helpers.Mobile.isMobile()&&this.next()}},MASERATI.WebtoLeadModelList.prototype.next=function(){let e=this.$el.find(".active"),t=e.outerWidth(!0);switch(this.viewportWidth=this.$newsList.width(),MASERATI.Helpers.Mobile.isMobile()){case!0:if(this.currentElement>=2){this.$slides.first().appendTo(this.$newsList),this.$slides=this.$el.find(".slide"),this.currentElement--;var i=t*this.currentElement-(this.viewportWidth-e.outerWidth(!1))/2;this.$newsList.animate({scrollLeft:i},0,(function(){})),this.currentElement++;i=t*this.currentElement-(this.viewportWidth-e.outerWidth(!1))/2}else{this.currentElement++;i=t*this.currentElement-(this.viewportWidth-e.outerWidth(!1))/2}break;case!1:if(this.currentElement>=2){this.$slides.first().appendTo(this.$newsList),this.$slides=this.$el.find(".slide"),this.currentElement--;i=t*this.currentElement;this.$newsList.animate({scrollLeft:i},0,(function(){})),this.currentElement++;i=t*this.currentElement}else{this.currentElement++;i=t*this.currentElement}}e.removeClass("active"),e=e.next(),e.addClass("active"),this.$newsList.animate({scrollLeft:i},this.scrollSpeed,(function(){}))},MASERATI.WebtoLeadModelList.prototype.prev=function(){let e=this.$el.find(".active"),t=e.outerWidth(!0);if(this.viewportWidth=this.$newsList.width(),MASERATI.Helpers.Mobile.isMobile()&&this.currentElement<=1){if(this.$slides.last().prependTo(this.$newsList),this.$slides=this.$el.find(".slide"),this.currentElement=2,MASERATI.Helpers.Mobile.isMobile())var i=t*this.currentElement-(this.viewportWidth-e.outerWidth(!1))/2;else i=t*this.currentElement;this.$newsList.animate({scrollLeft:i},0,(function(){})),this.currentElement=1}else if(this.currentElement<=0){if(this.$slides.last().prependTo(this.$newsList),this.$slides=this.$el.find(".slide"),this.currentElement=1,MASERATI.Helpers.Mobile.isMobile())i=t*this.currentElement-(this.viewportWidth-e.outerWidth(!1))/2;else i=t*this.currentElement;this.$newsList.animate({scrollLeft:i},0,(function(){})),this.currentElement=0}else this.currentElement--;if(e.removeClass("active"),e=e.prev(),e.addClass("active"),MASERATI.Helpers.Mobile.isMobile())i=t*this.currentElement-(this.viewportWidth-e.outerWidth(!1))/2;else i=t*this.currentElement;this.$newsList.animate({scrollLeft:i},this.scrollSpeed,(function(){}))},MASERATI.WebtoLeadModelList.prototype.bindEvents=function(){var e=this;e.$newsList.on("swipeleft",(function(t){e.currentElement<e.numElements-1&&e.next()})),e.$newsList.on("swiperight",(function(t){e.currentElement>0&&e.prev()})),e.$prev.on("click",(function(){e.prev()})),e.$next.on("click",(function(){e.next()})),e.$newsList.on("keydown",(function(){if("Tab"===event.key||9===event.keyCode)if(event.shiftKey){if(e.currentElement>0){var t=e.scrollSpeed;e.scrollSpeed=0,e.$prev.trigger("click"),e.scrollSpeed=t}}else if(e.currentElement<e.numElements-1){t=e.scrollSpeed;e.scrollSpeed=0,e.$next.trigger("click"),e.scrollSpeed=t}})),$(window).resize((function(){var t=e.scrollSpeed;e.scrollSpeed=0,e.scrollSpeed=t}))},MASERATI.WebtoLeadDealerGroup=function(e){this.$el=e,this.init()},MASERATI.WebtoLeadDealerGroup.prototype.init=function(){if(this.$prev=this.$el.find(".prev"),this.$next=this.$el.find(".next"),this.$newsList=this.$el.find("#dealer-group"),this.$slides=this.$el.find(".slide"),this.scrollSpeed=500,this.currentElement=0,this.numElements=this.$el.find(".slide").length,this.viewportWidth=this.$newsList.width(),0!=this.numElements&&(this.isRtl="rtl"===$("html").attr("dir"),this.isRtl&&(this.$prev=this.$el.find(".next"),this.$next=this.$el.find(".prev")),this.bindEvents(),MASERATI.Helpers.Mobile.isMobile())){this.$slides.last().prependTo(this.$newsList),this.$el.find(".active").removeClass("active"),this.$slides=this.$el.find(".slide"),this.$slides.first().addClass("active"),this.currentElement=0}},MASERATI.WebtoLeadDealerGroup.prototype.goToSlide=function(e){let t=this,i=this.$el.find(".active"),n=i.outerWidth(!0);switch(this.viewportWidth=this.$newsList.width(),this.currentElement=e,MASERATI.Helpers.Mobile.isMobile()){case!0:t.$el.find("#dealer-group .slide").removeClass("active"),t.$el.find("#dealer-group .text-container").removeClass("dealer-selected"),t.$el.find("#dealer-group .slide").eq(e).next().addClass("active"),t.$el.find("#dealer-group .slide").eq(e).next().find(".text-container").addClass("dealer-selected"),this.currentElement++;var s=n*this.currentElement-(this.viewportWidth-i.outerWidth(!1))/2;break;case!1:t.$el.find("#dealer-group .slide").removeClass("active"),t.$el.find("#dealer-group .text-container").removeClass("dealer-selected"),t.$el.find("#dealer-group .slide").eq(e).addClass("active"),t.$el.find("#dealer-group .slide").eq(e).find(".text-container").addClass("dealer-selected");s=n*this.currentElement}this.$newsList.animate({scrollLeft:s},0,(function(){}))},MASERATI.WebtoLeadDealerGroup.prototype.next=function(){let e=this.$el.find(".active"),t=e.outerWidth(!0);switch(this.viewportWidth=this.$newsList.width(),MASERATI.Helpers.Mobile.isMobile()){case!0:if(this.currentElement>=2){this.$slides.first().appendTo(this.$newsList),this.$slides=this.$el.find(".slide"),this.currentElement--;var i=t*this.currentElement-(this.viewportWidth-e.outerWidth(!1))/2;this.$newsList.animate({scrollLeft:i},0,(function(){})),this.currentElement++;i=t*this.currentElement-(this.viewportWidth-e.outerWidth(!1))/2}else{this.currentElement++;i=t*this.currentElement-(this.viewportWidth-e.outerWidth(!1))/2}break;case!1:if(this.currentElement>=2){this.$slides.first().appendTo(this.$newsList),this.$slides=this.$el.find(".slide"),this.currentElement--;i=t*this.currentElement;this.$newsList.animate({scrollLeft:i},0,(function(){})),this.currentElement++;i=t*this.currentElement}else{this.currentElement++;i=t*this.currentElement}}e.removeClass("active"),e=e.next(),e.addClass("active"),this.$newsList.animate({scrollLeft:i},this.scrollSpeed,(function(){}))},MASERATI.WebtoLeadDealerGroup.prototype.prev=function(){let e=this.$el.find(".active"),t=e.outerWidth(!0);if(this.viewportWidth=this.$newsList.width(),MASERATI.Helpers.Mobile.isMobile()&&this.currentElement<=1){if(this.$slides.last().prependTo(this.$newsList),this.$slides=this.$el.find(".slide"),this.currentElement=2,MASERATI.Helpers.Mobile.isMobile())var i=t*this.currentElement-(this.viewportWidth-e.outerWidth(!1))/2;else i=t*this.currentElement;this.$newsList.animate({scrollLeft:i},0,(function(){})),this.currentElement=1}else if(this.currentElement<=0){if(this.$slides.last().prependTo(this.$newsList),this.$slides=this.$el.find(".slide"),this.currentElement=1,MASERATI.Helpers.Mobile.isMobile())i=t*this.currentElement-(this.viewportWidth-e.outerWidth(!1))/2;else i=t*this.currentElement;this.$newsList.animate({scrollLeft:i},0,(function(){})),this.currentElement=0}else this.currentElement--;if(e.removeClass("active"),e=e.prev(),e.addClass("active"),MASERATI.Helpers.Mobile.isMobile())i=t*this.currentElement-(this.viewportWidth-e.outerWidth(!1))/2;else i=t*this.currentElement;this.$newsList.animate({scrollLeft:i},this.scrollSpeed,(function(){}))},MASERATI.WebtoLeadDealerGroup.prototype.bindEvents=function(){var e=this;e.$newsList.on("swipeleft",(function(t){e.currentElement<e.numElements-1&&e.next()})),e.$newsList.on("swiperight",(function(t){e.currentElement>0&&e.prev()})),e.$prev.on("click",(function(){e.prev()})),e.$next.on("click",(function(){e.next()})),e.$newsList.on("keydown",(function(){if("Tab"===event.key||9===event.keyCode)if(event.shiftKey){if(e.currentElement>0){var t=e.scrollSpeed;e.scrollSpeed=0,e.$prev.trigger("click"),e.scrollSpeed=t}}else if(e.currentElement<e.numElements-1){t=e.scrollSpeed;e.scrollSpeed=0,e.$next.trigger("click"),e.scrollSpeed=t}})),$(window).resize((function(){var t=e.scrollSpeed;e.scrollSpeed=0,e.scrollSpeed=t}))},$((function(){$("#webtolead-2019").each((function(){new MASERATI.CtaToolWebToLead2019($(this))})),$("#modelList").each((function(){var e=new MASERATI.WebtoLeadModelList($(this));this.WebtoLeadModelList=e})),$("#dealerGroup_test").each((function(){var e=new MASERATI.WebtoLeadDealerGroup($(this));this.WebtoLeadDealerGroup=e})),$(document).on("click","#nearbyDealer label",(function(e){$(this).addClass("selected")}))}))},function(e,t){MASERATI.GallerySlideNew=function(e,t,i){if(this.$el=e,this.$slidesContainer=this.$el.find(".main-slide"),this.$slides=this.$slidesContainer.find(".slide"),this.currentIndex=0,this.$pauseTrigger=this.$el.find(".pauseTrigger, .thumbs-pause"),this.$pauseTriggerCircle=this.$pauseTrigger.find("svg circle"),this.$prevTrigger=this.$el.find(".prevTrigger"),this.$nextTrigger=this.$el.find(".nextTrigger"),this.$thumbsContainer=this.$el.find(".thumbs"),this.$thumbs=this.$el.find(".thumb"),this.$dotsContainer=this.$el.find(".thumbs-mobile"),this.$dots=this.$el.find(".thumbs-mobile .item"),this.$scrollAnimation=this.$el.find(".download-cta-container div.cta"),this.$menuStickyWrapper=$("nav"),this.timer=!1,this.delay=t,this.infiniteScrolling=i,this.forcePaused=this.$pauseTrigger.hasClass("nonudge"),this.noVertical=!1,this.documentDirection="rtl"===$("html").attr("dir")?"rtl":"ltr",this.timerDirection="rtl"===this.documentDirection?"left":"right",this.pointer="rtl"===this.documentDirection?this.infiniteScrolling?-100*(this.$slides.length-2):-100*(this.$slides.length-1):0,this.endPoint=-100*(this.$slides.length-1),this.imageDelta=this.getImageDelta(5),this.deltaDuration=250,this.deltaEasing="swing",this.thumbsOpacity=.4,this.thumbsDuration=250,this.thumbsEasing="swing",this.slideDuration=500,this.slideEasing="swing",this.$prevTrigger.css("width",this.imageDelta+"%"),this.$nextTrigger.css("width",this.imageDelta+"%"),"rtl"===this.documentDirection){this.$slidesContainer.append(this.$slides.get().reverse()),this.$slidesContainer.velocity({translateX:this.pointer+"%"},{duration:0,easing:this.deltaEasing}),this.$dotsContainer.append(this.$dots.get().reverse())}this.moveThumbs(),this.initFeeling(),this.bindEvents(),this.handleVertical(),this.refreshSlides(),this.loadComponent()},MASERATI.GallerySlideNew.prototype.getImageDelta=function(e){var t=e;return null!=this.$el.data("delta")&&this.$slidesContainer.find(".text-container:not(.right) .cta").length>0&&(t=this.$el.data("delta")),t},MASERATI.GallerySlideNew.prototype.moveThumbs=function(){this.$el.hasClass("topThumbs")&&this.$slidesContainer.detach().appendTo(this.$el)},MASERATI.GallerySlideNew.prototype.initFeeling=function(){var e=this;this.delay>0&&!1!==this.delay&&this.initWaypoints(this.delay),this.initTriggersAnimation(),this.$thumbs.hover((function(){$(this).velocity("stop").velocity({opacity:1},{duration:e.thumbsDuration,easing:e.thumbsEasing})}),(function(){$(this).velocity("stop").velocity({opacity:e.thumbsOpacity},{duration:e.thumbsDuration,easing:e.thumbsEasing})})),this.infiniteScrolling&&("ltr"===this.documentDirection?(this.$slidesContainer.prepend(this.$slides.last().clone(!0).addClass("ghost-slide")),this.$slidesContainer.append(this.$slides.first().clone(!0).addClass("ghost-slide"))):(this.$slidesContainer.prepend(this.$slides.first().clone(!0).addClass("ghost-slide")),this.$slidesContainer.append(this.$slides.last().clone(!0).addClass("ghost-slide"))),this.$thumbsContainer.prepend('<div class="thumb ghost-thumb" style="display: none;"></div>'),this.$thumbsContainer.append('<div class="thumb ghost-thumb" style="display: none;"></div>'),this.$dotsContainer.prepend('<a class="item ghost-item" style="display: none;"></a>'),this.$dotsContainer.append('<a class="item ghost-item" style="display: none;"></a>'),this.endPoint=-100*(this.$slides.length-1),this.$slides=this.$slidesContainer.find(".slide"),this.$thumbs=this.$el.find(".thumb"),this.$dots=this.$el.find(".thumbs-mobile .item"),"ltr"===this.documentDirection?(this.pointer=-100,this.$slidesContainer.velocity({translateX:this.pointer+"%"},{duration:0,easing:e.deltaEasing})):(this.pointer=this.infiniteScrolling?-100*(this.$slides.length-2):-100*(this.$slides.length-1),this.$slidesContainer.velocity({translateX:this.pointer+"%"},{duration:0,easing:e.deltaEasing})),this.refreshSlides())},MASERATI.GallerySlideNew.prototype.triggerSlideChangeEvent=function(){MASERATI.AdobeTracking.tracker.setSatelliteTrack("GalleryEngage"),this.$el[0].dispatchEvent(new CustomEvent("slidechange"))},MASERATI.GallerySlideNew.prototype.bindEvents=function(){var e=this;this.$prevTrigger.click((function(){e.areSlidesAnimating()||(e.stopTimer(),e.triggerSlideChangeEvent(),e.prev())})),this.$nextTrigger.click((function(){e.areSlidesAnimating()||(e.stopTimer(),e.triggerSlideChangeEvent(),e.next())}));let t=this.$el.find(".cta").add(this.$prevTrigger).add(this.$nextTrigger).add(this.$pauseTrigger).add(this.$slides);t.focus((function(){e.$el.addClass("focused")})),t.blur((function(){e.$el.removeClass("focused")})),this.$slides.add(this.$dots).add(this.$pauseTrigger).keydown((function(t){e.keyboardMove(t)})),this.$pauseTrigger.click((function(){let t=$(this);"false"==t.attr("aria-pressed")?(t.attr("aria-pressed","true"),e.stopTimer(),e.forcePaused=!0):(t.attr("aria-pressed","false"),e.forcePaused=!1,e.initTimer(e.delay))})),this.$thumbs.click((function(){e.areSlidesAnimating()||(e.stopTimer(),e.pointer=-100*(e.$thumbs.toArray().indexOf(this)+1),e.prev(),e.refreshSlides())})),this.$dots.click((function(){e.areSlidesAnimating()||(e.stopTimer(),e.pointer=-100*(e.$dots.toArray().indexOf(this)+1),e.triggerSlideChangeEvent(),e.prev(),e.refreshSlides())})),this.$el.on("swipeleft",(function(){e.areSlidesAnimating()||(e.stopTimer(),e.triggerSlideChangeEvent(),e.next())})),this.$el.on("swiperight",(function(){e.areSlidesAnimating()||(e.stopTimer(),e.triggerSlideChangeEvent(),e.prev())})),this.$scrollAnimation.click((function(){$("html, body").animate({scrollTop:e.$el.offset().top+e.$el.height()-e.$menuStickyWrapper.height()},500)})),this.inViewHandler()},MASERATI.GallerySlideNew.prototype.handleVertical=function(){var e=this;this.$slides.each((function(){let t=$(this),i=t.find(".background.landscape"),n=t.find(".background.portrait");if(i.length<=0||n.length<=0||i.length!=n.length)return e.noVertical=!0,e.$el.addClass("no-vertical"),!1;for(let t=0;t<i.length;t++)if(i[t].getAttribute("data-src")==n[t].getAttribute("data-src")||i[t].getAttribute("data-srcset")==n[t].getAttribute("data-srcset"))return e.noVertical=!0,e.$el.addClass("no-vertical"),!1})),this.noVertical&&this.$slides.each((function(){let t=$(this),i=t.find(".img-disclaimer:not(:empty)");i.length>0&&(!t.hasClass("fullScreen")||t.children("img.background").length<=1||MASERATI.Helpers.isSmallDeviceLandscape())&&(i.css({position:"relative"}),e.fitDisclaimer(i),$(window).resize((function(){e.fitDisclaimer(i)})))}))},MASERATI.GallerySlideNew.prototype.fitDisclaimer=function(e){let t=e.outerHeight();e.css({marginTop:-t})},MASERATI.GallerySlideNew.prototype.areSlidesAnimating=function(){return this.$slidesContainer.hasClass("velocity-animating")},MASERATI.GallerySlideNew.prototype.checkTriggers=function(){},MASERATI.GallerySlideNew.prototype.focusWithin=function(e){this.$slidesContainer.find(":focus").length>0&&e.focus()},MASERATI.GallerySlideNew.prototype.keyboardMove=function(e){37==e.keyCode?this.areSlidesAnimating()||(this.stopTimer(),this.triggerSlideChangeEvent(),this.prev()):39==e.keyCode&&(this.areSlidesAnimating()||(this.stopTimer(),this.triggerSlideChangeEvent(),this.next()))},MASERATI.GallerySlideNew.prototype.next=function(){MASERATI.Helpers.log("Tracker setGalleryAction arrow"),MASERATI.AdobeTracking.tracker.setGalleryAction("gallery:arrow");var e=this;this.areSlidesAnimating()||(this.infiniteScrolling?this.pointer<=this.endPoint-100?(this.pointer-=100,this.$slidesContainer.velocity({translateX:this.pointer+"%"},{begin:function(){e.deinitTriggersAnimation()},duration:this.slideDuration,easing:this.slideEasing,complete:function(){e.pointer=-100,e.$slidesContainer.velocity({translateX:e.pointer+"%"},{duration:0,easing:e.deltaEasing}),e.refreshSlides(),e.initTriggersAnimation(),e.checkTriggers()}})):(this.pointer-=100,this.$slidesContainer.velocity({translateX:this.pointer+"%"},{duration:this.slideDuration,easing:this.slideEasing,complete:function(){e.refreshSlides(),e.checkTriggers()}})):this.pointer<=this.endPoint?(this.$slidesContainer.velocity({translateX:this.pointer-this.imageDelta+"%"},{duration:this.deltaDuration,easing:this.deltaEasing,complete:function(t){$(t).velocity({translateX:e.endPoint+"%"},{duration:e.deltaDuration,easing:e.deltaEasing}),e.checkTriggers()}}),this.pointer=this.endPoint):(this.pointer-=100,this.$slidesContainer.velocity({translateX:this.pointer+"%"},{duration:this.slideDuration,easing:this.slideEasing,complete:function(){e.refreshSlides(),e.checkTriggers()}})))},MASERATI.GallerySlideNew.prototype.prev=function(){MASERATI.Helpers.log("Tracker setGalleryAction arrow"),MASERATI.AdobeTracking.tracker.setGalleryAction("gallery:arrow");var e=this;this.areSlidesAnimating()||(this.infiniteScrolling?this.pointer>-200?(this.pointer+=100,this.$slidesContainer.velocity({translateX:this.pointer+"%"},{begin:function(){e.deinitTriggersAnimation()},duration:this.slideDuration,easing:this.slideEasing,complete:function(){e.pointer=-100*(e.$slides.length-2),e.$slidesContainer.velocity({translateX:e.pointer+"%"},{duration:0,easing:e.deltaEasing,complete:function(){e.focusWithin(e.$slidesContainer.find(".active"))}}),e.refreshSlides(!0),e.initTriggersAnimation(),e.checkTriggers()}})):(this.pointer+=100,this.$slidesContainer.velocity({translateX:this.pointer+"%"},{duration:this.slideDuration,easing:this.slideEasing,complete:function(){e.refreshSlides(),e.checkTriggers()}})):this.pointer>-100?(this.$slidesContainer.velocity({translateX:this.imageDelta+"%"},{duration:this.deltaDuration,easing:this.deltaEasing,complete:function(t){$(t).velocity({translateX:"0%"},{duration:e.deltaDuration,easing:e.deltaEasing}),e.checkTriggers()}}),this.pointer=0):(this.pointer+=100,this.$slidesContainer.velocity({translateX:this.pointer+"%"},{duration:this.slideDuration,easing:this.slideEasing,complete:function(){e.refreshSlides(),e.checkTriggers()}})))},MASERATI.GallerySlideNew.prototype.triggerAction=function(e,t){"prev"==e?"start"==t?this.$slidesContainer.velocity("stop").velocity({translateX:this.pointer+this.imageDelta+"%"},{duration:this.deltaDuration,easing:this.deltaEasing}):this.$slidesContainer.velocity("stop").velocity({translateX:this.pointer+"%"},{duration:this.deltaDuration,easing:this.deltaEasing}):"start"==t?this.$slidesContainer.velocity("stop").velocity({translateX:this.pointer-this.imageDelta+"%"},{duration:this.deltaDuration,easing:this.deltaEasing}):this.$slidesContainer.velocity("stop").velocity({translateX:this.pointer+"%"},{duration:this.deltaDuration,easing:this.deltaEasing})},MASERATI.GallerySlideNew.prototype.initTriggersAnimation=function(){if(this.$el.hasClass("nonudge"))return!1;var e=this;this.$prevTrigger.hover((function(){e.triggerAction("prev","start")}),(function(){e.triggerAction("prev","stop")})),this.$nextTrigger.hover((function(){e.triggerAction("next","start")}),(function(){e.triggerAction("next","stop")}))},MASERATI.GallerySlideNew.prototype.deinitTriggersAnimation=function(){this.$prevTrigger.unbind("hover"),this.$nextTrigger.unbind("hover")},MASERATI.GallerySlideNew.prototype.refreshThumbs=function(){var e=this,t=$(this.$thumbs.get(this.$slidesContainer.find(".active").index())),i=$(this.$dots.get(this.$slidesContainer.find(".active").index())),n=this.$dots.filter(":focus");this.$thumbs.each((function(){$(this).velocity("stop").velocity({opacity:e.thumbsOpacity},{duration:e.thumbsDuration,easing:e.thumbsEasing}),$(this).removeClass("active")})),t.velocity("stop").velocity({opacity:1},{duration:e.thumbsDuration,easing:e.thumbsEasing,complete:function(){t.addClass("active")}}),this.$dots.removeClass("active").attr("tabindex","-1"),i.addClass("active").attr("tabindex","0"),n.length>0&&i.focus()},MASERATI.GallerySlideNew.prototype.refreshSlides=function(e){var t=$(this.$slides.get(Math.floor(this.pointer/-100)));this.$slides.removeClass("active").attr("tabindex","-1"),this.$slides.find("a,[role=button]").attr("tabindex","-1"),t.addClass("active").attr("tabindex","0"),t.find("a,[role=button]").attr("tabindex","0"),this.currentIndex=t.index(),this.refreshThumbs(),e||this.focusWithin(t),t.find(".text-container.black").length>0?this.$dotsContainer.addClass("black"):this.$dotsContainer.removeClass("black"),this.$el.hasClass("in-view")&&this.update()},MASERATI.GallerySlideNew.prototype.initWaypoints=function(e){var t=this;this.$el.waypoint({handler:function(i){"down"==i?t.initTimer(e):t.stopTimer()},offset:"40%"}),this.$el.waypoint({handler:function(i){"up"==i?t.initTimer(e):t.stopTimer()},offset:"-80%"})},MASERATI.GallerySlideNew.prototype.initTimer=function(e){if(this.forcePaused)return;MASERATI.BatteryDrain.visibilityChangeSupport()&&document.addEventListener(MASERATI.BatteryDrain.visibilityChange,$.proxy((function(){this.handleBatteryDrain()}),this),!1),window.clearInterval(this.timer),this.timer=window.setInterval($.proxy(this.timerTransition,this),e);let t=this;this.$pauseTrigger.attr("aria-pressed","false"),this.$pauseTriggerCircle.attr("style","transition-duration: "+e+"ms;").attr("data-duration",e),requestAnimationFrame((function(){t.$pauseTriggerCircle.attr("class","full")}))},MASERATI.GallerySlideNew.prototype.stopTimer=function(){window.clearInterval(this.timer),this.$pauseTrigger.attr("aria-pressed","true"),this.$pauseTriggerCircle.attr("style","transition-duration: 0ms;").attr("class","")},MASERATI.GallerySlideNew.prototype.timerTransition=function(){null!==this.timerDirection&&("right"===this.timerDirection?this.next():this.prev());let e=this;this.$pauseTriggerCircle.attr("style","transition-duration: 0ms;"),e.$pauseTriggerCircle.attr("class",""),requestAnimationFrame((function(){requestAnimationFrame((function(){e.$pauseTriggerCircle.attr("class","full").attr("style","transition-duration: "+e.$pauseTriggerCircle.attr("data-duration")+"ms;")}))}))},MASERATI.GallerySlideNew.prototype.handleBatteryDrain=function(){document.hidden?this.stopTimer():this.initTimer(this.delay)},MASERATI.GallerySlideNew.prototype.inViewHandler=function(){var e=this;function t(){e.loadComponent()&&$(window).off("scroll",t)}$(window).on("scroll",t)},MASERATI.GallerySlideNew.prototype.loadComponent=function(){var e=this.$el.offset().top+.01*$(window).height();return e=e<0?0:e,!this.$el.hasClass("in-view")&&$(window).scrollTop()+$(window).height()>=e&&(this.update(),this.$el.attr("aria-pressed","false"),this.forcePaused=!1,this.initTimer(this.delay),this.$el.addClass("in-view")),this.$el.hasClass("in-view")},MASERATI.GallerySlideNew.prototype.update=function(){var e=this.currentIndex+2;this.$el.find(".slide").slice(0,e).each((function(){var e=$(this).find("img").not(".lazy-loaded");e.addClass("lazy-loaded"),e.each((function(){$(this).data("src")&&($(this).attr("src",$(this).data("src")),$(this).removeAttr("data-src"),$(this).removeData("src")),$(this).data("srcset")&&($(this).attr("srcset",$(this).data("srcset")),$(this).removeAttr("data-srcset"),$(this).removeData("srcset"))}))}))},$((function(){$(".gallery-slide-new").each((function(){new MASERATI.GallerySlideNew($(this),6e3,!0)}))}))},function(e,t){MASERATI.HeroGallery=function(e){if(this.$el=e,this.$slidesContainer=this.$el.find(".main-slide"),this.$slides=this.$slidesContainer.find(".slide"),this.$navsContainer=this.$el.find(".navigation"),this.$navs=this.$navsContainer.find(".navigation-item"),this.$pauseSlideBtn=this.$navsContainer.find(".navigation-pause"),this.$prevTrigger=this.$el.find(".prevTrigger"),this.$nextTrigger=this.$el.find(".nextTrigger"),this.$videoContainers=this.$el.find(".video-container"),this.$videoTags=this.$el.find(".video-tag"),this.$playBtns=this.$slidesContainer.find(".play-button,.replay-button"),this.$closeButton=this.$slidesContainer.find(".overlay-play"),this.$volumeButton=this.$slidesContainer.find(".overlay-volume"),this.$volumeIcon=this.$slidesContainer.find(".icon-volume"),this.$overlay=this.$slidesContainer.find(".overlay-container"),this.documentDirection="rtl"===$("html").attr("dir")?"rtl":"ltr",this.currentSlide=1,this.totalSlides=this.$slides.length,this.slideAmount=-100,this.delay=300,this.autoplay=this.$el.hasClass("autoplay"),this.manualPlayOnAutoPlayError=!1,"rtl"===this.documentDirection&&(this.slideAmount*=-1,this.$slidesContainer.attr("dir","rtl")),this.players=[],this.player=null,this.videoTagId="",this.videoId="",this.videoType="",this.videoCC=!1,this.starting=!1,this.closing=!1,this.viewportIn=!0,this.muted=!0,this.secondResizeDone=!1,this.progressPoller=0,this.pauseProgressPolling=!1,this.progressEvents=["0","25","50","75","100"],this.sentProgressEvent=null,this.copyDataAttributes(),this.bindEvents(),this.refreshSlides(),this.refreshTriggers(),this.resizeViewport(),this.autoplay){let e=this,t=function(){e.canPlay()?e.play():requestAnimationFrame(t)};requestAnimationFrame(t)}this.refreshPlaceholders(),this.pauseAutoslide=0,this.pauseAutoslideDelay=1e4,this.autoslideSeconds=this.$slidesContainer.data("autoslide"),this.autoslideSeconds&&this.totalSlides>1&&this.autoSlide(),this.loadComponent()},MASERATI.HeroGallery.prototype.copyDataAttributes=function(){this.$slides.each((function(){let e=$(this).find(".text-container"),t=$(this).find(".video-gallery__slide--subtitle"),i=e.data();$.each(i,(function(e){t.attr("data-"+e,this)}))}))},MASERATI.HeroGallery.prototype.canPlay=function(){return"undefined"!=typeof YT&&void 0!==YT.Player},MASERATI.HeroGallery.prototype.triggerSlideChangeEvent=function(){MASERATI.AdobeTracking.tracker.setSatelliteTrack("GalleryEngage"),this.$el[0].dispatchEvent(new CustomEvent("slidechange"))},MASERATI.HeroGallery.prototype.bindEvents=function(){var e=this;this.$prevTrigger.click((function(){e.prev()})),this.$nextTrigger.click((function(){e.next()})),this.$slidesContainer.on("swipeleft",(function(){e.next()})),this.$slidesContainer.on("swiperight",(function(){e.prev()})),this.$prevTrigger.on("swipeleft",(function(){e.next()})),this.$prevTrigger.on("swiperight",(function(){e.prev()})),this.$nextTrigger.on("swipeleft",(function(){e.next()})),this.$nextTrigger.on("swiperight",(function(){e.prev()})),this.$prevTrigger.focus((function(){e.$el.addClass("focused")})),this.$prevTrigger.blur((function(){e.$el.removeClass("focused")})),this.$nextTrigger.focus((function(){e.$el.addClass("focused")})),this.$nextTrigger.blur((function(){e.$el.removeClass("focused")})),this.$slidesContainer.find(".video-gallery__slide--cta").hover((function(){e.pauseAutoslide++}),(function(){e.pauseAutoslide--})),this.$slidesContainer.find(".video-gallery__slide--cta a, .overlay-play, .overlay-volume").focus((function(){e.pauseAutoslide++})).blur((function(){e.pauseAutoslide--})),this.$navs.click((function(){e.gotoSlide(this)})),this.$navs.focus((function(){e.focusNavigation(this,!0)})),this.$navs.blur((function(){e.focusNavigation(this,!1)})),this.$navs.keydown((function(t){e.moveFromNavigation(t)})),this.$pauseSlideBtn.click((function(){e.togglePauseCarousel(this)})),this.$slides.keydown((function(t){t.target===document.activeElement&&t.target.classList.contains("slide")&&e.moveFromNavigation(t,!0)})),this.$playBtns.click((function(){e.play(this)})),this.$closeButton.click((function(){e.togglePause(this)})),this.$volumeButton.click((function(){e.toggleAudio()})),this.$videoContainers.dblclick((function(){e.requestFullScreen()})),this.$videoContainers.click((function(){e.togglePauseFullScreen()})),$(window).scroll((function(){e.checkViewportIn()})),$(window).resize((function(){e.resizeViewport(),e.resizeVideo(),e.refreshPlaceholders()})),this.inViewHandler()},MASERATI.HeroGallery.prototype.resizeViewport=function(){var e=$("#maserati_menu, #maserati_menu_2018").height(),t=$(window).outerHeight()-e;t>500&&(this.$el.css({minHeight:t,height:t}),this.$slidesContainer.css({height:t}),this.$prevTrigger.css({height:t}),this.$nextTrigger.css({height:t}))},MASERATI.HeroGallery.prototype.gotoSlide=function(e){if(MASERATI.Helpers.log("Tracker setGalleryAction dot"),MASERATI.AdobeTracking.tracker.setGalleryAction("gallery:dot"),!$(e).hasClass(".active")){var t=this.$navs.filter(".active").index(".navigation-item"),i=this.$navs.index(e);this.areSlidesAnimating()||this.isVideoStarting()||(this.triggerSlideChangeEvent(),this.delayAutoslide(),this.move(i-t))}},MASERATI.HeroGallery.prototype.areSlidesAnimating=function(){return this.$slidesContainer.hasClass("velocity-animating")},MASERATI.HeroGallery.prototype.setSlidesAnimating=function(){return this.$slidesContainer.addClass("velocity-animating")},MASERATI.HeroGallery.prototype.unsetSlidesAnimating=function(){return this.$slidesContainer.removeClass("velocity-animating")},MASERATI.HeroGallery.prototype.isVideoStarting=function(){return this.$el.hasClass("video-loading")},MASERATI.HeroGallery.prototype.resizeVideo=function(){var e=this.getSlideFromControlButton();if("none"!=this.videoType&&""!=this.videoType&&null!=this.videoType){var t=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement,i=e.find(".video-tag"),n=t?screen.height:e.height(),s=t?screen.width:e.width(),o=s/n,a="auto",r="auto",l=0;if("video"==this.videoType)var d=i.height(),c=i.width(),h=c/d,u=Math.min(0,(n-d)/2),p=Math.min(0,(s-c)/2);else{a=(h=parseFloat(i.data("aspect-ratio")))*n,r=1/h*s;u=Math.min(0,(n-r)/2),p=Math.min(0,(s-a)/2);u-=r,r*=3,l=-n,n*=3}if(h<o?i.css({top:u,left:0,width:s,height:r}):i.css({top:l,left:p,width:a,height:n}),!this.secondResizeDone){var f=this;requestAnimationFrame((function(){f.secondResizeDone=!0,f.resizeVideo(),f.secondResizeDone=!1}))}}},MASERATI.HeroGallery.prototype.prev=function(){MASERATI.Helpers.log("Tracker setGalleryAction arrow"),MASERATI.AdobeTracking.tracker.setGalleryAction("gallery:arrow"),this.areSlidesAnimating()||this.isVideoStarting()||(this.triggerSlideChangeEvent(),this.delayAutoslide(),this.currentSlide>1?this.move(-1):this.move(this.totalSlides-1))},MASERATI.HeroGallery.prototype.next=function(){MASERATI.Helpers.log("Tracker setGalleryAction arrow"),MASERATI.AdobeTracking.tracker.setGalleryAction("gallery:arrow"),this.areSlidesAnimating()||this.isVideoStarting()||(this.triggerSlideChangeEvent(),this.delayAutoslide(),this.currentSlide<this.totalSlides?this.move(1):this.move(1-this.totalSlides))},MASERATI.HeroGallery.prototype.move=function(e){var t=this;this.currentSlide+e>=1&&this.currentSlide+e<=this.totalSlides&&(this.$slidesContainer.find(".slide.active").hasClass("playing")&&this.pause(),this.setSlidesAnimating(),this.$slidesContainer.css("transform","translateX("+(this.currentSlide+e-1)*this.slideAmount+"%)"),this.currentSlide+=e,setTimeout((function(){t.refreshSlides(),t.refreshTriggers(),t.unsetSlidesAnimating(),(t.autoplay||t.$slidesContainer.find(".slide.active").hasClass("playing"))&&t.play()}),this.delay))},MASERATI.HeroGallery.prototype.refreshSlides=function(){var e=$(this.$slides.get(this.currentSlide-1)),t=this.$slides.filter(":focus").length>0;this.$slides.removeClass("active focus-visible").attr("tabindex","-1"),e.addClass("active").attr("tabindex","0");var i=$(this.$navs.get(this.currentSlide-1));this.$navs.removeClass("active").attr("tabindex","-1").attr("aria-selected","false"),i.addClass("active").attr("tabindex","0").attr("aria-selected","true"),this.$videoContainers.attr("tabindex","-1"),this.$playBtns.attr("tabindex","-1"),this.$closeButton.attr("tabindex","-1"),this.$volumeButton.attr("tabindex","-1"),this.$slides.find("a").attr("tabindex","-1"),e.find(".play-button, a").attr("tabindex","0"),t&&(e.addClass("focus-visible"),setTimeout((function(){e.focus()}),this.delay)),e.hasClass("black")?(this.$navsContainer.addClass("black"),this.$el.addClass("black")):(this.$navsContainer.removeClass("black"),this.$el.removeClass("black")),this.resizeVideo()},MASERATI.HeroGallery.prototype.refreshTriggers=function(){this.$prevTrigger.show(),this.$nextTrigger.show(),this.$el.removeClass("first last"),1==this.currentSlide&&(this.$prevTrigger.hide(),this.$el.addClass("first")),this.currentSlide==this.totalSlides&&(this.$nextTrigger.hide(),this.$el.addClass("last"))},MASERATI.HeroGallery.prototype.focusNavigation=function(e,t){t?e.parentElement.classList.add("outlined"):e.parentElement.classList.remove("outlined")},MASERATI.HeroGallery.prototype.moveFromNavigation=function(e,t){37==e.keyCode?(this.prev(),t||this.$navs.get(this.currentSlide-1).focus()):39==e.keyCode&&(this.next(),t||this.$navs.get(this.currentSlide-1).focus())},MASERATI.HeroGallery.prototype.focusOverlays=function(){let e=this.$slidesContainer.find(".slide.active");e.find(".overlay-play, .overlay-volume").attr("tabindex","0"),e.find(".overlay-play").attr("aria-pressed","false")},MASERATI.HeroGallery.prototype.autoSlide=function(){var e=this;let t=parseInt(this.autoslideSeconds,10);t>0&&setInterval((function(){e.pauseAutoslide>0||e.isVideoStarting()||!e.viewportIn||(e.currentSlide===e.totalSlides?e.move(1-e.totalSlides):e.move(1))}),1e3*t)},MASERATI.HeroGallery.prototype.delayAutoslide=function(){this.pauseAutoslide++;var e=this;setTimeout((function(){e.pauseAutoslide--}),this.pauseAutoslideDelay)},MASERATI.HeroGallery.prototype.togglePauseCarousel=function(e){let t=$(e);"true"==t.attr("aria-pressed")?(this.pauseAutoslide--,t.attr("aria-pressed","false")):(this.pauseAutoslide++,t.attr("aria-pressed","true"))},MASERATI.HeroGallery.prototype.refreshPlaceholders=function(){let e=this,t=screen.msOrientation||(screen.orientation||screen.mozOrientation||{}).type;!t&&window.orientation%180==0||t&&t.startsWith&&t.startsWith("portrait")?this.$slides.each((function(){$(this).find(".image-wrapper [data-src='']").hide(),$(this).find(".image-wrapper img").not("[data-src='']").show();let t=$(this).find(".image-wrapper.portrait img"),i=$(this).find(".image-wrapper.landscape img");e.handleImgSrcset(t,i)})):this.$slides.each((function(){$(this).find(".image-wrapper [data-src='']").hide(),$(this).find(".image-wrapper img").not("[data-src='']").show();let t=$(this).find(".image-wrapper.portrait img"),i=$(this).find(".image-wrapper.landscape img");e.handleImgSrcset(i,t)}))},MASERATI.HeroGallery.prototype.handleImgSrcset=function(e,t){e.length>0&&void 0!==e.data("src")&&e.data("src").length>0?(t.hide(),e.attr("src",e.data("src")),e.attr("srcset",e.data("srcset"))):(t.attr("src",t.data("src")),t.attr("srcset",t.data("srcset")))},MASERATI.HeroGallery.prototype.requestFullScreen=function(){if("none"!=this.videoType&&""!=this.videoType&&null!=this.videoType){var e=this.$videoContainers.get(this.currentSlide-1),t=e.requestFullscreen||e.mozRequestFullScreen||e.webkitRequestFullscreen||e.msRequestFullscreen;t&&t.call(e)}},MASERATI.HeroGallery.prototype.cancelFullScreen=function(){var e=document,t=e.exitFullscreen||e.mozCancelFullScreen||e.webkitCancelFullScreen||e.msExitFullscreen;if(t&&!1!==e.fullscreen)try{t.call(e)}catch(e){}},MASERATI.HeroGallery.prototype.togglePauseFullScreen=function(){(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)&&this.togglePause()},MASERATI.HeroGallery.prototype.checkViewportIn=function(){var e=$(this.$videoContainers.get(this.currentSlide-1)),t=e.offset().top,i=t+e.outerHeight(),n=$(window).scrollTop()+window.innerHeight,s=$(window).scrollTop();n>t&&s<i?this.closing||!1!==this.viewportIn||null==this.player||null==this.player||null==this.player.getPlayerState||2!=this.player.getPlayerState()||(this.play(),this.viewportIn=!0):this.closing||!0!==this.viewportIn||null==this.player||null==this.player||null==this.player.getPlayerState||1!=this.player.getPlayerState()||(this.pause(),this.viewportIn=!1)},MASERATI.HeroGallery.prototype.onPlayerReady=function(e){if(MASERATI.Helpers.log("YT video onPlayerReady. duration:"+this.player.getDuration()),this.player.getVideoData){var t=this.player.getVideoData();this.title=t.title}else this.title=this.videoId;this.toggleAudio(!this.muted),MASERATI.Helpers.log("video onPlayerReady."),this.playVideo()},MASERATI.HeroGallery.prototype.onPlayerStateChange=function(e){switch(MASERATI.Helpers.log("Video state: "+e.data),e.data){case YT.PlayerState.ENDED:cancelAnimationFrame(this.progressPoller),MASERATI.Helpers.log("Tracker poller detached"),this.triggerProgressChangeEvent("100"),this.autoplay&&this.player.playVideo();break;case YT.PlayerState.PLAYING:this.starting&&(starting=!1,this.showVideo()),this.pauseProgressPolling=!1,this.focusOverlays();break;case YT.PlayerState.PAUSED:this.closing&&(this.closing=!1,this.player.stopVideo(),this.hideVideo());break;default:this.pauseProgressPolling=!0}},MASERATI.HeroGallery.prototype.updatePlayerObj=function(){this.players[this.currentSlide]=this.player},MASERATI.HeroGallery.prototype.showVideo=function(){this.$el.removeClass("video-loading")},MASERATI.HeroGallery.prototype.hideVideo=function(){this.$el.removeClass("video-loading"),this.cancelFullScreen()},MASERATI.HeroGallery.prototype.checkAutoplay=function(){let e=10,t=this,i=setInterval((function(){if(null==t.player||t.player.getPlayerState&&0<t.player.getPlayerState()&&t.player.getPlayerState()<=2)return clearInterval(i),!1;--e<=0&&(t.playerError(),clearInterval(i))}),500)},MASERATI.HeroGallery.prototype.play=function(e){MASERATI.Helpers.log(void 0===e?"changed video ":"click on play ");var t=this.getSlideFromControlButton(e);t.removeClass("played paused"),t.addClass("playing"),this.$playBtns.attr("tabindex","-1"),this.$playBtns.hide(),this.autoplay&&this.$el.addClass("autoplay");var i=this;switch(this.videoType){case"youtube":null==this.player&&this.$el.addClass("video-loading"),this.videoTagId=t.find(".video-tag").attr("id"),this.player=null==this.player?MASERATI.getYouTubePlayer(this,1,0,this.videoCC):2==this.player.getPlayerState()?this.player.playVideo():this.player.loadVideoById(this.videoId),this.starting=!0,this.autoplay&&void 0===e&&this.checkAutoplay();break;case"youku":this.videoTagId=t.find(".video-tag").attr("id"),this.player=null==this.player?new MASERATI.YuokuInterface(this,!0,!0):this.player,this.title=this.videoId,this.player.playVideo(),i.focusOverlays();break;case"video":let n=t.find("video").get(0);if(null==this.player){this.player=n;let e=function(){MASERATI.Helpers.log("video onPlayerReady. duration:"+n.duration),i.triggerPlayerOpenEvent(),i.player.addEventListener("play",(function(){i.attachPoller(),i.showVideo(),setTimeout((function(){i.resizeVideo(),i.focusOverlays()}),1500)}),{once:!0}),i.player.addEventListener("error",(function(){i.playerError()}),{once:!0}),i.player.play()};this.$el.addClass("video-loading"),n.oncanplaythrough=e(),n.onended=function(){cancelAnimationFrame(i.progressPoller),MASERATI.Helpers.log("Tracker poller detached"),i.triggerProgressChangeEvent("100"),i.autoplay?i.play():i.stop()}}else this.pauseProgressPolling=!1,this.player.play(),i.focusOverlays()}this.updatePlayerObj(),this.toggleAudio(!this.muted)},MASERATI.HeroGallery.prototype.playerError=function(){this.$el.removeClass(this.manualPlayOnAutoPlayError?"autoplay video-loading":"video-loading"),this.$slidesContainer.find(".slide.active").removeClass("playing"),this.$slidesContainer.find(".slide.active .play-button").attr("tabindex","0")},MASERATI.HeroGallery.prototype.stop=function(e){void 0!==e&&MASERATI.Helpers.log("click on close ");var t=this,i=this.getSlideFromControlButton(e);switch(void 0===e&&i.addClass("played"),setTimeout((function(){i.removeClass("playing paused")}),this.delay),this.videoType){case"youtube":void 0!==e?(this.player.pauseVideo(),this.closing=!0):(this.player.stopVideo(),this.hideVideo());break;case"youku":this.player.stopVideo(),this.hideVideo();break;case"video":setTimeout((function(){t.player.pause(),t.player.currentTime=0}),this.delay),this.hideVideo()}this.updatePlayerObj()},MASERATI.HeroGallery.prototype.pause=function(e){void 0!==e&&MASERATI.Helpers.log("click on pause ");var t=this.getSlideFromControlButton(e);switch(t.addClass("paused"),t.find(".overlay-play").attr("aria-pressed","true"),this.videoType){case"youtube":this.player.pauseVideo();break;case"youku":this.stop(e);break;case"video":t.find("video").get(0).pause(),this.pauseProgressPolling=!0}this.updatePlayerObj()},MASERATI.HeroGallery.prototype.togglePause=function(e){this.getSlideFromControlButton(e).hasClass("paused")?this.play(e):this.pause(e)},MASERATI.HeroGallery.prototype.toggleAudio=function(e){null==e&&MASERATI.Helpers.log("click on volume ");let t=void 0!==e&&null!=e?e:this.muted;switch(t?this.$volumeIcon.removeClass("volume-off"):this.$volumeIcon.addClass("volume-off"),this.$volumeButton.attr("aria-pressed",t?"false":"true"),this.muted=!t,this.videoType){case"youtube":(this.player.mute||this.player.unMute)&&(t?this.player.unMute():this.player.mute());break;case"youku":break;case"video":null!=this.player&&(this.player.muted=!t)}},MASERATI.HeroGallery.prototype.playVideo=function(){this.player.playVideo(),this.fixSafariPlay(),this.triggerPlayerOpenEvent(),this.attachPoller()},MASERATI.HeroGallery.prototype.getSlideFromControlButton=function(e){var t=void 0!==e?$(e).parentsUntil(".main-slide").last():this.$slidesContainer.find(".slide.active");return this.videoId=t.data("video"),this.videoType=t.data("videotype"),this.videoCC="true"===t.data("cc")||!0===t.data("cc"),this.player=this.players[this.currentSlide],t},MASERATI.HeroGallery.prototype.fixSafariPlay=function(){var e=0,t=this,i=setInterval((function(){var n=t.player.getPlayerState?t.player.getPlayerState():-1;n==YT.PlayerState.PAUSED?t.player.playVideo():(++e>50||n==YT.PlayerState.PLAYING)&&clearInterval(i)}),100)},MASERATI.HeroGallery.prototype.attachPoller=function(){MASERATI.Helpers.log("Tracker poller attacched");var e=this,t=function(){e.pollProgress(),e.progressPoller&&(e.progressPoller=requestAnimationFrame(t))};this.progressPoller=requestAnimationFrame(t)},MASERATI.HeroGallery.prototype.getVideoCurrentTime=function(){switch(this.videoType){case"youtube":return null!=this.player.getCurrentTime?this.player.getCurrentTime():0;case"youku":return 0;case"video":return null!=this.player?this.player.currentTime:0;default:return 0}},MASERATI.HeroGallery.prototype.getVideoDuration=function(){switch(this.videoType){case"youtube":return null!=this.player.getDuration?this.player.getDuration():0;case"youku":return 0;case"video":return null!=this.player?this.player.duration:0;default:return 0}},MASERATI.HeroGallery.prototype.pollProgress=function(){if(this.pauseProgressPolling)return MASERATI.Helpers.log("Tracker poller muted"),!1;var e=this.getVideoCurrentTime(),t=this.getVideoDuration();e<.5?this.triggerProgressChangeEvent("0"):e>.25*t&&e<.5*t?this.triggerProgressChangeEvent("25"):e>.5*t&&e<.75*t?this.triggerProgressChangeEvent("50"):e>.75*t&&e<t&&this.triggerProgressChangeEvent("75"),MASERATI.Helpers.log("Tracker poller poll "+e)},MASERATI.HeroGallery.prototype.triggerProgressChangeEvent=function(e){this.progressEvents.indexOf(e)>-1&&this.sentProgressEvent!=e&&(this.sentProgressEvent=e,this.$el[0].dispatchEvent(new CustomEvent("videoprogresschange",{detail:{progress:e}})))},MASERATI.HeroGallery.prototype.triggerPlayerOpenEvent=function(){this.sentProgressEvent=null,MASERATI.Helpers.log("dispatching event videoplayeropen "+this.title),this.$el[0].dispatchEvent(new CustomEvent("videoplayeropen",{detail:{title:this.title}})),this.triggerProgressChangeEvent("0")},MASERATI.HeroGallery.prototype.inViewHandler=function(){var e=this;function t(){e.loadComponent()&&$(window).off("scroll",t)}$(window).on("scroll",t)},MASERATI.HeroGallery.prototype.loadComponent=function(){var e=this.$el.offset().top+.01*$(window).height();return e=e<0?0:e,!this.$el.hasClass("in-view")&&$(window).scrollTop()+$(window).height()>=e&&this.$el.addClass("in-view"),this.$el.hasClass("in-view")},$((function(){$(".hero-gallery").each((function(){new MASERATI.HeroGallery($(this))})),MASERATI.YoutubeManager.init()}))},function(e,t){MASERATI.HeroImageHome=function(e,t){this.$element=e,this.$scrollDown=this.$element.find(".downArrow"),this.$offset=t,this.initEvents()},MASERATI.HeroImageHome.prototype.initEvents=function(){var e=this;this.$element.find(".title-cta-table .title, .title-cta-table .subtitle").click((function(){$(".title-cta-table .cta.cta-button a")[0].click()})),this.$scrollDown.click((function(){$($(this).attr("data-to")).velocity("scroll",{offset:-e.$offset})}))},$((function(){$(".hero-image-home").each((function(){new MASERATI.HeroImageHome($(this),$("#maserati_menu, #maserati_menu_2018").height())}))}))},function(e,t){MASERATI.HeroImageModel=function(e,t){this.$element=e,this.scrollTarget=this.$element.next(".component"),this.$scrollDown=this.$element.find(".downArrow"),this.$offset=t,this.bindEvents()},MASERATI.HeroImageModel.prototype.bindEvents=function(){var e=this;$("#maserati_menu, #maserati_menu_2018");this.$scrollDown.click((function(){$($(this).attr("data-to")).velocity("scroll",{offset:-e.$offset})}))},$((function(){$(".hero-image-model").each((function(){new MASERATI.HeroImageModel($(this),$("#maserati_menu, #maserati_menu_2018").height())}))}))},function(e,t){MASERATI.VideoCtaModelHero=function(e){this.$element=e,this.videoContainer=this.$element.find(".video-container"),this.videoLooperContainer=this.$element.find(".videolooper-container"),this.videoTag=this.videoContainer.find(".video-tag"),this.videoTagId=this.videoTag.attr("id"),this.videoId=this.$element.data("video"),this.videoAutoplay=this.$element.data("autoplay"),this.videoControls=this.$element.data("controls"),this.provider=this.$element.data("provider"),this.cc=this.$element.data("cc"),this.playWhenReady=!1,this.forceAutoplay=!1,this.forceUnMute=!1,this.videoShown=!1,this.initialTitle=this.$element.find(".initial-overlay .title, .initial-overlay .subtitle-cta, .initial-overlay .downArrow"),this.playButtonClone=this.$element.find(".play-button-clone"),this.playButton=this.$element.find(".play-button"),this.playLoader=this.$element.find(".play-loader"),this.resumeButton=this.$element.find(".resume-button"),this.overlayTitle=this.$element.find(".titleOverlay"),this.initialOverlay=this.$element.find(".initial-overlay"),this.subTitle=this.$element.find(".overlay-subtitle"),this.ctaButton=this.$element.find(".cta-container"),this.ctaOverlay=this.$element.find(".cta-overlay"),this.overlay=this.$element.find(".overlay-container"),this.overlayTime=!!this.$element.attr("data-overlay-time")&&this.$element.attr("data-overlay-time"),this.textShade=this.$element.find(".text-shade"),this.titleClose=this.$element.find(".overlay-title-close"),this.closeButton=this.$element.find(".overlay-close"),this.volumeButton=this.$element.find(".overlay-volume"),this.volumeOn=this.$element.find('.volume-text[data-action="on"]'),this.volumeOff=this.$element.find('.volume-text[data-action="off"]'),this.volumeIcon=this.$element.find(".icon-volume"),this.showOverlaySequence=null,this.playVideoSequence=null,this.resumeVideoSequence=null,this.isClosed=!0,this.isFullScreen=!1,this.showOverlayWhenExitFullScreen=!1,this.viewportIn=null,this.$element[0].maseratiObject=this,this.player=null,this.goingAnimation=null,this.poller=null,this.status=null,this.$scrollDown=this.$element.find(".downArrow"),this.offset=$("#maserati_menu").height()||$("#maserati_menu_2018").height();var t=this;this.$scrollDown.click((function(){$($(this).attr("data-to")).velocity("scroll",{offset:-t.offset})})),this.progressPoller=0,this.pauseProgressPolling=!1,this.progressEvents=["0","25","50","75","100"],this.sentProgressEvent=null,this.duration=0,this.title=""},MASERATI.VideoCtaModelHero.prototype.toggleAudio=function(e){if("YouKu"==this.provider)return;(void 0!==e?e:this.player.isMuted())?(this.player.unMute(),this.volumeOff.removeClass("hidden"),this.volumeOn.addClass("hidden"),this.volumeIcon.removeClass("volume-off")):(this.player.mute(),this.volumeOn.removeClass("hidden"),this.volumeOff.addClass("hidden"),this.volumeIcon.addClass("volume-off"))},MASERATI.VideoCtaModelHero.prototype.getOverlayTime=function(){return this.overlayTime?this.overlayTime:this.player.getDuration()},MASERATI.VideoCtaModelHero.prototype.setupVideo=function(){"YouKu"==this.provider&&(this.videoControls="always",this.overlay.css("pointer-events","none"),this.textShade.css("pointer-events","none"),this.titleClose.css("pointer-events","none"),this.initialOverlay.css("pointer-events","all"));let e=0;switch(this.videoControls){case"always":e=1;break;case"mobile":e=MASERATI.Helpers.Mobile.isMobile()?1:0}let t="true"===this.cc||!0===this.cc;if(this.player="YouKu"==this.provider?new MASERATI.YuokuInterface(this,!0,!0):MASERATI.getYouTubePlayer(this,0,e,t),"YouKu"!=this.provider){this.viewportIn=!0;var i=this;$(window).scroll((function(){var e=i.videoContainer.offset().top,t=e+i.videoContainer.outerHeight(),n=$(window).scrollTop()+window.innerHeight,s=$(window).scrollTop();n>e&&s<t?i.isClosed||!1!==i.viewportIn||2!=i.player.getPlayerState()||(i.player.playVideo(),i.viewportIn=!0):!0===i.viewportIn&&1==i.player.getPlayerState()&&(i.player.pauseVideo(),i.viewportIn=!1)}))}else this.onPlayerReady()},MASERATI.VideoCtaModelHero.prototype.setupButtons=function(){var e=this;this.playButton.click((function(){MASERATI.Helpers.log("click on play "),e.playButton.css("pointer-events","none"),e.ctaOverlay.css("pointer-events","none"),e.showVideo()})).velocity("fadeIn"),"1"!=this.videoAutoplay&&this.playLoader.velocity("fadeOut"),this.closeButton.click((function(){MASERATI.Helpers.log("click on close "),e.stop(),e.playButton.css("pointer-events","auto"),e.ctaOverlay.css("pointer-events","auto"),e.initialTitle.show(),e.playButtonClone.hide(),e.volumeButton.hide(),e.forceUnMute=!0})),this.volumeButton.click((function(){MASERATI.Helpers.log("click on volume "),e.toggleAudio()})),this.$element.find(".resume-button, .play-button-clone").css("display","none"),this.$element.on("click",".resume-button__click, .play-button-clone",(function(t){t.preventDefault(),e.$element.removeClass("nopolling"),MASERATI.Helpers.log("resuming "),MASERATI.Helpers.Mobile.isMobile()&&e.videoContainer.show(),e.playAnimationSequence(e.resumeVideoSequence2.slice(0),(function(){e.playButton.css("pointer-events","none"),e.ctaOverlay.css("pointer-events","none"),e.forceUnMute=!0,e.playButtonClone.hide(),e.play()})),e.status=null})),document.addEventListener("fullscreenchange",(function(){e.changeFullScreen(e)}),!1),document.addEventListener("webkitfullscreenchange",(function(){e.changeFullScreen(e)}),!1),document.addEventListener("mozfullscreenchange",(function(){e.changeFullScreen(e)}),!1),this.showOverlaySequence=[{o:this.overlay,a:{opacity:1},t:MASERATI.Animations.videoCtaFadeSpeed,p:0,s:!1},{o:this.textShade,a:{opacity:.7},t:MASERATI.Animations.videoCtaFadeSpeed,p:0,s:!1},{o:this.initialTitle,a:{opacity:0},t:0,p:MASERATI.Animations.videoCtaPauseBetween,s:!1},{o:this.ctaButton,a:{opacity:1},t:MASERATI.Animations.videoCtaFadeSpeed,p:MASERATI.Animations.videoCtaPauseBetween,s:!1},{o:this.overlayTitle,a:{opacity:1},t:MASERATI.Animations.videoCtaFadeSpeed,p:MASERATI.Animations.videoCtaPauseBetween,s:!1},{o:this.subTitle,a:{opacity:1},t:MASERATI.Animations.videoCtaFadeSpeed,p:MASERATI.Animations.videoCtaPauseBetween,s:!0}],this.showOverlayVideoLoopSequence=[{o:this.videoContainer,a:{opacity:0},t:0,p:0,s:!1},{o:this.videoLooperContainer,a:{opacity:1},t:0,p:0,s:!1},{o:this.ctaButton,a:{opacity:1},t:MASERATI.Animations.videoCtaFadeSpeed,p:MASERATI.Animations.videoCtaPauseBetween,s:!1},{o:this.overlayTitle,a:{opacity:1},t:MASERATI.Animations.videoCtaFadeSpeed,p:MASERATI.Animations.videoCtaPauseBetween,s:!1},{o:this.subTitle,a:{opacity:1},t:MASERATI.Animations.videoCtaFadeSpeed,p:MASERATI.Animations.videoCtaPauseBetween,s:!0},{o:this.resumeButton,a:{opacity:1},t:MASERATI.Animations.videoCtaFadeSpeed,p:0,s:!1}],this.endVideoSequence=[{o:this.resumeButton,a:{opacity:1},t:MASERATI.Animations.videoCtaFadeSpeed,p:0,s:!1}],this.playVideoSequence=[{o:this.overlayTitle,a:{opacity:0},t:0,p:0,s:!1},{o:this.playButton,a:{opacity:0},t:0,p:0,s:!1},{o:this.textShade,a:"fadeOut",t:MASERATI.Animations.videoCtaFadeSpeed,p:0,s:!1},{o:this.videoContainer,a:"fadeIn",t:MASERATI.Animations.videoCtaFadeSpeed,p:0,s:!1}],this.playVideoSequenceAutoPlay=[{o:this.overlayTitle,a:{opacity:0},t:0,p:0,s:!1},{o:this.playButton,a:{opacity:0},t:0,p:0,s:!1}],this.resumeVideoSequence2=[{o:this.textShade,a:"fadeOut",t:MASERATI.Helpers.Mobile.isMobile()?MASERATI.Animations.videoCtaFadeSpeed:0,p:0,s:!1},{o:this.ctaButton,a:{opacity:0},t:0,p:0,s:!1},{o:this.overlayTitle,a:{opacity:0},t:0,p:0,s:!1},{o:this.subTitle,a:{opacity:0},t:0,p:0,s:!0},{o:this.resumeButton,a:"fadeOut",t:0,p:0,s:!1},{o:this.playButtonClone,a:"fadeOut",t:0,p:0,s:!1},{o:this.videoContainer,a:"fadeIn",t:MASERATI.Helpers.Mobile.isMobile()?MASERATI.Animations.videoCtaFadeSpeed:0,p:0,s:!1}],this.resumeVideoSequence="1"!=this.videoAutoplay?[{o:this.ctaButton,a:{opacity:0},t:0,p:0,s:!1},{o:this.overlayTitle,a:{opacity:0},t:0,p:0,s:!1},{o:this.subTitle,a:{opacity:0},t:0,p:0,s:!0},{o:this.videoContainer,a:"fadeIn",t:MASERATI.Animations.videoCtaFadeSpeed,p:0,s:!1}]:[],this.textShadeSequence=[{o:this.textShade,a:{opacity:1},t:MASERATI.Animations.videoCtaFadeSpeed,p:1,s:!1},{o:this.textShade,a:{opacity:.6},t:MASERATI.Animations.videoCtaFadeSpeed,p:0,s:!1}],this.resumeInitialPlaySequence=[{o:this.ctaButton,a:{opacity:0},t:0,p:0,s:!1},{o:this.overlayTitle,a:{opacity:0},t:0,p:0,s:!1},{o:this.subTitle,a:{opacity:0},t:0,p:0,s:!0},{o:this.resumeButton,a:"fadeOut",t:0,p:0,s:!1},{o:this.videoContainer,a:{opacity:0},t:0,p:0,s:!1},{o:this.overlay,a:"fadeIn",t:0,p:0,s:!1},{o:this.textShade,a:{opacity:.3},t:0,p:0,s:!1},{o:this.initialTitle,a:{opacity:1},t:0,p:0,s:!1},{o:this.initialOverlay,a:"fadeIn",t:0,p:0,s:!1},{o:this.playButton,a:{opacity:1},t:0,p:0,s:!1},{o:this.playLoader,a:{opacity:0},t:0,p:0,s:!1},{o:this.closeButton,a:"fadeOut",t:0,p:0,s:!1},{o:this.volumeButton,a:"fadeOut",t:0,p:0,s:!1},{o:this.titleClose,a:"fadeOut",t:0,p:0,s:!1}]},MASERATI.VideoCtaModelHero.prototype.playAnimationSequence=function(e,t){var i=this;if(this.isClosing)return void 0!==t&&t(),void(null!==i.goingAnimation&&(window.clearTimeout(i.goingAnimation),i.goingAnimation=null));if(0==e.length)return void 0!==t&&t(),null!==i.goingAnimation&&(window.clearTimeout(i.goingAnimation),i.goingAnimation=null),!0;var n=e,s=t,o=n.shift(),a=o.o;if(0==a.length)return MASERATI.Helpers.log("skip not existing elem: ",a),this.playAnimationSequence(n,s);if(void 0!==o.s&&o.s&&"none"==getComputedStyle(a[0]).display)return MASERATI.Helpers.log("skip hidden elem: "+a.attr("class")),a.css(o.a),this.playAnimationSequence(n,s);var r=o.a,l=o.t,d=o.p;if(0==d)return a.velocity(r,l),this.playAnimationSequence(n,s);i=this;a.velocity(r,l,(function(){i.goingAnimation=setTimeout((function(){i.playAnimationSequence(n,s)}),d)}))},MASERATI.VideoCtaModelHero.prototype.changeFullScreen=function(e){e.isFullScreen=!e.isFullScreen,MASERATI.Helpers.log("FULLSCREEN -> "+e.isFullScreen),e.showOverlayWhenExitFullScreen&&!e.isFullScreen&&(e.showOverlayWhenExitFullScreen=!1,e.showOverlay())},MASERATI.VideoCtaModelHero.prototype.onPlayerReady=function(e){if(this.duration=this.player.getDuration?this.player.getDuration():0,MASERATI.Helpers.log("video onPlayerReady. duration:"+this.duration),this.player.getVideoData){var t=this.player.getVideoData();this.title=t.title}else this.title=this.videoId;MASERATI.Helpers.log("video onPlayerReady. videoAutoplay:"+this.videoAutoplay),this.setupButtons(),(this.playWhenReady||"1"==this.videoAutoplay)&&(MASERATI.Helpers.Mobile.isMobile()||(this.triggerProgressChangeEvent("0"),MASERATI.Helpers.log("video onPlayerReady. playVideo"),this.forceAutoplay=!0,this.playButton.click()),this.playWhenReady=!1)},MASERATI.VideoCtaModelHero.prototype.attachPoller=function(){var e=this;this.videoEnded=!1,MASERATI.Helpers.log("Poller attacched");var t=function(){var i=e.getOverlayTime();i>0&&e.player.getCurrentTime()>=i||e.videoEnded?(e.$element.addClass("nopolling"),e.detachPoller(),e.overlay.show(),e.textShade.css("display","block").css("opacity",0),e.initialOverlay.hide(),e.playAnimationSequence(e.showOverlaySequence.slice(0)),e.ctaOverlay.css("pointer-events","auto"),MASERATI.Helpers.log("Time to overlay")):e.poller&&(e.poller=requestAnimationFrame(t))};this.poller=requestAnimationFrame(t)},MASERATI.VideoCtaModelHero.prototype.detachPoller=function(){null!==this.poller&&(cancelAnimationFrame(this.poller),this.poller=null),MASERATI.Helpers.log("Poller detached")},MASERATI.VideoCtaModelHero.prototype.pollProgress=function(){if(this.pauseProgressPolling)return MASERATI.Helpers.log("Tracker poller muted"),!1;var e=this.player.getCurrentTime();e<.5?this.triggerProgressChangeEvent("0"):e>.25*this.duration&&e<.5*this.duration?this.triggerProgressChangeEvent("25"):e>.5*this.duration&&e<.75*this.duration?this.triggerProgressChangeEvent("50"):e>.75*this.duration&&e<this.duration&&this.triggerProgressChangeEvent("75"),MASERATI.Helpers.log("Tracker poller poll "+this.player.getCurrentTime())},MASERATI.VideoCtaModelHero.prototype.triggerProgressChangeEvent=function(e){this.progressEvents.indexOf(e)>-1&&this.sentProgressEvent!=e&&(this.sentProgressEvent=e,this.$element[0].dispatchEvent(new CustomEvent("videoprogresschange",{detail:{progress:e}})),"0"==e?MASERATI.AdobeTracking.tracker.setSatelliteTrack("MediaStreamStart"):MASERATI.AdobeTracking.tracker.setSatelliteTrack("MediaStream"+e))},MASERATI.VideoCtaModelHero.prototype.triggerPlayerOpenEvent=function(){this.sentProgressEvent=null,MASERATI.Helpers.log("dispatching event videoplayeropen "+this.title),this.$element[0].dispatchEvent(new CustomEvent("videoplayeropen",{detail:{title:this.title}})),"YouKu"==this.provider&&this.triggerProgressChangeEvent("0")},MASERATI.VideoCtaModelHero.prototype.onPlayerStateChange=function(e){var t=this;switch(MASERATI.Helpers.log("Video state: "+this.player.getPlayerState()),e.data){case YT.PlayerState.ENDED:cancelAnimationFrame(this.progressPoller),MASERATI.Helpers.log("Tracker poller detached"),this.triggerProgressChangeEvent("100"),this.videoEnded=!0;break;case YT.PlayerState.PLAYING:this.pauseProgressPolling=!1,"1"!=this.videoAutoplay||this.videoShown||(this.playAnimationSequence([{o:this.textShade,a:{opacity:0},t:MASERATI.Animations.videoCtaFadeSpeed,p:0,s:!1},{o:this.videoContainer,a:"fadeIn",t:MASERATI.Animations.videoCtaFadeSpeed,p:0,s:!1},{o:this.playLoader,a:"fadeOut",t:MASERATI.Animations.videoCtaFadeSpeed,p:0,s:!1}]),this.videoShown=!0);break;default:this.pauseProgressPolling=!0}this.player.getPlayerState()==YT.PlayerState.ENDED&&(this.playAnimationSequence([{o:this.resumeButton,a:"fadeIn",t:MASERATI.Animations.videoCtaFadeSpeed,p:0,s:!1}],(function(){MASERATI.Helpers.Mobile.isMobile()||"YouKu"==t.provider?t.videoContainer.hide():(t.player.seekTo(0),t.toggleAudio(0))})),MASERATI.Helpers.log("Time to resume button")),null!==this.poller||this.$element.hasClass("nopolling")||this.player.getPlayerState()!=YT.PlayerState.PLAYING||this.attachPoller()},MASERATI.VideoCtaModelHero.prototype.showOverlay=function(){if(MASERATI.Helpers.log("isfullscreen? "+this.isFullScreen),this.isFullScreen)return this.showOverlayWhenExitFullScreen=!0,!1;this.$element.addClass("overlay"),this.overlay.show();var e=this.showOverlaySequence.slice(0);this.player&&("YouKu"!=this.provider&&this.player.seekTo(0),this.player.stopVideo()),this.textShade.css("display","block").css("opacity",0),this.playAnimationSequence(e)},MASERATI.VideoCtaModelHero.prototype.showVideo=function(){var e=this;MASERATI.Helpers.log(" video container is ",this.videoContainer),MASERATI.AdobeTracking.tracker.setMediaName("video:"+this.title),"1"==this.videoAutoplay?(this.volumeOn.removeClass("hidden"),this.playButton.parent().hide()):this.volumeOff.removeClass("hidden"),this.closeButton.show(),this.titleClose.show(),this.volumeButton.show(),this.playAnimationSequence([{o:e.volumeButton,a:{opacity:1},t:MASERATI.Animations.videoCtaFadeSpeed,p:0,s:!1}]),this.playAnimationSequence([{o:e.closeButton,a:{opacity:1},t:MASERATI.Animations.videoCtaFadeSpeed,p:0,s:!1}]),this.playAnimationSequence([{o:e.titleClose,a:{opacity:1},t:MASERATI.Animations.videoCtaFadeSpeed,p:0,s:!1}]);var t=(this.forceAutoplay?this.playVideoSequenceAutoPlay:this.playVideoSequence).slice(0);this.$element.hasClass("overlay")&&(t=this.resumeVideoSequence.slice(0),this.$element.hasClass("videoLoop")&&("YouKu"!=this.provider&&this.looperPlayer.seekTo(0),this.looperPlayer.stopVideo(),this.looperPlayerInterval&&window.clearInterval(this.looperPlayerInterval))),this.playAnimationSequence(t,(function(){"1"!=e.videoAutoplay?(e.$element.removeClass("overlay"),e.overlay.hide()):(e.closeButton.show(),e.titleClose.show(),e.volumeButton.show(),e.initialTitle.hide()),e.play()})),this.forceAutoplay=!1},MASERATI.VideoCtaModelHero.prototype.play=function(){if(this.player){this.forceUnMute||"1"!=this.videoAutoplay?this.toggleAudio(1):this.toggleAudio(0),this.forceUnMute=!1,this.$element.hasClass("videoLoop")&&"YouKu"!=this.provider&&this.player.seekTo(0);var e=this;if("YouKu"!=this.provider){this.triggerProgressChangeEvent("0"),MASERATI.Helpers.log("Tracker poller attacched");var t=function(){e.pollProgress(),e.progressPoller&&(e.progressPoller=requestAnimationFrame(t))};this.progressPoller=requestAnimationFrame(t),MASERATI.Helpers.log("Tracker SetMediaName "+this.title),MASERATI.AdobeTracking.tracker.setMediaName("video:"+this.title)}if(MASERATI.Helpers.log(this.player),MASERATI.Helpers.log(" starting play"),this.player.playVideo(),"1"==this.videoAutoplay&&"YouKu"!=this.provider)var i=0,n=setInterval((function(){var t=e.player.getPlayerState();t==YT.PlayerState.PAUSED?e.player.playVideo():(++i>50||t==YT.PlayerState.PLAYING)&&clearInterval(n)}),100);this.isClosed=!1,"1"==this.videoAutoplay&&"YouKu"==this.provider&&(this.playAnimationSequence([{o:this.textShade,a:{opacity:0},t:MASERATI.Animations.videoCtaFadeSpeed,p:0,s:!1},{o:this.videoContainer,a:"fadeIn",t:MASERATI.Animations.videoCtaFadeSpeed,p:0,s:!1},{o:this.playLoader,a:"fadeOut",t:MASERATI.Animations.videoCtaFadeSpeed,p:0,s:!1}]),this.videoShown=!0)}else this.playWhenReady=!0},MASERATI.VideoCtaModelHero.prototype.stop=function(){var e=this;clearInterval(this.progressPoller),MASERATI.Helpers.log("Tracker poller detached"),this.player.pauseVideo(),this.toggleAudio(1),this.isClosing=!0,e.detachPoller(),e.$element.removeClass("nopolling"),e.closeButton.velocity("stop",!0),e.volumeButton.velocity("stop",!0),e.titleClose.velocity("stop",!0),e.overlayTitle.velocity("stop",!0),e.subTitle.velocity("stop",!0),e.ctaButton.velocity("stop",!0),MASERATI.Helpers.log("resuming play btn"),this.isClosing=!1,this.playAnimationSequence(this.resumeInitialPlaySequence.slice(0),(function(){e.textShade.show()})),this.isClosed=!0};var i=[];$((function(){$(".video-cta-model-hero").each((function(){MASERATI.Helpers.log("initializing video-cta-model-hero"),video=new MASERATI.VideoCtaModelHero($(this)),i.push(video),"YouKu"==$(this).data("provider")?video.setupVideo():MASERATI.YoutubeManager.addVideoCallback((function(){video.setupVideo()}))}))}))},function(e,t){MASERATI.LogoList=function(e){this.$el=e,this.$subtitles=this.$el.find(".subtitle")},MASERATI.LogoList.prototype.equalSizeSubtitle=function(){if(this.$subtitles.length>0){var e=0;this.$el.find(".element .subtitle").css("height",""),$(window).width()>767&&(this.$el.find(".element .subtitle").each((function(){e<$(this).height()&&(e=$(this).height())})),this.$el.find(".element .subtitle").height(e))}},MASERATI.LogoList.prototype.bind=function(){var e=this;$(window).resize((function(){e.equalSizeSubtitle()}))},$((function(){$(".logo-list").each((function(){new MASERATI.LogoList($(this))}))}))},function(e,t){MASERATI.Menu=function(e,t){this.$element=e,this.$mobileMenu=this.$element.find(".mobile-menu"),this.active=!1,t&&this.stickyBind(),this.mobileInit(),$("#countryAlert .close, #countryAlert .btnOK").on("click",(function(){$("#countryAlert").velocity("slideUp")})),this.overlayTime=this.$element.attr("data-overlay-time")?this.$element.attr("data-overlay-time"):5,this.bounceInit(),this.autoCloseInit()},MASERATI.Menu.prototype.autoCloseInit=function(){var e=this.overlayTime,t=$("#countryAlert .btnOK"),i=t.text(),n=setInterval((function(){e<0?(clearInterval(n),$("#countryAlert").velocity("slideUp")):t.text(i+" ("+e--+")")}),1e3)},MASERATI.Menu.prototype.stickyBind=function(){new Waypoint.Sticky({element:this.$element[0],offset:-1})},MASERATI.Menu.prototype.bounceInit=function(){var e=this,t=MASERATI.Helpers.debounce((function(){$(window).width()<1024&&(e.$element.find(".content").removeAttr("style"),e.$element.find(".logo").removeAttr("style"))}));$(window).resize(t)},MASERATI.Menu.prototype.mobileInit=function(){new MASERATI.MobileMenu(this.$mobileMenu,this.$element.find(".hamburger, .mobile-menu .close"))},MASERATI.Menu.prototype.calcMenuSubElementsHeight=function(){var e="0px";return this.$mobileMenu.find("*").each((function(){e=parseInt(e.replace("px",""))+parseInt($(this).css("height").replace("px",""))+parseInt($(this).css("padding-top").replace("px",""))+parseInt($(this).css("padding-bottom").replace("px",""))+parseInt($(this).css("margin-top").replace("px",""))+parseInt($(this).css("margin-bottom").replace("px",""))+"px"})),e},$((function(){var e=$("#maserati_menu");if(e.length){var t=e.hasClass("not-sticky");new MASERATI.Menu(e,!t)}})),MASERATI.MobileMenu=function(e,t){this.$element=e,this.$subs=this.$element.find(".sub"),this.$trigger=t,this.opened=!1,this.bindEvents(),this.clearGraphics()},MASERATI.MobileMenu.prototype.open=function(){var e=this;Waypoint.disableAll(),$("body").data("pos",$("body").scrollTop()),this.$element.scrollTop(0),this.$element.hasClass("velocity-animating")||this.$element.velocity({translateX:0,opacity:1},{duration:MASERATI.Animations.openOverlaySlideSpeed,complete:function(){e.opened=!0,e.$element.removeClass("closed"),$("body").addClass("locked"),$("body").children(":visible:not(.sticky-wrapper, .not-sticky)").addClass("menuhidden").hide()}})},MASERATI.MobileMenu.prototype.close=function(){var e=this;Waypoint.enableAll(),Waypoint.refreshAll(),$("body").removeClass("locked"),$("body").children(".menuhidden").show().removeClass("menuhidden"),null!==$("body").data("pos")&&($("body").scrollTop($("body").data("pos")),$("body").data("pos",!1)),this.$element.hasClass("velocity-animating")||this.$element.velocity({translateX:"100%",opacity:0},{duration:MASERATI.Animations.openOverlaySlideSpeed,complete:function(){e.opened=!1,e.$element.addClass("closed")}})},MASERATI.MobileMenu.prototype.toggleMenu=function(){this.opened?this.close():this.open()},MASERATI.MobileMenu.prototype.bindEvents=function(){var e=this;this.$trigger.click((function(){e.toggleMenu()})),this.$subs.each((function(){$e=$(this),$e.children("span").click((function(){var e=$(this).siblings("ul");e.hasClass("velocity-animating")||(e.velocity(e.is(":visible")?"slideUp":"slideDown"),$(this).find(".triangle").velocity({rotateZ:e.is(":visible")?"0deg":"180deg"},{duration:500}))}))}));var t=MASERATI.Helpers.debounce((function(){$(window).width()>=1280&&e.clearGraphics()}),250);$(window).resize((function(){t()}))},MASERATI.MobileMenu.prototype.clearGraphics=function(){var e=this;this.$element.velocity({translateX:"100%"},{duration:500,complete:function(){e.opened=!1,e.$element.velocity({opacity:0}),$("body").removeClass("locked")}})}},function(e,t){MASERATI.Menu2018=function(e,t){var i=this;this.$el=e,this.submenuOpenMode=this.$el.data("submenu-open-mode"),this.$submenuContainers=this.$el.find(".submenuContainer"),this.$suggestionsContainer=this.$el.find(".suggestions-panel"),this.onlyLogo=0==this.$el.find(".left, right").length,this.$mobileMenu=this.$el.find(".mobile-menu"),this.$searchMenu=this.$el.find(".search-menu"),this.$subMenu=this.$el.find(".content-submenu"),this.$searchInput=this.$searchMenu.find("input[name=q]"),this.$searchForm=this.$searchMenu.find("form"),this.active=!1,this.openSubmenuScrollY=0,this.menuHeight=i.$el.outerHeight(),this.stickyBind(),this.mobileInit(),$("#countryAlert .close, #countryAlert .btnOK").on("click",(function(){$("#countryAlert").velocity("slideUp")})),this.overlayTime=this.$el.attr("data-overlay-time")?this.$el.attr("data-overlay-time"):5,this.bounceInit(),this.autoCloseInit(),this.bindSearchEvents(),this.bindEvents(),window.innerWidth>=1024&&this.checkMenuOverflow();var n=this.$el.find(".content-submenu.dealers-container"),s="en";if("undefined"!=typeof digitalData&&null!=digitalData&&null!=digitalData.pageInfo&&null!=digitalData.pageInfo.language&&(s=digitalData.pageInfo.language),n.length>0&&(n.data("dealercodes")+"").length>0){var o=n.data("dealercodes")+"";MASERATI.dealerContact.callService(o,s,(function(e){i.printDealerDesktop(e,n.find(".list.template-definitions")),i.printDealerMobile(e,i.$el.find(".dealer-submenu-mobile.template-definitions")),MASERATI.Helpers.Footer2018.printDealerDesktop(e),MASERATI.Helpers.Footer2018.printDealerMobile(e),$(".hero-gallery").addClass("dealer-site"),i.calculateMaxSubMenuHeight()}))}this.calculateMaxSubMenuHeight(),window.innerWidth>=1024&&i.setPriceContainerHeight(),setTimeout((function(){i.calculateMaxSubMenuHeight()}),1e3)},MASERATI.Menu2018.prototype.bindEvents=function(){var e=this;$(window).on("scroll",(function(){$("nav[data-submenu-open-mode='click']").length&&Math.abs(e.openSubmenuScrollY-window.scrollY)>399&&(e.$el.find("div.submenuContainer.opened").attr("aria-expanded","false"),e.$el.find("div.submenuContainer.opened").removeClass("opened"));var t=e.$el.parent(".sticky-wrapper");t.length>0&&t[0].style.removeProperty("height")})),$(document).click((function(t){if(t.target!=e.$el.get(0)&&!$.contains(e.$el.get(0),t.target)){let t=e.$submenuContainers.filter(".opened");t.length>0&&t.click()}})),this.$el.find("[name=q]").on("focusout",(function(t){0==e.$el.find(".suggestionItem").length&&(e.$el.removeClass("search-expanded"),e.$suggestionsContainer.removeClass("open"))})),this.$el.find(".suggestionItem").length>0&&this.$el.find(".suggestionItem").last().keydown((function(t){9==t.keyCode&&(e.$el.removeClass("search-expanded"),e.$suggestionsContainer.removeClass("open"))})),this.$el.find(".skip-menu a").click((function(){e.$el.find("#endMenu").css("display","block"),e.$el.find("#endMenu").one("focusout",(function(){e.$el.find("#endMenu").css("display","none")}))})),"click"==this.submenuOpenMode||MASERATI.Helpers.isSmallDeviceLandscape()?this.$submenuContainers.click((function(t){e.calculateModelsSubMenuHeight(),e.openSubmenuScrollY=window.scrollY,$(t.target).closest(".content-submenu").length||(t.preventDefault(),$(this).toggleClass("opened"),e.$el.toggleClass("submenu-open"),$(this).prevAll(".submenuContainer").removeClass("opened"),$(this).nextAll(".submenuContainer").removeClass("opened")),$(this).hasClass("opened")?$(this).attr("aria-expanded","true"):$(this).attr("aria-expanded","false")})):(this.$submenuContainers.keydown((function(t){return 27==t.keyCode?($(this).removeClass("opened"),void $(this).attr("aria-expanded","false")):13==t.keyCode?(e.calculateMaxSubMenuHeight(),e.$el.find(".submenuContainer.opened").removeClass("opened"),e.calculateModelsSubMenuHeight(),$(this).addClass("opened"),void $(this).attr("aria-expanded","true")):void 0})),e.$submenuContainers.hover((function(){e.calculateMaxSubMenuHeight(),e.$el.hasClass("submenu-open")||e.$el.addClass("submenu-open");var t=e.$el.attr("submenuHeight");e.$el.css("height",t),$(e.$submenuContainers).removeClass("opened"),$(e.$submenuContainers).attr("aria-expanded","false"),e.calculateModelsSubMenuHeight(),$(this).addClass("opened"),$(this).attr("aria-expanded","true")}),(function(t){e.$el.removeClass("submenu-open"),e.$el[0].style.removeProperty("height"),setTimeout((function(){e.$el.hasClass("submenu-open")||($(e.$submenuContainers).removeClass("opened"),$(e.$submenuContainers).attr("aria-expanded","false"))}),150)}))),this.initModelList20(),$(window).resize((function(){window.innerWidth>=1024&&(e.checkMenuOverflow(),e.setPriceContainerHeight()),e.calculateMaxSubMenuHeight()}))},MASERATI.Menu2018.prototype.initModelList20=function(){var e=this.$el.find(".content-submenu.model-list-20");if(0!=e.length){var t=0;e.find(".left-col").find(".selector").each((function(e){$(this).data("index",e)})),e.find(".left-col").find(".selector").hover((function(){n(),t=$(this).data("index"),i()})),e.find(".left-col").find(".link").hover((function(){e.find(".left-col").find(".selector").eq(t).removeClass("enabled")})),e.find(".left-col").find(".selector").on("click",(function(){n(),t=$(this).data("index"),i()})),i(),this.calculateModelsSubMenuHeight()}function i(){e.find(".left-col").find(".selector").eq(t).addClass("enabled"),e.find(".right-col").find(".model-list-template").eq(t).addClass("enabled")}function n(){e.find(".left-col").find(".selector").eq(t).removeClass("enabled"),e.find(".right-col").find(".model-list-template").eq(t).removeClass("enabled")}},MASERATI.Menu2018.prototype.calculateModelsSubMenuHeight=function(){var e=this;e.$submenuContainers.addClass("opened");var t=e.$el.find(".content-submenu.model-list-20").find(".inner").find(".right-col").find(".model-list-template");e.$el.find(".content-submenu.model-list-20").find(".inner").find(".left-col").css("min-height","auto"),t.css("min-height","auto"),t.css("height","auto");var i=0,n=0;t.each((function(){var e=$(this).outerHeight(!1);$(this).find(".disclaimer").length>0&&(0!=(n=$(this).find(".disclaimer").outerHeight(!1))||$(this).hasClass("enabled")||($(this).addClass("enabled"),n=$(this).find(".disclaimer").outerHeight(!1),e=$(this).outerHeight(!1),$(this).removeClass("enabled"))),e>i&&(i=e)})),t.each((function(){if($(this).find(".disclaimer").length>0){$(this).find(".models");$(this).css("min-height",i+n),e.$el.find(".content-submenu.model-list-20").find(".inner").find(".left-col").css("height",i),$(this).find(".models").css("top",i/2)}else $(this).css("min-height",i),$(this).find(".models").css("top",i/2)})),e.$submenuContainers.removeClass("opened"),e.$el.find(".content-submenu.model-list-20").find(".inner").find(".left-col").css("top",(i-n)/2)},MASERATI.Menu2018.prototype.calculateMaxSubMenuHeight=function(){var e=0;this.$submenuContainers.addClass("opened"),this.$subMenu.each((function(t,i){var n=$(i).outerHeight();n>e&&(e=n)})),e+=this.menuHeight,this.$submenuContainers.removeClass("opened"),this.$el.attr("submenuHeight",e)},MASERATI.Menu2018.prototype.setPriceContainerHeight=function(){var e=0;this.$submenuContainers.addClass("opened");var t=this.$el.find(".left").find(".model-list-20").find(".t1").find(".models").find(".model");t.each((function(){$(this).find(".price-container").css("height","auto");var t=$(this).find(".price-container").outerHeight();t>e&&void 0!==t&&(e=$(this).find(".price-container").outerHeight())})),t.each((function(){$(this).find(".price-container").css("height",e)})),this.$submenuContainers.removeClass("opened")},MASERATI.Menu2018.prototype.autoCloseInit=function(){var e=this.overlayTime,t=$("#countryAlert .btnOK"),i=t.text(),n=setInterval((function(){e<0?(clearInterval(n),$("#countryAlert").velocity("slideUp")):t.text(i+" ("+e--+")")}),1e3)},MASERATI.Menu2018.prototype.stickyBind=function(){new Waypoint.Sticky({element:this.$el[0],offset:-1}),this.$el.parents(".sticky-wrapper").addClass(this.$el.get(0).className)},MASERATI.Menu2018.prototype.bindSearchEvents=function(){var e=this;e.$searchInput.focus((function(t){e.$suggestionsContainer.addClass("open")})),this.$searchMenu.find(".close").click((function(t){e.$el.removeClass("search-expanded"),e.$suggestionsContainer.removeClass("open"),t.stopPropagation()})),this.$searchMenu.click((function(t){e.$el.addClass("search-expanded"),e.$searchInput.focus()}))},MASERATI.Menu2018.prototype.bounceInit=function(){var e=this,t=MASERATI.Helpers.debounce((function(){$(window).width()<1024&&(e.$el.find(".content").removeAttr("style"),e.$el.find(".logo").removeAttr("style"))}));$(window).resize(t)},MASERATI.Menu2018.prototype.mobileInit=function(){new MASERATI.MobileMenu2018(this.$mobileMenu,this.$el.find(".hamburger, .mobile-menu .close"))},MASERATI.Menu2018.prototype.calcMenuSubElementsHeight=function(){var e="0px";return this.$mobileMenu.find("*").each((function(){e=parseInt(e.replace("px",""))+parseInt($(this).css("height").replace("px",""))+parseInt($(this).css("padding-top").replace("px",""))+parseInt($(this).css("padding-bottom").replace("px",""))+parseInt($(this).css("margin-top").replace("px",""))+parseInt($(this).css("margin-bottom").replace("px",""))+"px"})),e},MASERATI.MobileMenu2018=function(e,t){this.$el=e,this.$subs=this.$el.find(".sub"),this.$trigger=t,this.$suggestionsContainer=this.$el.find(".suggestions-panel"),this.opened=!1,this.bindEvents(),this.clearGraphics()},MASERATI.MobileMenu2018.prototype.open=function(){var e=this;e.$el.parent().addClass("opened"),Waypoint.disableAll(),$("body").data("pos",$("body").scrollTop()),this.$el.scrollTop(0),this.$el.hasClass("velocity-animating")||this.$el.velocity({translateX:0,opacity:1},{duration:MASERATI.Animations.openOverlaySlideSpeed,complete:function(){e.opened=!0,e.$el.removeClass("closed"),$("body").addClass("locked"),$("body").children(":visible:not(.sticky-wrapper, .not-sticky)").addClass("menuhidden").hide()}})},MASERATI.MobileMenu2018.prototype.close=function(){var e=this;e.$el.parent().removeClass("opened"),e.$el.parent().removeClass("search-expanded"),e.$el.parent().find(".suggestions-panel").removeClass("open"),Waypoint.enableAll(),Waypoint.refreshAll(),$("body").removeClass("locked"),$("body").children(".menuhidden").show().removeClass("menuhidden"),null!==$("body").data("pos")&&($("body").scrollTop($("body").data("pos")),$("body").data("pos",!1)),this.$el.hasClass("velocity-animating")||this.$el.velocity({translateX:"100%",opacity:0},{duration:MASERATI.Animations.openOverlaySlideSpeed,complete:function(){e.opened=!1,e.$el.addClass("closed")}})},MASERATI.MobileMenu2018.prototype.toggleMenu=function(){this.opened?this.close():this.open()},MASERATI.MobileMenu2018.prototype.bindEvents=function(){var e=this;this.$trigger.click((function(){e.toggleMenu()})),this.$el.find("a").click((function(){this.pathname===location.pathname&&e.close()})),this.$subs.each((function(){$e=$(this),$e.children("span").click((function(){$(this).toggleClass("opened");var e=$(this).siblings("ul");e.hasClass("velocity-animating")||e.velocity(e.is(":visible")?"slideUp":"slideDown")}))}));var t=MASERATI.Helpers.debounce((function(){$(window).width()>=1280&&e.clearGraphics()}),250);$(window).resize((function(){t()}))},MASERATI.MobileMenu2018.prototype.clearGraphics=function(){var e=this;this.$el.velocity({translateX:"100%"},{duration:500,complete:function(){e.opened=!1,e.$el.velocity({opacity:0}),$("body").removeClass("locked")}})},MASERATI.Menu2018.prototype.checkMenuOverflow=function(e){if(this.onlyLogo)return;let t=$(window).width(),i=this.$el.find(".left"),n=this.$el.find(".right"),s=i.offset().left,o=s;i.find("a.standard").each((function(){o+=this.clientWidth}));let a=n.width();i.css("max-width",t-a-s-0),this.$el.find(".skip-container").css("max-width",t-a-s-0);let r=i.find("a.standard:not(.forcewrapped)").sort((function(e,t){return t.clientWidth-e.clientWidth})).filter(":first"),l=i.find("a.standard.forcewrapped").sort((function(e,t){return e.clientWidth-t.clientWidth})).filter(":first");t-0<o+a&&r.length>0?(r.addClass("forcewrapped"),this.checkMenuOverflow(!0)):t-0>o+a&&l.length>0&&!e&&(l.removeClass("forcewrapped"),this.checkMenuOverflow())},MASERATI.Menu2018.prototype.printDealerDesktop=function(e,t){for(var i=0;i<e.length;i++){var n=e[i],s=t.find(".element.template-definitions").clone();s.removeClass("template-definitions"),s.find(".dealer-name").text(n.dealerName),e.length>1&&s.find(".dealer-name").removeClass("hide"),s.find(".telephone").find("a").attr("href","tel:"+n.phone).text(n.phone),s.find(".address").text(n.address),s.find(".location").find("a").attr("href","https://www.google.com/maps/place/"+n.location),n.openingResult.length>0?s.find(".openingTimes").find(".times").html(decodeURI(n.openingResult)):(s.find(".openingTimes").find(".times").html(decodeURI(e[i-1].openingResult)),s.find(".openingTimes").addClass("hidden")),s.appendTo(t.find(".list-left").find(".elements"))}t.removeClass("template-definitions")},MASERATI.Menu2018.prototype.printDealerMobile=function(e,t){for(var i=0;i<e.length;i++){var n=e[i],s=t.find(".sub.template-definitions").first().clone(!0,!0);s.removeClass("template-definitions"),e.length>1?s.addClass("multi"):s.addClass("single"),s.find(".brand-li").find(".name").text(n.dealerName),s.find(".references").find(".telephone").find("a").attr("href","tel:"+n.phone),s.find(".address").text(n.address),s.find(".references").find(".location").find("a").attr("href","https://www.google.com/maps/place/"+n.location),n.openingResult.length>0?s.find(".openingTimes").find(".times").html(decodeURI(n.openingResult)):s.find(".openingTimes").find(".times").html(decodeURI(e[i-1].openingResult)),s.appendTo(t)}t.removeClass("template-definitions")},$((function(){var e=$("#maserati_menu_2018");if(e.length){var t=e.hasClass("not-sticky");new MASERATI.Menu2018(e,!t)}}))},function(e,t){MASERATI.ModelEnginePlayer=function(e){this.$container=e,this.$player=this.$container.find("audio")[0],this.$player.load(),void 0!==this.$player&&(this.dragging=!1,this.$timeline=this.$container.find(".timeline"),this.$button=this.$container.find(".player-control"),this.bindButtonEvents(),this.bindTimelineEvents(),this.bindPlayerEvents())},MASERATI.ModelEnginePlayer.prototype.bindPlayerEvents=function(){var e=this;this.$player.EnginePlayer=this,this.$player.addEventListener("timeupdate",this.timeUpdateListener,!1),this.$player.addEventListener("play",(function(){e.$button.removeClass("play").addClass("pause")}),!1),this.$player.addEventListener("pause",(function(){e.$button.removeClass("pause").addClass("play")}),!1),this.$player.addEventListener("ended",(function(){e.$button.removeClass("pause").addClass("play"),e.currentTime=0,e.moveCursor(0)}),!1)},MASERATI.ModelEnginePlayer.prototype.bindButtonEvents=function(){var e=this;this.$button.on("click",(function(t){t.preventDefault(),e.$player[e.$player.paused?"play":"pause"]()}))},MASERATI.ModelEnginePlayer.prototype.bindTimelineEvents=function(){var e=this;this.$timeline.on("click",(function(t){var i=e.percent(t);e.moveCursor(100*i),e.$player.currentTime=e.$player.duration*i}));var t=function(t){e.onDragging(t)};this.$timeline.find(".cursor").on("mousedown",(function(i){e.dragging=!0,window.addEventListener("mousemove",t,!0),e.$player.removeEventListener("timeupdate",e.timeUpdateListener,!1)})),$(window).on("mouseup",(function(){e.dragging&&(window.removeEventListener("mousemove",t,!0),e.$player.addEventListener("timeupdate",e.timeUpdateListener,!1)),e.dragging=!1}))},MASERATI.ModelEnginePlayer.prototype.percent=function(e){var t=(e.pageX-this.$timeline[0].offsetLeft)/parseInt(this.$timeline.width());return t=(t=t>1?1:t)<0?0:t},MASERATI.ModelEnginePlayer.prototype.onDragging=function(e){var t=this.percent(e);this.moveCursor(100*t)},MASERATI.ModelEnginePlayer.prototype.moveCursor=function(e){this.$timeline.find(".elapsed").width(e+"%"),this.$timeline.find(".cursor").css("left",e+"%")},MASERATI.ModelEnginePlayer.prototype.timeUpdateListener=function(){var e=this.currentTime/this.duration;this.EnginePlayer.moveCursor(100*e)},$((function(){var e=$(".model-engines"),t=e.find(".swappable"),i=$("#maserati_menu, #maserati_menu_2018");e.find(".swap-specs").on("click",(function(n){n.preventDefault(),t.hide(),e.find(".swapped").hide();var s=$(this).data("swap");e.find(".swapped-"+s+":first, .close-swapped").show();var o=e.find(".close-swapped"),a=e.find(".swapped-"+s+":first").find(".player-control");o.focus(),e.find(".swapped-"+s+":first, .close-swapped").on("keydown",(function(e){"Tab"===e.key||9===e.keyCode?e.shiftKey?$(document.activeElement).is(o)&&(e.preventDefault(),a.focus()):$(document.activeElement).is(a)&&(e.preventDefault(),o.focus()):27==e.keyCode&&o.click()})),$audio=e.find(".swapped-"+s+" audio > source"),$audio.each((function(){$(this).attr("src",$audio.attr("data-lazy-audio"))})),e.find(".swapped-"+s+":first .sound").data("player",new MASERATI.ModelEnginePlayer(e.find(".swapped-"+s+":first .sound"))),e.velocity("scroll",{offset:i.length?-i.height():0,duration:MASERATI.Animations.ctaScrollSpeed,easing:MASERATI.Animations.ctaEasing})})),e.find(".close-swapped").on("click",(function(){$(this).hide(),e.find(".swapped").hide(),t.show()}))}))},function(e,t){MASERATI.ModelSelector2020=function(e){this.$el=e,this.$mainBox=this.$el.find(".main-box"),this.$menuContainer=this.$el.find(".menu-container"),this.$sliderContainer=this.$el.find(".slider-container"),this.$modelDetails=this.$el.find(".model-details"),this.$slides=this.$menuContainer.find(".modelMenuItem"),this.$modelsContainer=this.$el.find(".models-container"),this.$models=this.$modelsContainer.find(".modelElementItem"),this.$modelImages=this.$models.find(".model-image"),this.$prevTrigger=this.$el.find(".prevTrigger"),this.$nextTrigger=this.$el.find(".nextTrigger"),this.$componentContainer=this.$el,this.focusElement=void 0,this.documentDirection="rtl"===$("html").attr("dir")?"rtl":"ltr";var t=parseInt($(this.$el).find(".models-container").data("selectedmodel"));(t<0||t>=$(this.$el).find(".model-list .model").length)&&(t=0),$(this.$sliderContainer.find(".model-details").get(t)).addClass("active"),this.currentModel=t,this.totalModels=this.$models.length,this.delay=50,this.animating=0;var i=this.$el.find(".model.modelElementItem.active .icons-container").height(),n=i;MASERATI.Helpers.getWindowWidth()<1024&&(i/=4,n=0),this.$modelImages.css("padding-top",i+"px"),this.$sliderContainer.find(".sound-container").css("padding-top",n+"px"),this.progressEvents=["0","25","50","75","100"],this.sentProgressEvent=null,this.scrollSemaphone=!1,this.setBackgroudImage(t),this.setItemsPadding(),this.activateCar(),MASERATI.Helpers.getWindowWidth()>=1024?this.setCtaWidth():this.$el.find(".model-details.active .buttons-container .cta").css("width","100%"),this.bindEvents(),this.refreshModels(!1),this.dialogEvents(),this.handleSpecs(),this.initSoundEffects(this.$el),this.initStandardEquipement(),this.loadComponent()},MASERATI.ModelSelector2020.prototype.setBackgroudImage=function(e){var t=$(this.$modelImages.get(e)).data("background-url"),i=MASERATI.Helpers.getWindowWidth();i<1024?this.$modelsContainer.find(".model-image-background-mobile").attr("src",t):i>=1024&&this.$mainBox.find(".model-image-background").attr("src",t)},MASERATI.ModelSelector2020.prototype.setItemsPadding=function(){var e=this.$el.find(".model.modelElementItem.active .icons-container").height(),t=e;MASERATI.Helpers.getWindowWidth()<1024&&(e/=4,t=0),this.$modelImages.css("padding-top",e+"px"),this.$sliderContainer.find(".sound-container").css("padding-top",t+"px")},MASERATI.ModelSelector2020.prototype.setCtaWidth=function(){this.$modelDetailsActive=this.$el.find(".model-details.active");var e=this.$modelDetailsActive.find(".buttons-container .cta"),t=0;for(let n=0;n<e.length;n++){var i=$(e[n]).width();i>t&&(t=i)}this.$modelDetailsActive.find(".buttons-container .cta").css("width",t),this.$modelDetailsActive.find(".buttons-container .cta").css("min-width","190px")},MASERATI.ModelSelector2020.prototype.initStandardEquipement=function(){this.$el.find(".standard-equipment").each((function(){$(this).find(".detail-container").find(".nav-anchor-equipment").find(".anchor").first().addClass("selected"),$(this).find(".model-container").find(".cta-container").find(".cta").css("width","100%")}))},MASERATI.ModelSelector2020.prototype.initSoundEffects=function(e){let t=this;e.find("audio").each((function(){this.onended=function(){$(this).siblings(".button-sound-pause").hide(),$(this).siblings(".dynamic-sound").show(),$(this).siblings(".button-sound-play").show().focus(),$(this).siblings(".equalizer").css("display","none")},this.onplay=function(){var e=$(".button-sound-play");e.hide(),e.siblings(".equalizer").css("display","flex"),e.siblings(".dynamic-sound").hide(),e.siblings(".button-sound-pause").show().focus()},this.onpause=function(){var e=$(".button-sound-pause");e.hide(),e.siblings(".equalizer").css("display","none"),e.siblings(".dynamic-sound").show(),e.siblings(".button-sound-play").show().focus()},this.addEventListener("timeupdate",(function(){var e=this.currentTime,i=this.duration;e<.5?t.triggerProgressChangeEvent("0"):e>.25*i&&e<.5*i?t.triggerProgressChangeEvent("25"):e>.5*i&&e<.75*i?t.triggerProgressChangeEvent("50"):e>.75*i&&e<i-.5?t.triggerProgressChangeEvent("75"):e>i-.5&&t.triggerProgressChangeEvent("100")}))})),e.find(".button-sound-play").on("click",(function(e){if(t.$el.find(".model.modelMenuItem.active").length>0){var i=t.$el.find(".model.modelMenuItem.active")[0].innerText;console.log("Tracker SetMediaName "+i),t.sentProgressEvent=null,null!=i&&(i=i.replace(" ","-")),MASERATI.AdobeTracking.tracker.setMediaName("audio:engine-sound:"+i)}$(this).siblings("audio")[0].play()})),e.find(".button-sound-pause").on("click",(function(e){$(this).siblings("audio")[0].pause()}))},MASERATI.ModelSelector2020.prototype.triggerProgressChangeEvent=function(e){this.progressEvents.indexOf(e)>-1&&this.sentProgressEvent!=e&&(this.sentProgressEvent=e,this.$el[0].dispatchEvent(new CustomEvent("videoprogresschange",{detail:{progress:e}})),"0"==e?MASERATI.AdobeTracking.tracker.setSatelliteTrack("MediaStreamStart"):MASERATI.AdobeTracking.tracker.setSatelliteTrack("MediaStream"+e))},MASERATI.ModelSelector2020.prototype.handleSpecs=function(){var e=this.$el.find(".swappable"),t=this;e.find(".more-info.specs, .cta.versionMore").on("click",(function(i){i.preventDefault(),t.focusElement=$(this);var n=$(this).data("swap");console.log("-- swapping to "+n+"th tech spech page ");var s=t.$el.find(".swapped-"+n);$(s.find(".tabs > div").get(0)).addClass("active").attr("aria-selected",!0).attr("tabindex","0"),$(s.find(".big-tabs .tab").get(0)).addClass("active"),e.hide().siblings(".swapped-"+n).show(),console.log("Done the hide&show procedure");var o=t.$el.find(".close-swapped-main");o.show(),$(this).parents(".swapped-offer").length||s.hasClass("swapped-offer")?o=s:o.show();var a=$(".slide-content").offset().top-$(".new-menu").height();return $("html, body").animate({scrollTop:a},800,(function(){})),console.log("Done the scrolling"),s.find(".close-swapped").focus(),!1})),this.$el.find(".tabs > div").each((function(e){$(this).on("click",(function(){t.$el.find(".tabs > div").removeClass("active"),t.$el.find(".tabs > div").attr("aria-selected",!1).attr("tabindex","-1"),$(this).addClass("active"),$(this).attr("aria-selected",!0).attr("tabindex","0").focus(),t.$el.find(".big-tabs .tab").removeClass("active"),$(t.$el.find(".big-tabs .tab").get(e)).addClass("active")}))})),this.$el.find(".close-swapped").click((function(e){t.$el.find(".close-swapped-main").hide(),t.$el.find(".model-list").addClass("no-animation"),t.$el.find(".model-info-container").addClass("no-animation"),t.$el.find(".swapped").hide(),t.$el.find(".swappable").show(),t.$el.find(".tabs > div").removeClass("active"),t.$el.find(".tabs > div").attr("aria-selected",!1).attr("tabindex","-1"),t.$el.find(".big-tabs .tab").removeClass("active"),t.focusElement.hasClass("versionMore")?t.focusElement.find("a").focus():t.focusElement.focus(),setTimeout((function(){t.$el.find(".model-info-container").removeClass("no-animation")}),400)}))},MASERATI.ModelSelector2020.prototype.dialogEvents=function(){this.$el.find(".swapped").each((function(){var e=$(this);e.on("keydown",(function(t){if("Tab"===t.key||9===t.keyCode){var i=$(this).find("span.close,button, [href], input, select, textarea, [tabindex]:not([tabindex='-1'])"),n=i.first(),s=i.last();t.shiftKey?$(document.activeElement).is(n)&&(t.preventDefault(),s.focus()):$(document.activeElement).is(s)&&(t.preventDefault(),n.focus())}else if(37===t.keyCode){t.preventDefault(),(o=e.find(".tabs .active")).is(":first-child")?e.find(".tabs>div").last().trigger("click"):o.prev().trigger("click")}else if(39===t.keyCode){var o;t.preventDefault(),(o=e.find(".tabs .active")).is(":last-child")?e.find(".tabs>div").first().trigger("click"):o.next().trigger("click")}else 27==t.keyCode&&e.find(".close-swapped").click()}))}))},MASERATI.ModelSelector2020.prototype.bindEvents=function(){var e=this;this.$prevTrigger.click((function(){e.prev()})),this.$nextTrigger.click((function(){e.next()})),e.$el.find(".slider-box").on("keydown",(function(){37===event.keyCode?(event.preventDefault(),e.prev()):39===event.keyCode&&(event.preventDefault(),e.next())})),this.$modelsContainer.on("swipeleft",(function(){0==$(this).find(".standard-equipment.show").length&&e.next()})),this.$modelsContainer.on("swiperight",(function(){0==$(this).find(".standard-equipment.show").length&&e.prev()}));for(let t=0;t<this.$slides.length;t++){let i=this.$slides[t];this.$slides[t].addEventListener("click",(function(){e.moveTo($(i).data("index"))}))}this.$el.find(".model-list").on("swipeleft",(function(){e.next()})),this.$el.find(".model-list").on("swiperight",(function(){e.prev()})),this.$el.find(".standard-equipment").find(".detail-container").find(".nav-anchor-equipment").find(".anchor").on("click",(function(){e.scrollSemaphone=!0;var t=$(this);t.siblings().removeClass("selected"),t.addClass("selected");var i=t.closest(".detail-container").find(".scroll-section"),n=t.data("anchorid"),s=i.find('[data-anchorid="'+n+'"]').position().top;i.animate({scrollTop:s},400,(function(){e.CenterMobileAnchors(200),setTimeout((function(){e.scrollSemaphone=!1}),200)}))})),this.$el.find(".standard-equipment").find(".close, .closer-panel").on("click",(function(){$(this).closest(".standard-equipment").removeClass("show"),$("body").removeClass("locked-2020"),window.scrollTo(0,$("body").data("scrollTop"))})),this.$el.find(".more-info.standard-equipment-button").on("click",(function(){var e=$(this).data("swap");$(this).closest(".slider-container").next().find(".modelElementItem[data-index="+e+"]").find(".standard-equipment").addClass("show"),$("body").data("scrollTop",$(window).scrollTop()),$("body").addClass("locked-2020")})),this.$el.find(".standard-equipment").find(".detail-container").find(".scroll-section").scroll((function(t){if(e.scrollSemaphone)return t.preventDefault(),!1;var i=$(this);i.find(".equipment-container").each((function(t,n){if($(this).position().top>=0){var s=$(this).data("anchorid");return i.siblings(".nav-anchor-equipment").find(".anchor").removeClass("selected"),i.siblings(".nav-anchor-equipment").find('[data-anchorid="'+s+'"]').addClass("selected"),e.CenterMobileAnchors(0),!1}}));var n=$(this).siblings(".nav-anchor-equipment").find(".anchor");n.each((function(){var e=$(this).data("anchorid"),t=i.find('[data-anchorid="'+e+'"]');!$(this).hasClass("selected")&&i.scrollTop()>=t.position().top&&i.scrollTop()<=t.position().top+t.outerHeight()&&(n.removeClass("selected"),$(this).addClass("selected"))}))})),this.$el.find(".standard-equipment").find(".full-specifications.button").on("click",(function(){var e=$(this).closest(".model");e.find(".standard-equipment").removeClass("show"),$("body").removeClass("locked-2020"),$(e).closest(".models-container").prev().find(".model-details.active").find(".more-info.specs").click()})),this.inViewHandler(),$(window).resize((function(){e.setBackgroudImage(this.currentModel),e.setItemsPadding(),MASERATI.Helpers.getWindowWidth()>=1024?e.setCtaWidth():(e.$el.find(".model-details.active .buttons-container .cta").css("width","100%"),e.$el.find(".model-details.active .buttons-container .cta").css("min-width","190px"))}))},MASERATI.ModelSelector2020.prototype.deactivateCar=function(e){this.$modelsContainer.find(".modelElementItem .model-image-container").removeClass("car-active")},MASERATI.ModelSelector2020.prototype.activateCar=function(){this.$modelsContainer.find(".modelElementItem.active .model-image-container").addClass("car-active")},MASERATI.ModelSelector2020.prototype.CenterMobileAnchors=function(e){if(this.isMobile()){for(var t=0,i=this.$el.find(".standard-equipment.show").find(".anchor.selected"),n=0;n<i.index();n++)t+=this.$el.find(".standard-equipment.show").find(".nav-anchor-equipment").find(".anchor").eq(n).innerWidth();var s=this.$el.find(".standard-equipment.show").find(".nav-anchor-equipment").innerWidth(),o=i.innerWidth();position=t+(o/2-s/2),this.$el.find(".standard-equipment.show").find(".nav-anchor-equipment").animate({scrollLeft:position},e,(function(){}))}},MASERATI.ModelSelector2020.prototype.isMobile=function(){return"none"!=this.$el.find(".mobile").css("display")},MASERATI.ModelSelector2020.prototype.refreshModels=function(e){var t=this.$slides.closest("[data-index="+this.currentModel+"]"),i=this.$modelDetails.closest("[data-index="+this.currentModel+"]");this.$slides.removeClass("active visible").attr("aria-selected",!1).attr("tabindex","-1"),this.setBackgroudImage(this.currentModel),t.addClass("active").attr("aria-selected",!0).attr("tabindex","0"),e&&t.focus(),this.$modelDetails.removeClass("active"),i.addClass("active"),this.$models.removeClass("active"),t.next().addClass("visible"),t.prev().addClass("visible");var n=$(this.$models.get(this.currentModel));n.addClass("active"),this.animateModel(n),this.deactivateCar(),this.activateCar(),MASERATI.Helpers.getWindowWidth()>=1024?this.setCtaWidth():this.$el.find(".model-details.active .buttons-container .cta").css("width","100%"),e&&($(".model.modelMenuItem.active").length>0&&(console.log("Setting new model name value: "+this.$el.find(".model.modelMenuItem.active")[0].innerText),MASERATI.AdobeTracking.tracker.setVehicleModelName(this.$el.find(".model.modelMenuItem.active")[0].innerText)),MASERATI.AdobeTracking.tracker.setSatelliteTrack("VehicleModelSelector"))},MASERATI.ModelSelector2020.prototype.refreshTriggers=function(){this.$prevTrigger.show(),this.$nextTrigger.show()},MASERATI.ModelSelector2020.prototype.animateModel=function(e){e&&(e.find(".icon").addClass("animating"),this.startAnimations(e))},MASERATI.ModelSelector2020.prototype.getMeasure=function(e){var t=e.match(/[a-zA-Zwа-я]/);return null==t?"":e.substring(t.index).trim()},MASERATI.ModelSelector2020.prototype.startAnimations=function(e){if(this.animating>0)return;var t=this;this.animating+=2;let i=e.find(".icon.one .value"),n=e.find(".icon.two .value");let s=parseFloat(i.text()),o=parseInt(n.text(),10);if(0==i.next().text().length){let e=t.getMeasure(i.text().trim()),s=t.getMeasure(n.text().trim());i.next().text(e),n.next().text(s)}i.text("0"),n.text("0"),setTimeout((function(){t.animateIcon(i,s,"int",600,new Date)}),300),setTimeout((function(){t.animateIcon(n,o,"int",600,new Date)}),300)},MASERATI.ModelSelector2020.prototype.animateIcon=function(e,t,i,n,s){var o=this;let a=function(){let r=new Date-s,l=t*r/n;l>t&&(l=t);let d="";switch(i){case"int":d=l.toFixed(0);break;case"float":d=l.toFixed(1)}e.text(d),r<n?requestAnimationFrame(a):o.animating--};requestAnimationFrame(a)},MASERATI.ModelSelector2020.prototype.prev=function(){this.areSlidesAnimating()||(this.triggerSlideChangeEvent(),this.move(-1))},MASERATI.ModelSelector2020.prototype.next=function(){this.areSlidesAnimating()||(this.triggerSlideChangeEvent(),this.move(1))},MASERATI.ModelSelector2020.prototype.moveTo=function(e){var t=this;e>=0&&e<this.totalModels&&(this.currentModel=e,this.setSlidesAnimating(),setTimeout((function(){t.refreshModels(!0),t.unsetSlidesAnimating()}),this.delay)),this.setColor()},MASERATI.ModelSelector2020.prototype.move=function(e){var t=MASERATI.Helpers.mod(this.currentModel+e,this.totalModels);this.moveTo(t)},MASERATI.ModelSelector2020.prototype.areSlidesAnimating=function(){return this.$modelsContainer.hasClass("velocity-animating")},MASERATI.ModelSelector2020.prototype.triggerSlideChangeEvent=function(){},MASERATI.ModelSelector2020.prototype.setSlidesAnimating=function(){return this.$modelsContainer.addClass("velocity-animating")},MASERATI.ModelSelector2020.prototype.unsetSlidesAnimating=function(){return this.$modelsContainer.removeClass("velocity-animating")},MASERATI.ModelSelector2020.prototype.setColor=function(){var e=this.$slides.closest("[data-index="+this.currentModel+"]").data("color");this.$el.removeClass("white black"),this.$el.addClass(e)},MASERATI.ModelSelector2020.prototype.inViewHandler=function(){var e=this;function t(){e.loadComponent()&&$(window).off("scroll",t)}$(window).on("scroll",t)},MASERATI.ModelSelector2020.prototype.loadComponent=function(){var e=this.$el.offset().top+.01*$(window).height();return e=e<0?0:e,!this.$el.hasClass("in-view")&&$(window).scrollTop()+$(window).height()>=e&&(this.$el.addClass("in-view"),MASERATI.AdobeTracking.tracker.setSatelliteTrack("VehicleModelSelector")),this.$el.hasClass("in-view")},$((function(){$(".model-selector2020").each((function(){new MASERATI.ModelSelector2020($(this))}))}))},function(e,t){MASERATI.ModelSelector=function(e){this.$el=e,this.$slidesContainer=this.$el.find(".slider-container"),this.$slides=this.$slidesContainer.find(".modelMenuItem"),this.$modelsContainer=this.$el.find(".models-container"),this.$models=this.$modelsContainer.find(".modelElementItem"),this.$prevTrigger=this.$el.find(".prevTrigger"),this.$nextTrigger=this.$el.find(".nextTrigger"),this.$componentContainer=this.$el,this.focusElement=void 0,this.documentDirection="rtl"===$("html").attr("dir")?"rtl":"ltr";var t=parseInt($(this.$el).find(".models-container").data("selectedmodel"));(t<0||t>=$(this.$el).find(".model-list .model").length)&&(t=0),this.currentModel=t,this.totalModels=this.$models.length,this.delay=50,this.animating=0,this.progressEvents=["0","25","50","75","100"],this.sentProgressEvent=null,this.scrollSemaphone=!1,this.bindEvents(),this.refreshModels(!1),this.dialogEvents(),this.handleSpecs(),this.initSoundEffects(this.$el),this.initStandardEquipement(),this.loadComponent()},MASERATI.ModelSelector.prototype.initStandardEquipement=function(){this.$el.find(".standard-equipment").each((function(){$(this).find(".detail-container").find(".nav-anchor-equipment").find(".anchor").first().addClass("selected")}))},MASERATI.ModelSelector.prototype.initSoundEffects=function(e){let t=this;e.find("audio").each((function(){this.onended=function(){$(this).siblings(".button-sound-pause").hide(),$(this).siblings(".dynamic-sound").show(),$(this).siblings(".button-sound-play").show().focus(),$(this).siblings(".equalizer").css("display","none")},this.onplay=function(){var e=$(".button-sound-play");e.hide(),e.siblings(".equalizer").css("display","flex"),e.siblings(".dynamic-sound").hide(),e.siblings(".button-sound-pause").show().focus()},this.onpause=function(){var e=$(".button-sound-pause");e.hide(),e.siblings(".equalizer").css("display","none"),e.siblings(".dynamic-sound").show(),e.siblings(".button-sound-play").show().focus()},this.addEventListener("timeupdate",(function(){var e=this.currentTime,i=this.duration;e<.5?t.triggerProgressChangeEvent("0"):e>.25*i&&e<.5*i?t.triggerProgressChangeEvent("25"):e>.5*i&&e<.75*i?t.triggerProgressChangeEvent("50"):e>.75*i&&e<i-.5?t.triggerProgressChangeEvent("75"):e>i-.5&&t.triggerProgressChangeEvent("100")}))})),e.find(".button-sound-play").on("click",(function(e){var i=$(this).closest(".model-container"),n=$(i).find(".model-title").text();console.log("Tracker SetMediaName "+n),t.sentProgressEvent=null,MASERATI.AdobeTracking.tracker.setMediaName("audio:"+n),$(this).siblings("audio")[0].play()})),e.find(".button-sound-pause").on("click",(function(e){$(this).siblings("audio")[0].pause()}))},MASERATI.ModelSelector.prototype.triggerProgressChangeEvent=function(e){this.progressEvents.indexOf(e)>-1&&this.sentProgressEvent!=e&&(this.sentProgressEvent=e,this.$el[0].dispatchEvent(new CustomEvent("videoprogresschange",{detail:{progress:e}})),"0"==e?MASERATI.AdobeTracking.tracker.setSatelliteTrack("MediaStreamStart"):MASERATI.AdobeTracking.tracker.setSatelliteTrack("MediaStream"+e))},MASERATI.ModelSelector.prototype.handleSpecs=function(){var e=this.$el.find(".swappable"),t=this;this.$el.find(".more-info.specs, .cta.versionMore").on("click",(function(i){i.preventDefault(),t.focusElement=$(this);var n=$(this).data("swap");console.log("-- swapping to "+n+"th tech spech page ");var s=t.$el.find(".swapped-"+n);$(s.find(".tabs > div").get(0)).addClass("active").attr("aria-selected",!0).attr("tabindex","0"),$(s.find(".big-tabs .tab").get(0)).addClass("active"),e.hide().siblings(".swapped-"+n).show(),console.log("Done the hide&show procedure");var o=t.$el.find(".close-swapped-main");o.show(),$(this).parents(".swapped-offer").length||s.hasClass("swapped-offer")?o=s:o.show();var a=$(".slide-content").offset().top-$(".new-menu").height();return $("html, body").animate({scrollTop:a},800,(function(){})),console.log("Done the scrolling"),s.find(".close-swapped").focus(),!1})),this.$el.find(".tabs > div").each((function(e){$(this).on("click",(function(){t.$el.find(".tabs > div").removeClass("active"),t.$el.find(".tabs > div").attr("aria-selected",!1).attr("tabindex","-1"),$(this).addClass("active"),$(this).attr("aria-selected",!0).attr("tabindex","0").focus(),t.$el.find(".big-tabs .tab").removeClass("active"),$(t.$el.find(".big-tabs .tab").get(e)).addClass("active")}))})),this.$el.find(".close-swapped").click((function(e){t.$el.find(".close-swapped-main").hide(),t.$el.find(".swapped").hide(),t.$el.find(".swappable").show(),t.$el.find(".tabs > div").removeClass("active"),t.$el.find(".tabs > div").attr("aria-selected",!1).attr("tabindex","-1"),t.$el.find(".big-tabs .tab").removeClass("active"),t.focusElement.hasClass("versionMore")?t.focusElement.find("a").focus():t.focusElement.focus()}))},MASERATI.ModelSelector.prototype.dialogEvents=function(){this.$el.find(".swapped").each((function(){var e=$(this);e.on("keydown",(function(t){if("Tab"===t.key||9===t.keyCode){var i=$(this).find("span.close,button, [href], input, select, textarea, [tabindex]:not([tabindex='-1'])"),n=i.first(),s=i.last();t.shiftKey?$(document.activeElement).is(n)&&(t.preventDefault(),s.focus()):$(document.activeElement).is(s)&&(t.preventDefault(),n.focus())}else if(37===t.keyCode){t.preventDefault(),(o=e.find(".tabs .active")).is(":first-child")?e.find(".tabs>div").last().trigger("click"):o.prev().trigger("click")}else if(39===t.keyCode){var o;t.preventDefault(),(o=e.find(".tabs .active")).is(":last-child")?e.find(".tabs>div").first().trigger("click"):o.next().trigger("click")}else 27==t.keyCode&&e.find(".close-swapped").click()}))}))},MASERATI.ModelSelector.prototype.bindEvents=function(){var e=this;this.$prevTrigger.click((function(){e.prev()})),this.$nextTrigger.click((function(){e.next()})),e.$el.find(".slider-box").on("keydown",(function(){37===event.keyCode?(event.preventDefault(),e.prev()):39===event.keyCode&&(event.preventDefault(),e.next())})),this.$modelsContainer.on("swipeleft",(function(){0==$(this).find(".standard-equipment.show").length&&e.next()})),this.$modelsContainer.on("swiperight",(function(){0==$(this).find(".standard-equipment.show").length&&e.prev()}));for(let t=0;t<this.$slides.length;t++){let i=this.$slides[t];this.$slides[t].addEventListener("click",(function(){e.moveTo($(i).data("index"))}))}this.$el.find(".model-list").on("swipeleft",(function(){e.next()})),this.$el.find(".model-list").on("swiperight",(function(){e.prev()})),this.$el.find(".standard-equipment").find(".detail-container").find(".nav-anchor-equipment").find(".anchor").on("click",(function(){e.scrollSemaphone=!0;var t=$(this);t.siblings().removeClass("selected"),t.addClass("selected");var i=t.closest(".detail-container").find(".scroll-section"),n=t.data("anchorid"),s=i.find('[data-anchorid="'+n+'"]').position().top;i.animate({scrollTop:s},400,(function(){e.CenterMobileAnchors(200),setTimeout((function(){e.scrollSemaphone=!1}),200)}))})),this.$el.find(".standard-equipment").find(".close, .closer-panel").on("click",(function(){$(this).closest(".standard-equipment").removeClass("show"),$("body").removeClass("locked"),window.scrollTo(0,$("body").data("scrollTop"))})),this.$el.find(".more-info.standard-equipment-button").on("click",(function(){$(this).closest(".model").find(".standard-equipment").addClass("show"),$("body").data("scrollTop",$(window).scrollTop()),$("body").addClass("locked")})),this.$el.find(".standard-equipment").find(".detail-container").find(".scroll-section").scroll((function(t){if(e.scrollSemaphone)return t.preventDefault(),!1;var i=$(this);i.find(".equipment-container").each((function(t,n){if($(this).position().top>=0){var s=$(this).data("anchorid");return i.siblings(".nav-anchor-equipment").find(".anchor").removeClass("selected"),i.siblings(".nav-anchor-equipment").find('[data-anchorid="'+s+'"]').addClass("selected"),e.CenterMobileAnchors(0),!1}}));var n=$(this).siblings(".nav-anchor-equipment").find(".anchor");n.each((function(){var e=$(this).data("anchorid"),t=i.find('[data-anchorid="'+e+'"]');!$(this).hasClass("selected")&&i.scrollTop()>=t.position().top&&i.scrollTop()<=t.position().top+t.outerHeight()&&(n.removeClass("selected"),$(this).addClass("selected"))}))})),this.$el.find(".standard-equipment").find(".full-specifications.button").on("click",(function(){var e=$(this).closest(".model");e.find(".standard-equipment").removeClass("show"),$("body").removeClass("locked"),e.find(".more-info.specs").click()})),this.inViewHandler()},MASERATI.ModelSelector.prototype.CenterMobileAnchors=function(e){if(this.isMobile()){for(var t=0,i=this.$el.find(".standard-equipment.show").find(".anchor.selected"),n=0;n<i.index();n++)t+=this.$el.find(".standard-equipment.show").find(".nav-anchor-equipment").find(".anchor").eq(n).innerWidth();var s=this.$el.find(".standard-equipment.show").find(".nav-anchor-equipment").innerWidth(),o=i.innerWidth();position=t+(o/2-s/2),this.$el.find(".standard-equipment.show").find(".nav-anchor-equipment").animate({scrollLeft:position},e,(function(){}))}},MASERATI.ModelSelector.prototype.isMobile=function(){return"none"!=this.$el.find(".mobile").css("display")},MASERATI.ModelSelector.prototype.refreshModels=function(e){var t=this.$slides.closest("[data-index="+this.currentModel+"]");this.$slides.removeClass("active visible").attr("aria-selected",!1).attr("tabindex","-1"),t.addClass("active").attr("aria-selected",!0).attr("tabindex","0"),e&&t.focus(),this.$models.removeClass("active"),t.next().addClass("visible"),t.prev().addClass("visible");var i=$(this.$models.get(this.currentModel));i.addClass("active"),this.animateModel(i),e&&($(".model.modelMenuItem.active").length>0&&(console.log("Setting new model name value: "+this.$el.find(".model.modelMenuItem.active")[0].innerText),MASERATI.AdobeTracking.tracker.setVehicleModelName(this.$el.find(".model.modelMenuItem.active")[0].innerText)),MASERATI.AdobeTracking.tracker.setSatelliteTrack("VehicleModelSelector"))},MASERATI.ModelSelector.prototype.refreshTriggers=function(){this.$prevTrigger.show(),this.$nextTrigger.show()},MASERATI.ModelSelector.prototype.animateModel=function(e){e&&(e.find(".icon").addClass("animating"),this.startAnimations(e))},MASERATI.ModelSelector.prototype.getMeasure=function(e){var t=e.match(/[a-zA-Z]/);return null==t?"":e.substring(t.index).trim()},MASERATI.ModelSelector.prototype.startAnimations=function(e){if(this.animating>0)return;var t=this;this.animating+=2;let i=e.find(".icon.one .value"),n=e.find(".icon.two .value");let s=parseFloat(i.text()),o=parseInt(n.text(),10);if(0==i.next().text().length){let e=t.getMeasure(i.text().trim()),s=t.getMeasure(n.text().trim());i.next().text(e),n.next().text(s)}i.text("0"),n.text("0"),setTimeout((function(){t.animateIcon(i,s,"int",600,new Date)}),300),setTimeout((function(){t.animateIcon(n,o,"int",600,new Date)}),300)},MASERATI.ModelSelector.prototype.animateIcon=function(e,t,i,n,s){var o=this;let a=function(){let r=new Date-s,l=t*r/n;l>t&&(l=t);let d="";switch(i){case"int":d=l.toFixed(0);break;case"float":d=l.toFixed(1)}e.text(d),r<n?requestAnimationFrame(a):o.animating--};requestAnimationFrame(a)},MASERATI.ModelSelector.prototype.prev=function(){this.areSlidesAnimating()||(this.triggerSlideChangeEvent(),this.move(-1))},MASERATI.ModelSelector.prototype.next=function(){this.areSlidesAnimating()||(this.triggerSlideChangeEvent(),this.move(1))},MASERATI.ModelSelector.prototype.moveTo=function(e){var t=this;this.$el.find(".model.modelElementItem.active").each((function(e,t){$(t).find("audio")[0].paused||$(t).find(".button-sound-pause").click()})),e>=0&&e<this.totalModels&&(this.currentModel=e,this.setSlidesAnimating(),setTimeout((function(){t.refreshModels(!0),t.unsetSlidesAnimating()}),this.delay)),this.setColor()},MASERATI.ModelSelector.prototype.move=function(e){var t=MASERATI.Helpers.mod(this.currentModel+e,this.totalModels);this.moveTo(t)},MASERATI.ModelSelector.prototype.areSlidesAnimating=function(){return this.$modelsContainer.hasClass("velocity-animating")},MASERATI.ModelSelector.prototype.triggerSlideChangeEvent=function(){},MASERATI.ModelSelector.prototype.setSlidesAnimating=function(){return this.$modelsContainer.addClass("velocity-animating")},MASERATI.ModelSelector.prototype.unsetSlidesAnimating=function(){return this.$modelsContainer.removeClass("velocity-animating")},MASERATI.ModelSelector.prototype.setColor=function(){var e=this.$slides.closest("[data-index="+this.currentModel+"]").data("color");this.$el.removeClass("white black"),this.$el.addClass(e)},MASERATI.ModelSelector.prototype.inViewHandler=function(){var e=this;function t(){e.loadComponent()&&$(window).off("scroll",t)}$(window).on("scroll",t)},MASERATI.ModelSelector.prototype.loadComponent=function(){var e=this.$el.offset().top+.01*$(window).height();return e=e<0?0:e,!this.$el.hasClass("in-view")&&$(window).scrollTop()+$(window).height()>=e&&(this.$el.addClass("in-view"),console.log("Setting new model name value: "+this.$el.find(".model.modelMenuItem.active")[0].innerText),MASERATI.AdobeTracking.tracker.setVehicleModelName(this.$el.find(".model.modelMenuItem.active")[0].innerText),MASERATI.AdobeTracking.tracker.setSatelliteTrack("VehicleModelSelector")),this.$el.hasClass("in-view")},$((function(){$(".model-selector").each((function(){new MASERATI.ModelSelector($(this))}))}))},function(e,t){MASERATI.ModelVersionPrices=function(e){this._$element=e;var t=this._$element.find(".swappable"),i=$("#maserati_menu, #maserati_menu_2018"),n=this;this._$element.find(".versionMore").on("click",(function(e){e.preventDefault();var s=$(this).data("swap"),o=n._$element.find(".swapped-"+s);$(o.find(".tabs > div").get(0)).addClass("active"),$(o.find(".big-tabs .tab").get(0)).addClass("active"),t.hide().siblings(".swapped-"+s).show();var a=n._$element.find(".close-swapped-main"),r=30;return $(this).parents(".swapped-offer").length||o.hasClass("swapped-offer")?(a=o,r=0):a.show(),a.velocity("scroll",{offset:(i.length?-i.height():0)-r,duration:MASERATI.Animations.ctaScrollSpeed,easing:MASERATI.Animations.ctaEasing}),!1})),this._$element.find('form input[type="submit"]').click((function(e){return e.preventDefault(),n._$element.find(".countrySelectorContainer").velocity("slideUp",500),n._$element.find(".generalContainer").velocity("slideDown",{duration:500,delay:500}),!1})),this._$element.find(".tabs > div").each((function(e){$(this).on("click",(function(){n._$element.find(".tabs > div").removeClass("active"),$(this).addClass("active"),n._$element.find(".big-tabs .tab").removeClass("active"),$(n._$element.find(".big-tabs .tab").get(e)).addClass("active")}))})),this._$element.find(".close-swapped").click((function(){n._$element.find(".close-swapped-main").hide(),n._$element.find(".swapped").hide(),n._$element.find(".swappable").show(),n._$element.find(".tabs > div").removeClass("active"),n._$element.find(".big-tabs .tab").removeClass("active")}))},$((function(){$(".model-versions-prices").each((function(){new MASERATI.ModelVersionPrices($(this))}))}))},function(e,t){MASERATI.ModelList2020=function(e){this.$el=e,this.bind()},$((function(){$(".model-list-2020").each((function(){new MASERATI.ModelList2020($(this))}))})),MASERATI.ModelList2020.prototype.bind=function(){this.bindSelectors()},MASERATI.ModelList2020.prototype.bindSelectors=function(){var e=this;e.currentSlide=0,e.$navigation=this.$el.find(".navigation-image-container"),e.$slides=this.$el.find(".model"),e.$selectors=this.$el.find(".selector"),e.$carImages=this.$el.find(".car-image"),e.$slides.eq(e.currentSlide).addClass("car-active"),e.$navigation.eq(e.currentSlide).addClass("car-selected"),e.$selectors.eq(e.currentSlide).addClass("picked-selector"),e.$rightArrows=this.$el.find(".right-arrow"),e.$leftArrows=this.$el.find(".left-arrow"),e.$navigation.on("click",(function(){e.deactivateCar(e);var t=$(this).index();e.activateCar(e,t)})),e.$rightArrows.each((function(t,i){$(i).on("click",(function(){e.deactivateCar(e);var i=t+1;i>=e.$rightArrows.length&&(i=0),e.activateCar(e,i)}))})),e.$leftArrows.each((function(t,i){$(i).on("click",(function(){e.deactivateCar(e);var i=t-1;i<=-1&&(i=e.$leftArrows.length-1),e.activateCar(e,i)}))})),e.$selectors.on("click",(function(){e.deactivateCar(e);var t=$(this).index();e.activateCar(e,t)})),e.$carImages.each((function(t,i){$(i).on("mouseenter",(function(){e.deactivateCar(e),e.activateCar(e,t)})),$(i).on("swiperight",(function(){e.deactivateCar(e);var i=t-1;i<=-1&&(i=e.$leftArrows.length-1),e.activateCar(e,i)})),$(i).on("swipeleft",(function(){e.deactivateCar(e);var i=t+1;i>=e.$leftArrows.length&&(i=0),e.activateCar(e,i)}))}))},MASERATI.ModelList2020.prototype.deactivateCar=function(e){e.$slides.eq(e.currentSlide).hasClass("car-active")&&e.$slides.eq(e.currentSlide).removeClass("car-active"),e.$navigation.eq(e.currentSlide).hasClass("car-selected")&&e.$navigation.eq(e.currentSlide).removeClass("car-selected"),e.$selectors.eq(e.currentSlide).hasClass("picked-selector")&&e.$selectors.eq(e.currentSlide).removeClass("picked-selector")},MASERATI.ModelList2020.prototype.activateCar=function(e,t){e.currentSlide=t,e.$slides.eq(t).addClass("car-active"),e.$navigation.eq(t).addClass("car-selected"),e.$selectors.eq(t).addClass("picked-selector")}},function(e,t){MASERATI.ModelsList2019=function(e){this.$el=$(e),this.vPosition=this.$el.offset().top,this.$mobileModels=this.$el.find(".models-mobile").find(".model:not(.dummy)"),this.bind(),this.CheckModelsInViewDesktop(),this.CheckModelsInViewMobile()},MASERATI.ModelsList2019.prototype.bind=function(){$(window).scroll(this.CheckModelsInViewDesktop.bind(this)),$(window).scroll(this.CheckModelsInViewMobile.bind(this))},MASERATI.ModelsList2019.prototype.CheckModelsInViewDesktop=function(){var e=this.vPosition-$("#maserati_menu_2018").height()-this.$el.height()/4*2;e=e<0?0:e,!this.$el.hasClass("in-view")&&$(window).scrollTop()>=e&&this.$el.addClass("in-view")},MASERATI.ModelsList2019.prototype.CheckModelsInViewMobile=function(){this.$mobileModels.each((function(){var e=$(this),t=e.offset().top-$("#maserati_menu_2018").height()-e.height()/2*3;t=t<0?0:t,$(window).scrollTop()>=t&&!e.hasClass("in-view")&&e.addClass("in-view")}))},$((function(){$(".models-list-2019").each((function(){new MASERATI.ModelsList2019(this)}))}))},function(e,t){MASERATI.ModelList2020=function(e){this.$el=e,this.bind()},$((function(){$(".model-list-2020").each((function(){new MASERATI.ModelList2020($(this))}))})),MASERATI.ModelList2020.prototype.bind=function(){this.bindSelectors()},MASERATI.ModelList2020.prototype.bindSelectors=function(){var e=this;e.currentSlide=0,e.$navigation=this.$el.find(".navigation-image-container"),e.$slides=this.$el.find(".model"),e.$selectors=this.$el.find(".selector"),e.$carImages=this.$el.find(".car-image"),e.$slides.eq(e.currentSlide).addClass("car-active"),e.$navigation.eq(e.currentSlide).addClass("car-selected"),e.$selectors.eq(e.currentSlide).addClass("picked-selector"),e.$rightArrows=this.$el.find(".right-arrow"),e.$leftArrows=this.$el.find(".left-arrow"),e.$navigation.on("click",(function(){e.deactivateCar(e);var t=$(this).index();e.activateCar(e,t)})),e.$rightArrows.each((function(t,i){$(i).on("click",(function(){e.deactivateCar(e);var i=t+1;i>=e.$rightArrows.length&&(i=0),e.activateCar(e,i)}))})),e.$leftArrows.each((function(t,i){$(i).on("click",(function(){e.deactivateCar(e);var i=t-1;i<=-1&&(i=e.$leftArrows.length-1),e.activateCar(e,i)}))})),e.$selectors.on("click",(function(){e.deactivateCar(e);var t=$(this).index();e.activateCar(e,t)})),e.$carImages.each((function(t,i){$(i).on("mouseenter",(function(){e.deactivateCar(e),e.activateCar(e,t)})),$(i).on("swiperight",(function(){e.deactivateCar(e);var i=t-1;i<=-1&&(i=e.$leftArrows.length-1),e.activateCar(e,i)})),$(i).on("swipeleft",(function(){e.deactivateCar(e);var i=t+1;i>=e.$leftArrows.length&&(i=0),e.activateCar(e,i)}))}))},MASERATI.ModelList2020.prototype.deactivateCar=function(e){e.$slides.eq(e.currentSlide).hasClass("car-active")&&e.$slides.eq(e.currentSlide).removeClass("car-active"),e.$navigation.eq(e.currentSlide).hasClass("car-selected")&&e.$navigation.eq(e.currentSlide).removeClass("car-selected"),e.$selectors.eq(e.currentSlide).hasClass("picked-selector")&&e.$selectors.eq(e.currentSlide).removeClass("picked-selector")},MASERATI.ModelList2020.prototype.activateCar=function(e,t){e.currentSlide=t,e.$slides.eq(t).addClass("car-active"),e.$navigation.eq(t).addClass("car-selected"),e.$selectors.eq(t).addClass("picked-selector")}},function(e,t){MASERATI.ModelsList=function(e){this.$lists=$(".models-list"),this.$element=e,this.initAll()},MASERATI.ModelsList.prototype.initAll=function(){var e=this;this.$lists.each((function(){e.bind($(this))}))},MASERATI.ModelsList.prototype.deInitAll=function(){var e=this;this.$lists.each((function(){e.unBind($(this))}))},MASERATI.ModelsList.prototype.bind=function(e){var t=e.find(".models:not(.nohover) .model");e.find(".models:not(.nohover)").hover((function(){}),(function(){t.velocity("stop").velocity({opacity:1},{duration:MASERATI.Animations.opacityDelay,queue:!1,easing:"easeInQuad"}),t.find("img").velocity("stop").velocity({"max-width":"100%"},{duration:0,queue:!1,easing:"easeInQuad"}),t.find(".more, .bottom").velocity("stop").velocity({opacity:0},{duration:MASERATI.Animations.opacityDelay/20,queue:!1,easing:"easeInQuad"})})),t.hover((function(){t.not(this).velocity("stop").velocity({opacity:.3},{duration:MASERATI.Animations.opacityDelay,queue:!1,easing:"easeInQuad"}),t.not(this).find(".more, .bottom").velocity("stop").velocity({opacity:0},{duration:MASERATI.Animations.opacityDelay/20,queue:!1,easing:"easeInQuad"}),t.not(this).find("img").velocity("stop").velocity({"max-width":"100%"},{duration:0,queue:!1,easing:"easeInQuad"}),$(this).velocity("stop").velocity({opacity:1},{duration:MASERATI.Animations.opacityDelay,queue:!1,easing:"easeInQuad"}),$(this).find(".more, .bottom").velocity("stop").velocity({opacity:1},{duration:MASERATI.Animations.opacityDelay,queue:!1,easing:"easeInQuad"}),$(this).find("img").velocity("stop").velocity({"max-width":"50%"},{duration:0,queue:!1,easing:"easeInQuad",begin:function(){$($(this)[0]).addClass("swap"),$($(this)[1]).removeClass("swap")}})}),(function(i){t.velocity("stop").velocity({opacity:.3},{duration:MASERATI.Animations.opacityDelay,queue:!1,easing:"easeInQuad"}),t.find(".more, .bottom").velocity("stop").velocity({opacity:0},{duration:MASERATI.Animations.opacityDelay/20,queue:!1,easing:"easeInQuad"}),t.find("img").velocity("stop").velocity({"max-width":"100%"},{duration:0,queue:!1,easing:"easeInQuad"}),$($(this).find("img")[1]).addClass("swap"),$($(this).find("img")[0]).removeClass("swap"),$(i.toElement).hasClass("model")&&!$(i.toElement).parents(".model").length||e.find(".models").trigger("mouseout")}))},MASERATI.ModelsList.prototype.unBind=function(e){e.unbind("hover")},$((function(){var e=$(".models-list");e.length&&new MASERATI.ModelsList(e)}))},function(e,t){MASERATI.MultimediaAudio=function(e){this.$element=e,this.$fallbackFunctionTimeout=null,this.initWaveSurfer(),this.bindEvents(),this.playing=!1,this.duration=0,this.$element[0].maseratiObject=this,this.progressEvents=["0","25","50","75","100"],this.sentProgressEvent=null,this.name=e.data("audio").split(/(\\|\/)/g).pop()},MASERATI.MultimediaAudio.prototype.initWaveSurfer=function(){var e={defaultParams:{height:128,waveColor:"#999",progressColor:"#555",cursorColor:"#333",cursorWidth:1,skipLength:2,minPxPerSec:20,pixelRatio:window.devicePixelRatio||screen.deviceXDPI/screen.logicalXDPI,fillParent:!0,scrollParent:!1,hideScrollbar:!1,normalize:!1,audioContext:null,container:null,dragSelection:!0,loopSelection:!0,audioRate:1,interact:!0,splitChannels:!1,mediaContainer:null,mediaControls:!1,renderer:"Canvas",backend:"WebAudio",mediaType:"audio",autoCenter:!0},init:function(t){if(this.params=e.util.extend({},this.defaultParams,t),this.container="string"==typeof t.container?document.querySelector(this.params.container):this.params.container,!this.container)throw new Error("Container element not found");if(null==this.params.mediaContainer?this.mediaContainer=this.container:"string"==typeof this.params.mediaContainer?this.mediaContainer=document.querySelector(this.params.mediaContainer):this.mediaContainer=this.params.mediaContainer,!this.mediaContainer)throw new Error("Media Container element not found");this.savedVolume=0,this.isMuted=!1,this.tmpEvents=[],this.createDrawer(),this.createBackend()},createDrawer:function(){var t=this;this.drawer=Object.create(e.Drawer[this.params.renderer]),this.drawer.init(this.container,this.params),this.drawer.on("redraw",(function(){t.drawBuffer(),t.drawer.progress(t.backend.getPlayedPercents())})),this.drawer.on("click",(function(e,i){setTimeout((function(){t.seekTo(i)}),0)})),this.drawer.on("scroll",(function(e){t.fireEvent("scroll",e)}))},createBackend:function(){var t=this;this.backend&&this.backend.destroy(),"AudioElement"==this.params.backend&&(this.params.backend="MediaElement"),"WebAudio"!=this.params.backend||e.WebAudio.supportsWebAudio()||(this.params.backend="MediaElement"),this.backend=Object.create(e[this.params.backend]),this.backend.init(this.params),this.backend.on("finish",(function(){t.fireEvent("finish")})),this.backend.on("play",(function(){t.fireEvent("play")})),this.backend.on("pause",(function(){t.fireEvent("pause")})),this.backend.on("audioprocess",(function(e){t.fireEvent("audioprocess",e)}))},startAnimationLoop:function(){var e=this,t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame,i=function(){if(!e.backend.isPaused()){var n=e.backend.getPlayedPercents();e.drawer.progress(n),e.fireEvent("audioprocess",n),t(i)}};i()},getDuration:function(){return this.backend.getDuration()},getCurrentTime:function(){return this.backend.getCurrentTime()},play:function(e,t){this.backend.play(e,t),this.startAnimationLoop()},pause:function(){this.backend.pause()},playPause:function(){this.backend.isPaused()?this.play():this.pause()},isPlaying:function(){return!this.backend.isPaused()},skipBackward:function(e){this.skip(-e||-this.params.skipLength)},skipForward:function(e){this.skip(e||this.params.skipLength)},skip:function(e){var t=this.getCurrentTime()||0,i=this.getDuration()||1;t=Math.max(0,Math.min(i,t+(e||0))),this.seekAndCenter(t/i)},seekAndCenter:function(e){this.seekTo(e),this.drawer.recenter(e)},seekTo:function(e){var t=this.backend.isPaused(),i=this.params.scrollParent;t&&(this.params.scrollParent=!1),this.backend.seekTo(e*this.getDuration()),this.drawer.progress(this.backend.getPlayedPercents()),t||(this.backend.pause(),this.backend.play()),this.params.scrollParent=i,this.fireEvent("seek",e)},stop:function(){this.pause(),this.seekTo(0),this.drawer.progress(0)},setVolume:function(e){this.backend.setVolume(e)},setPlaybackRate:function(e){this.backend.setPlaybackRate(e)},toggleMute:function(){this.isMuted?(this.backend.setVolume(this.savedVolume),this.isMuted=!1):(this.savedVolume=this.backend.getVolume(),this.backend.setVolume(0),this.isMuted=!0)},toggleScroll:function(){this.params.scrollParent=!this.params.scrollParent,this.drawBuffer()},toggleInteraction:function(){this.params.interact=!this.params.interact},drawBuffer:function(){var e=Math.round(this.getDuration()*this.params.minPxPerSec*this.params.pixelRatio),t=this.drawer.getWidth(),i=e;this.params.fillParent&&(!this.params.scrollParent||t>e)&&(i=t);var n=this.backend.getPeaks(i);this.drawer.drawPeaks(n,i),this.fireEvent("redraw",n,i)},zoom:function(e){this.params.minPxPerSec=e,this.params.scrollParent=!0,this.drawBuffer(),this.seekAndCenter(this.getCurrentTime()/this.getDuration()),this.fireEvent("zoom",e)},loadArrayBuffer:function(e){this.decodeArrayBuffer(e,function(e){this.loadDecodedBuffer(e)}.bind(this))},loadDecodedBuffer:function(e){this.backend.load(e),this.drawBuffer(),this.fireEvent("ready")},loadBlob:function(e){var t=this,i=new FileReader;i.addEventListener("progress",(function(e){t.onProgress(e)})),i.addEventListener("load",(function(e){t.loadArrayBuffer(e.target.result)})),i.addEventListener("error",(function(){t.fireEvent("error","Error reading file")})),i.readAsArrayBuffer(e),this.empty()},load:function(e,t){switch(this.params.backend){case"WebAudio":return this.loadBuffer(e);case"MediaElement":return this.loadMediaElement(e,t)}},loadBuffer:function(e){return this.empty(),this.getArrayBuffer(e,this.loadArrayBuffer.bind(this))},loadMediaElement:function(e,t){this.empty(),this.backend.load(e,this.mediaContainer,t),this.tmpEvents.push(this.backend.once("canplay",function(){this.drawBuffer(),this.fireEvent("ready")}.bind(this)),this.backend.once("error",function(e){this.fireEvent("error",e)}.bind(this))),!t&&this.backend.supportsWebAudio()&&this.getArrayBuffer(e,function(e){this.decodeArrayBuffer(e,function(e){this.backend.buffer=e,this.drawBuffer()}.bind(this))}.bind(this))},decodeArrayBuffer:function(e,t){this.backend.decodeArrayBuffer(e,this.fireEvent.bind(this,"decoded"),this.fireEvent.bind(this,"error","Error decoding audiobuffer")),this.tmpEvents.push(this.once("decoded",t))},getArrayBuffer:function(t,i){var n=this,s=e.util.ajax({url:t,responseType:"arraybuffer"});return this.tmpEvents.push(s.on("progress",(function(e){n.onProgress(e)})),s.on("success",i),s.on("error",(function(e){n.fireEvent("error","XHR error: "+e.target.statusText)}))),s},onProgress:function(e){if(e.lengthComputable)var t=e.loaded/e.total;else t=e.loaded/(e.loaded+1e6);this.fireEvent("loading",Math.round(100*t),e.target)},exportPCM:function(e,t,i){e=e||1024,t=t||1e4,i=i||!1;var n=this.backend.getPeaks(e,t),s=[].map.call(n,(function(e){return Math.round(e*t)/t})),o=JSON.stringify(s);return i||window.open("data:application/json;charset=utf-8,"+encodeURIComponent(o)),o},clearTmpEvents:function(){this.tmpEvents.forEach((function(e){e.un()}))},empty:function(){this.backend.isPaused()||(this.stop(),this.backend.disconnectSource()),this.clearTmpEvents(),this.drawer.progress(0),this.drawer.setWidth(0),this.drawer.drawPeaks({length:this.drawer.getWidth()},0)},destroy:function(){this.fireEvent("destroy"),this.clearTmpEvents(),this.unAll(),this.backend.destroy(),this.drawer.destroy()},create:function(t){var i=Object.create(e);return i.init(t),i}};e.util={extend:function(e){var t=Array.prototype.slice.call(arguments,1);return t.forEach((function(t){Object.keys(t).forEach((function(i){e[i]=t[i]}))})),e},getId:function(){return"wavesurfer_"+Math.random().toString(32).substring(2)},ajax:function(t){var i=Object.create(e.Observer),n=new XMLHttpRequest,s=!1;return n.open(t.method||"GET",t.url,!0),n.responseType=t.responseType||"json",n.addEventListener("progress",(function(e){i.fireEvent("progress",e),e.lengthComputable&&e.loaded==e.total&&(s=!0)})),n.addEventListener("load",(function(e){s||i.fireEvent("progress",e),i.fireEvent("load",e),200==n.status||206==n.status?i.fireEvent("success",n.response,e):i.fireEvent("error",e)})),n.addEventListener("error",(function(e){i.fireEvent("error",e)})),n.send(),i.xhr=n,i}},e.Observer={on:function(e,t){this.handlers||(this.handlers={});var i=this.handlers[e];return i||(i=this.handlers[e]=[]),i.push(t),{name:e,callback:t,un:this.un.bind(this,e,t)}},un:function(e,t){if(this.handlers){var i=this.handlers[e];if(i)if(t)for(var n=i.length-1;n>=0;n--)i[n]==t&&i.splice(n,1);else i.length=0}},unAll:function(){this.handlers=null},once:function(e,t){var i=this,n=function(){t.apply(this,arguments),setTimeout((function(){i.un(e,n)}),0)};return this.on(e,n)},fireEvent:function(e){if(this.handlers){var t=this.handlers[e],i=Array.prototype.slice.call(arguments,1);t&&t.forEach((function(e){e.apply(null,i)}))}}},e.util.extend(e,e.Observer),e.WebAudio={scriptBufferSize:256,PLAYING_STATE:0,PAUSED_STATE:1,FINISHED_STATE:2,supportsWebAudio:function(){return!(!window.AudioContext&&!window.webkitAudioContext)},getAudioContext:function(){return e.WebAudio.audioContext||(e.WebAudio.audioContext=new(window.AudioContext||window.webkitAudioContext)),e.WebAudio.audioContext},getOfflineAudioContext:function(t){return e.WebAudio.offlineAudioContext||(e.WebAudio.offlineAudioContext=new(window.OfflineAudioContext||window.webkitOfflineAudioContext)(1,2,t)),e.WebAudio.offlineAudioContext},init:function(t){this.params=t,this.ac=t.audioContext||this.getAudioContext(),this.lastPlay=this.ac.currentTime,this.startPosition=0,this.scheduledPause=null,this.states=[Object.create(e.WebAudio.state.playing),Object.create(e.WebAudio.state.paused),Object.create(e.WebAudio.state.finished)],this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode(),this.setState(this.PAUSED_STATE),this.setPlaybackRate(this.params.audioRate)},disconnectFilters:function(){this.filters&&(this.filters.forEach((function(e){e&&e.disconnect()})),this.filters=null,this.analyser.connect(this.gainNode))},setState:function(e){this.state!==this.states[e]&&(this.state=this.states[e],this.state.init.call(this))},setFilter:function(){this.setFilters([].slice.call(arguments))},setFilters:function(e){this.disconnectFilters(),e&&e.length&&(this.filters=e,this.analyser.disconnect(),e.reduce((function(e,t){return e.connect(t),t}),this.analyser).connect(this.gainNode))},createScriptNode:function(){this.ac.createScriptProcessor?this.scriptNode=this.ac.createScriptProcessor(this.scriptBufferSize):this.scriptNode=this.ac.createJavaScriptNode(this.scriptBufferSize),this.scriptNode.connect(this.ac.destination)},addOnAudioProcess:function(){var e=this;this.scriptNode.onaudioprocess=function(){var t=e.getCurrentTime();t>=e.getDuration()?(e.setState(e.FINISHED_STATE),e.fireEvent("pause")):t>=e.scheduledPause?(e.setState(e.PAUSED_STATE),e.fireEvent("pause")):e.state===e.states[e.PLAYING_STATE]&&e.fireEvent("audioprocess",t)}},removeOnAudioProcess:function(){this.scriptNode.onaudioprocess=null},createAnalyserNode:function(){this.analyser=this.ac.createAnalyser(),this.analyser.connect(this.gainNode)},createVolumeNode:function(){this.ac.createGain?this.gainNode=this.ac.createGain():this.gainNode=this.ac.createGainNode(),this.gainNode.connect(this.ac.destination)},setVolume:function(e){this.gainNode.gain.value=e},getVolume:function(){return this.gainNode.gain.value},decodeArrayBuffer:function(e,t,i){this.offlineAc||(this.offlineAc=this.getOfflineAudioContext(this.ac?this.ac.sampleRate:44100)),this.offlineAc.decodeAudioData(e,function(e){t(e)}.bind(this),i)},getPeaks:function(e){for(var t=this.buffer.length/e,i=~~(t/10)||1,n=this.buffer.numberOfChannels,s=[],o=[],a=0;n>a;a++)for(var r=s[a]=[],l=this.buffer.getChannelData(a),d=0;e>d;d++){for(var c=~~(d*t),h=~~(c+t),u=l[0],p=l[0],f=c;h>f;f+=i){var g=l[f];g>p&&(p=g),u>g&&(u=g)}r[2*d]=p,r[2*d+1]=u,(0==a||p>o[2*d])&&(o[2*d]=p),(0==a||u<o[2*d+1])&&(o[2*d+1]=u)}return this.params.splitChannels?s:o},getPlayedPercents:function(){return this.state.getPlayedPercents.call(this)},disconnectSource:function(){this.source&&this.source.disconnect()},destroy:function(){this.isPaused()||this.pause(),this.unAll(),this.buffer=null,this.disconnectFilters(),this.disconnectSource(),this.gainNode.disconnect(),this.scriptNode.disconnect(),this.analyser.disconnect()},load:function(e){this.startPosition=0,this.lastPlay=this.ac.currentTime,this.buffer=e,this.createSource()},createSource:function(){this.disconnectSource(),this.source=this.ac.createBufferSource(),this.source.start=this.source.start||this.source.noteGrainOn,this.source.stop=this.source.stop||this.source.noteOff,this.source.playbackRate.value=this.playbackRate,this.source.buffer=this.buffer,this.source.connect(this.analyser)},isPaused:function(){return this.state!==this.states[this.PLAYING_STATE]},getDuration:function(){return this.buffer?this.buffer.duration:0},seekTo:function(e,t){return this.scheduledPause=null,null==e&&((e=this.getCurrentTime())>=this.getDuration()&&(e=0)),null==t&&(t=this.getDuration()),this.startPosition=e,this.lastPlay=this.ac.currentTime,this.state===this.states[this.FINISHED_STATE]&&this.setState(this.PAUSED_STATE),{start:e,end:t}},getPlayedTime:function(){return(this.ac.currentTime-this.lastPlay)*this.playbackRate},play:function(e,t){this.createSource();var i=this.seekTo(e,t);e=i.start,t=i.end,this.scheduledPause=t,this.source.start(0,e,t-e),this.setState(this.PLAYING_STATE),this.fireEvent("play")},pause:function(){this.scheduledPause=null,this.startPosition+=this.getPlayedTime(),this.source&&this.source.stop(0),this.setState(this.PAUSED_STATE),this.fireEvent("pause")},getCurrentTime:function(){return this.state.getCurrentTime.call(this)},setPlaybackRate:function(e){e=e||1,this.isPaused()?this.playbackRate=e:(this.pause(),this.playbackRate=e,this.play())}},e.WebAudio.state={},e.WebAudio.state.playing={init:function(){this.addOnAudioProcess()},getPlayedPercents:function(){var e=this.getDuration();return this.getCurrentTime()/e||0},getCurrentTime:function(){return this.startPosition+this.getPlayedTime()}},e.WebAudio.state.paused={init:function(){this.removeOnAudioProcess()},getPlayedPercents:function(){var e=this.getDuration();return this.getCurrentTime()/e||0},getCurrentTime:function(){return this.startPosition}},e.WebAudio.state.finished={init:function(){this.removeOnAudioProcess(),this.fireEvent("finish")},getPlayedPercents:function(){return 1},getCurrentTime:function(){return this.getDuration()}},e.util.extend(e.WebAudio,e.Observer),e.MediaElement=Object.create(e.WebAudio),e.util.extend(e.MediaElement,{init:function(e){this.params=e,this.media={currentTime:0,duration:0,paused:!0,playbackRate:1,play:function(){},pause:function(){}},this.mediaType=e.mediaType.toLowerCase(),this.elementPosition=e.elementPosition},load:function(e,t,i){var n=this,s=document.createElement(this.mediaType);s.controls=this.params.mediaControls,s.autoplay=this.params.autoplay||!1,s.preload="auto",s.src=e,s.style.width="100%",s.addEventListener("error",(function(){n.fireEvent("error","Error loading media element")})),s.addEventListener("canplay",(function(){n.fireEvent("canplay")})),s.addEventListener("ended",(function(){n.fireEvent("finish")})),s.addEventListener("timeupdate",(function(){n.fireEvent("audioprocess",n.getCurrentTime())}));var o=t.querySelector(this.mediaType);o&&t.removeChild(o),t.appendChild(s),this.media=s,this.peaks=i,this.onPlayEnd=null,this.buffer=null,this.setPlaybackRate(this.playbackRate)},isPaused:function(){return!this.media||this.media.paused},getDuration:function(){var e=this.media.duration;return e>=1/0&&(e=this.media.seekable.end()),e},getCurrentTime:function(){return this.media&&this.media.currentTime},getPlayedPercents:function(){return this.getCurrentTime()/this.getDuration()||0},setPlaybackRate:function(e){this.playbackRate=e||1,this.media.playbackRate=this.playbackRate},seekTo:function(e){null!=e&&(this.media.currentTime=e),this.clearPlayEnd()},play:function(e,t){this.seekTo(e),this.media.play(),t&&this.setPlayEnd(t),this.fireEvent("play")},pause:function(){this.media&&this.media.pause(),this.clearPlayEnd(),this.fireEvent("pause")},setPlayEnd:function(e){var t=this;this.onPlayEnd=function(i){i>=e&&(t.pause(),t.seekTo(e))},this.on("audioprocess",this.onPlayEnd)},clearPlayEnd:function(){this.onPlayEnd&&(this.un("audioprocess",this.onPlayEnd),this.onPlayEnd=null)},getPeaks:function(t){return this.buffer?e.WebAudio.getPeaks.call(this,t):this.peaks||[]},getVolume:function(){return this.media.volume},setVolume:function(e){this.media.volume=e},destroy:function(){this.pause(),this.unAll(),this.media&&this.media.parentNode&&this.media.parentNode.removeChild(this.media),this.media=null}}),e.AudioElement=e.MediaElement,e.Drawer={init:function(e,t){this.container=e,this.params=t,this.width=0,this.height=t.height*this.params.pixelRatio,this.lastPos=0,this.createWrapper(),this.createElements()},createWrapper:function(){this.wrapper=this.container.appendChild(document.createElement("wave")),this.style(this.wrapper,{display:"block",position:"relative",userSelect:"none",webkitUserSelect:"none",height:this.params.height+"px"}),(this.params.fillParent||this.params.scrollParent)&&this.style(this.wrapper,{width:"100%",overflowX:this.params.hideScrollbar?"hidden":"auto",overflowY:"hidden"}),this.setupWrapperEvents()},handleEvent:function(e){e.preventDefault();var t=this.wrapper.getBoundingClientRect();return(e.clientX-t.left+this.wrapper.scrollLeft)/this.wrapper.scrollWidth||0},setupWrapperEvents:function(){var e=this;this.wrapper.addEventListener("click",(function(t){var i=e.wrapper.offsetHeight-e.wrapper.clientHeight;if(0!=i){var n=e.wrapper.getBoundingClientRect();if(t.clientY>=n.bottom-i)return}e.params.interact&&e.fireEvent("click",t,e.handleEvent(t))})),this.wrapper.addEventListener("scroll",(function(t){e.fireEvent("scroll",t)}))},drawPeaks:function(e,t){this.resetScroll(),this.setWidth(t),this.params.barWidth?this.drawBars(e):this.drawWave(e)},style:function(e,t){return Object.keys(t).forEach((function(i){e.style[i]!==t[i]&&(e.style[i]=t[i])})),e},resetScroll:function(){null!==this.wrapper&&(this.wrapper.scrollLeft=0)},recenter:function(e){var t=this.wrapper.scrollWidth*e;this.recenterOnPosition(t,!0)},recenterOnPosition:function(e,t){var i=this.wrapper.scrollLeft,n=~~(this.wrapper.clientWidth/2),s=e-n,o=s-i,a=this.wrapper.scrollWidth-this.wrapper.clientWidth;if(0!=a){if(!t&&o>=-n&&n>o){s=i+(o=Math.max(-5,Math.min(5,o)))}(s=Math.max(0,Math.min(a,s)))!=i&&(this.wrapper.scrollLeft=s)}},getWidth:function(){return Math.round(this.container.clientWidth*this.params.pixelRatio)},setWidth:function(e){e!=this.width&&(this.width=e,this.params.fillParent||this.params.scrollParent?this.style(this.wrapper,{width:""}):this.style(this.wrapper,{width:~~(this.width/this.params.pixelRatio)+"px"}),this.updateSize())},setHeight:function(e){e!=this.height&&(this.height=e,this.style(this.wrapper,{height:~~(this.height/this.params.pixelRatio)+"px"}),this.updateSize())},progress:function(e){var t=1/this.params.pixelRatio,i=Math.round(e*this.width)*t;if(i<this.lastPos||i-this.lastPos>=t){if(this.lastPos=i,this.params.scrollParent&&this.params.autoCenter){var n=~~(this.wrapper.scrollWidth*e);this.recenterOnPosition(n)}this.updateProgress(e)}},destroy:function(){this.unAll(),this.wrapper&&(this.container.removeChild(this.wrapper),this.wrapper=null)},createElements:function(){},updateSize:function(){},drawWave:function(e,t){},clearWave:function(){},updateProgress:function(e){}},e.util.extend(e.Drawer,e.Observer),e.Drawer.Canvas=Object.create(e.Drawer),e.util.extend(e.Drawer.Canvas,{createElements:function(){var e=this.wrapper.appendChild(this.style(document.createElement("canvas"),{position:"absolute",zIndex:1,left:0,top:0,bottom:0}));if(this.waveCc=e.getContext("2d"),this.progressWave=this.wrapper.appendChild(this.style(document.createElement("wave"),{position:"absolute",zIndex:2,left:0,top:0,bottom:0,overflow:"hidden",width:"0",display:"none",boxSizing:"border-box",borderRightStyle:"solid",borderRightWidth:this.params.cursorWidth+"px",borderRightColor:this.params.cursorColor})),this.params.waveColor!=this.params.progressColor){var t=this.progressWave.appendChild(document.createElement("canvas"));this.progressCc=t.getContext("2d")}},updateSize:function(){var e=Math.round(this.width/this.params.pixelRatio);this.waveCc.canvas.width=this.width,this.waveCc.canvas.height=this.height,this.style(this.waveCc.canvas,{width:e+"px"}),this.style(this.progressWave,{display:"block"}),this.progressCc&&(this.progressCc.canvas.width=this.width,this.progressCc.canvas.height=this.height,this.style(this.progressCc.canvas,{width:e+"px"})),this.clearWave()},clearWave:function(){this.waveCc.clearRect(0,0,this.width,this.height),this.progressCc&&this.progressCc.clearRect(0,0,this.width,this.height)},drawBars:function(e,t){if(e[0]instanceof Array){var i=e;if(this.params.splitChannels)return this.setHeight(i.length*this.params.height*this.params.pixelRatio),void i.forEach(this.drawBars,this);e=i[0]}[].some.call(e,(function(e){return 0>e}))&&(e=[].filter.call(e,(function(e,t){return t%2==0})));var n=.5/this.params.pixelRatio,s=this.width,o=this.params.height*this.params.pixelRatio,a=o*t||0,r=o/2,l=e.length,d=this.params.barWidth*this.params.pixelRatio,c=Math.max(this.params.pixelRatio,~~(d/2)),h=d+c,u=1;this.params.normalize&&(u=Math.max.apply(Math,e));var p=l/s;this.waveCc.fillStyle=this.params.waveColor,this.progressCc&&(this.progressCc.fillStyle=this.params.progressColor),[this.waveCc,this.progressCc].forEach((function(t){if(t)for(var i=0;s>i;i+=h){var o=Math.round(e[Math.floor(i*p)]/u*r);t.fillRect(i+n,r-o+a,d+n,2*o)}}),this)},drawWave:function(e,t){if(e[0]instanceof Array){var i=e;if(this.params.splitChannels)return this.setHeight(i.length*this.params.height*this.params.pixelRatio),void i.forEach(this.drawWave,this);e=i[0]}if(![].some.call(e,(function(e){return 0>e}))){for(var n=[],s=0,o=e.length;o>s;s++)n[2*s]=e[s],n[2*s+1]=-e[s];e=n}var a=.5/this.params.pixelRatio,r=this.params.height*this.params.pixelRatio,l=r*t||0,d=r/2,c=~~(e.length/2),h=1;this.params.fillParent&&this.width!=c&&(h=this.width/c);var u=1;if(this.params.normalize){var p=Math.max.apply(Math,e),f=Math.min.apply(Math,e);u=-f>p?-f:p}this.waveCc.fillStyle=this.params.waveColor,this.progressCc&&(this.progressCc.fillStyle=this.params.progressColor),[this.waveCc,this.progressCc].forEach((function(t){if(t){t.beginPath(),t.moveTo(a,d+l);for(var i=0;c>i;i++){var n=Math.round(e[2*i]/u*d);t.lineTo(i*h+a,d-n+l)}for(i=c-1;i>=0;i--){n=Math.round(e[2*i+1]/u*d);t.lineTo(i*h+a,d-n+l)}t.closePath(),t.fill(),t.fillRect(0,d+l-a,this.width,a)}}),this)},updateProgress:function(e){var t=Math.round(this.width*e)/this.params.pixelRatio;this.style(this.progressWave,{width:t+"px"})}}),function(){var t=function(){var t=document.querySelectorAll("wavesurfer");Array.prototype.forEach.call(t,(function(t){var i=e.util.extend({container:t,backend:"MediaElement",mediaControls:!0},t.dataset);t.style.display="block";var n=e.create(i);if(t.dataset.peaks)var s=JSON.parse(t.dataset.peaks);n.load(t.dataset.url,s)}))};"complete"===document.readyState?t():window.addEventListener("load",t)}(),this.wavesurfer=Object.create(e);var t=this.$element.find(".wave");this.wave=t,this.wavesurfer.init({container:t[0],waveColor:"#606060",progressColor:"white",height:t.height(),hideScrollbar:!0,cursorColor:"#AAAAAC"});var i=this;this.wavesurfer.on("audioprocess",(function(){var e=i.wavesurfer.getCurrentTime();e<5?i.triggerProgressChangeEvent("0"):e>.25*i.duration&&e<.5*i.duration?i.triggerProgressChangeEvent("25"):e>.5*i.duration&&e<.75*i.duration?i.triggerProgressChangeEvent("50"):e>.75*i.duration&&e<i.duration&&i.triggerProgressChangeEvent("75")})),this.wavesurfer.on("finish",(function(){i.triggerProgressChangeEvent("100")}))},MASERATI.MultimediaAudio.prototype.triggerProgressChangeEvent=function(e){this.progressEvents.indexOf(e)>-1&&this.sentProgressEvent!=e&&(this.sentProgressEvent=e,this.$element[0].dispatchEvent(new CustomEvent("audioprogresschange",{detail:{progress:e}})),"0"==e?MASERATI.AdobeTracking.tracker.setSatelliteTrack("MediaStreamStart"):MASERATI.AdobeTracking.tracker.setSatelliteTrack("MediaStream"+e))},MASERATI.MultimediaAudio.prototype.triggerPlayerOpenEvent=function(){this.sentProgressEvent=null,MASERATI.AdobeTracking.tracker.setMediaName("audio:"+this.name),MASERATI.Helpers.log("dispatching event audioplayeropen "+this.name),this.$element[0].dispatchEvent(new CustomEvent("audioplayeropen"))},MASERATI.MultimediaAudio.prototype.togglePlay=function(e){0==this.playing||e?this._play():this._stop()},MASERATI.MultimediaAudio.prototype._play=function(){this.$element.find(".controls .play").addClass("playing"),this.$element.find(".controls .play").attr("aria-pressed","true"),this.wavesurfer.play(),this.playing=!0,this.manageFallback()},MASERATI.MultimediaAudio.prototype._stop=function(){this.$element.find(".controls .play").removeClass("playing"),this.$element.find(".controls .play").attr("aria-pressed","false"),this.wavesurfer.isPlaying()&&this.wavesurfer.pause(),this.playing=!1,this.manageFallback()},MASERATI.MultimediaAudio.prototype._rewind=function(){this.wavesurfer.isPlaying()&&this.wavesurfer.stop(),this.$element.find(".controls .play").removeClass("playing"),this.$element.find(".controls .play").attr("aria-pressed","false"),this.playing=!1,this.trackProgressFallback()},MASERATI.MultimediaAudio.prototype.trackProgressFallback=function(){var e=Math.round(this.wavesurfer.getCurrentTime()/this.wavesurfer.getDuration()*1e3)/10+"%",t=$(window).width()+"px 100%";this.$element.find(".wave-white").css({width:e,"background-size":t})},MASERATI.MultimediaAudio.prototype.manageFallback=function(){if($("html").hasClass("no-webaudio"))if(1==this.playing){var e=this;this.$fallbackFunctionTimeout=window.setInterval((function(){e.trackProgressFallback()}),250)}else window.clearInterval(this.$fallbackFunctionTimeout)},MASERATI.MultimediaAudio.prototype.bindEvents=function(){var e=this;this.$element.find(".controls .play").click((function(){e.togglePlay()})),this.$element.find(".controls .pause").click((function(){})),this.$element.find(".controls .rewind").click((function(){e._rewind()}));var t=MASERATI.Helpers.debounce((function(){e.repaint()}),500);$(window).bind("resize",(function(){t()}))},MASERATI.MultimediaAudio.prototype.repaint=function(){this.playing&&this._rewind(),this.wavesurfer.drawer.containerWidth=this.$element.width(),this.wavesurfer.drawer.containerHeight=this.wave.height(),this.wave.find("wave, canvas").height(this.wave.height()),this.wavesurfer.empty(),this.wavesurfer.drawBuffer()},MASERATI.MultimediaAudio.prototype.play=function(){this.wavesurfer.load(this.$element.attr("data-audio"));var e=this;this.wavesurfer.on("ready",(function(){e.repaint(),e.duration=e.wavesurfer.getDuration(),MASERATI.Helpers.Mobile.isMobile()||e._play()}))},MASERATI.MultimediaAudio.prototype.stop=function(){this._stop()},$((function(){$(".multimedia-audio").each((function(){new MASERATI.MultimediaAudio($(this))}))}))},function(e,t){MASERATI.MultimediaGallery=function(e){if(this.$el=e,this.$grid=this.$el.find(".grid"),this.currentElement=null,this.loadMoreStep=window.innerWidth<1024?3:6,this.howMuchElements=this.loadMoreStep,this.vPosition=this.$el.offset().top,this.muted=!0,this.init(),this.filter(),this.overlay(),this.bindEvents(),this.loadMore(),this.loadComponent(),void 0!==this.$el.find(".overlayComponent")[0]){var t=this;this.$el.find(".overlayComponent")[0].addEventListener("closed",(function(e){$(this).find(".overlay-play, .overlay-volume,.controls").remove(),t.closeEmbed(e,$(this)),$(this).find("video").length>0&&$(this).find("video").remove()}))}},MASERATI.MultimediaGallery.prototype.closeEmbed=function(e,t){t||(t=this.$el.find(".overlayComponent"));let i=t.find(".embed");i.length>0&&i.find(".icon-close").click()},MASERATI.MultimediaGallery.prototype.cloneEmbed=function(e,t){this.destroyEmbed(t);let i=(e=e.clone()).find(".video-tag");return i.attr("id",i.data("id")),e.appendTo(t.find(".details")),e},MASERATI.MultimediaGallery.prototype.destroyEmbed=function(e){e.find(".embed").remove()},MASERATI.MultimediaGallery.prototype.stopVideo=function(){this.$el.find("video").length>0&&this.$el.find("video").remove()},MASERATI.MultimediaGallery.prototype.update=function(){if(this.$el.find(".loaded").removeClass("loaded"),0==this.$el.find(".grid-item:not(.removed)").length)return this.$el.find(".message-no-results").show(),this.$el.find(".load-more").removeClass("show"),this.$el.find(".load-more").addClass("hide"),void this.$grid.isotope({filter:".grid-item.loaded:not(.removed)"});this.$el.find(".message-no-results").hide(),this.$el.find(".grid-item:not(.removed)").length>this.howMuchElements?(this.$el.find(".grid-item:not(.removed)").slice(0,this.howMuchElements).addClass("loaded"),this.$el.find(".load-more").addClass("show")):(this.$el.find(".grid-item:not(.removed)").addClass("loaded"),this.$el.find(".load-more").removeClass("show")),this.$grid.isotope({filter:".grid-item.loaded:not(.removed)"}),this.$el.find(".grid-item.loaded:not(.removed)").not("lazy-loaded").each((function(){var e=$(this).find("img");e.one("load",(function(){e.addClass("lazy-loaded")})),e.data("src")&&(e.attr("src",e.data("src")),e.removeAttr("data-src"),e.removeData("src")),e.data("srcset")&&(e.attr("srcset",e.data("srcset")),e.removeAttr("data-srcset"),e.removeData("srcset"))}))},MASERATI.MultimediaGallery.prototype.filter=function(){var e=this;0!=e.$el.find(".filter").length&&(e.$el.find(".filter").on("keydown",(function(t){t.stopPropagation();var i=$(t.currentTarget),n=void 0;37===event.keyCode?n=i.is(":first-child")?e.$el.find(".filter").last():i.prev():39===event.keyCode?n=i.is(":last-child")?e.$el.find(".filter").first():i.next():36===event.keyCode?n=e.$el.find(".filter").first():35===event.keyCode&&(n=e.$el.find(".filter").last()),null!=n&&(n.trigger("click"),n.focus())})),e.$el.find(".filter.all").click((function(t){e.$el.find(".filter").attr("tabindex","-1"),$(t.currentTarget).attr("tabindex","0"),e.howMuchElements=e.loadMoreStep,e.$el.find(".grid-item.removed").removeClass("removed"),e.$el.find(".filter.selected").removeClass("selected"),e.$el.find(".filter.all").addClass("selected"),e.update()})),e.$el.find(".filter").not(".all").click((function(t){e.howMuchElements=e.loadMoreStep,e.$el.find(".filter").attr("tabindex","-1"),$(t.currentTarget).attr("tabindex","0"),e.$el.find(".filter.all").removeClass("selected");var i=$(this).data("filter");$(this).hasClass("selected")?(e.$el.find(".filter.selected").removeClass("selected"),e.$el.find(".filter.all").addClass("selected"),e.$el.find(".filter").attr("tabindex","-1"),e.$el.find(".filter.all").attr("tabindex","0").focus(),e.$el.find(".grid-item").each((function(){$(this).removeClass("removed")}))):(e.$el.find(".filter.selected").removeClass("selected"),$(this).addClass("selected"),e.$el.find(".grid-item").each((function(){$(this).data("values").indexOf(i)<0?$(this).addClass("removed"):$(this).removeClass("removed")}))),e.update()})))},MASERATI.MultimediaGallery.prototype.recalculate=function(){var e=this;this.$el.find(".grid-item.removed").each((function(t,i){var n=!0;e.$el.find(".filter.selected").each((function(e,t){t=$(this).data("filter");$(i).data("values").indexOf(t)<0&&(n=!1)})),n&&$(i).removeClass("removed")}))},MASERATI.MultimediaGallery.prototype.overlay=function(){var e=this;this.$el.find(".more-details").click((function(t){if(!t.target.classList.contains("icon-close")){var i=e.$el.find(".overlay-details");e.currentElement=$(this),e.checkElements();var n=$(this).find(".title").text()+"";if(n.length>0?(i.find(".description").text(n),i.find(".description").show()):i.find(".description").hide(),0==e.$el.find(".image").length)(s=$("<div class='image'></div>")).appendTo(i.find(".details")),e.$el.find(".overlayData .left-arrow").on("click",{isArrowClick:!0},(function(t){t.stopPropagation(),e.prevImage(t)})),e.$el.find(".overlayData .right-arrow").on("click",{isArrowClick:!0},(function(t){t.stopPropagation(),e.nextImage(t)})),e.$el.find(".overlayData").on("click",(function(t){t.stopPropagation(),t.pageX>=$(t.currentTarget).width()/2?e.nextImage(t):e.prevImage(t)}));else var s=e.$el.find(".image");var o=$(this).find(".grid-item"),a=o.find(".background-slide").attr("src"),r=o.find(".background-slide").attr("alt");if($(this).find(".video-overlay").length>0)return e.addVideoElement($(this),i),s.hide(),void i.find(".embed").css("background-image",a);e.$el.find("video").hide(),s.show(),$(this).find(".bigSquare, .square").length>0?s.removeClass("halfHeight"):s.addClass("halfHeight"),null!==a&&(a=a.replace(" ","%20")),s.css("background-image","url("+a+")"),s.attr("aria-label",r)}}))},MASERATI.MultimediaGallery.prototype.closeOverlay=function(e){if("swipeleft"!=e.type&&"swiperight"!=e.type)return e.preventDefault(!0),this.$el.find(".close").click()},MASERATI.MultimediaGallery.prototype.changeImage=function(e,t){if(null!=e.data&&!0===e.data.isArrowClick||e.type=="swipe"+t||"keydown"==e.type||e.offsetY<=$(e.target).height()-80&&("left"===t?e.offsetX>=$(e.target).width()/2:e.offsetX<$(e.target).width()/2)&&!e.isDefaultPrevented()){e.preventDefault(!0);var i=null!=e.data&&!0===e.data.isArrowClick?$(e.currentTarget).closest(".overlayData"):$(e.currentTarget);e.type=="swipe"+t?(MASERATI.AdobeTracking.tracker.setGalleryAction("multimedia-gallery:image"),MASERATI.AdobeTracking.tracker.setSatelliteTrack("GalleryEngage")):"keydown"!=e.type&&(MASERATI.AdobeTracking.tracker.setGalleryAction("multimedia-gallery:arrow"),MASERATI.AdobeTracking.tracker.setSatelliteTrack("GalleryEngage"));var n="left"===t?this.currentElement.nextAll().find(".grid-item").not(".removed"):this.currentElement.prevAll().find(".grid-item").not(".removed"),s="keydown"===e.type?i.find(".overlayData"):i;if(0==n.length&&(n="left"===t?this.currentElement.prevAll().find(".grid-item").not(".removed"):this.currentElement.nextAll().find(".grid-item").not(".removed")),n.length>0){this.currentElement="left"===t?n.first().parents("a"):n.last().parents("a"),this.checkElements();var o=s.find(".image"),a=this.currentElement.find(".title").text()+"";a.length>0?(s.find(".description").text(a),s.find(".description").show()):s.find(".description").hide(),this.destroyEmbed(s);var r="left"===t?n.first().find(".background-slide").css("background-image"):n.last().find(".background-slide").css("background-image");let e=this.currentElement.find(".video-overlay");if(e.length>0){let t=!e.hasClass("embed");return t||s.find("video").hide(),this.addVideoElement(this.currentElement,s.find(".overlay-details")),o.hide(),t&&s.find("video").show(),s.find(".embed").css("background-image",r),void this.currentElement.trigger("click")}s.find("video").hide(),this.currentElement.find(".bigSquare, .square").length>0?o.removeClass("halfHeight"):o.addClass("halfHeight"),o.css("background-image",r),o.show()}this.stopVideo(),this.closeEmbed(e),this.currentElement.trigger("click")}},MASERATI.MultimediaGallery.prototype.nextImage=function(e){this.changeImage(e,"left")},MASERATI.MultimediaGallery.prototype.prevImage=function(e){this.changeImage(e,"right")},MASERATI.MultimediaGallery.prototype.checkElements=function(){0==this.currentElement.nextAll().find(".grid-item").not(".removed").length&&0==this.currentElement.prevAll().find(".grid-item").not(".removed").length&&this.$el.find(".overlayData").addClass("hide-controls")},MASERATI.MultimediaGallery.prototype.addVideoElement=function(e,t){let i=e.find(".embed");if(i.length>0){var n=this;i=this.cloneEmbed(i,t);var s=new MASERATI.EmbedVideoContainer(i,"always"!=i.data("controls")&&"mobile"!=i.data("controls"),(function(){i.find(".play-button").click()}),(function(){n.$el.find(".close").click()}),!0);"YouKu"==i.data("provider")?(s.setupVideo(),this.$el.find(".overlayComponent .icon-play").hide()):(n.$el.find(".overlayComponent .icon-volume").show(),MASERATI.YoutubeManager.addVideoCallback((function(){s.setupVideo(),n.$el.find(".overlayComponent .overlay-volume,.overlayComponent .overlay-play").off("keydown").on("keydown",(function(e){13==e.which&&("true"==$(this).attr("aria-pressed")?$(this).attr("aria-pressed","false"):$(this).attr("aria-pressed","true"),$(this).find("div").trigger("click"))})),n.youTubeControls(s.getPlayer())})))}else{s=$("<video />",{id:"video",src:e.find(".video-overlay").data("url"),type:"video/mp4",controls:!0});0==this.$el.find("video").length?s.appendTo(t.find(".details")):this.$el.find("video").attr("src",e.find(".video-overlay").data("url"))}},MASERATI.MultimediaGallery.prototype.youTubeControls=function(e){this.$el.find(".overlayComponent .overlay-play").on("click",(function(){switch(e.getPlayerState()){case YT.PlayerState.PLAYING:e.pauseVideo(),$(this).addClass("paused");break;case YT.PlayerState.PAUSED:e.playVideo(),$(this).removeClass("paused")}}))},MASERATI.MultimediaGallery.prototype.loadMore=function(){var e=this;e.$el.find(".load-more").click((function(){e.howMuchElements=e.howMuchElements+e.loadMoreStep,e.update()}))},MASERATI.MultimediaGallery.prototype.init=function(){this.$grid.isotope({percentPosition:!0,itemSelector:".grid-item",packery:{columnWidth:".grid-sizer",gutter:".gutter-sizer",fitWidth:!0},layoutMode:"packery",originLeft:!0}),this.$el.find(".video-overlay").parent().addClass("video"),this.$el.find(".filter.all").addClass("selected"),window.innerWidth<768&&this.$el.find(".grid-item.square").length%2>0&&this.$el.find(".grid-item.square")[this.$el.find(".grid-item.square").length-1].classList.add("bigSquare")},MASERATI.MultimediaGallery.prototype.bindEvents=function(){var e=this;e.$el.find(".overlayData").on("swipeleft",(function(t){e.nextImage(t)})),e.$el.find(".overlayData").on("swiperight",(function(t){e.prevImage(t)})),$(e.$el).keydown((function(t){switch(t.which){case 37:e.prevImage(t);break;case 39:e.nextImage(t);break;default:return}t.preventDefault()})),e.inViewHandler()},MASERATI.MultimediaGallery.prototype.inViewHandler=function(){var e=this;function t(){e.loadComponent()&&$(window).off("scroll",t)}$(window).on("scroll",t)},MASERATI.MultimediaGallery.prototype.loadComponent=function(){var e=this.$el.offset().top+.01*$(window).height();return e=e<0?0:e,!this.$el.hasClass("in-view")&&$(window).scrollTop()+$(window).height()>=e&&(this.update(),this.$el.addClass("in-view")),this.$el.hasClass("in-view")},$((function(){$(".multimediaGallery").each((function(){new MASERATI.MultimediaGallery($(this))}))}))},function(e,t){MASERATI.MultimediaVideo=function(e){this.$element=e,this.provider=this.$element.data("provider"),this.title="","YouKu"==this.provider?(this.videoTag=this.$element.find(".multimedia-video-youku"),this.title=this.$element.attr("data-video")):this.videoTag=this.$element.find(".multimedia-video-youtube"),this.videoTagId=this.videoTag.attr("id"),this.videoId=this.$element.attr("data-video"),this.playWhenReady=!1,this.$element[0].maseratiObject=this,this.player=null,this.progressPoller=0,this.pauseProgressPolling=!1,this.progressEvents=["0","25","50","75","100"],this.sentProgressEvent=null,this.duration=0},MASERATI.MultimediaVideo.prototype.setupVideo=function(){"YouKu"==this.provider?this.player=new MASERATI.YuokuInterface(this,!1):this.player=MASERATI.getYouTubePlayer(this)},MASERATI.MultimediaVideo.prototype.onPlayerReady=function(e){if(this.duration=this.player.getDuration(),this.player.getVideoData){var t=this.player.getVideoData();this.title=t.title}else this.title=this.videoId;this.playWhenReady&&(MASERATI.Helpers.Mobile.isMobile()||(this.triggerProgressChangeEvent("0"),this.player.playVideo()),this.playWhenReady=!1)},MASERATI.MultimediaVideo.prototype.pollProgress=function(){if(this.pauseProgressPolling)return!1;var e=this.player.getCurrentTime();e<.5?this.triggerProgressChangeEvent("0"):e>.25*this.duration&&e<.5*this.duration?this.triggerProgressChangeEvent("25"):e>.5*this.duration&&e<.75*this.duration?this.triggerProgressChangeEvent("50"):e>.75*this.duration&&e<this.duration&&this.triggerProgressChangeEvent("75")},MASERATI.MultimediaVideo.prototype.triggerProgressChangeEvent=function(e){this.progressEvents.indexOf(e)>-1&&this.sentProgressEvent!=e&&(this.sentProgressEvent=e,this.$element[0].dispatchEvent(new CustomEvent("videoprogresschange",{detail:{progress:e}})),"0"==e?MASERATI.AdobeTracking.tracker.setSatelliteTrack("MediaStreamStart"):MASERATI.AdobeTracking.tracker.setSatelliteTrack("MediaStream"+e))},MASERATI.MultimediaVideo.prototype.triggerPlayerOpenEvent=function(){this.sentProgressEvent=null,MASERATI.AdobeTracking.tracker.setMediaName("video:"+this.title),MASERATI.Helpers.log("dispatching event videoplayeropen "+this.title),this.$element[0].dispatchEvent(new CustomEvent("videoplayeropen",{detail:{title:this.title}})),"YouKu"==this.provider&&this.triggerProgressChangeEvent("0")},MASERATI.MultimediaVideo.prototype.onPlayerStateChange=function(e){switch(e.data){case YT.PlayerState.ENDED:clearInterval(this.progressPoller),this.triggerProgressChangeEvent("100");break;case YT.PlayerState.PLAYING:this.pauseProgressPolling=!1,this.pollProgress();break;default:this.pauseProgressPolling=!0}},MASERATI.MultimediaVideo.prototype.play=function(){if(this.player){var e=this;"YouKu"!=this.provider&&(this.progressPoller=setInterval((function(){e.pollProgress()}),1e3*this.duration/16)),MASERATI.Helpers.Mobile.isMobile()&&"YouKu"!=this.provider||this.player.playVideo()}else this.playWhenReady=!0},MASERATI.MultimediaVideo.prototype.stop=function(){this.player&&(clearInterval(this.progressPoller),this.player.stopVideo())};var i=[];$((function(){$(".multimedia-video").each((function(){var e=new MASERATI.MultimediaVideo($(this));$(this);"YouKu"==$(this).data("provider")?e.setupVideo():(i.push(e),MASERATI.YoutubeManager.addVideoCallback((function(){e.setupVideo()})))}))}))},function(e,t){MASERATI.NavAnchor2020=function(e){this.$el=e,this.IsOpen=!1,this.flagNotScroll=!1,this.binding(),this.floatingMenuMobile()},MASERATI.NavAnchor2020.prototype.binding=function(){var e=this;e.$el.find(".floating-menu-toggle.cta").each((function(){this.setAttribute("data-linktracking","submenu:floating-button:open")})),$(window).on("scroll",(function(){var t=$(window).scrollTop();if(e.$el.offset().top-10-t>=0)return e.$el.removeClass("fixed"),e.$el.removeClass("open"),e.IsOpen=!1,e.isMobile()?e.$el.find(".mobile").find(".anchor").first().addClass("selected"):e.$el.find(".anchor").removeClass("selected"),void e.$el.find(".floating-menu-toggle").find(".toggle").removeClass("close-button");if(e.$el.addClass("fixed"),e.isMobile())var i=e.$el.find(".mobile").find(".header").find(".anchor");else i=e.$el.find(".desktop").find(".anchor");for(var n=null,s=0;s<i.length;s++){var o=i.eq(s),a=$(o).data("anchor");if(null==n&&(n=$(o)),!($("[id="+a+"]").length>0&&t+$("body").height()/2>=$("[id="+a+"]").offset().top-e.$el.height()))break;n=$(o)}if(null!=n){if(n.hasClass("selected"))return;e.$el.find(".anchor.selected").removeClass("selected"),e.$el.find(".desktop").find(".anchors").find(".anchor").eq(n.index()).addClass("selected"),e.$el.find(".mobile").find(".header").find(".anchors").find(".anchor").eq(n.index()).addClass("selected"),e.$el.find(".mobile").find(".floating-menu").find(".anchors").find(".anchor").eq(n.index()).addClass("selected")}})),e.$el.find(".anchor").each((function(t,i){$(i).on("click",(function(){var t=$(this).data("anchor");if(0===t.length)return!1;var i=$("[id="+t+"]").offset().top;return i=i-e.$el.height()+20,e.clicked=!0,e.flagNotScroll=!0,e.IsOpen&&e.closeFloatingMenu(),$("html, body").animate({scrollTop:i},850,(function(){i=(i=$("[id="+t+"]").offset().top)-e.$el.height()+20,e.flagNotScroll=!1})),!1}))})),e.$el.find(".floating-menu-toggle").click((function(t){e.closeFloatingMenu()})),e.$el.find(".anchor").focusin((function(t){if(!e.$el.hasClass("fixed")){var i=$(window).height();$("html, body").animate({scrollTop:i},1e3,(function(){e.flagNotScroll=!1}))}})),e.$el.find(".anchor").keydown((function(e){if(13==e.keyCode){var t=$(this).data("anchor"),i=$("[id="+t+"]").next();$(this).find("*").text();i.attr("tabindex","0"),i.focus()}})),$(window).scrollTop()>0&&$("html, body").animate({scrollTop:$(window).scrollTop()},0,(function(){}))},MASERATI.NavAnchor2020.prototype.closeFloatingMenu=function(){this.isMobile()&&!this.$el.hasClass("fixed")||(this.IsOpen?(this.$el.removeClass("open"),this.$el.find(".floating-menu-toggle").each((function(){var e=this;setTimeout((function(){e.setAttribute("data-linktracking","submenu:floating-button:open")}),1e3)})),this.$el.find(".floating-menu-toggle").removeClass("open"),this.$el.find(".floating-menu-toggle").find(".toggle").removeClass("close-button"),this.$el.find(".floating-menu-toggle").attr("aria-expanded","true"),this.$el.parents("body").removeClass("blocked-scroll")):(this.$el.addClass("open"),this.$el.find(".floating-menu-toggle").each((function(){var e=this;setTimeout((function(){e.setAttribute("data-linktracking","submenu:floating-button:close")}),1e3)})),this.$el.find(".floating-menu-toggle").addClass("open"),this.$el.find(".floating-menu-toggle").find(".toggle").addClass("close-button"),this.$el.find(".floating-menu-toggle").attr("aria-expanded","false"),this.isMobile()&&this.$el.parents("body").addClass("blocked-scroll")),this.IsOpen=!this.IsOpen)},MASERATI.NavAnchor2020.prototype.floatingMenuMobile=function(){$shoppingtools=this.$el.find(".mobile").find(".floating-menu").find(".shopping-tools"),$anchors=this.$el.find(".mobile").find(".floating-menu").find(".anchors"),$shoppingtools.length+$anchors.length>1&&$shoppingtools.addClass("separation-line"),$anchors.length>=1&&4==$shoppingtools.find(".shopping-tool").length&&$shoppingtools.addClass("r4")},MASERATI.NavAnchor2020.prototype.isMobile=function(){return"none"!=this.$el.find(".mobile").css("display")},$((function(){$(".nav-anchor-2020").each((function(){new MASERATI.NavAnchor2020($(this))}))}))},function(e,t){MASERATI.NavAnchor=function(e){this.$el=e,this.tolerance=10,this.IsOpen=!1,this.flagNotScroll=!1,this.binding()},MASERATI.NavAnchor.prototype.binding=function(){var e=this;$(window).on("scroll",(function(t){var i=$(window).scrollTop();if(e.$el.offset().top-i>=0)return e.$el.removeClass("fixed"),e.$el.removeClass("open"),e.IsOpen=!1,e.isMobile()?e.$el.find(".mobile").find(".anchor").first().addClass("selected"):e.$el.find(".anchor").removeClass("selected"),void e.$el.find(".floating-menu-toggle").not(".tracking").find(".toggle").removeClass("close-button");if(e.$el.addClass("fixed"),e.isMobile())var n=e.$el.find(".mobile").find(".anchor");else n=e.$el.find(".desktop").find(".anchor");for(var s=null,o=0;o<n.length;o++){var a=n.eq(o),r=$(a).data("anchor");if(null==s&&(s=$(a)),!(i>=$("[id="+r+"]").offset().top-e.$el.height()))break;s=$(a)}if(null!=s){if(s.hasClass("selected"))return;e.$el.find(".anchor.selected").removeClass("selected"),s.addClass("selected"),e.isMobile()&&!e.flagNotScroll&&e.mobileScrollTo(s)}})),e.$el.find(".anchor").each((function(t,i){$(i).on("click",(function(t){var i=$(this).data("anchor");if(0===i.length)return!1;var n=$("[id="+i+"]").offset().top;return n=n-e.$el.height()+e.tolerance,e.clicked=!0,e.flagNotScroll=!0,e.mobileScrollTo($(this)),$("html, body").animate({scrollTop:n},800,(function(){e.flagNotScroll=!1})),!1}))})),e.$el.find(".floating-menu-toggle").not(".tracking").click((function(t){e.IsOpen?(e.$el.removeClass("open"),$(this).find(".toggle").removeClass("close-button"),$(this).attr("aria-expanded","false"),e.$el.find(".floating-menu-toggle.tracking").find(".symbol-plus.close-button").click()):(e.$el.addClass("open"),$(this).find(".toggle").addClass("close-button"),$(this).attr("aria-expanded","true"),e.$el.find(".floating-menu-toggle.tracking").find(".symbol-plus").not(".close-button").click()),e.IsOpen=!e.IsOpen})),e.$el.find(".anchor").focusin((function(t){if(!e.$el.hasClass("fixed")){var i=$(window).height()+e.tolerance;$("html, body").animate({scrollTop:i},1e3,(function(){e.flagNotScroll=!1}))}})),e.$el.find(".anchor").keydown((function(e){if(13==e.keyCode){var t=$(this).data("anchor"),i=$("[id="+t+"]").next(),n=$(this).find("*").text();i.attr("aria-label",n),i.attr("tabindex","0"),i.focus()}})),$(window).scrollTop()>0&&$("html, body").animate({scrollTop:$(window).scrollTop()},0,(function(){}))},MASERATI.NavAnchor.prototype.mobileScrollTo=function(e){for(var t=0,i=0;i<e.index();i++)t+=this.$el.find(".mobile .anchors .anchor").eq(i).innerWidth();var n=this.$el.find(".mobile .anchors").innerWidth(),s=e.innerWidth();position=t+(s/2-n/2),this.$el.find(".mobile .anchors").animate({scrollLeft:position},400,(function(){}))},MASERATI.NavAnchor.prototype.isMobile=function(){return"none"!=this.$el.find(".mobile").css("display")},$((function(){$(".nav-anchor").each((function(){new MASERATI.NavAnchor($(this))}))}))},function(e,t){MASERATI.NewsListCluster=function(e){this.$elements=e,this.lists=[],this.boxes=[],this.init(),arguments.callee.clusterVector=arguments.callee.clusterVector||[],arguments.callee.clusterVector.push(this)},MASERATI.NewsListCluster.resetAll=function(){MASERATI.NewsListCluster.clusterVector.forEach((function(e){e.reset()}))},MASERATI.NewsListCluster.prototype.init=function(){var e=this;this.$elements.each((function(){var t=new MASERATI.NewsList($(this));e.lists.push(t),e.boxes=e.boxes.concat(t.boxes)}))},MASERATI.NewsListCluster.prototype.reset=function(){this.boxes=[],this.lists.forEach((function(e){e.reset(),e.reInit()}))},$((function(){new MASERATI.NewsListCluster($(".news-list"))})),MASERATI.NewsListBox=function(e){this.$element=e,this.categories=this.$element.attr("data-category").split(",")},MASERATI.NewsListBox.prototype.show=function(){this.$element=this.$element.changeElementType("a")},MASERATI.NewsListBox.prototype.hide=function(){this.$element=this.$element.changeElementType("div")},MASERATI.NewsListBox.prototype.opacify=function(e){this.$element.velocity("stop").velocity({opacity:e},{duration:MASERATI.Animations.newsListDuration,queue:!1,easing:MASERATI.Animations.newsListEasing})},MASERATI.NewsList=function(e){this.isLoading=!1,this.url=e.find(".loadMore").attr("data-more"),this.page=1,this.reload=!1,this.hasReloaded=!1,this.$selector=e,this.$boxesSelector=e.find(".boxes"),this.boxes=[],this.clickedBoxCookie="newsListClickedBox",this.setPage(),this.init()},MASERATI.NewsList.prototype.setPage=function(){if(window.location.hash){var e=parseInt(window.location.hash.substr(1));e&&(this.page=e,this.reload=this.page>1)}},MASERATI.NewsList.prototype.init=function(){var e=this;e.$selector.find(".box").each((function(){e.boxes.push(new MASERATI.NewsListBox($(this)))})),this.bindClickOnBox(),this.animate(),this.loadMoreBind(this.$selector.find(".loadMore")),this.reload&&this.reloadContents()},MASERATI.NewsList.prototype.reset=function(){this.deAnimate(),this.$selector.find(".loadMore").unbind()},MASERATI.NewsList.prototype.reInit=function(){this.bindClickOnBox(),this.animate(),this.loadMoreBind(this.$selector.find(".loadMore"))},MASERATI.NewsList.prototype.setClickedBoxCookie=function(e){Cookies.set(this.clickedBoxCookie,e)},MASERATI.NewsList.prototype.getClickedBoxCookie=function(){return Cookies.get(this.clickedBoxCookie)},MASERATI.NewsList.prototype.bindClickOnBox=function(){var e=this;this.boxes.forEach((function(t,i){t.$element.data("progressiveId",i).unbind("click.onBox").bind("click.onBox",(function(){e.setClickedBoxCookie($(this).data("progressiveId"))}))}))},MASERATI.NewsList.prototype.animate=function(){var e=this;e.boxes.forEach((function(t,i){t.$element.hover((function(){e.smartOpacify(i-5,i+5,.5),t.opacify(1)}),(function(){e.smartOpacify(i-5,i+5,1)}))})),e.$selector.find(".boxes").hover((function(){}),(function(){e.opacify(1)}))},MASERATI.NewsList.prototype.deAnimate=function(){this.boxes.forEach((function(e){e.$element.unbind()})),this.$selector.find(".boxes").unbind()},MASERATI.NewsList.prototype.opacify=function(e){this.boxes.forEach((function(t){t.$element.velocity("stop").velocity({opacity:e},{duration:MASERATI.Animations.newsListDuration,queue:!1,easing:MASERATI.Animations.newsListEasing})}))},MASERATI.NewsList.prototype.smartOpacify=function(e,t,i){e=e<0?0:e,t=t>=this.boxes.length?this.boxes.length-1:t;for(var n=e;n<=t;n++)this.boxes[n].$element.velocity("stop").velocity({opacity:i},{duration:MASERATI.Animations.newsListDuration,queue:!1,easing:MASERATI.Animations.newsListEasing})},MASERATI.NewsList.prototype.reloadContents=function(){this.showMainLoading();var e=this.$selector.find(".loading"),t=$("#maserati_menu, #maserati_menu_2018");e.velocity("scroll",{duration:0,easing:MASERATI.Animations.ctaEasing,offset:t.length?-t.height():0,queue:!1}),this.loadMore()},MASERATI.NewsList.prototype.loadMoreBind=function(e){var t=this;e.click((function(e){return e.preventDefault(),t.isLoading||t.loadMore(),!1}))},MASERATI.NewsList.prototype.loadMoreRotation=function(e){},MASERATI.NewsList.prototype.getCurrentPage=function(){return this.page},MASERATI.NewsList.prototype.isReloading=function(){return this.reload},MASERATI.NewsList.prototype.loadMore=function(e){var t=this;t.startLoading();var i={};t.isReloading()?(i.allNewsUpToPage=1,i.page=t.getCurrentPage()):(i.allNewsUpToPage=0,i.page=t.getCurrentPage()+1),$.get(t.url,i,(function(e){t.loadMoreSuccess(e)})).fail((function(){t.loadMoreFailure()})).always((function(){t.isLoading=!1}))},MASERATI.NewsList.prototype.startLoading=function(){this.$boxesSelector.css("max-height",this.$boxesSelector.innerHeight()),this.showAJAXMessage("loading")},MASERATI.NewsList.prototype.loadMoreSuccess=function(e){var t=$("#news-pagination-static").html();t=t.replace('href="#','href="{{href}}');var i=Handlebars.compile(t)(e);if(e.content=i,e.content){var n=$($.parseHTML($.trim(e.content))).find(".box").toArray();n.length?(this.animateLoadedBoxes(this.writeBoxes(n)),this.reload?(this.reload=!1,this.hasReloaded=!0):(this.page=this.page+1,window.location.hash=this.page),MASERATI.NewsListCluster.resetAll(),0!=e.nextPage?(this.$selector.find(".loadMore").attr("href",e.nextPage).find(".cta").show(),this.$selector.find(".loadMore .icon").hide()):this.$selector.find(".loadMore").attr("href","").hide(),document.querySelectorAll(".singleElementImgLoop").forEach((function(e){var t=e.getAttribute("src");t+="  ",e.setAttribute("src",t)}))):this.loadMoreFailure()}else this.loadMoreFailure()},MASERATI.NewsList.prototype.writeBoxes=function(e){var t=$('<div class="ajax-helper"></div>');this.reload&&(this.$boxesSelector.empty(),this.boxes=[]),this.$boxesSelector.append(t);var i=this;return e.forEach((function(e){var t=$(e).appendTo(this.$boxesSelector);i.boxes.push(new MASERATI.NewsListBox(t))}),this),this.reload&&this.hideMainLoading(),{destination:t,offset:parseInt($(e[0]).css("margin-bottom").replace("px",""),10)}},MASERATI.NewsList.prototype.animateLoadedBoxes=function(e){if(this.reload){var t=parseInt(this.getClickedBoxCookie());t&&this.boxes[t]&&(e.destination=this.boxes[t].$element)}var i=$("#maserati_menu, #maserati_menu_2018");this.$boxesSelector.velocity({"max-height":this.$boxesSelector.height()+MASERATI.Helpers.getWindowHeight()+"px"},{duration:MASERATI.Animations.newsListAjaxDuration,complete:function(t){$(t).removeAttr("style"),e.destination.velocity("scroll",{duration:MASERATI.Animations.pageListDuration,easing:MASERATI.Animations.ctaEasing,offset:i.length?-i.height()-e.offset:0,queue:!1})}})},MASERATI.NewsList.prototype.loadMoreFailure=function(){this.showAJAXMessage("fail")},MASERATI.NewsList.prototype.showMainLoading=function(){this.$selector.find(".loadMore .cta").hide(),this.$selector.find(".loading").show()},MASERATI.NewsList.prototype.hideMainLoading=function(){this.$selector.find(".loading").hide(),this.$selector.find(".loadMore .icon").hide(),this.$selector.find(".loadMore .cta").show()},MASERATI.NewsList.prototype.showAJAXMessage=function(e){this.$selector.find(".loadMore .icon").hide(),this.$selector.find(".loadMore .cta").hide(),this.$selector.find(".loadMore .ajax-"+e).show()},MASERATI.NewsList.prototype.endPoint=function(){this.$selector.velocity({opacity:0,height:0},{duration:MASERATI.Animations.newsListDuration})}},function(e,t){MASERATI.NoveltiesCarousel2=function(e){this.$el=e,this.init(),this.initSliders(),this.bindEvents(),this.initSlideSizePortrait()},MASERATI.NoveltiesCarousel2.prototype.init=function(e){this.$slidesContainer=this.$el.find(".main-slide"),this.$slidesContainerText=this.$el.find(".main-slide-text"),this.$slides=this.$slidesContainer.find(".slides"),this.$slidesImages=this.$slidesContainer.find(".novelty-slide"),this.$slidesWrapper=this.$slidesContainer.find(".image-wrapper"),this.$title=this.$slidesContainer.find(".novelties-carousel__slide-title"),this.$textContainer=this.$slidesContainer.find(".novelties-carousel__slide-subtitle"),this.$prevTrigger=this.$el.find(".prevTrigger"),this.$nextTrigger=this.$el.find(".nextTrigger"),this.$titleMobile=this.$el.find(".title-mobile"),this.$subtitleMobile=this.$el.find(".subtitle-mobile"),this.$lastFocusedSlide=null,this.documentDirection="rtl"===$("html").attr("dir")?"rtl":"ltr",this.currentSlide=1,this.totalSlides=this.$slides.length,this.allowShift=!0,this.index=0,this.$el.find(".novelty-slide").length<=2&&this.$slidesContainer.addClass("one-two-models"),this.setTextboxHeight()},MASERATI.NoveltiesCarousel2.prototype.setTextboxHeight=function(e){this.$textContainer,this.$title;var t=0,i=0;this.$slidesContainer.find(".main-slide-text").addClass("calculate"),this.$slidesContainer.find(".text-container").each((function(){var e=$(this).find(".novelties-carousel__slide-title").height(),n=$(this).height()-e;n>t&&(t=n),e>i&&(i=e)})),this.$slidesContainer.find(".main-slide-text").removeClass("calculate");var n=i+t+this.$slidesContainerText.find(".thumbs").height()+this.$slidesContainerText.find(".more-info").height();this.$slidesContainerText.css("height",n),this.$title.css("height",i)},MASERATI.NoveltiesCarousel2.prototype.initSliders=function(e){this.$noveltiSlides=this.$slidesImages,this.$slidesImages.each((function(e){$(this).slick({infinite:!0,initialSlide:e,arrows:!1,draggable:!1,waitForAnimate:!1,swipe:!1,rtl:"rtl"===document.getElementsByTagName("html")[0].getAttribute("dir")})})),$(this.$slidesImages[0]).addClass("active")},MASERATI.NoveltiesCarousel2.prototype.initSlideSizePortrait=function(){var e=0;if(MASERATI.Helpers.getWindowWidth()<=1023){var t=35;if(MASERATI.Helpers.getWindowWidth()<=767)t=20;e=MASERATI.Helpers.getWindowWidth()-4*t-(this.$el.find(".main-slide").height()-this.$slidesContainerText.outerHeight(!0))<0?MASERATI.Helpers.getWindowWidth()-4*t:this.$el.find(".main-slide").height()-this.$slidesContainerText.outerHeight(!0),this.$slidesImages.css("height",e),this.$slidesImages.css("width",e),this.$slidesImages.parents(".novelty-slides").css("height",this.$slidesImages.closest(".active").width())}else this.$slidesImages.css("height",""),this.$slidesImages.css("width","")},MASERATI.NoveltiesCarousel2.prototype.triggerSlideChangeEvent=function(){MASERATI.AdobeTracking.tracker.setGalleryAction("novelties-slider:arrow"),MASERATI.AdobeTracking.tracker.setSatelliteTrack("GalleryEngage")},MASERATI.NoveltiesCarousel2.prototype.bindEvents=function(){var e=this;if(console.log("binding events "),this.$prevTrigger.click((function(){e.triggerSlideChangeEvent(),e.prev()})),this.$nextTrigger.click((function(){e.triggerSlideChangeEvent(),e.next()})),this.$prevTrigger.on("swipeleft",(function(){e.prev()})),this.$prevTrigger.on("swiperight",(function(){e.next()})),this.$nextTrigger.on("swipeleft",(function(){e.prev()})),this.$nextTrigger.on("swiperight",(function(){e.next()})),window.innerWidth>1280)this.$slidesContainer.find(".slick-list").on("swipeleft",(function(){e.next()})),this.$slidesContainer.find(".slick-list").on("swiperight",(function(){e.prev()}));else{var t,i,n=this.$el.find(".slick-slider");n.bind("touchstart",(function(e){t=e.originalEvent.touches[0].clientX,i=e.originalEvent.touches[0].clientY})),n.bind("touchend",(function(n){var s=n.originalEvent.changedTouches[0].clientX,o=n.originalEvent.changedTouches[0].clientY;Math.abs(s-t)>Math.abs(o-i)&&(t>s+10?e.prev():t<s+10&&e.next())}))}window.addEventListener("keydown",(function(t){37==t.keyCode&&e.prev(),39==t.keyCode&&e.next()}),!1),this.$slidesImages.click((function(){let t=e.$slidesContainer.hasClass("left");this.$noveltiSlidesVisible=e.$el.find(".novelty-slide:visible"),this.$noveltiSlides=e.$el.find(".novelty-slide");var i=e.$el.find(".novelty-slide-0 .slick-active").data("slick-index"),n=$(this).find(".slick-active").data("slick-index"),s=$(this).find(".slick-active").parents(".novelty-slide").hasClass("novelty-slide-1"),o=$(this).find(".slick-active").parents(".novelty-slide").hasClass("novelty-slide-"+(this.$noveltiSlides.length-1));if(console.log("Click on #1 "+s),console.log("Click on #N "+o),i==n)e.prev();else if(t){let t=(this.$noveltiSlides.length-i+n)%this.$noveltiSlides.length;if(console.log("step: "+t+", index: "+n+", indexActive: "+i),o)e.next();else for(var a=0;a<t;a++)setTimeout((function(){e.prev()}),600*a)}else{let t=(this.$noveltiSlides.length-n+i)%this.$noveltiSlides.length;if(console.log("step: "+t+", index: "+n+", indexActive: "+i),s)e.prev();else for(a=0;a<t;a++)setTimeout((function(){e.next()}),600*a)}})),this.$prevTrigger.focus((function(){e.$el.addClass("hovered")})),this.$prevTrigger.blur((function(){e.$el.removeClass("hovered")})),this.$nextTrigger.focus((function(){e.$el.addClass("hovered")})),this.$nextTrigger.blur((function(){e.$el.removeClass("hovered")})),$(window).resize((function(){e.$slidesContainer.addClass("no-animate"),e.move(0),requestAnimationFrame((function(){e.$slidesContainer.removeClass("no-animate")})),e.refreshSlides(),e.refreshTriggers(),e.unsetSlidesAnimating(),e.setTextboxHeight(),e.initSlideSizePortrait()}))},MASERATI.NoveltiesCarousel2.prototype.areSlidesAnimating=function(){return this.$slidesContainer.hasClass("velocity-animating")},MASERATI.NoveltiesCarousel2.prototype.setSlidesAnimating=function(){return this.$slidesContainer.addClass("velocity-animating")},MASERATI.NoveltiesCarousel2.prototype.unsetSlidesAnimating=function(){return this.$slidesContainer.removeClass("velocity-animating")},MASERATI.NoveltiesCarousel2.prototype.prev=function(){MASERATI.Helpers.log("Tracker setGalleryAction arrow"),this.$noveltiSlides.slick("slickNext");var e=this.$el.find(".novelty-slide-0 .slick-active").data("slick-index");$(this.$slidesContainerText.find(".text-container")).removeClass("active"),$(this.$slidesContainerText.find(".text-container").get(e)).addClass("active")},MASERATI.NoveltiesCarousel2.prototype.next=function(){MASERATI.Helpers.log("Tracker setGalleryAction arrow"),this.$noveltiSlides.slick("slickPrev");var e=this.$el.find(".novelty-slide-0 .slick-active").data("slick-index");$(this.$slidesContainerText.find(".text-container")).removeClass("active"),$(this.$slidesContainerText.find(".text-container").get(e)).addClass("active")},MASERATI.NoveltiesCarousel2.prototype.dragStart=function(e){(e=e||window.event).preventDefault(),posInitial=items.offsetLeft,"touchstart"==e.type?posX1=e.touches[0].clientX:(posX1=e.clientX,document.onmouseup=dragEnd,document.onmousemove=dragAction)},MASERATI.NoveltiesCarousel2.prototype.dragEnd=function(e){},MASERATI.NoveltiesCarousel2.prototype.dragAction=function(e){"touchmove"==(e=e||window.event).type?(posX2=posX1-e.touches[0].clientX,posX1=e.touches[0].clientX):(posX2=posX1-e.clientX,posX1=e.clientX),items.style.left=items.offsetLeft-posX2+"px"},MASERATI.NoveltiesCarousel2.prototype.move=function(e){var t=this,i=window.innerWidth<1024?this.slideAmountMob:this.slideAmount,n=window.innerWidth<1024?0:this.numberOfSlidesInDesktop;this.currentSlide+e>this.totalSlides-n&&(e=this.totalSlides-1-this.currentSlide),this.currentSlide+e<1&&(e=1-this.currentSlide),"dealer"==t.type&&1==this.currentSlide?(this.setSlidesAnimating(),this.$slidesContainer.css("transform","translateX("+(this.currentSlide+e-1)*(2*i)+"%)")):(this.setSlidesAnimating(),this.$slidesContainer.css("transform","translateX("+(this.currentSlide+e-1)*i+"%)")),this.currentSlide+e>2&&(this.setSlidesAnimating(),this.$slidesContainer.css("transform","translateX("+(this.currentSlide+e-1)*i+"%)")),this.currentSlide+=e,setTimeout((function(){t.refreshSlides(),t.refreshTriggers(),t.unsetSlidesAnimating()}),this.delay),this.update()},MASERATI.NoveltiesCarousel2.prototype.refreshSlides=function(){var e=$(this.$slides.get(this.currentSlide-1));this.$slides.removeClass("active"),e.addClass("active");var t=e.find(".novelties-carousel__slide-title").text(),i=e.find(".novelties-carousel__slide-subtitle").text();this.$titleMobile.text(t),this.$subtitleMobile.text(i);let n=this.getVisibleSlidesSelector();this.$slides.filter(n).children("a").attr("tabindex","0")},MASERATI.NoveltiesCarousel2.prototype.refreshTriggers=function(){this.$prevTrigger.show(),this.$nextTrigger.show(),this.$el.removeClass("first last")},MASERATI.NoveltiesCarousel2.prototype.focusSlide=function(e,t){$(e).closest(".slide").find(":focus").length},MASERATI.NoveltiesCarousel2.prototype.focusMove=function(){if(this.$lastFocusedSlide){let e=this.getVisibleSlidesSelector(),t=$(":focus").closest(".slide").not(e),i="rtl"==this.documentDirection?MASERATI.Helpers.isAfter:MASERATI.Helpers.isBefore,n="rtl"==this.documentDirection?MASERATI.Helpers.isBefore:MASERATI.Helpers.isAfter;i(this.$lastFocusedSlide,t)?this.next():n(this.$lastFocusedSlide,t)&&this.prev()}},MASERATI.NoveltiesCarousel2.prototype.getVisibleSlidesSelector=function(){let e="";for(let t=1;t<=this.numberOfSlidesInDesktop;t++)e+=", .active"+new Array(t+1).join(" + .slide");return window.innerWidth<1024?".active":".active"+e},MASERATI.NoveltiesCarousel2.prototype.bind=function(){this.inViewHandler()},MASERATI.NoveltiesCarousel2.prototype.inViewHandler=function(){var e=this;function t(){e.loadComponent()&&$(window).off("scroll",t)}$(window).on("scroll",t),t()},MASERATI.NoveltiesCarousel2.prototype.loadComponent=function(){var e=this.$el.offset().top+.01*$(window).height();return e=e<0?0:e,!this.$el.hasClass("in-view")&&$(window).scrollTop()+$(window).height()>=e&&(this.update(),this.$el.addClass("in-view")),this.$el.hasClass("in-view")},MASERATI.NoveltiesCarousel2.prototype.update=function(){numberOfSlides=(window.innerWidth<1024?2:4)+this.currentSlide-1,this.$el.find(".slide-img").slice(0,numberOfSlides).each((function(){var e=$(this);e.one("load",(function(){e.addClass("lazy-loaded")})),e.data("src")&&(e.attr("src",e.data("src")),e.removeAttr("data-src"),e.removeData("src")),e.data("srcset")&&(e.attr("srcset",e.data("srcset")),e.removeAttr("data-srcset"),e.removeData("srcset"))}))},$((function(){$(".novelties-carousel2").each((function(){var e=new MASERATI.NoveltiesCarousel2($(this));this.noveltiesCarousel=e}))}))},function(e,t){MASERATI.OrphanLinks=function(e){this.$el=e,this.$prev=e.find(".prev"),this.$next=e.find(".next"),this.$newsList=e.find(".ol-news-list"),this.scrollSpeed=500,this.currentElement=0,this.numElements=this.$el.find(".news").length,this.isRtl="rtl"===$("html").attr("dir"),this.isRtl&&(this.$prev=e.find(".next"),this.$next=e.find(".prev")),this.isRtl?this.$next.hide():this.$prev.hide(),this.preLoadImages(),this.bindEvents()},MASERATI.OrphanLinks.prototype.slideTo=function(e){var t=this.$el.find(".active"),i=this.$el.find("a.content").first().outerWidth(!0)*(this.numElements-1)+this.$el.find("a.content").last().outerWidth(!0)-this.$newsList.width(),n=this.$newsList.width(),s=t.outerWidth(!0);switch(this.currentElement==this.numElements-1&&(s=this.$el.find("a.content").first().outerWidth(!0)),this.isRtl&&null!=e&&(e=e?0:1),e){case 0:this.currentElement++,t.removeClass("active"),t=t.next(),this.loadImages();break;case 1:this.currentElement--,t.removeClass("active"),t=t.prev()}if(t.addClass("active"),MASERATI.Helpers.Mobile.isMobile())var o=s*this.currentElement-(n-t.outerWidth(!1))/2;else o=s*(this.currentElement+1)-(n-t.outerWidth(!1))/2;this.isRtl&&(o=i-o),MASERATI.Helpers.Mobile.isMobile()?(this.currentElement<this.numElements-1&&!this.isRtl||this.currentElement>0&&this.isRtl?this.$next.show():this.$next.hide(),this.currentElement>0&&!this.isRtl||this.currentElement<this.numElements-1&&this.isRtl?this.$prev.show():this.$prev.hide()):(o<i-1?this.$next.show():this.$next.hide(),o>0?this.$prev.show():this.$prev.hide()),this.$newsList.animate({scrollLeft:o},this.scrollSpeed,(function(){}))},MASERATI.OrphanLinks.prototype.bindEvents=function(){var e=this;e.$newsList.on("swipeleft",(function(t){e.currentElement<e.numElements-1&&e.slideTo(0)})),e.$newsList.on("swiperight",(function(t){e.currentElement>0&&e.slideTo(1)})),e.$prev.on("click",(function(){e.slideTo(1)})),e.$next.on("click",(function(){e.slideTo(0)})),e.$newsList.on("keydown",(function(){if("Tab"===event.key||9===event.keyCode)if(event.shiftKey){if(e.currentElement>0){var t=e.scrollSpeed;e.scrollSpeed=0,e.$prev.trigger("click"),e.scrollSpeed=t}}else if(e.currentElement<e.numElements-1){t=e.scrollSpeed;e.scrollSpeed=0,e.$next.trigger("click"),e.scrollSpeed=t}})),$(window).resize((function(){var t=e.scrollSpeed;e.scrollSpeed=0,e.slideTo(),e.scrollSpeed=t}))},MASERATI.OrphanLinks.prototype.preLoadImages=function(){var e=this.$el.find(".image").not(".loaded"),t=0;t=MASERATI.Helpers.Mobile.isMobile()?2:4,(e=e.slice(0,t)).each((function(){var e=$(this);e.attr("srcset",e.data("srcset")),e.attr("src",e.data("src")),e.addClass("loaded")}))},MASERATI.OrphanLinks.prototype.loadImages=function(){var e=this.$el.find(".image").not(".loaded");(e=e.slice(0,2)).each((function(){var e=$(this);e.attr("srcset",e.data("srcset")),e.attr("src",e.data("src")),e.addClass("loaded")}))},$((function(){$(".orphanLinks").each((function(){new MASERATI.OrphanLinks($(this))}))}))},function(e,t){MASERATI.OverlayComponent=function(e){this.$element=e,this.$triggeredName=e.attr("data-overlayId"),this.$triggeredElement=$('[data-overlayElementId="'+this.$triggeredName+'"]');var t=this.$triggeredElement.find("div.close, button, [href], input, select, textarea, [tabindex]:not([tabindex='-1'])");this.$firstFocusableElement=this.$triggeredElement.is("span.close, button, [href], input, select, textarea, [tabindex]:not([tabindex='-1'])")?this.$triggeredElement:t.first(),this.$lastFocusableElement=t.last(),this.$startFocus=void 0,this.bindEvents()},MASERATI.OverlayComponent.prototype.isEnabled=function(){return void 0===this.$element.data("enabled")||this.$element.data("enabled")},MASERATI.OverlayComponent.prototype.bindEvents=function(){var e=this;this.$element.click((function(t){return t.preventDefault(),!!e.isEnabled()&&(e.open(e.$triggeredElement),e.$triggeredElement.find(".close").off("click").on("click",(function(t){MASERATI.AdobeTracking.tracker.setGalleryAction("overlay:close"),t.preventDefault(!0),e.close(e.$triggeredElement)})).attr("tabindex","0").focus(),e.$triggeredElement.before().off("click").on("click",(function(t){t.target==e&&e.close(e.$triggeredElement)})),!1)}))},MASERATI.OverlayComponent.prototype.focusChange=function(e,t,i){e.off("keydown").on("keydown",(function(n){"Tab"===n.key||9===n.keyCode?n.shiftKey?$(document.activeElement).is(t)&&(n.preventDefault(),i.focus()):$(document.activeElement).is(i)&&(n.preventDefault(),t.focus()):27==n.keyCode&&e.find(".close").click()}))},MASERATI.OverlayComponent.prototype.open=function(e){this.$startFocus=$(document.activeElement),e.addClass("open").trigger("openOverlay");var t=this.$triggeredElement.find("span.close,button, [href], input, select, textarea, [tabindex]:not([tabindex='-1'])").filter(":visible");this.$firstFocusableElement=this.$triggeredElement.is("span.close,button, [href], input, select, textarea, [tabindex]:not([tabindex='-1'])")?this.$triggeredElement:t.first(),this.$lastFocusableElement=t.last(),this.$firstFocusableElement.focus(),this.focusChange(this.$triggeredElement,this.$firstFocusableElement,this.$lastFocusableElement),this.disallowBodyScrolling(!0),e.find(".data-table").each((function(){new MASERATI.DataTable($(this))}))},MASERATI.OverlayComponent.prototype.close=function(e){var t;e.removeClass("open").trigger("closeOverlay"),"function"==typeof Event?t=new Event("closed"):(t=document.createEvent("Event")).initEvent("closed",!0,!0),e[0].dispatchEvent(t),this.disallowBodyScrolling(!1),null!=this.$startFocus&&(this.$startFocus.focus(),this.$startFocus=void 0)},MASERATI.OverlayComponent.prototype.toggleMenu=function(e){e.hasClass("opened")?this.close(e):this.open(e)},MASERATI.OverlayComponent.prototype.disallowBodyScrolling=function(e){e?($("body").data("scrollTop",$(window).scrollTop()),setTimeout(this.disableScroll,500)):this.enableScroll()},MASERATI.OverlayComponent.prototype.disableScroll=function(){$("body").addClass("locked")},MASERATI.OverlayComponent.prototype.enableScroll=function(){$("body").removeClass("locked"),window.scrollTo(0,$("body").data("scrollTop"))},$((function(){var e=$('a[data-overlayId]:not([data-overlayId=""]), button[data-overlayId]:not([data-overlayId=""]), div[data-overlayId]:not([data-overlayId=""])');e.length&&e.each((function(){new MASERATI.OverlayComponent($(this))}))}))},function(e,t){MASERATI.PageListBox=function(e){this.$element=e},MASERATI.PageListBox.prototype.opacify=function(e){this.$element.velocity("stop").velocity({opacity:e},{duration:MASERATI.Animations.pageListDuration,queue:!1,easing:MASERATI.Animations.newsListEasing})},MASERATI.PageList=function(e){this.$selector=e,this.boxes=[],this.init(),this.animate()},MASERATI.PageList.prototype.init=function(){var e=this;e.$selector.find(".box").each((function(){e.boxes.push(new MASERATI.PageListBox($(this)))}))},MASERATI.PageList.prototype.animate=function(){var e=this;e.boxes.forEach((function(t){t.$element.hover((function(){e.opacify(.5),t.opacify(1)}),(function(){e.opacify(1)}))})),e.$selector.find(".boxes").hover((function(){}),(function(){e.opacify(1)}))},MASERATI.PageList.prototype.opacify=function(e){this.boxes.forEach((function(t){t.$element.velocity("stop").velocity({opacity:e},{duration:MASERATI.Animations.pageListDuration,queue:!1,easing:MASERATI.Animations.newsListEasing})}))},$((function(){$(".page-list").each((function(){new MASERATI.PageList($(this))}))}))},function(e,t){MASERATI.ReviewGallery=function(e,t,i){if(this.$element=e,this.$slidesContainer=this.$element.find(".main-slide"),this.$slides=this.$slidesContainer.find(".slide"),this.$prevTrigger=this.$element.find(".prevTrigger"),this.$nextTrigger=this.$element.find(".nextTrigger"),this.$thumbsContainer=this.$element.find(".thumbs"),this.$thumbs=this.$element.find(".thumb"),this.$dotsContainer=this.$element.find(".thumbs-mobile"),this.$dots=this.$element.find(".thumbs-mobile .item"),this.timer=!1,this.delay=t,this.infiniteScrolling=i,this.documentDirection="rtl"===$("html").attr("dir")?"rtl":"ltr",this.timerDirection="rtl"===this.documentDirection?"left":"right",this.pointer="rtl"===this.documentDirection?this.infiniteScrolling?-100*(this.$slides.length-2):-100*(this.$slides.length-1):0,this.endPoint=-100*(this.$slides.length-1),this.imageDelta=15,this.deltaDuration=250,this.deltaEasing="swing",this.thumbsOpacity=.4,this.thumbsDuration=250,this.thumbsEasing="swing",this.slideDuration=500,this.slideEasing="swing","rtl"===this.documentDirection){this.$slidesContainer.append(this.$slides.get().reverse()),this.$slidesContainer.velocity({translateX:this.pointer+"%"},{duration:0,easing:this.deltaEasing}),this.$dotsContainer.append(this.$dots.get().reverse())}this.moveThumbs(),this.bindEvents(),this.refreshSlides(),this.initFeeling()},MASERATI.ReviewGallery.prototype.moveThumbs=function(){this.$element.hasClass("topThumbs")&&this.$slidesContainer.detach().appendTo(this.$element)},MASERATI.ReviewGallery.prototype.initFeeling=function(){var e=this;this.delay>0&&!1!==this.delay&&this.initWaypoints(this.delay),this.initTriggersAnimation(),this.$thumbs.hover((function(){$(this).velocity("stop").velocity({opacity:1},{duration:e.thumbsDuration,easing:e.thumbsEasing})}),(function(){$(this).velocity("stop").velocity({opacity:e.thumbsOpacity},{duration:e.thumbsDuration,easing:e.thumbsEasing})})),this.infiniteScrolling&&("ltr"===this.documentDirection?(this.$slidesContainer.prepend(this.$slides.last().clone(!0).addClass("ghost-slide")),this.$slidesContainer.append(this.$slides.first().clone(!0).addClass("ghost-slide"))):(this.$slidesContainer.prepend(this.$slides.first().clone(!0).addClass("ghost-slide")),this.$slidesContainer.append(this.$slides.last().clone(!0).addClass("ghost-slide"))),this.$thumbsContainer.prepend('<div class="thumb ghost-thumb" style="display: none;"></div>'),this.$thumbsContainer.append('<div class="thumb ghost-thumb" style="display: none;"></div>'),this.$dotsContainer.prepend('<a class="item ghost-item" style="display: none;"></a>'),this.$dotsContainer.append('<a class="item ghost-item" style="display: none;"></a>'),this.endPoint=-100*(this.$slides.length-1),this.$slides=this.$slidesContainer.find(".slide"),this.$thumbs=this.$element.find(".thumb"),this.$dots=this.$element.find(".thumbs-mobile .item"),"ltr"===this.documentDirection?(this.pointer=-100,this.$slidesContainer.velocity({translateX:this.pointer+"%"},{duration:0,easing:e.deltaEasing})):(this.pointer=this.infiniteScrolling?-100*(this.$slides.length-2):-100*(this.$slides.length-1),this.$slidesContainer.velocity({translateX:this.pointer+"%"},{duration:0,easing:e.deltaEasing})),this.refreshSlides())},MASERATI.ReviewGallery.prototype.triggerSlideChangeEvent=function(){this.$element[0].dispatchEvent(new CustomEvent("slidechange"))},MASERATI.ReviewGallery.prototype.bindEvents=function(){var e=this;this.$prevTrigger.click((function(){e.areSlidesAnimating()||(e.stopTimer(),e.triggerSlideChangeEvent(),e.prev())})),this.$nextTrigger.click((function(){e.areSlidesAnimating()||(e.stopTimer(),e.triggerSlideChangeEvent(),e.next())})),this.$thumbs.click((function(){e.areSlidesAnimating()||(e.stopTimer(),e.pointer=-100*(e.$thumbs.toArray().indexOf(this)+1),e.prev(),e.refreshSlides())})),this.$dots.click((function(){e.areSlidesAnimating()||(e.stopTimer(),e.pointer=-100*(e.$dots.toArray().indexOf(this)+1),e.triggerSlideChangeEvent(),e.prev(),e.refreshSlides())})),this.$element.on("swipeleft",(function(){e.areSlidesAnimating()||(e.stopTimer(),e.triggerSlideChangeEvent(),e.next())})),this.$element.on("swiperight",(function(){e.areSlidesAnimating()||(e.stopTimer(),e.triggerSlideChangeEvent(),e.prev())}))},MASERATI.ReviewGallery.prototype.areSlidesAnimating=function(){return this.$slidesContainer.hasClass("velocity-animating")},MASERATI.ReviewGallery.prototype.checkTriggers=function(){},MASERATI.ReviewGallery.prototype.next=function(){var e=this;this.areSlidesAnimating()||(this.infiniteScrolling?this.pointer<=this.endPoint-100?(this.pointer-=100,this.$slidesContainer.velocity({translateX:this.pointer+"%"},{begin:function(){e.deinitTriggersAnimation()},duration:this.slideDuration,easing:this.slideEasing,complete:function(){e.pointer=-100,e.$slidesContainer.velocity({translateX:e.pointer+"%"},{duration:0,easing:e.deltaEasing}),e.refreshSlides(),e.initTriggersAnimation(),e.checkTriggers()}})):(this.pointer-=100,this.$slidesContainer.velocity({translateX:this.pointer+"%"},{duration:this.slideDuration,easing:this.slideEasing,complete:function(){e.refreshSlides(),e.checkTriggers()}})):this.pointer<=this.endPoint?(this.$slidesContainer.velocity({translateX:this.pointer-this.imageDelta+"%"},{duration:this.deltaDuration,easing:this.deltaEasing,complete:function(t){$(t).velocity({translateX:e.endPoint+"%"},{duration:e.deltaDuration,easing:e.deltaEasing}),e.checkTriggers()}}),this.pointer=this.endPoint):(this.pointer-=100,this.$slidesContainer.velocity({translateX:this.pointer+"%"},{duration:this.slideDuration,easing:this.slideEasing,complete:function(){e.refreshSlides(),e.checkTriggers()}})))},MASERATI.ReviewGallery.prototype.prev=function(){var e=this;this.areSlidesAnimating()||(this.infiniteScrolling?this.pointer>-200?(this.pointer+=100,this.$slidesContainer.velocity({translateX:this.pointer+"%"},{begin:function(){e.deinitTriggersAnimation()},duration:this.slideDuration,easing:this.slideEasing,complete:function(){e.pointer=-100*(e.$slides.length-2),e.$slidesContainer.velocity({translateX:e.pointer+"%"},{duration:0,easing:e.deltaEasing}),e.refreshSlides(),e.initTriggersAnimation(),e.checkTriggers()}})):(this.pointer+=100,this.$slidesContainer.velocity({translateX:this.pointer+"%"},{duration:this.slideDuration,easing:this.slideEasing,complete:function(){e.refreshSlides(),e.checkTriggers()}})):this.pointer>-100?(this.$slidesContainer.velocity({translateX:this.imageDelta+"%"},{duration:this.deltaDuration,easing:this.deltaEasing,complete:function(t){$(t).velocity({translateX:"0%"},{duration:e.deltaDuration,easing:e.deltaEasing}),e.checkTriggers()}}),this.pointer=0):(this.pointer+=100,this.$slidesContainer.velocity({translateX:this.pointer+"%"},{duration:this.slideDuration,easing:this.slideEasing,complete:function(){e.refreshSlides(),e.checkTriggers()}})))},MASERATI.ReviewGallery.prototype.triggerAction=function(e,t){"prev"==e?"start"==t?this.$slidesContainer.velocity("stop").velocity({translateX:this.pointer+this.imageDelta+"%"},{duration:this.deltaDuration,easing:this.deltaEasing}):this.$slidesContainer.velocity("stop").velocity({translateX:this.pointer+"%"},{duration:this.deltaDuration,easing:this.deltaEasing}):"start"==t?this.$slidesContainer.velocity("stop").velocity({translateX:this.pointer-this.imageDelta+"%"},{duration:this.deltaDuration,easing:this.deltaEasing}):this.$slidesContainer.velocity("stop").velocity({translateX:this.pointer+"%"},{duration:this.deltaDuration,easing:this.deltaEasing})},MASERATI.ReviewGallery.prototype.initTriggersAnimation=function(){var e=this;this.$prevTrigger.hover((function(){e.triggerAction("prev","start")}),(function(){e.triggerAction("prev","stop")})),this.$nextTrigger.hover((function(){e.triggerAction("next","start")}),(function(){e.triggerAction("next","stop")}))},MASERATI.ReviewGallery.prototype.deinitTriggersAnimation=function(){this.$prevTrigger.unbind("hover"),this.$nextTrigger.unbind("hover")},MASERATI.ReviewGallery.prototype.refreshThumbs=function(){var e=this,t=$(this.$thumbs.get(this.$slidesContainer.find(".active").index())),i=$(this.$dots.get(this.$slidesContainer.find(".active").index()));this.$thumbs.each((function(){$(this).velocity("stop").velocity({opacity:e.thumbsOpacity},{duration:e.thumbsDuration,easing:e.thumbsEasing}),$(this).removeClass("active")})),t.velocity("stop").velocity({opacity:1},{duration:e.thumbsDuration,easing:e.thumbsEasing,complete:function(){t.addClass("active")}}),this.$dots.removeClass("active"),i.addClass("active")},MASERATI.ReviewGallery.prototype.refreshSlides=function(){var e=$(this.$slides.get(Math.floor(this.pointer/-100)));this.$slides.removeClass("active"),e.addClass("active"),this.refreshThumbs()},MASERATI.ReviewGallery.prototype.initWaypoints=function(e){var t=this;this.$element.waypoint({handler:function(i){"down"==i?t.initTimer(e):t.stopTimer()},offset:"40%"}),this.$element.waypoint({handler:function(i){"up"==i?t.initTimer(e):t.stopTimer()},offset:"-80%"})},MASERATI.ReviewGallery.prototype.initTimer=function(e){MASERATI.BatteryDrain.visibilityChangeSupport()&&document.addEventListener("visibilityChange",$.proxy((function(){this.handleBatteryDrain()}),this),!1),window.clearInterval(this.timer),this.timer=window.setInterval($.proxy(this.timerTransition,this),e)},MASERATI.ReviewGallery.prototype.stopTimer=function(){window.clearInterval(this.timer)},MASERATI.ReviewGallery.prototype.timerTransition=function(){null!==this.timerDirection&&("right"===this.timerDirection?this.next():this.prev())},MASERATI.ReviewGallery.prototype.handleBatteryDrain=function(){document.hidden?this.stopTimer():this.initTimer(this.delay)},$((function(){$(".review-gallery").each((function(){new MASERATI.ReviewGallery($(this),6e3,!0)}))}))},function(e,t){MASERATI.ScrollUpCta=function(e){var t=this;t.el=e,$(window).on("scroll",(function(e){var i=$(window).scrollTop();t.vibility=$(".car-locator-full").length<=0,t.vibility&&i>$(window).height()?$(t.el).addClass("fixed"):$(t.el).removeClass("fixed")})),$(t.el).on("click",(function(){$(t.el).addClass("clicked"),$("#maserati_menu_2018").find(":focusable").first().focus(),$("html, body").animate({scrollTop:0},800,(function(){$(t.el).removeClass("clicked")}))}))},$((function(){$(".scroll-up-cta").each((function(){new MASERATI.ScrollUpCta($(this))}))}))},function(e,t){MASERATI.SearchInput=function(e){this._$element=e,this._bindEvents()},MASERATI.SearchInput.prototype._bindEvents=function(){this._$element.find(".search .submit").click((function(){$(this).parent("form").submit()}))},$((function(){$(".search-input").each((function(){new MASERATI.SearchInput($(this))}))})),function(){"use strict";var e="cmp",t="search",i=9,n=13,s=27,o=38,a=40,r={self:"[data-"+e+'-is="'+t+'"]',item:{self:"[data-"+e+"-hook-"+t+'="item"]',title:"[data-"+e+"-hook-"+t+'="itemTitle"]',focused:"."+e+"-search__item--is-focused"},obj:{self:"[data-"+e+"-hook-"+t+'="item"]',suggest:"[data-"+e+"-hook-"+t+'="item.suggest"]',suggestPath:"[data-"+e+"-hook-"+t+'="item.suggestPath"]'}},l={minLength:{default:3,transform:function(e){return e=parseFloat(e),isNaN(e)?null:e}},resultsSize:{default:10,transform:function(e){return e=parseFloat(e),isNaN(e)?null:e}}},d=0,c=!1;function h(i){var n=i.dataset,s=[],o=t,a=["is","hook"+(o=o.charAt(0).toUpperCase()+o.slice(1))];for(var r in n)if(n.hasOwnProperty(r)){var l=n[r];0===r.indexOf(e)&&(r=(r=r.slice(e.length)).charAt(0).toLowerCase()+r.substring(1),-1===a.indexOf(r)&&(s[r]=l))}return s}function u(e,t){e&&(!1!==t?(e.style.display="block",e.setAttribute("aria-hidden",!1)):(e.style.display="none",e.setAttribute("aria-hidden",!0)))}function p(t,i){if(t&&i)if(3===t.nodeType){var n=t.nodeValue,s=i.exec(n);if(n&&s){var o=document.createElement("mark");o.className=e+"-search__item-mark",o.appendChild(document.createTextNode(s[0]));var a=t.splitText(s.index);a.nodeValue=a.nodeValue.substring(s[0].length),t.parentNode.insertBefore(o,a)}}else if(t.hasChildNodes())for(var r=0;r<t.childNodes.length;r++)p(t.childNodes[r],i)}function f(t){t.element&&t.element.removeAttribute("data-"+e+"-is"),this._cacheElements(t.element),this._setupProperties(t.options),this._action=this._elements.form.getAttribute("suggestion-action"),this._resultsOffset=0,this._hasMoreResults=!0,this._elements.input.addEventListener("input",this._onInput.bind(this)),this._elements.input.addEventListener("focus",this._onInput.bind(this)),this._elements.input.addEventListener("keydown",this._onKeydown.bind(this)),this._elements.clear.addEventListener("click",this._onClearClick.bind(this)),document.addEventListener("click",this._onDocumentClick.bind(this)),this._elements.results.addEventListener("scroll",this._onScroll.bind(this)),this._makeAccessible()}function g(){for(var e=document.querySelectorAll(r.self),t=0;t<e.length;t++)new f({element:e[t],options:h(e[t])});var i=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,n=document.querySelector("body");new i((function(e){e.forEach((function(e){var t=[].slice.call(e.addedNodes);t.length>0&&t.forEach((function(e){e.querySelectorAll&&[].slice.call(e.querySelectorAll(r.self)).forEach((function(e){new f({element:e,options:h(e)})}))}))}))})).observe(n,{subtree:!0,childList:!0,characterData:!0})}f.prototype._displayResults=function(){0===this._elements.input.value.length?this._cancelResults():c||this._updateResults()},f.prototype._onScroll=function(e){this._elements.results.scrollTop+2*this._elements.results.clientHeight>=this._elements.results.scrollHeight&&!c&&(this._resultsOffset+=this._properties.resultsSize,this._displayResults())},f.prototype._onInput=function(e){var t=this;t._cancelResults(),this._timeout=setTimeout((function(){t._displayResults()}),300)},f.prototype._onKeydown=function(e){switch(e.keyCode){case i:this._resultsOpen()&&e.preventDefault();break;case n:if(e.preventDefault(),this._resultsOpen()){var t=this._elements.results.querySelector(r.item.focused);t&&t.click()}break;case s:this._cancelResults();break;case o:this._resultsOpen()&&(e.preventDefault(),this._stepResultFocus(!0));break;case a:this._resultsOpen()?(e.preventDefault(),this._stepResultFocus()):this._onInput();break;default:return}},f.prototype._onClearClick=function(e){e.preventDefault(),this._elements.input.value="",u(this._elements.results,!1)},f.prototype._onValueChange=function(e){this._elements.input.value=e},f.prototype._onDocumentClick=function(e){var t=this._elements.input.contains(e.target),i=this._elements.results.contains(e.target);t||i||u(this._elements.results,!1)},f.prototype._resultsOpen=function(){return"none"!==this._elements.results.style.display},f.prototype._makeAccessible=function(){var t=e+"-search-results-"+d;this._elements.input.setAttribute("aria-owns",t),this._elements.results.id=t,d++},f.prototype._generateItems=function(e,t){var i=this;i._properties.resultsSize=0;for(var n=0;n<e.length;n++){var s=e[n],o=document.createElement("span");o.innerHTML=i._elements.itemTemplate.innerHTML,s.title&&s.suggestPath?(o.querySelectorAll(r.obj.title)[0].appendChild(document.createTextNode(s.suggest)),o.querySelectorAll(r.obj.self)[0].setAttribute("href",s.suggestPath)):(console.log("suggestions"),o.querySelectorAll(r.obj.suggest)[0].appendChild(document.createTextNode(s.suggest)),o.querySelectorAll(r.obj.self)[0].setAttribute("class","cmp-search__item suggestions"),o.querySelectorAll(r.obj.self)[0].setAttribute("href",s.suggestPath)),t.innerHTML+=o.innerHTML,i._properties.resultsSize++}$(".suggestions").click((function(){var e=$(this).text().trim();i._cancelResults(),i._onValueChange(e),i._updateResults(),console.log("click!",e)}))},f.prototype._markResults=function(){for(var e=this._elements.results.querySelectorAll(r.item.self),t=this._elements.input.value.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),i=new RegExp("("+t+")","gi"),n=this._resultsOffset-1;n<e.length;++n){p(e[n],i)}},f.prototype._stepResultFocus=function(t){var i,n=this._elements.results.querySelectorAll(r.item.self),s=this._elements.results.querySelector(r.item.focused),o=Array.prototype.indexOf.call(n,s),a=e+"-search__item--is-focused";if(n.length>0)if(t){if(o>=1&&(n[o].classList.remove(a),n[o-1].classList.add(a)),i=this._elements.results.querySelector(r.item.focused)){var l=this._elements.results.scrollTop-i.offsetTop;l>0&&(this._elements.results.scrollTop-=l)}}else if(o<0?n[0].classList.add(a):o+1<n.length&&(n[o].classList.remove(a),n[o+1].classList.add(a)),i=this._elements.results.querySelector(r.item.focused)){var d=i.offsetTop+i.offsetHeight-this._elements.results.scrollTop-this._elements.results.clientHeight;d>0?this._elements.results.scrollTop+=d:this._onScroll()}},f.prototype._updateResults=function(){var e=this;if(e._hasMoreResults&&!c){c=!0;var t=new XMLHttpRequest,i=e._action+"?"+function(e){var t=[];if(e&&e.elements)for(var i=0;i<e.elements.length;i++){var n=e.elements[i];if(!n.disabled&&n.name){var s=[n.name,encodeURIComponent(n.value)];t.push(s.join("="))}}return t.join("&")}(e._elements.form)+"&resultsOffset="+e._resultsOffset;t.open("GET",i,!0),t.onload=function(){if(setTimeout((function(){u(e._elements.loadingIndicator,!1)}),300),t.status>=200&&t.status<400){var i=JSON.parse(t.responseText);i.length>0?(e._generateItems(i,e._elements.results),e._markResults(),u(e._elements.results,!0)):e._hasMoreResults=!1,e._elements.results.querySelectorAll(r.item.self).length%e._properties.resultsSize>0&&(e._hasMoreResults=!1)}c=!1},u(e._elements.loadingIndicator,!0),t.send()}},f.prototype._cancelResults=function(){clearTimeout(this._timeout),this._elements.results.scrollTop=0,this._resultsOffset=0,this._hasMoreResults=!0,this._elements.results.innerHTML=""},f.prototype._cacheElements=function(i){this._elements={},this._elements.self=i;for(var n=this._elements.self.querySelectorAll("[data-"+e+"-hook-"+t+"]"),s=0;s<n.length;s++){var o=n[s],a=t;a=a.charAt(0).toUpperCase()+a.slice(1);var r=o.dataset[e+"Hook"+a];this._elements[r]=o}},f.prototype._setupProperties=function(e){for(var t in this._properties={},l)if(l.hasOwnProperty(t)){var i=l[t];e&&null!=e[t]?i&&"function"==typeof i.transform?this._properties[t]=i.transform(e[t]):this._properties[t]=e[t]:this._properties[t]=l[t].default}},"loading"!==document.readyState?g():document.addEventListener("DOMContentLoaded",g)}()},function(e,t,i){"use strict";var n=i(58),s=i(109),o=i(62),a=i(79),r=i(246),l=a.set,d=a.getterFor("Array Iterator");e.exports=r(Array,"Array",(function(e,t){l(this,{type:"Array Iterator",target:n(e),index:0,kind:t})}),(function(){var e=d(this),t=e.target,i=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==i?{value:n,done:!1}:"values"==i?{value:t[n],done:!1}:{value:[n,t[n]],done:!1}}),"values"),o.Arguments=o.Array,s("keys"),s("values"),s("entries")},function(e,t,i){"use strict";var n=i(36),s=i(247),o=i(129),a=i(127),r=i(90),l=i(43),d=i(44),c=i(24),h=i(68),u=i(62),p=i(128),f=p.IteratorPrototype,g=p.BUGGY_SAFARI_ITERATORS,m=c("iterator"),v=function(){return this};e.exports=function(e,t,i,c,p,y,A){s(i,t,c);var $,S,E,C=function(e){if(e===p&&I)return I;if(!g&&e in M)return M[e];switch(e){case"keys":case"values":case"entries":return function(){return new i(this,e)}}return function(){return new i(this)}},T=t+" Iterator",b=!1,M=e.prototype,w=M[m]||M["@@iterator"]||p&&M[p],I=!g&&w||C(p),R="Array"==t&&M.entries||w;if(R&&($=o(R.call(new e)),f!==Object.prototype&&$.next&&(h||o($)===f||(a?a($,f):"function"!=typeof $[m]&&l($,m,v)),r($,T,!0,!0),h&&(u[T]=v))),"values"==p&&w&&"values"!==w.name&&(b=!0,I=function(){return w.call(this)}),h&&!A||M[m]===I||l(M,m,I),u[t]=I,p)if(S={values:C("values"),keys:y?I:C("keys"),entries:C("entries")},A)for(E in S)!g&&!b&&E in M||d(M,E,S[E]);else n({target:t,proto:!0,forced:g||b},S);return S}},function(e,t,i){"use strict";var n=i(128).IteratorPrototype,s=i(88),o=i(75),a=i(90),r=i(62),l=function(){return this};e.exports=function(e,t,i){var d=t+" Iterator";return e.prototype=s(n,{next:o(1,i)}),a(e,d,!1,!0),r[d]=l,e}},function(e,t,i){var n=i(28);e.exports=!n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},function(e,t){MASERATI.ShoppingToolsIcons=function(e){this.$component=e,this.$icons=e.find(".toolsIcon"),this.init()},MASERATI.ShoppingToolsIcons.prototype.init=function(){var e=$("#maserati_menu, #maserati_menu_2018");this.$icons.on("click",(function(t){var i=$(this).attr("href");i.length>1&&"#"==i.substr(0,1)&&(t.preventDefault(),$(i).velocity("scroll",{offset:e.length?-e.height():0,duration:MASERATI.Animations.ctaScrollSpeed,easing:MASERATI.Animations.ctaEasing}),window.location.hash=i)}))},$((function(){new MASERATI.ShoppingToolsIcons($(".shoppingtool-icons"))}))},function(e,t){MASERATI.ShoppingToolsIconsFlex=function(e){this.$component=e,this.$icons=e.find(".toolsIcon"),this.currentElement=0,this.numElements=this.$component.find(".navigators .navigator").length,this.binding(),this.init()},MASERATI.ShoppingToolsIconsFlex.prototype.binding=function(){var e=this,t=e.$component.find(".toolsIcons.mobile .toolsIcon");t.length>2?t.click((function(t){var i=$(this);i.index()>1?e.next(t):i.index()<1&&e.prev(t)})):2==t.length?(this.$component.find(".navigators").hide(),t.addClass("two")):this.$component.find(".navigators").hide(),e.$component.find(".navigators .navigator").click((function(t){var i=$(this);i.index()!=e.currentElement&&(i.index()<e.currentElement?e.prev(t):e.next(t),MASERATI.Helpers.log("Tracker setGalleryAction dot"),MASERATI.AdobeTracking.tracker.setGalleryAction("engagement:shoppingtool-bar:dot"))})),e.$component.find(".toolsIcons.mobile").on("swipeleft",(function(t){e.next(t)})),e.$component.find(".toolsIcons.mobile").on("swiperight",(function(t){e.prev(t)})),e.setCurrentElement(1),e.prev()},MASERATI.ShoppingToolsIconsFlex.prototype.next=function(e){var t=this;t.$component.find(".toolsIcons.mobile").addClass("slide-left"),setTimeout((function(){t.$component.find(".toolsIcons.mobile .toolsIcon").first().appendTo(t.$component.find(".toolsIcons.mobile")),t.setCurrentElement(t.currentElement+1),t.$component.find(".toolsIcons.mobile").removeClass("slide-left")}),300),null!=e&&e.preventDefault()},MASERATI.ShoppingToolsIconsFlex.prototype.prev=function(e){var t=this;t.$component.find(".toolsIcons.mobile").addClass("slide-right"),setTimeout((function(){t.$component.find(".toolsIcons.mobile .toolsIcon").last().prependTo(t.$component.find(".toolsIcons.mobile")),t.setCurrentElement(t.currentElement-1),t.$component.find(".toolsIcons.mobile").removeClass("slide-right")}),300),null!=e&&e.preventDefault()},MASERATI.ShoppingToolsIconsFlex.prototype.setCurrentElement=function(e){this.$component.find(".navigators .navigator").eq(this.currentElement).removeClass("selected"),this.currentElement=e<0?this.numElements+e:e%this.numElements,this.$component.find(".navigators .navigator").eq(this.currentElement%this.numElements).addClass("selected")},MASERATI.ShoppingToolsIconsFlex.prototype.init=function(){var e=$("#maserati_menu, #maserati_menu_2018");this.$icons.on("click",(function(t){var i=$(this).attr("href");i.length>1&&"#"==i.substr(0,1)&&(t.preventDefault(),$(i).velocity("scroll",{offset:e.length?-e.height():0,duration:MASERATI.Animations.ctaScrollSpeed,easing:MASERATI.Animations.ctaEasing}),window.location.hash=i)}))},$((function(){$(".shoppingtool-icons-flex").each((function(){new MASERATI.ShoppingToolsIconsFlex($(this))}))}))},function(e,t){MASERATI.simplifiedAroundTheWorld=function(e){var t=e,i=t.find("select.region"),n=t.find("div.cta a");i.on("change",(function(e){var t=$(this).find("option:selected");if(t.val().trim()){var i=t.data("url");n.attr("href",i)}else n.attr("href","javascript:void(0)")}))},$((function(){$(".simplifiedAroundTheWorld").each((function(){new MASERATI.simplifiedAroundTheWorld($(this))}))}))},function(e,t){MASERATI.SingleReview=function(e){this.$component=e,this.init()},MASERATI.SingleReview.prototype.init=function(){var e=this;this.$component.find(".more").on("click",(function(t){t.preventDefault(),e.$component.toggleClass("active");var i=e.$component.find(".expanded"),n=e.$component.hasClass("active")?"slideDown":"slideUp";e.$component.find(".more").attr("aria-expanded",e.$component.hasClass("active")?"true":"false");var s=$("#maserati_menu, #maserati_menu_2018");i.velocity("stop").velocity(n,{duration:300,complete:function(){i.velocity("scroll",{offset:-s.height(),duration:MASERATI.Animations.ctaScrollSpeed,easing:MASERATI.Animations.ctaEasing})}})}))},$((function(){$(".single-review").each((function(){new MASERATI.SingleReview($(this))}))}))},function(e,t){MASERATI.SoundComponent=function(e){this.$element=e,this.$el=e,this.bind(),this.$fallbackFunctionTimeout=null,this.initWaveSurfer(),this.wavesurfer.load(this.$element.attr("data-audio")),this.bindEvents(),this.playing=!1,this.duration=0,this.$element[0].maseratiObject=this,this.progressEvents=["0","25","50","75","100"],this.sentProgressEvent=null,this.name=e.data("audio").split(/(\\|\/)/g).pop();var t=this;t.wavesurfer.drawer.containerWidth=t.$element.find(".text-container").width(),$(window).on("resize",(function(){t.fixOnResize()})),(window.navigator.userAgent.indexOf("MSIE ")>0||navigator.userAgent.match(/Trident.*rv\:11\./))&&($(t.$element.find("wave")[0]).css("position","static"),$(t.$element.find("wave")[0]).css("height",0))},MASERATI.SoundComponent.prototype.bind=function(){this.loadComponent(),this.inViewHandler(),this.updateHandler()},MASERATI.SoundComponent.prototype.updateHandler=function(){var e=this;function t(){e.update()&&$(window).off("resize",t)}$(window).on("resize",t)},MASERATI.SoundComponent.prototype.inViewHandler=function(){var e=this;function t(){e.loadComponent()&&$(window).off("scroll",t)}$(window).on("scroll",t)},MASERATI.SoundComponent.prototype.loadComponent=function(){var e=this.$el.offset().top+.01*$(window).height();return e=e<0?0:e,!this.$el.hasClass("in-view")&&$(window).scrollTop()+$(window).height()>=e&&(this.update(),this.$el.addClass("in-view")),this.$el.hasClass("in-view")},MASERATI.SoundComponent.prototype.update=function(){var e=".landscape";return $(window).width()<$(window).height()&&(e=".portrait"),0==this.$el.find("img.lazy-load"+e).length&&(e=""),this.$el.find("img.lazy-load"+e).not(".lazy-loaded").each((function(){var e=$(this);e.one("load",(function(){e.addClass("lazy-loaded")})),e.data("src")&&(e.attr("src",e.data("src")),e.removeAttr("data-src"),e.removeData("src")),e.data("srcset")&&(e.attr("srcset",e.data("srcset")),e.removeAttr("data-srcset"),e.removeData("srcset"))})),0==this.$el.find(".img-comp-container").find("img.lazy-load").not(".lazy-loaded").length},MASERATI.SoundComponent.prototype.initWaveSurfer=function(){var e={defaultParams:{height:128,waveColor:"#999",progressColor:"#555",cursorColor:"#333",cursorWidth:1,skipLength:2,minPxPerSec:20,pixelRatio:window.devicePixelRatio||screen.deviceXDPI/screen.logicalXDPI,fillParent:!0,scrollParent:!1,hideScrollbar:!1,normalize:!1,audioContext:null,container:null,dragSelection:!0,loopSelection:!0,audioRate:1,interact:!0,splitChannels:!1,mediaContainer:null,mediaControls:!1,renderer:"Canvas",backend:"WebAudio",mediaType:"audio",autoCenter:!0},init:function(t){if(this.params=e.util.extend({},this.defaultParams,t),this.container="string"==typeof t.container?document.querySelector(this.params.container):this.params.container,!this.container)throw new Error("Container element not found");if(null==this.params.mediaContainer?this.mediaContainer=this.container:"string"==typeof this.params.mediaContainer?this.mediaContainer=document.querySelector(this.params.mediaContainer):this.mediaContainer=this.params.mediaContainer,!this.mediaContainer)throw new Error("Media Container element not found");this.savedVolume=0,this.isMuted=!1,this.tmpEvents=[],this.createDrawer(),this.createBackend()},createDrawer:function(){var t=this;this.drawer=Object.create(e.Drawer[this.params.renderer]),this.drawer.init(this.container,this.params),this.drawer.on("redraw",(function(){t.drawBuffer(),t.drawer.progress(t.backend.getPlayedPercents())})),this.drawer.on("click",(function(e,i){setTimeout((function(){t.seekTo(i)}),0)})),this.drawer.on("scroll",(function(e){t.fireEvent("scroll",e)}))},createBackend:function(){var t=this;this.backend&&this.backend.destroy(),"AudioElement"==this.params.backend&&(this.params.backend="MediaElement"),"WebAudio"!=this.params.backend||e.WebAudio.supportsWebAudio()||(this.params.backend="MediaElement"),this.backend=Object.create(e[this.params.backend]),this.backend.init(this.params),this.backend.on("finish",(function(){t.fireEvent("finish")})),this.backend.on("play",(function(){t.fireEvent("play")})),this.backend.on("pause",(function(){t.fireEvent("pause")})),this.backend.on("audioprocess",(function(e){t.fireEvent("audioprocess",e)}))},startAnimationLoop:function(){var e=this,t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame,i=function(){if(!e.backend.isPaused()){var n=e.backend.getPlayedPercents();e.drawer.progress(n),e.fireEvent("audioprocess",n),t(i)}};i()},getDuration:function(){return this.backend.getDuration()},getCurrentTime:function(){return this.backend.getCurrentTime()},play:function(e,t){this.backend.play(e,t),this.startAnimationLoop()},pause:function(){this.backend.pause()},playPause:function(){this.backend.isPaused()?this.play():this.pause()},isPlaying:function(){return!this.backend.isPaused()},skipBackward:function(e){this.skip(-e||-this.params.skipLength)},skipForward:function(e){this.skip(e||this.params.skipLength)},skip:function(e){var t=this.getCurrentTime()||0,i=this.getDuration()||1;t=Math.max(0,Math.min(i,t+(e||0))),this.seekAndCenter(t/i)},seekAndCenter:function(e){this.seekTo(e),this.drawer.recenter(e)},seekTo:function(e){var t=this.backend.isPaused(),i=this.params.scrollParent;t&&(this.params.scrollParent=!1),this.backend.seekTo(e*this.getDuration()),this.drawer.progress(this.backend.getPlayedPercents()),t||(this.backend.pause(),this.backend.play()),this.params.scrollParent=i,this.fireEvent("seek",e)},stop:function(){this.pause(),this.seekTo(0),this.drawer.progress(0)},setVolume:function(e){this.backend.setVolume(e)},setPlaybackRate:function(e){this.backend.setPlaybackRate(e)},toggleMute:function(){this.isMuted?(this.backend.setVolume(this.savedVolume),this.isMuted=!1):(this.savedVolume=this.backend.getVolume(),this.backend.setVolume(0),this.isMuted=!0)},toggleScroll:function(){this.params.scrollParent=!this.params.scrollParent,this.drawBuffer()},toggleInteraction:function(){this.params.interact=!this.params.interact},drawBuffer:function(){var e=Math.round(this.getDuration()*this.params.minPxPerSec*this.params.pixelRatio),t=this.drawer.getWidth(),i=e;this.params.fillParent&&(!this.params.scrollParent||t>e)&&(i=t);var n=this.backend.getPeaks(i);this.drawer.drawPeaks(n,i),this.fireEvent("redraw",n,i)},zoom:function(e){this.params.minPxPerSec=e,this.params.scrollParent=!0,this.drawBuffer(),this.seekAndCenter(this.getCurrentTime()/this.getDuration()),this.fireEvent("zoom",e)},loadArrayBuffer:function(e){this.decodeArrayBuffer(e,function(e){this.loadDecodedBuffer(e)}.bind(this))},loadDecodedBuffer:function(e){this.backend.load(e),this.drawBuffer(),this.fireEvent("ready")},loadBlob:function(e){var t=this,i=new FileReader;i.addEventListener("progress",(function(e){t.onProgress(e)})),i.addEventListener("load",(function(e){t.loadArrayBuffer(e.target.result)})),i.addEventListener("error",(function(){t.fireEvent("error","Error reading file")})),i.readAsArrayBuffer(e),this.empty()},load:function(e,t){switch(this.params.backend){case"WebAudio":return this.loadBuffer(e);case"MediaElement":return this.loadMediaElement(e,t)}},loadBuffer:function(e){return this.empty(),this.getArrayBuffer(e,this.loadArrayBuffer.bind(this))},loadMediaElement:function(e,t){this.empty(),this.backend.load(e,this.mediaContainer,t),this.tmpEvents.push(this.backend.once("canplay",function(){this.drawBuffer(),this.fireEvent("ready")}.bind(this)),this.backend.once("error",function(e){this.fireEvent("error",e)}.bind(this))),!t&&this.backend.supportsWebAudio()&&this.getArrayBuffer(e,function(e){this.decodeArrayBuffer(e,function(e){this.backend.buffer=e,this.drawBuffer()}.bind(this))}.bind(this))},decodeArrayBuffer:function(e,t){this.backend.decodeArrayBuffer(e,this.fireEvent.bind(this,"decoded"),this.fireEvent.bind(this,"error","Error decoding audiobuffer")),this.tmpEvents.push(this.once("decoded",t))},getArrayBuffer:function(t,i){var n=this,s=e.util.ajax({url:t,responseType:"arraybuffer"});return this.tmpEvents.push(s.on("progress",(function(e){n.onProgress(e)})),s.on("success",i),s.on("error",(function(e){n.fireEvent("error","XHR error: "+e.target.statusText)}))),s},onProgress:function(e){if(e.lengthComputable)var t=e.loaded/e.total;else t=e.loaded/(e.loaded+1e6);this.fireEvent("loading",Math.round(100*t),e.target)},exportPCM:function(e,t,i){e=e||1024,t=t||1e4,i=i||!1;var n=this.backend.getPeaks(e,t),s=[].map.call(n,(function(e){return Math.round(e*t)/t})),o=JSON.stringify(s);return i||window.open("data:application/json;charset=utf-8,"+encodeURIComponent(o)),o},clearTmpEvents:function(){this.tmpEvents.forEach((function(e){e.un()}))},empty:function(){this.backend.isPaused()||(this.stop(),this.backend.disconnectSource()),this.clearTmpEvents(),this.drawer.progress(0),this.drawer.setWidth(0),this.drawer.drawPeaks({length:this.drawer.getWidth()},0)},destroy:function(){this.fireEvent("destroy"),this.clearTmpEvents(),this.unAll(),this.backend.destroy(),this.drawer.destroy()},create:function(t){var i=Object.create(e);return i.init(t),i}};e.util={extend:function(e){var t=Array.prototype.slice.call(arguments,1);return t.forEach((function(t){Object.keys(t).forEach((function(i){e[i]=t[i]}))})),e},getId:function(){return"wavesurfer_"+Math.random().toString(32).substring(2)},ajax:function(t){var i=Object.create(e.Observer),n=new XMLHttpRequest,s=!1;return n.open(t.method||"GET",t.url,!0),n.responseType=t.responseType||"json",n.addEventListener("progress",(function(e){i.fireEvent("progress",e),e.lengthComputable&&e.loaded==e.total&&(s=!0)})),n.addEventListener("load",(function(e){s||i.fireEvent("progress",e),i.fireEvent("load",e),200==n.status||206==n.status?i.fireEvent("success",n.response,e):i.fireEvent("error",e)})),n.addEventListener("error",(function(e){i.fireEvent("error",e)})),n.send(),i.xhr=n,i}},e.Observer={on:function(e,t){this.handlers||(this.handlers={});var i=this.handlers[e];return i||(i=this.handlers[e]=[]),i.push(t),{name:e,callback:t,un:this.un.bind(this,e,t)}},un:function(e,t){if(this.handlers){var i=this.handlers[e];if(i)if(t)for(var n=i.length-1;n>=0;n--)i[n]==t&&i.splice(n,1);else i.length=0}},unAll:function(){this.handlers=null},once:function(e,t){var i=this,n=function(){t.apply(this,arguments),setTimeout((function(){i.un(e,n)}),0)};return this.on(e,n)},fireEvent:function(e){if(this.handlers){var t=this.handlers[e],i=Array.prototype.slice.call(arguments,1);t&&t.forEach((function(e){e.apply(null,i)}))}}},e.util.extend(e,e.Observer),e.WebAudio={scriptBufferSize:256,PLAYING_STATE:0,PAUSED_STATE:1,FINISHED_STATE:2,supportsWebAudio:function(){return!(!window.AudioContext&&!window.webkitAudioContext)},getAudioContext:function(){return e.WebAudio.audioContext||(e.WebAudio.audioContext=new(window.AudioContext||window.webkitAudioContext)),e.WebAudio.audioContext},getOfflineAudioContext:function(t){return e.WebAudio.offlineAudioContext||(e.WebAudio.offlineAudioContext=new(window.OfflineAudioContext||window.webkitOfflineAudioContext)(1,2,t)),e.WebAudio.offlineAudioContext},init:function(t){this.params=t,this.ac=t.audioContext||this.getAudioContext(),this.lastPlay=this.ac.currentTime,this.startPosition=0,this.scheduledPause=null,this.states=[Object.create(e.WebAudio.state.playing),Object.create(e.WebAudio.state.paused),Object.create(e.WebAudio.state.finished)],this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode(),this.setState(this.PAUSED_STATE),this.setPlaybackRate(this.params.audioRate)},disconnectFilters:function(){this.filters&&(this.filters.forEach((function(e){e&&e.disconnect()})),this.filters=null,this.analyser.connect(this.gainNode))},setState:function(e){this.state!==this.states[e]&&(this.state=this.states[e],this.state.init.call(this))},setFilter:function(){this.setFilters([].slice.call(arguments))},setFilters:function(e){this.disconnectFilters(),e&&e.length&&(this.filters=e,this.analyser.disconnect(),e.reduce((function(e,t){return e.connect(t),t}),this.analyser).connect(this.gainNode))},createScriptNode:function(){this.ac.createScriptProcessor?this.scriptNode=this.ac.createScriptProcessor(this.scriptBufferSize):this.scriptNode=this.ac.createJavaScriptNode(this.scriptBufferSize),this.scriptNode.connect(this.ac.destination)},addOnAudioProcess:function(){var e=this;this.scriptNode.onaudioprocess=function(){var t=e.getCurrentTime();t>=e.getDuration()?(e.setState(e.FINISHED_STATE),e.fireEvent("pause")):t>=e.scheduledPause?(e.setState(e.PAUSED_STATE),e.fireEvent("pause")):e.state===e.states[e.PLAYING_STATE]&&e.fireEvent("audioprocess",t)}},removeOnAudioProcess:function(){this.scriptNode.onaudioprocess=null},createAnalyserNode:function(){this.analyser=this.ac.createAnalyser(),this.analyser.connect(this.gainNode)},createVolumeNode:function(){this.ac.createGain?this.gainNode=this.ac.createGain():this.gainNode=this.ac.createGainNode(),this.gainNode.connect(this.ac.destination)},setVolume:function(e){this.gainNode.gain.value=e},getVolume:function(){return this.gainNode.gain.value},decodeArrayBuffer:function(e,t,i){this.offlineAc||(this.offlineAc=this.getOfflineAudioContext(this.ac?this.ac.sampleRate:44100)),this.offlineAc.decodeAudioData(e,function(e){t(e)}.bind(this),i)},getPeaks:function(e){for(var t=this.buffer.length/e,i=~~(t/10)||1,n=this.buffer.numberOfChannels,s=[],o=[],a=0;n>a;a++)for(var r=s[a]=[],l=this.buffer.getChannelData(a),d=0;e>d;d++){for(var c=~~(d*t),h=~~(c+t),u=l[0],p=l[0],f=c;h>f;f+=i){var g=l[f];g>p&&(p=g),u>g&&(u=g)}r[2*d]=p,r[2*d+1]=u,(0==a||p>o[2*d])&&(o[2*d]=p),(0==a||u<o[2*d+1])&&(o[2*d+1]=u)}return this.params.splitChannels?s:o},getPlayedPercents:function(){return this.state.getPlayedPercents.call(this)},disconnectSource:function(){this.source&&this.source.disconnect()},destroy:function(){this.isPaused()||this.pause(),this.unAll(),this.buffer=null,this.disconnectFilters(),this.disconnectSource(),this.gainNode.disconnect(),this.scriptNode.disconnect(),this.analyser.disconnect()},load:function(e){this.startPosition=0,this.lastPlay=this.ac.currentTime,this.buffer=e,this.createSource()},createSource:function(){this.disconnectSource(),this.source=this.ac.createBufferSource(),this.source.start=this.source.start||this.source.noteGrainOn,this.source.stop=this.source.stop||this.source.noteOff,this.source.playbackRate.value=this.playbackRate,this.source.buffer=this.buffer,this.source.connect(this.analyser)},isPaused:function(){return this.state!==this.states[this.PLAYING_STATE]},getDuration:function(){return this.buffer?this.buffer.duration:0},seekTo:function(e,t){return this.scheduledPause=null,null==e&&((e=this.getCurrentTime())>=this.getDuration()&&(e=0)),null==t&&(t=this.getDuration()),this.startPosition=e,this.lastPlay=this.ac.currentTime,this.state===this.states[this.FINISHED_STATE]&&this.setState(this.PAUSED_STATE),{start:e,end:t}},getPlayedTime:function(){return(this.ac.currentTime-this.lastPlay)*this.playbackRate},play:function(e,t){this.createSource();var i=this.seekTo(e,t);e=i.start,t=i.end,this.scheduledPause=t,this.source.start(0,e,t-e),this.setState(this.PLAYING_STATE),this.fireEvent("play")},pause:function(){this.scheduledPause=null,this.startPosition+=this.getPlayedTime(),this.source&&this.source.stop(0),this.setState(this.PAUSED_STATE),this.fireEvent("pause")},getCurrentTime:function(){return this.state.getCurrentTime.call(this)},setPlaybackRate:function(e){e=e||1,this.isPaused()?this.playbackRate=e:(this.pause(),this.playbackRate=e,this.play())}},e.WebAudio.state={},e.WebAudio.state.playing={init:function(){this.addOnAudioProcess()},getPlayedPercents:function(){var e=this.getDuration();return this.getCurrentTime()/e||0},getCurrentTime:function(){return this.startPosition+this.getPlayedTime()}},e.WebAudio.state.paused={init:function(){this.removeOnAudioProcess()},getPlayedPercents:function(){var e=this.getDuration();return this.getCurrentTime()/e||0},getCurrentTime:function(){return this.startPosition}},e.WebAudio.state.finished={init:function(){this.removeOnAudioProcess(),this.fireEvent("finish")},getPlayedPercents:function(){return 1},getCurrentTime:function(){return this.getDuration()}},e.util.extend(e.WebAudio,e.Observer),e.MediaElement=Object.create(e.WebAudio),e.util.extend(e.MediaElement,{init:function(e){this.params=e,this.media={currentTime:0,duration:0,paused:!0,playbackRate:1,play:function(){},pause:function(){}},this.mediaType=e.mediaType.toLowerCase(),this.elementPosition=e.elementPosition},load:function(e,t,i){var n=this,s=document.createElement(this.mediaType);s.controls=this.params.mediaControls,s.autoplay=this.params.autoplay||!1,s.preload="auto",s.src=e,s.style.width="100%",s.addEventListener("error",(function(){n.fireEvent("error","Error loading media element")})),s.addEventListener("canplay",(function(){n.fireEvent("canplay")})),s.addEventListener("ended",(function(){n.fireEvent("finish")})),s.addEventListener("timeupdate",(function(){n.fireEvent("audioprocess",n.getCurrentTime())}));var o=t.querySelector(this.mediaType);o&&t.removeChild(o),t.appendChild(s),this.media=s,this.peaks=i,this.onPlayEnd=null,this.buffer=null,this.setPlaybackRate(this.playbackRate)},isPaused:function(){return!this.media||this.media.paused},getDuration:function(){var e=this.media.duration;return e>=1/0&&(e=this.media.seekable.end()),e},getCurrentTime:function(){return this.media&&this.media.currentTime},getPlayedPercents:function(){return this.getCurrentTime()/this.getDuration()||0},setPlaybackRate:function(e){this.playbackRate=e||1,this.media.playbackRate=this.playbackRate},seekTo:function(e){null!=e&&(this.media.currentTime=e),this.clearPlayEnd()},play:function(e,t){this.seekTo(e),this.media.play(),t&&this.setPlayEnd(t),this.fireEvent("play")},pause:function(){this.media&&this.media.pause(),this.clearPlayEnd(),this.fireEvent("pause")},setPlayEnd:function(e){var t=this;this.onPlayEnd=function(i){i>=e&&(t.pause(),t.seekTo(e))},this.on("audioprocess",this.onPlayEnd)},clearPlayEnd:function(){this.onPlayEnd&&(this.un("audioprocess",this.onPlayEnd),this.onPlayEnd=null)},getPeaks:function(t){return this.buffer?e.WebAudio.getPeaks.call(this,t):this.peaks||[]},getVolume:function(){return this.media.volume},setVolume:function(e){this.media.volume=e},destroy:function(){this.pause(),this.unAll(),this.media&&this.media.parentNode&&this.media.parentNode.removeChild(this.media),this.media=null}}),e.AudioElement=e.MediaElement,e.Drawer={init:function(e,t){this.container=e,this.params=t,this.width=0,this.height=t.height*this.params.pixelRatio,this.lastPos=0,this.createWrapper(),this.createElements()},createWrapper:function(){this.wrapper=this.container.appendChild(document.createElement("wave")),this.style(this.wrapper,{display:"block",position:"relative",userSelect:"none",webkitUserSelect:"none",height:this.params.height+"px"}),(this.params.fillParent||this.params.scrollParent)&&this.style(this.wrapper,{width:"100%",overflowX:this.params.hideScrollbar?"hidden":"auto",overflowY:"hidden"}),this.setupWrapperEvents()},handleEvent:function(e){e.preventDefault();var t=this.wrapper.getBoundingClientRect();return(e.clientX-t.left+this.wrapper.scrollLeft)/this.wrapper.scrollWidth||0},setupWrapperEvents:function(){var e=this;this.wrapper.addEventListener("click",(function(t){var i=e.wrapper.offsetHeight-e.wrapper.clientHeight;if(0!=i){var n=e.wrapper.getBoundingClientRect();if(t.clientY>=n.bottom-i)return}e.params.interact&&e.fireEvent("click",t,e.handleEvent(t))})),this.wrapper.addEventListener("scroll",(function(t){e.fireEvent("scroll",t)}))},drawPeaks:function(e,t){this.resetScroll(),this.setWidth(t),this.params.barWidth?this.drawBars(e):this.drawWave(e)},style:function(e,t){return Object.keys(t).forEach((function(i){e.style[i]!==t[i]&&(e.style[i]=t[i])})),e},resetScroll:function(){null!==this.wrapper&&(this.wrapper.scrollLeft=0)},recenter:function(e){var t=this.wrapper.scrollWidth*e;this.recenterOnPosition(t,!0)},recenterOnPosition:function(e,t){var i=this.wrapper.scrollLeft,n=~~(this.wrapper.clientWidth/2),s=e-n,o=s-i,a=this.wrapper.scrollWidth-this.wrapper.clientWidth;if(0!=a){if(!t&&o>=-n&&n>o){s=i+(o=Math.max(-5,Math.min(5,o)))}(s=Math.max(0,Math.min(a,s)))!=i&&(this.wrapper.scrollLeft=s)}},getWidth:function(){return Math.round(this.container.clientWidth*this.params.pixelRatio)},setWidth:function(e){e!=this.width&&(this.width=e,this.params.fillParent||this.params.scrollParent?this.style(this.wrapper,{width:""}):this.style(this.wrapper,{width:~~(this.width/this.params.pixelRatio)+"px"}),this.updateSize())},setHeight:function(e){e!=this.height&&(this.height=e,this.style(this.wrapper,{height:~~(this.height/this.params.pixelRatio)+"px"}),this.updateSize())},progress:function(e){var t=1/this.params.pixelRatio,i=Math.round(e*this.width)*t;if(i<this.lastPos||i-this.lastPos>=t){if(this.lastPos=i,this.params.scrollParent&&this.params.autoCenter){var n=~~(this.wrapper.scrollWidth*e);this.recenterOnPosition(n)}this.updateProgress(e)}},destroy:function(){this.unAll(),this.wrapper&&(this.container.removeChild(this.wrapper),this.wrapper=null)},createElements:function(){},updateSize:function(){},drawWave:function(e,t){},clearWave:function(){},updateProgress:function(e){}},e.util.extend(e.Drawer,e.Observer),e.Drawer.Canvas=Object.create(e.Drawer),e.util.extend(e.Drawer.Canvas,{createElements:function(){var e=this.wrapper.appendChild(this.style(document.createElement("canvas"),{position:"absolute",zIndex:1,left:0,top:0,bottom:0}));if(this.waveCc=e.getContext("2d"),this.progressWave=this.wrapper.appendChild(this.style(document.createElement("wave"),{position:"absolute",zIndex:2,left:0,top:0,bottom:0,overflow:"hidden",width:"0",display:"none",boxSizing:"border-box",borderRightStyle:"solid",borderRightWidth:this.params.cursorWidth+"px",borderRightColor:this.params.cursorColor})),this.params.waveColor!=this.params.progressColor){var t=this.progressWave.appendChild(document.createElement("canvas"));this.progressCc=t.getContext("2d")}},updateSize:function(){var e=Math.round(this.width/this.params.pixelRatio);this.waveCc.canvas.width=this.width,this.waveCc.canvas.height=this.height,this.style(this.waveCc.canvas,{width:e+"px"}),this.style(this.progressWave,{display:"block"}),this.progressCc&&(this.progressCc.canvas.width=this.width,this.progressCc.canvas.height=this.height,this.style(this.progressCc.canvas,{width:e+"px"})),this.clearWave()},clearWave:function(){this.waveCc.clearRect(0,0,this.width,this.height),this.progressCc&&this.progressCc.clearRect(0,0,this.width,this.height)},drawBars:function(e,t){if(e[0]instanceof Array){var i=e;if(this.params.splitChannels)return this.setHeight(i.length*this.params.height*this.params.pixelRatio),void i.forEach(this.drawBars,this);e=i[0]}[].some.call(e,(function(e){return 0>e}))&&(e=[].filter.call(e,(function(e,t){return t%2==0})));var n=.5/this.params.pixelRatio,s=this.width,o=this.params.height*this.params.pixelRatio,a=o*t||0,r=o/2,l=e.length,d=this.params.barWidth*this.params.pixelRatio,c=Math.max(this.params.pixelRatio,~~(d/2)),h=d+c,u=1;this.params.normalize&&(u=Math.max.apply(Math,e));var p=l/s;this.waveCc.fillStyle=this.params.waveColor,this.progressCc&&(this.progressCc.fillStyle=this.params.progressColor),[this.waveCc,this.progressCc].forEach((function(t){if(t)for(var i=0;s>i;i+=h){var o=Math.round(e[Math.floor(i*p)]/u*r);t.fillRect(i+n,r-o+a,d+n,2*o)}}),this)},drawWave:function(e,t){if(e[0]instanceof Array){var i=e;if(this.params.splitChannels)return this.setHeight(i.length*this.params.height*this.params.pixelRatio),void i.forEach(this.drawWave,this);e=i[0]}if(![].some.call(e,(function(e){return 0>e}))){for(var n=[],s=0,o=e.length;o>s;s++)n[2*s]=e[s],n[2*s+1]=-e[s];e=n}var a=.5/this.params.pixelRatio,r=this.params.height*this.params.pixelRatio,l=r*t||0,d=r/2,c=~~(e.length/2),h=1;this.params.fillParent&&this.width!=c&&(h=this.width/c);var u=1;if(this.params.normalize){var p=Math.max.apply(Math,e),f=Math.min.apply(Math,e);u=-f>p?-f:p}this.waveCc.fillStyle=this.params.waveColor,this.progressCc&&(this.progressCc.fillStyle=this.params.progressColor),[this.waveCc,this.progressCc].forEach((function(t){if(t){t.beginPath(),t.moveTo(a,d+l);for(var i=0;c>i;i++){var n=Math.round(e[2*i]/u*d);t.lineTo(i*h+a,d-n+l)}for(i=c-1;i>=0;i--){n=Math.round(e[2*i+1]/u*d);t.lineTo(i*h+a,d-n+l)}t.closePath(),t.fill(),t.fillRect(0,d+l-a,this.width,a)}}),this)},updateProgress:function(e){var t=Math.round(this.width*e)/this.params.pixelRatio;this.style(this.progressWave,{width:t+"px"})}}),function(){var t=function(){var t=document.querySelectorAll("wavesurfer");Array.prototype.forEach.call(t,(function(t){var i=e.util.extend({container:t,backend:"MediaElement",mediaControls:!0},t.dataset);t.style.display="block";var n=e.create(i);if(t.dataset.peaks)var s=JSON.parse(t.dataset.peaks);n.load(t.dataset.url,s)}))};"complete"===document.readyState?t():window.addEventListener("load",t)}(),this.wavesurfer=Object.create(e);var t="WebAudio";(window.navigator.userAgent.match(/iPad/i)||window.navigator.userAgent.match(/iPhone/i))&&(t="MediaElement");var i=this.$element.find(".wave");this.wave=i,this.wavesurfer.init({container:i[0],waveColor:"#606060",progressColor:"white",height:i.height(),hideScrollbar:!0,cursorColor:"#AAAAAC",barWidth:3,barHeight:1,barGap:null,responsive:!0,backend:t});var n=this;this.wavesurfer.on("audioprocess",(function(){var e=n.wavesurfer.getCurrentTime();e<5?n.triggerProgressChangeEvent("0"):e>.25*n.duration&&e<.5*n.duration?n.triggerProgressChangeEvent("25"):e>.5*n.duration&&e<.75*n.duration?n.triggerProgressChangeEvent("50"):e>.75*n.duration&&e<n.duration&&n.triggerProgressChangeEvent("75")})),this.wavesurfer.on("ready",(function(){n.$element.addClass("active"),n.wavesurfer.drawBuffer(),n.$element.removeClass("active")})),this.wavesurfer.on("finish",(function(){n.triggerProgressChangeEvent("100"),n.reduceWaveHeightContainer(),n.$element.find(".play").removeClass("playing"),n.$element.find(".play").addClass("disabled"),n.$element.find(".rewind").removeClass("disabled")}))},MASERATI.SoundComponent.prototype.triggerProgressChangeEvent=function(e){this.progressEvents.indexOf(e)>-1&&this.sentProgressEvent!=e&&(this.sentProgressEvent=e,this.$element[0].dispatchEvent(new CustomEvent("audioprogresschange",{detail:{progress:e}})),"0"==e?MASERATI.AdobeTracking.tracker.setSatelliteTrack("MediaStreamStart"):MASERATI.AdobeTracking.tracker.setSatelliteTrack("MediaStream"+e))},MASERATI.SoundComponent.prototype.triggerPlayerOpenEvent=function(){this.sentProgressEvent=null,MASERATI.AdobeTracking.tracker.setMediaName("audio:"+this.name),MASERATI.Helpers.log("dispatching event audioplayeropen "+this.name),this.$element[0].dispatchEvent(new CustomEvent("audioplayeropen"))},MASERATI.SoundComponent.prototype.togglePlay=function(e){0==this.playing||e?(this.expandWaveHeightContainer(),this._play()):this._stop()},MASERATI.SoundComponent.prototype._play=function(){this.$element.find(".controls .play").addClass("playing"),this.$element.find(".controls .play").attr("aria-pressed","true"),this.wavesurfer.play(),this.playing=!0,this.manageFallback()},MASERATI.SoundComponent.prototype._stop=function(){this.reduceWaveHeightContainer(),this.$element.find(".controls .play").removeClass("playing"),this.$element.find(".controls .play").attr("aria-pressed","false"),this.wavesurfer.isPlaying()&&this.wavesurfer.pause(),this.playing=!1,this.manageFallback()},MASERATI.SoundComponent.prototype._rewind=function(){this.wavesurfer.isPlaying()&&this.wavesurfer.stop(),this.$element.find(".controls .play").removeClass("playing"),this.$element.find(".controls .play").attr("aria-pressed","false"),this.playing=!1,this.trackProgressFallback()},MASERATI.SoundComponent.prototype._replay=function(){this.wavesurfer.isPlaying()&&this.wavesurfer.stop(),this.$element.find(".controls .play").attr("aria-pressed","true"),this.trackProgressFallback(),this.$element.find(".controls .play").removeClass("disabled"),this.$element.find(".controls .play").addClass("playing"),this.$element.find(".controls .rewind").addClass("disabled"),this.togglePlay()},MASERATI.SoundComponent.prototype.trackProgressFallback=function(){var e=Math.round(this.wavesurfer.getCurrentTime()/this.wavesurfer.getDuration()*1e3)/10+"%",t=this.$element.find(".text-container").width()+"px 100%";this.$element.find(".wave-white").css({width:e,"background-size":t})},MASERATI.SoundComponent.prototype.manageFallback=function(){if($("html").hasClass("no-webaudio"))if(1==this.playing){var e=this;this.$fallbackFunctionTimeout=window.setInterval((function(){e.trackProgressFallback()}),250)}else window.clearInterval(this.$fallbackFunctionTimeout)},MASERATI.SoundComponent.prototype.bindEvents=function(){var e=this;this.$element.find(".controls .play").click((function(){e.togglePlay()})),this.$element.find(".controls .pause").click((function(){})),this.$element.find(".controls .rewind").click((function(){e.togglePlay(!0),e.$element.find(".controls .play").attr("aria-pressed","true"),e.$element.find(".controls .play").removeClass("disabled"),e.$element.find(".controls .play").addClass("playing"),e.$element.find(".controls .rewind").addClass("disabled")}))},MASERATI.SoundComponent.prototype.repaint=function(){this.playing&&this._rewind(),this.wavesurfer.drawer.containerWidth=this.$element.find(".text-container").width(),this.wavesurfer.drawer.containerHeight=this.wave.height(),this.wave.find("wave, canvas").height(this.wave.height()),this.wavesurfer.drawBuffer()},MASERATI.SoundComponent.prototype.play=function(){var e=this;this.wavesurfer.on("ready",(function(){e.repaint(),e.duration=e.wavesurfer.getDuration(),MASERATI.Helpers.Mobile.isMobile()||e._play()}))},MASERATI.SoundComponent.prototype.stop=function(){this._stop()},MASERATI.SoundComponent.prototype.expandWaveHeightContainer=function(){that=this,window.navigator.userAgent.indexOf("MSIE ")>0||navigator.userAgent.match(/Trident.*rv\:11\./)||that.fixOnResize(),that.$element.addClass("active");var e=that.$el.find(".description").outerHeight(!1)+that.$el.find(".title").outerHeight(!1);that.$el.find(".wave-container").css("height",e),(window.navigator.userAgent.indexOf("MSIE ")>0||navigator.userAgent.match(/Trident.*rv\:11\./))&&($(that.$element.find("wave")[0]).css("position","static"),$(that.$element.find("wave")[0]).css("height",0))},MASERATI.SoundComponent.prototype.reduceWaveHeightContainer=function(){that=this,that.$element.removeClass("active"),that.$el.find(".wave-container").css("height","auto")},MASERATI.SoundComponent.prototype.fixOnResize=function(){that=this,that.$element.hasClass("active")?(that.repaint(),that.reduceWaveHeightContainer()):(that.$element.addClass("active"),that.repaint(),that.$element.removeClass("active"))},$((function(){$(".sound-component").each((function(){new MASERATI.SoundComponent($(this))}))}))},function(e,t){MASERATI.SplashPage2=function(e){this.splashCookie={name:"maserati_splash_opened",nameTimeCookie:"maserati_splash_opened_time",path:"/"},this.checkCookie()||this.checkQueryStringBlocker()||(this.$el=e,this.audiosrc=this.$el.data("audiosrc"),this.audio=null,this.btn=this.$el.find(".togglePause")[0],this.$play=this.$el.find(".play-button"),this.$logo=this.$el.find(".logo"),this.$title=this.$el.find(".title"),this.$skip=this.$el.find(".skip"),this.$close=this.$el.find(".close"),this.prepareAudio(),this.bind(),this.$el.addClass("enabled"),$("body").addClass("blocked-scroll"),this.setCookie())},MASERATI.SplashPage2.prototype.prepareAudio=function(){var e=document.createElement("audio"),t=document.createElement("source");t.src=this.audiosrc,e.appendChild(t),this.audio=e},MASERATI.SplashPage2.prototype.bind=function(){var e=this;this.$play.on("click",(function(){$(this).toggleClass("playing"),$(this).hasClass("playing")?e.audio.play():e.audio.pause()})),this.audio.ended=function(){e.$play.removeClass("playing")},this.$skip.on("click",(function(){e.audio.pause(),e.$el.removeClass("enabled"),$("body").removeClass("blocked-scroll")})),this.$close.on("click",(function(){e.audio.pause(),e.$el.removeClass("enabled"),$("body").removeClass("blocked-scroll")})),window.addEventListener("beforeunload",(function(){console.log("beforeunload"),alert("Do you really want to close?")})),setTimeout((function(){e.phase2(),setTimeout((function(){e.phase3()}),5500)}),3e3)},MASERATI.SplashPage2.prototype.phase2=function(){this.$el.addClass("phase-2")},MASERATI.SplashPage2.prototype.phase3=function(){this.$el.addClass("phase-3")},MASERATI.SplashPage2.prototype.checkQueryStringBlocker=function(){let e=window.location.search;return void 0!==e&&""!=e&&null!=e&&e.toUpperCase().indexOf("UTM")>0},MASERATI.SplashPage2.prototype.checkCookie=function(){let e=Cookies.get(this.splashCookie.name);e=!0;let t=Cookies.get(this.splashCookie.nameTimeCookie);return console.log("cookie for splashPage. time: "+t+" session: "+!0),t},MASERATI.SplashPage2.prototype.setCookie=function(){var e=new Date,t=e.getTime(),i=new Date(e.setTime(t+2592e6));Cookies.set(this.splashCookie.nameTimeCookie,"true",{path:this.splashCookie.path,expires:i}),Cookies.set(this.splashCookie.name,"true",{path:this.splashCookie.path})},$((function(){$(".splash-page-2").each((function(){new MASERATI.SplashPage2($(this))}))}))},function(e,t){MASERATI.SplashPage3=function(e){this.splashCookie={name:"maserati_splash_3_opened",nameTimeCookie:"maserati_splash_3_opened_time",path:"/"},this.checkCookie()||this.checkQueryStringBlocker()||(this.$el=e,this.audiosrc=this.$el.data("audiosrc"),this.audio=null,this.btn=this.$el.find(".togglePause")[0],this.$play=this.$el.find(".play-button"),this.$logo=this.$el.find(".logo"),this.$title=this.$el.find(".title"),this.$skip=this.$el.find(".skip"),this.$close=this.$el.find(".close"),this.expireTime=this.$el.data("expiredtime"),this.prepareAudio(),this.bind(),this.$el.addClass("enabled"),$("body").addClass("blocked-scroll"),this.setCookie())},MASERATI.SplashPage3.prototype.prepareAudio=function(){var e=document.createElement("audio"),t=document.createElement("source");t.src=this.audiosrc,e.appendChild(t),this.audio=e},MASERATI.SplashPage3.prototype.bind=function(){var e=this;this.$play.on("click",(function(){$(this).toggleClass("playing"),$(this).hasClass("playing")?e.audio.play():e.audio.pause()})),this.audio.ended=function(){e.$play.removeClass("playing")},this.$skip.on("click",(function(){e.audio.pause(),e.$el.removeClass("enabled"),$("body").removeClass("blocked-scroll")})),this.$close.on("click",(function(){e.audio.pause(),e.$el.removeClass("enabled"),$("body").removeClass("blocked-scroll")})),window.addEventListener("beforeunload",(function(){console.log("beforeunload"),alert("Do you really want to close?")})),setTimeout((function(){e.phase1(),setTimeout((function(){e.phase2()}),2e3)}),0)},MASERATI.SplashPage3.prototype.phase1=function(){this.$el.addClass("phase-1")},MASERATI.SplashPage3.prototype.phase2=function(){this.$el.addClass("phase-2")},MASERATI.SplashPage3.prototype.checkQueryStringBlocker=function(){let e=window.location.search;return void 0!==e&&""!=e&&null!=e&&e.toUpperCase().indexOf("UTM")>0},MASERATI.SplashPage3.prototype.checkCookie=function(){let e=Cookies.get(this.splashCookie.name);e=!0;let t=Cookies.get(this.splashCookie.nameTimeCookie);return console.log("cookie for splashPage. time: "+t+" session: "+!0),t},MASERATI.SplashPage3.prototype.setCookie=function(){var e=new Date,t=e.getTime(),i=new Date(e.setTime(t+60*this.expireTime*1e3));Cookies.set(this.splashCookie.nameTimeCookie,"true",{path:this.splashCookie.path,expires:i}),Cookies.set(this.splashCookie.name,"true",{path:this.splashCookie.path})},MASERATI.SplashPage3.prototype.isSplashVersion2=function(){return"version2"==$("body").data("splashversion")},$((function(){$(".splash-page-3").each((function(){new MASERATI.SplashPage3($(this))}))}))},function(e,t){MASERATI.DataTable=function(e){this.$element=e,this.$container=this.$element.find(".inner-table-container"),this.$table=this.$element.find("table"),this.$overflowClass="overflowing",this.initEvents()},MASERATI.DataTable.prototype.initEvents=function(){this.checkTable();var e=this,t=MASERATI.Helpers.debounce((function(){e.checkTable()}),500);$(window).bind("resize",(function(){t()}))},MASERATI.DataTable.prototype.checkTable=function(){if(this.hasOverflow()){this.$element.addClass(this.$overflowClass);var e=this;this.$container.on("scroll",(function(){e.scrollListener()}))}else this.$element.removeClass(this.$overflowClass),this.$container.off("scroll")},MASERATI.DataTable.prototype.hasOverflow=function(){return MASERATI.Helpers.log(" container width "+this.$container.width()),MASERATI.Helpers.log(" table width "+this.$table.width()),this.$container.width()<this.$table.width()},MASERATI.DataTable.prototype.scrollListener=function(){this.$container.scrollLeft()>0&&this.$element.addClass("scrolled");var e=this.$table.width()-this.$container.width();this.$container.scrollLeft()>=e?this.$element.addClass("scrolledToMax"):this.$element.removeClass("scrolledToMax")},MASERATI.DataTable.prototype.initMobileTable=function(){},MASERATI.DataTable.prototype.deinitMobileTable=function(){},$((function(){$(".data-table").each((function(){new MASERATI.DataTable($(this))}))}))},function(e,t){MASERATI.TextImageCols=function(e){this.$el=e,this.bind(),this.loadComponent()},MASERATI.TextImageCols.prototype.bind=function(){this.inViewHandler()},MASERATI.TextImageCols.prototype.inViewHandler=function(){var e=this;function t(){e.loadComponent()&&$(window).off("scroll",t)}$(window).on("scroll",t)},MASERATI.TextImageCols.prototype.loadComponent=function(){var e=this.$el.offset().top+.01*$(window).height();return e=e<0?0:e,!this.$el.hasClass("in-view")&&$(window).scrollTop()+$(window).height()>=e&&(this.update(),this.$el.addClass("in-view")),this.$el.hasClass("in-view")},MASERATI.TextImageCols.prototype.update=function(){this.$el.find("img.lazy-load").not(".lazy-loaded").each((function(){var e=$(this);e.one("load",(function(){e.addClass("lazy-loaded")})),e.data("src")&&(e.attr("src",e.data("src")),e.removeAttr("data-src"),e.removeData("src")),e.data("srcset")&&(e.attr("srcset",e.data("srcset")),e.removeAttr("data-srcset"),e.removeData("srcset"))}))},$((function(){$(".textimage-2cols .video-container").each((function(){var e=new MASERATI.EmbedVideoContainer($(this));"YouKu"==$(this).data("provider")?e.setupVideo():MASERATI.YoutubeManager.addVideoCallback((function(){e.setupVideo()}))})),$(".textimage-2cols").each((function(){new MASERATI.TextImageCols($(this))}))}))},function(e,t){$((function(){$(".textimage-3cols .video-container").each((function(){var e=new MASERATI.EmbedVideoContainer($(this));"YouKu"==$(this).data("provider")?e.setupVideo():MASERATI.YoutubeManager.addVideoCallback((function(){e.setupVideo()}))})),$(".textimage-3cols").each((function(){new MASERATI.TextImageCols($(this))}))}))},function(e,t){MASERATI.Constants={stateClassOpen:"maseratiIsOpen"},MASERATI.TextImageBackgroundFullHeight=function(e){this.$el=e,this.bind()},MASERATI.TextImageBackgroundFullHeight.prototype.bind=function(){var e=this;this.$el.each((function(){let t=$(this),i=t.find(".img-disclaimer:not(:empty)");i.length>0&&(!t.hasClass("fullScreen")||t.children("img.background").length<=1||MASERATI.Helpers.isSmallDeviceLandscape())&&(i.css({position:"relative"}),e.fitDisclaimer(i),$(window).resize((function(){e.fitDisclaimer(i)})),$(window).resize((function(){e.fitDisclaimer(i)})))})),e.loadComponent(),e.inViewHandler(),e.updateHandler()},MASERATI.TextImageBackgroundFullHeight.prototype.updateHandler=function(){var e=this;function t(){e.update()&&$(window).off("resize",t)}$(window).on("resize",t)},MASERATI.TextImageBackgroundFullHeight.prototype.inViewHandler=function(){var e=this;function t(){e.loadComponent()&&$(window).off("scroll",t)}$(window).on("scroll",t)},MASERATI.TextImageBackgroundFullHeight.prototype.loadComponent=function(){var e=this.$el.offset().top+.01*$(window).height();return e=e<0?0:e,!this.$el.hasClass("in-view")&&$(window).scrollTop()+$(window).height()>=e&&(this.update(),this.$el.addClass("in-view")),this.$el.hasClass("in-view")},MASERATI.TextImageBackgroundFullHeight.prototype.update=function(){var e=".landscape";return $(window).width()<$(window).height()&&(e=".portrait"),0==this.$el.find("img.lazy-load"+e).length&&(e=""),this.$el.find("img.lazy-load"+e).not(".lazy-loaded").each((function(){var e=$(this);e.one("load",(function(){e.addClass("lazy-loaded")})),e.data("src")&&(e.attr("src",e.data("src")),e.removeAttr("data-src"),e.removeData("src")),e.data("srcset")&&(e.attr("srcset",e.data("srcset")),e.removeAttr("data-srcset"),e.removeData("srcset"))})),0==this.$el.find(".img-comp-container").find("img.lazy-load").not(".lazy-loaded").length},MASERATI.TextImageBackgroundFullHeight.prototype.fitDisclaimer=function(e){let t=e.outerHeight();e.css({marginTop:-t})},$((function(){$(".textimage-background-fullheight").each((function(){new MASERATI.TextImageBackgroundFullHeight($(this))})),$(".textimage-background-fullheight .text-container").unwrap()}))},function(e,t){},function(e,t){MASERATI.TextImageFullHeight=function(e){this.$el=e,this.init()},MASERATI.TextImageFullHeight.prototype.init=function(){this.loadComponent(),this.bind()},MASERATI.TextImageFullHeight.prototype.bind=function(){this.$el.find(".excerpt .more").on("click",this.showMore.bind(this)),this.inViewHandler()},MASERATI.TextImageFullHeight.prototype.showMore=function(e){e.preventDefault();var t=this.find(".text-container");t.find(".excerpt").hide(),t.find(".description").show()},MASERATI.TextImageFullHeight.prototype.inViewHandler=function(){var e=this;function t(){e.loadComponent()&&$(window).off("scroll",t)}$(window).on("scroll",t)},MASERATI.TextImageFullHeight.prototype.loadComponent=function(){var e=this.$el.offset().top+.01*$(window).height();return e=e<0?0:e,!this.$el.hasClass("in-view")&&$(window).scrollTop()+$(window).height()>=e&&(this.update(),this.$el.addClass("in-view")),this.$el.hasClass("in-view")},MASERATI.TextImageFullHeight.prototype.update=function(){this.$el.find("img.lazy-load").not(".lazy-loaded").each((function(){var e=$(this);e.addClass("lazy-loaded"),e.data("src")&&(e.attr("src",e.data("src")),e.removeAttr("data-src"),e.removeData("src")),e.data("srcset")&&(e.attr("srcset",e.data("srcset")),e.removeAttr("data-srcset"),e.removeData("srcset"))}))},$((function(){$(".textimage-fullheight").each((function(){new MASERATI.TextImageFullHeight($(this))})),$(".textimage-fullheight .video-container").each((function(){var e=new MASERATI.EmbedVideoContainer($(this));"YouKu"==$(this).data("provider")?e.setupVideo():MASERATI.YoutubeManager.addVideoCallback((function(){e.setupVideo()}))}))}))},function(e,t){MASERATI.TextImageFullHeightOverlay=function(e){this.$el=e,this.init()},MASERATI.TextImageFullHeightOverlay.prototype.init=function(){this.loadComponent(),this.bind()},MASERATI.TextImageFullHeightOverlay.prototype.bind=function(){this.$el.find(".excerpt .more").on("click",this.showMore.bind(this));var e=this.$el.find(".text-container"),t=this.$el.hasClass("mobile-reverse");window.innerHeight>window.innerWidth&&window.innerWidth<768&&(t||e.addClass("not-reversed-padding-mobile")),this.inViewHandler(),this.rightTemplate=this.$el.find(".right-container");var i=this.rightTemplate,n=this;$(window).resize((function(s){this.$el=s,MASERATI.Helpers.getWindowWidth()>=768&&MASERATI.Helpers.getWindowWidth()<1024&&window.innerHeight<window.innerWidth?n.$el.addClass("smartphone-landscape-height"):n.$el.removeClass("smartphone-landscape-height"),0!=i.length&&(window.innerHeight>window.innerWidth?n.$el.find(".text-container").css("justify-content","unset"):window.innerHeight>500&&n.$el.find(".text-container").css("justify-content","flex-end")),window.innerHeight>window.innerWidth&&window.innerWidth<768?t?e.removeClass("not-reversed-padding-mobile"):e.addClass("not-reversed-padding-mobile"):e.removeClass("not-reversed-padding-mobile")})),0!=this.rightTemplate.length&&window.innerHeight<window.innerWidth&&this.$el.find(".text-container").css("justify-content","flex-end")},MASERATI.TextImageFullHeightOverlay.prototype.showMore=function(e){e.preventDefault();var t=this.find(".text-container");t.find(".excerpt").hide(),t.find(".description").show()},MASERATI.TextImageFullHeightOverlay.prototype.inViewHandler=function(){var e=this;function t(){e.loadComponent()&&$(window).off("scroll",t)}$(window).on("scroll",t)},MASERATI.TextImageFullHeightOverlay.prototype.loadComponent=function(){var e=this.$el.offset().top+.01*$(window).height();return e=e<0?0:e,!this.$el.hasClass("in-view")&&$(window).scrollTop()+$(window).height()>=e&&(this.update(),this.$el.addClass("in-view")),this.$el.hasClass("in-view")},MASERATI.TextImageFullHeightOverlay.prototype.update=function(){this.$el.find("img.lazy-load").not(".lazy-loaded").each((function(){var e=$(this);e.addClass("lazy-loaded"),e.data("src")&&(e.attr("src",e.data("src")),e.removeAttr("data-src"),e.removeData("src")),e.data("srcset")&&(e.attr("srcset",e.data("srcset")),e.removeAttr("data-srcset"),e.removeData("srcset"))}))},$((function(){$(".textimage-fullheight-overlay").each((function(){new MASERATI.TextImageFullHeightOverlay($(this))})),$(".textimage-fullheight-overlay .video-container").each((function(){var e=new MASERATI.EmbedVideoContainer($(this));"YouKu"==$(this).data("provider")?e.setupVideo():MASERATI.YoutubeManager.addVideoCallback((function(){e.setupVideo()}))}))}))},function(e,t){MASERATI.TextvideoBackgroundFullheight=function(e){this.$element=e,this.provider=this.$element.data("provider"),this.cc=this.$element.data("cc"),this.videoContainer=this.$element.find(".video-container"),this.videoTag=this.videoContainer.find(".video-tag"),this.videoTagId=this.videoTag.attr("id"),this.videoId=this.$element.data("video"),this.videoAutoplay=this.$element.data("autoplay"),this.videoControls=this.$element.data("controls"),this.playWhenReady=!1,this.playButton=this.$element.find(".play-button"),this.playLoader=this.$element.find(".play-loader"),this.closeButton=this.$element.find(".overlay-close"),this.volumeButton=this.$element.find(".overlay-volume"),this.volumeOn=this.$element.find('.volume-text[data-action="on"]'),this.volumeOff=this.$element.find('.volume-text[data-action="off"]'),this.volumeIcon=this.$element.find(".icon-volume"),this.playIcon=this.$element.find(".icon-play"),this.overlayedText=this.$element.find(".text-container"),this.$element[0].maseratiObject=this,this.player=null,this.progressPoller=0,this.pauseProgressPolling=!1,this.progressEvents=["0","25","50","75","100"],this.sentProgressEvent=null,this.duration=0,this.title="",this.isClosed=!1,this.forceUnMute=!1,this.forceNoOverlayed=!0,this.videoShown=!1,this.viewportIn=null,this.youkuFirstInitialized=!1},MASERATI.TextvideoBackgroundFullheight.prototype.playerInViewport=function(){var e=this.videoContainer.offset().top,t=e+this.videoContainer.outerHeight(),i=$(window).scrollTop()+window.innerHeight,n=$(window).scrollTop();return"none"!==this.videoContainer.css("display")&&i>e&&n<t},MASERATI.TextvideoBackgroundFullheight.prototype.setupVideo=function(){if(console.log("provider: "+this.provider),"YouKu"==this.provider)this.player=new MASERATI.YuokuInterface(this,!0,!0),this.videoTag.addClass("youKuPlayer"),this.setupButtons(),"1"!=this.videoAutoplay||MASERATI.Helpers.Mobile.isMobile()||this.showVideo();else{let e=0;switch(this.videoControls){case"always":e=1;break;case"mobile":e=MASERATI.Helpers.Mobile.isMobile()?1:0}let t="true"===this.cc||!0===this.cc;this.player=MASERATI.getYouTubePlayer(this,0,e,t)}this.viewportIn=!0;var e=this;$(window).scroll((function(){console.log("player in viewport: "+e.playerInViewport()),e.playerInViewport()?MASERATI.Helpers.Mobile.isMobile()?e.viewportIn=!0:e.isClosed||!1!==e.viewportIn||2!=e.player.getPlayerState()||(e.toggleAudio(0),e.player.playVideo(),e.viewportIn=!0):!0===e.viewportIn&&1==e.player.getPlayerState()&&(MASERATI.Helpers.Mobile.isMobile()?e.closeButton.click():e.player.pauseVideo(),e.viewportIn=!1)}))},MASERATI.TextvideoBackgroundFullheight.prototype.toggleAudio=function(e,t,i){if("YouKu"==this.provider)return;(void 0!==e?e:this.player.isMuted())?(t||this.player.unMute(),this.volumeOff.removeClass("hidden"),this.volumeOn.addClass("hidden"),this.volumeIcon.removeClass("volume-off"),this.volumeIcon.attr("aria-pressed","false"),i||this.overlayedText.velocity("fadeOut",(function(){$(this).removeClass("overlayed")}))):(t||this.player.mute(),this.volumeOn.removeClass("hidden"),this.volumeOff.addClass("hidden"),this.volumeIcon.addClass("volume-off"),this.volumeIcon.attr("aria-pressed","true"),i||this.overlayedText.addClass("overlayed").velocity("fadeIn"))},MASERATI.TextvideoBackgroundFullheight.prototype.togglePlay=function(e){if("YouKu"!=this.provider)switch(this.player.getPlayerState()){case YT.PlayerState.PLAYING:e||this.player.pauseVideo(),this.playIcon.addClass("paused"),this.playIcon.attr("aria-pressed","true");break;case YT.PlayerState.PAUSED:e||this.player.playVideo(),this.playIcon.removeClass("paused"),this.playIcon.attr("aria-pressed","false")}},MASERATI.TextvideoBackgroundFullheight.prototype.setupButtons=function(){var e=this;this.playButton.click((function(){e.videoContainer.show(),MASERATI.Helpers.log("click on play "),e.showVideo(),e.closeButton.find(".icon-close").focus()})),"1"!=this.videoAutoplay||MASERATI.Helpers.Mobile.isMobile()?this.playButton.velocity("fadeIn"):e.playLoader.show(),this.closeButton.click((function(){MASERATI.Helpers.log("click on close "),e.playLoader.hide().css("opacity",1),e.playButton.velocity("fadeIn"),e.overlayedText.removeClass("overlayed").velocity("fadeIn"),e.stop(),e.forceUnMute=!0,e.videoShown=!1,setTimeout((function(){e.playButton.focus()}),MASERATI.Animations.opacityDelay)})),this.volumeButton.click((function(){MASERATI.Helpers.log("click on volume "),e.toggleAudio()})),this.playIcon.click((function(){MASERATI.Helpers.log("click on volume "),e.togglePlay(!1)}))},MASERATI.TextvideoBackgroundFullheight.prototype.onPlayerReady=function(e){if(this.duration=this.player.getDuration(),this.player.getVideoData){var t=this.player.getVideoData();this.title=t.title}else this.title=this.videoId;this.setupButtons(),(this.playWhenReady||"1"==this.videoAutoplay)&&(MASERATI.Helpers.Mobile.isMobile()||(this.triggerProgressChangeEvent("0"),this.playButton.click()),this.playWhenReady=!1)},MASERATI.TextvideoBackgroundFullheight.prototype.pollProgress=function(){if(this.pauseProgressPolling)return!1;var e=this.player.getCurrentTime();e<.5?this.triggerProgressChangeEvent("0"):e>.25*this.duration&&e<.5*this.duration?this.triggerProgressChangeEvent("25"):e>.5*this.duration&&e<.75*this.duration?this.triggerProgressChangeEvent("50"):e>.75*this.duration&&e<this.duration&&this.triggerProgressChangeEvent("75")},MASERATI.TextvideoBackgroundFullheight.prototype.triggerProgressChangeEvent=function(e){if(this.progressEvents.indexOf(e)>-1&&this.sentProgressEvent!=e){if(this.sentProgressEvent=e,this.$element[0].dispatchEvent(new CustomEvent("videoprogresschange",{detail:{progress:e}})),1==this.videoAutoplay)return;"0"==e?(MASERATI.AdobeTracking.tracker.setMediaName("video:"+this.title),MASERATI.AdobeTracking.tracker.setSatelliteTrack("MediaStreamStart")):MASERATI.AdobeTracking.tracker.setSatelliteTrack("MediaStream"+e)}},MASERATI.TextvideoBackgroundFullheight.prototype.onPlayerStateChange=function(e){switch(e.data){case YT.PlayerState.ENDED:cancelAnimationFrame(this.progressPoller),this.triggerProgressChangeEvent("100"),this.player.seekTo(0);break;case YT.PlayerState.PLAYING:this.pauseProgressPolling=!1,this.pollProgress(),this.showVideoContainer(),this.toggleAudio(this.player.isMuted()?0:1,!0,this.forceNoOverlayed),this.forceNoOverlayed=!0;break;default:this.pauseProgressPolling=!0}},MASERATI.TextvideoBackgroundFullheight.prototype.showVideoContainer=function(){let e=this;this.videoShown||(this.videoContainer.velocity("fadeIn",MASERATI.Animations.opacityDelay,(function(){e.playerInViewport()||e.player.pauseVideo(),e.viewportIn=!0})),this.playLoader.velocity("fadeOut",MASERATI.Animations.opacityDelay),this.videoShown=!0)},MASERATI.TextvideoBackgroundFullheight.prototype.showVideo=function(){MASERATI.Helpers.log(" video container is ",this.videoContainer),MASERATI.Helpers.log(" triggered play"),this.play()},MASERATI.TextvideoBackgroundFullheight.prototype.play=function(){if(this.player){this.forceUnMute||"1"!=this.videoAutoplay?this.toggleAudio(1,!1,!0):(this.toggleAudio(0,!1,!0),this.forceNoOverlayed=!1),this.forceUnMute=!1,this.playButton.hide(),this.playLoader.show();var e=this;if("YouKu"!=this.provider){var t=function(){e.pollProgress(),e.progressPoller&&(e.progressPoller=requestAnimationFrame(t))};this.progressPoller=requestAnimationFrame(t)}0==e.videoAutoplay&&(MASERATI.Helpers.log("Tracker SetMediaName "+this.title),MASERATI.AdobeTracking.tracker.setMediaName("video:"+this.title)),MASERATI.Helpers.log(this.player),MASERATI.Helpers.log(" starting play");let s=this.playerInViewport();if(this.player.playVideo(),"1"==this.videoAutoplay&&s&&"YouKu"!=this.provider)var i=0,n=setInterval((function(){var t=e.player.getPlayerState();t==YT.PlayerState.PAUSED?e.player.playVideo():(++i>50||t==YT.PlayerState.PLAYING)&&clearInterval(n)}),100);this.isClosed=!1,"YouKu"==this.provider&&(this.youkuFirstInitialized||setTimeout((function(){this.player.stopVideo(),this.player.playVideo(),this.youkuFirstInitialized=!0}),100),this.showVideoContainer())}else this.playWhenReady=!0},MASERATI.TextvideoBackgroundFullheight.prototype.stop=function(){this.videoContainer.velocity("fadeOut",MASERATI.Animations.opacityDelay),this.player&&(cancelAnimationFrame(this.progressPoller),this.player.stopVideo(),this.playIcon.removeClass("paused"),this.playIcon.attr("aria-pressed","false"))};var i=[];$((function(){$(".textvideo-background-fullheight").each((function(){MASERATI.Helpers.log("initializing textvideo-background-fullheight");var e=new MASERATI.TextvideoBackgroundFullheight($(this));"YouKu"==$(this).data("provider")?e.setupVideo():(i.push(e),MASERATI.YoutubeManager.addVideoCallback((function(){e.setupVideo()})))}))}))},function(e,t){MASERATI.TextImageBackgroundOverlay=function(e){this.$el=e,this.bind()},MASERATI.TextImageBackgroundOverlay.prototype.bind=function(){var e=this;this.$el.each((function(){let t=$(this),i=t.find(".img-disclaimer:not(:empty)");i.length>0&&(!t.hasClass("fullScreen")||t.children("img.background").length<=1||MASERATI.Helpers.isSmallDeviceLandscape())&&(i.css({position:"relative"}),e.fitDisclaimer(i),$(window).resize((function(){e.fitDisclaimer(i)})),$(window).resize((function(){e.fitDisclaimer(i)})))})),e.loadComponent(),e.inViewHandler(),e.updateHandler()},MASERATI.TextImageBackgroundOverlay.prototype.updateHandler=function(){var e=this;function t(){e.update()&&$(window).off("resize",t)}$(window).on("resize",t)},MASERATI.TextImageBackgroundOverlay.prototype.inViewHandler=function(){var e=this;function t(){e.loadComponent()&&$(window).off("scroll",t)}$(window).on("scroll",t)},MASERATI.TextImageBackgroundOverlay.prototype.loadComponent=function(){var e=this.$el.offset().top+.01*$(window).height();return e=e<0?0:e,!this.$el.hasClass("in-view")&&$(window).scrollTop()+$(window).height()>=e&&(this.update(),this.$el.addClass("in-view")),this.$el.hasClass("in-view")},MASERATI.TextImageBackgroundOverlay.prototype.update=function(){var e=".landscape";return $(window).width()<$(window).height()&&(e=".portrait"),0==this.$el.find("img.lazy-load"+e).length&&(e=""),this.$el.find("img.lazy-load"+e).not(".lazy-loaded").each((function(){var e=$(this);e.one("load",(function(){e.addClass("lazy-loaded")})),e.data("src")&&(e.attr("src",e.data("src")),e.removeAttr("data-src"),e.removeData("src")),e.data("srcset")&&(e.attr("srcset",e.data("srcset")),e.removeAttr("data-srcset"),e.removeData("srcset"))})),0==this.$el.find(".img-comp-container").find("img.lazy-load").not(".lazy-loaded").length},MASERATI.TextImageBackgroundOverlay.prototype.fitDisclaimer=function(e){let t=e.outerHeight();e.css({marginTop:-t})},$((function(){$(".textimage-background-overlay").each((function(){new MASERATI.TextImageBackgroundOverlay($(this))}))}))},function(e,t){MASERATI.timeline=function(e){this.$element=e,this.$singleElements=e.find(".element"),this.initWaypoints()},MASERATI.timeline.prototype.initWaypoints=function(){this.$singleElements.each((function(e,t){$(t).waypoint({handler:function(e){$(t).removeClass("out-of-viewport")},offset:"80%"})}))},$((function(){var e=$(".timeline");e.length&&new MASERATI.timeline(e)}))},function(e,t){MASERATI.TitleText=function(e){this.$el=e,this.loadComponent(),this.bind()},MASERATI.TitleText.prototype.bind=function(){this.inViewHandler()},MASERATI.TitleText.prototype.inViewHandler=function(){var e=this;function t(){e.loadComponent()&&$(window).off("scroll",t)}$(window).on("scroll",t)},MASERATI.TitleText.prototype.loadComponent=function(){var e=this.$el.offset().top+.01*$(window).height();return e=e<0?0:e,!this.$el.hasClass("in-view")&&$(window).scrollTop()+$(window).height()>=e&&this.$el.addClass("in-view"),this.$el.hasClass("in-view")},$((function(){$(".titletext").each((function(){new MASERATI.TitleText($(this))}))}))},function(e,t){MASERATI.TrimSlider=function(e){var t=this;t.$el=e,t.nav=t.$el.find(".image-selector"),t.currentElement=0,t.tolerance=10,t.elementCount=t.$el.find(".img-comp-container").length,t.documentDirection="rtl"===$("html").attr("dir")?"rtl":"ltr",t.nav.attr("dir","ltr"),t.move=function(e,i){return o(i?e:(t.currentElement+e)%t.elementCount),s(t.currentElement),!1};let i=t.$el.find(".img.landscape"),n=t.$el.find(".img.portrait");if(i.length==n.length){for(let e=0;e<i.length;e++)if(($(i[e]).data("src")||$(n[e]).data("src"))&&$(i[e]).data("src")==$(n[e]).data("src")){t.$el.addClass("no-portrait");break}}else t.$el.addClass("no-portrait");function s(e){var i=!1,n=t.$el.find(".img-comp-overlay").eq(e),s=t.$el.find(".img-comp-container").eq(e).find(".img-comp-slider"),o=0,a=t.$el.find(".img-comp-container").eq(e).find(".help");function r(n){n.preventDefault(),MASERATI.AdobeTracking.tracker.setTrimAction("gallery:Slide"+t.currentElement),MASERATI.AdobeTracking.tracker.setSatelliteTrack("VehicleTrimSlider"),i=!0,o=t.$el.find(".img-comp-container").eq(e).width()}function l(){i=!1}function d(e){var s;if(!i)return!1;(s=function(e){var i=0;e=e||window.event;var s=n[0].getBoundingClientRect();i=null!=e.touches?"rtl"==t.documentDirection?-1*(e.touches[0].pageX-s.right):e.touches[0].pageX-s.left:"rtl"==t.documentDirection?-1*(e.pageX-s.right):e.pageX-s.left;return i}(e))<0&&(s=0),s>o&&(s=o),c(s)}function c(e){var i="rtl"==t.documentDirection?"right":"left";n.css("width",e/o*100+"%"),s.css(i,n.width()/o*100+"%"),a.css(i,n.width()/o*100+"%"),e<a.width()/2||e+a.width()/2>o?a.css("opacity",0):a.css("opacity",1)}s.on("touchstart",r),window.addEventListener("touchend",l),s.on("mousedown",r),window.addEventListener("mouseup",l),window.addEventListener("touchmove",d),window.addEventListener("mousemove",d),s.on("keyup",(function(i){if("39"==i.keyCode||"37"==i.keyCode){o=t.$el.find(".img-comp-container").eq(e).width();var n=s.attr("aria-valuenow");if(n=parseInt(n),"39"==i.keyCode&&(n+=t.tolerance),"37"==i.keyCode&&(n-=t.tolerance),n>100||n<0)return;MASERATI.AdobeTracking.tracker.setTrimAction("gallery:Slide"+t.currentElement),MASERATI.AdobeTracking.tracker.setSatelliteTrack("VehicleTrimSlider"),s.attr("aria-valuenow",n),c(o/100*n)}}))}function o(e){t.$el.find(".img-comp-container").eq(t.currentElement).hide(),t.$el.find(".img-comp-container").removeClass("selected"),t.$el.find(".img-comp-container").eq(e).show(),t.$el.find(".img-comp-container").eq(e).addClass("selected"),e++,t.$el.find(".selector").removeClass("selected"),e--,t.$el.find(".selector").eq(e).addClass("selected"),t.currentElement=e,t.$el.hasClass("in-view")&&t.update()}o(t.currentElement),s(t.currentElement),t.$el.find(".arrow.left").on("click",(function(e){return e.preventDefault(),MASERATI.Helpers.log("Tracker setGalleryAction arrow"),MASERATI.AdobeTracking.tracker.setGalleryAction("trim-slider:arrow"),MASERATI.AdobeTracking.tracker.setSatelliteTrack("GalleryEngage"),t.move(-1)})),t.$el.find(".arrow.right").on("click",(function(e){return e.preventDefault(),MASERATI.Helpers.log("Tracker setGalleryAction arrow"),MASERATI.AdobeTracking.tracker.setGalleryAction("trim-slider:arrow"),MASERATI.AdobeTracking.tracker.setSatelliteTrack("GalleryEngage"),t.move(1)})),t.$el.find(".selector").on("click",(function(e){return e.preventDefault(),MASERATI.Helpers.log("Tracker setGalleryAction dot"),MASERATI.AdobeTracking.tracker.setGalleryAction("trim-slider:dot"),MASERATI.AdobeTracking.tracker.setSatelliteTrack("GalleryEngage"),t.move(t.elementCount-$(e.target).find("~").length-1,!0)})),t.nav.on("swipeleft",(function(e){return e.preventDefault(),MASERATI.Helpers.log("Tracker setGalleryAction arrow"),MASERATI.AdobeTracking.tracker.setGalleryAction("trim-slider:arrow"),MASERATI.AdobeTracking.tracker.setSatelliteTrack("GalleryEngage"),t.move(-1)})),t.nav.on("swiperight",(function(e){return e.preventDefault(),MASERATI.Helpers.log("Tracker setGalleryAction arrow"),MASERATI.AdobeTracking.tracker.setGalleryAction("trim-slider:arrow"),MASERATI.AdobeTracking.tracker.setSatelliteTrack("GalleryEngage"),t.move(1)})),t.$el.find(".prevTrigger").click((function(e){return e.preventDefault(),MASERATI.Helpers.log("Tracker setGalleryAction arrow"),MASERATI.AdobeTracking.tracker.setGalleryAction("trim-slider:arrow"),MASERATI.AdobeTracking.tracker.setSatelliteTrack("GalleryEngage"),t.move(-1)})),t.$el.find(".nextTrigger").click((function(e){return e.preventDefault(),MASERATI.Helpers.log("Tracker setGalleryAction arrow"),MASERATI.AdobeTracking.tracker.setGalleryAction("trim-slider:arrow"),MASERATI.AdobeTracking.tracker.setSatelliteTrack("GalleryEngage"),t.move(1)})),t.$el.find(".slider-container").on("click",(function(e){return e.preventDefault(),(e.offsetX<0||e.offsetX>e.currentTarget.offsetWidth)&&(MASERATI.Helpers.log("Tracker setGalleryAction arrow"),MASERATI.AdobeTracking.tracker.setGalleryAction("trim-slider:arrow"),MASERATI.AdobeTracking.tracker.setSatelliteTrack("GalleryEngage")),e.offsetX<0?t.move(-1):!(e.offsetX>e.currentTarget.offsetWidth)||t.move(1)})),t.loadComponent(),t.inViewHandler(),t.updateHandler()},MASERATI.TrimSlider.prototype.updateHandler=function(){var e=this;function t(){e.update()&&$(window).off("resize",t)}$(window).on("resize",t)},MASERATI.TrimSlider.prototype.inViewHandler=function(){var e=this;function t(){e.loadComponent()&&$(window).off("scroll",t)}$(window).on("scroll",t)},MASERATI.TrimSlider.prototype.loadComponent=function(){var e=this.$el.offset().top+.01*$(window).height();return e=e<0?0:e,!this.$el.hasClass("in-view")&&$(window).scrollTop()+$(window).height()>=e&&(this.update(),this.$el.addClass("in-view")),this.$el.hasClass("in-view")},MASERATI.TrimSlider.prototype.update=function(){var e=".landscape";return $(window).width()<$(window).height()&&(e=".portrait"),this.$el.find(".img-comp-container.selected").find("img.lazy-load"+e).not(".lazy-loaded").each((function(){var e=$(this);e.one("load",(function(){e.addClass("lazy-loaded")})),e.data("src")&&(e.attr("src",e.data("src")),e.removeAttr("data-src"),e.removeData("src")),e.data("srcset")&&(e.attr("srcset",e.data("srcset")),e.removeAttr("data-srcset"),e.removeData("srcset"))})),0==this.$el.find(".img-comp-container").find("img.lazy-load").not(".lazy-loaded").length},$((function(){$(".trim-slider").each((function(){new MASERATI.TrimSlider($(this))}))}))},function(e,t){MASERATI.UspSlider=function(e,t,i){if(this.$el=e,this.$slidesContainer=this.$el.find(".main-slide"),this.$slides=this.$slidesContainer.find(".slide"),this.$pauseTrigger=this.$el.find(".pauseTrigger, .thumbs-pause"),this.$pauseTriggerCircle=this.$pauseTrigger.find("svg circle"),this.$prevTrigger=this.$el.find(".prevTrigger"),this.$nextTrigger=this.$el.find(".nextTrigger"),this.$thumbsContainer=this.$el.find(".thumbs"),this.$thumbs=this.$el.find(".thumb"),this.$dotsContainer=this.$el.find(".thumbs"),this.$dots=this.$el.find(".thumbs .item"),this.$menuStickyWrapper=$("nav"),this.$fullBackgrounds=this.$el.find(".fullBackground ").find(".background-image"),this.delay=t,this.infiniteScrolling=i,this.forcePaused=!1,this.noVertical=!1,this.documentDirection="rtl"===$("html").attr("dir")?"rtl":"ltr",this.pointer="rtl"===this.documentDirection?this.infiniteScrolling?-100*(this.$slides.length-2):-100*(this.$slides.length-1):0,this.endPoint=-100*(this.$slides.length-1),this.imageDelta=this.getImageDelta(15),this.deltaDuration=300,this.deltaEasing="ease-in",this.thumbsOpacity=.4,this.thumbsDuration=300,this.thumbsEasing="ease-in",this.slideDuration=300,this.slideEasing="ease-in","rtl"===this.documentDirection){var n=this;this.$slidesContainer.append(this.$slides.get().reverse()),this.$slidesContainer.velocity({translateX:-this.pointer+"%"},{duration:0,easing:n.deltaEasing}),this.$dotsContainer.append(this.$dots.get().reverse())}this.initFeeling(),this.bindEvents(),this.refreshSlides(),this.refreshPlaceholders(),this.inViewHandler(),this.loadComponent(),(n=this).fixBackgroundSize(),$(window).resize((function(){n.fixBackgroundSize()}))},MASERATI.UspSlider.prototype.getImageDelta=function(e){var t=e;return null!=this.$el.data("delta")&&this.$slidesContainer.find(".text-container:not(.right) .cta").length>0&&(t=this.$el.data("delta")),t},MASERATI.UspSlider.prototype.moveThumbs=function(){this.$el.hasClass("topThumbs")&&this.$slidesContainer.detach().appendTo(this.$el)},MASERATI.UspSlider.prototype.initFeeling=function(){var e=this;this.delay>0&&!1!==this.delay&&this.initWaypoints(this.delay),this.$thumbs.hover((function(){$(this).velocity("stop").velocity({opacity:1},{duration:e.thumbsDuration,easing:e.thumbsEasing})}),(function(){$(this).velocity("stop").velocity({opacity:e.thumbsOpacity},{duration:e.thumbsDuration,easing:e.thumbsEasing})})),this.infiniteScrolling&&("ltr"===this.documentDirection?(this.$slidesContainer.prepend(this.$slides.last().clone(!0).addClass("ghost-slide")),this.$slidesContainer.append(this.$slides.first().clone(!0).addClass("ghost-slide"))):(this.$slidesContainer.prepend(this.$slides.first().clone(!0).addClass("ghost-slide")),this.$slidesContainer.append(this.$slides.last().clone(!0).addClass("ghost-slide"))),this.$thumbsContainer.prepend('<div class="thumb ghost-thumb" style="display: none;"></div>'),this.$thumbsContainer.append('<div class="thumb ghost-thumb" style="display: none;"></div>'),this.$dotsContainer.prepend('<a class="item ghost-item" style="display: none;"></a>'),this.$dotsContainer.append('<a class="item ghost-item" style="display: none;"></a>'),this.endPoint=-100*(this.$slides.length-1),this.$slides=this.$slidesContainer.find(".slide"),this.$thumbs=this.$el.find(".thumb"),this.$dots=this.$el.find(".thumbs .item"),"ltr"===this.documentDirection?(this.pointer=-100,this.$slidesContainer.velocity({translateX:this.pointer+"%"},{duration:0,easing:e.deltaEasing})):(this.pointer=this.infiniteScrolling?-100*(this.$slides.length-2):-100*(this.$slides.length-1),this.$slidesContainer.velocity({translateX:-this.pointer+"%"},{duration:0,easing:e.deltaEasing})),this.refreshSlides())},MASERATI.UspSlider.prototype.bindEvents=function(){var e=this;this.$prevTrigger.click((function(){e.prev()})),this.$nextTrigger.click((function(){e.next()}));let t=this.$el.find(".cta").add(this.$prevTrigger).add(this.$nextTrigger).add(this.$pauseTrigger).add(this.$slides);t.focus((function(){e.$el.addClass("focused")})),t.blur((function(){e.$el.removeClass("focused")})),this.$thumbs.click((function(){e.pointer=-100*(e.$thumbs.toArray().indexOf(this)+1),e.prev(),e.refreshSlides()})),this.$dots.click((function(){e.pointer=-100*(e.$dots.toArray().indexOf(this)+1),e.triggerSlideChangeEvent(),e.prev(),e.refreshSlides()})),this.$el.on("swipeleft",(function(){e.triggerSlideChangeEvent(),e.next()})),this.$el.on("swiperight",(function(){e.triggerSlideChangeEvent(),e.prev()})),$images=this.$slidesContainer.find(".background"),$(window).on("orientationchange",(function(){e.refreshPlaceholders()})),this.$el.parents(".overlayComponent").on("openOverlay",(function(){e.fixBackgroundSize()})),this.$el.parents(".overlayComponent").on("indexChange",(function(){let t=e.$el.parents(".overlayComponent").attr("data-index");console.log("usp slider - preset slide # "+t),e.moveToIndex(parseInt(t))}))},MASERATI.UspSlider.prototype.moveToIndex=function(e){this.pointer=-100*(e+2),console.log("usp slider - pointer # "+this.pointer),this.triggerSlideChangeEvent(),this.prev(),this.refreshSlides()},MASERATI.UspSlider.prototype.triggerSlideChangeEvent=function(){},MASERATI.UspSlider.prototype.refreshPlaceholders=function(){let e=screen.msOrientation||(screen.orientation||screen.mozOrientation||{}).type;!e&&window.orientation%180==0||e&&e.startsWith&&e.startsWith("portrait")?this.$el.addClass("portraitOrientation"):this.$el.removeClass("portraitOrientation")},MASERATI.UspSlider.prototype.focusWithin=function(e){this.$slidesContainer.find(":focus").length>0&&e.focus()},MASERATI.UspSlider.prototype.keyboardMove=function(e){37==e.keyCode?(this.triggerSlideChangeEvent(),this.prev()):39==e.keyCode&&(this.triggerSlideChangeEvent(),this.next())},MASERATI.UspSlider.prototype.next=function(){var e=this;this.infiniteScrolling?this.pointer<=this.endPoint-100?(this.pointer-=100,"ltr"===this.documentDirection?this.$slidesContainer.velocity({translateX:this.pointer+"%"},{begin:function(){},duration:this.slideDuration,easing:this.slideEasing,complete:function(){e.pointer=-100,e.$slidesContainer.velocity({translateX:e.pointer+"%"},{duration:0,easing:e.deltaEasing}),e.refreshSlides()}}):this.$slidesContainer.velocity({translateX:-this.pointer+"%"},{begin:function(){},duration:this.slideDuration,easing:this.slideEasing,complete:function(){e.pointer=-100,e.$slidesContainer.velocity({translateX:-e.pointer+"%"},{duration:0,easing:e.deltaEasing}),e.refreshSlides()}})):(this.pointer-=100,"ltr"===this.documentDirection?this.$slidesContainer.velocity({translateX:this.pointer+"%"},{duration:this.slideDuration,easing:this.slideEasing,complete:function(){e.refreshSlides()}}):this.$slidesContainer.velocity({translateX:-this.pointer+"%"},{duration:this.slideDuration,easing:this.slideEasing,complete:function(){e.refreshSlides()}})):this.pointer<=this.endPoint?("ltr "===this.documentDirection?this.$slidesContainer.velocity({translateX:this.pointer-this.imageDelta+"%"},{duration:this.deltaDuration,easing:this.deltaEasing,complete:function(t){$(t).velocity({translateX:e.endPoint+"%"},{duration:e.deltaDuration,easing:e.deltaEasing})}}):this.$slidesContainer.velocity({translateX:-(this.pointer-this.imageDelta)+"%"},{duration:this.deltaDuration,easing:this.deltaEasing,complete:function(t){$(t).velocity({translateX:-e.endPoint+"%"},{duration:e.deltaDuration,easing:e.deltaEasing})}}),this.pointer=this.endPoint):(this.pointer-=100,"ltr"===this.documentDirection?this.$slidesContainer.velocity({translateX:this.pointer+"%"},{duration:this.slideDuration,easing:this.slideEasing,complete:function(){e.refreshSlides()}}):this.$slidesContainer.velocity({translateX:-this.pointer+"%"},{duration:this.slideDuration,easing:this.slideEasing,complete:function(){e.refreshSlides()}}))},MASERATI.UspSlider.prototype.prev=function(){var e=this;this.infiniteScrolling?this.pointer>-200?(this.pointer+=100,"ltr"===this.documentDirection?this.$slidesContainer.velocity({translateX:this.pointer+"%"},{begin:function(){e.deinitTriggersAnimation()},duration:this.slideDuration,easing:this.slideEasing,complete:function(){e.pointer=-100*(e.$slides.length-2),e.$slidesContainer.velocity({translateX:e.pointer+"%"},{duration:0,easing:e.deltaEasing,complete:function(){e.focusWithin(e.$slidesContainer.find(".active"))}}),e.refreshSlides(!0)}}):this.$slidesContainer.velocity({translateX:-this.pointer+"%"},{begin:function(){e.deinitTriggersAnimation()},duration:this.slideDuration,easing:this.slideEasing,complete:function(){e.pointer=-100*(e.$slides.length-2),e.$slidesContainer.velocity({translateX:-e.pointer+"%"},{duration:0,easing:e.deltaEasing,complete:function(){e.focusWithin(e.$slidesContainer.find(".active"))}}),e.refreshSlides(!0)}})):(this.pointer+=100,"ltr"===this.documentDirection?this.$slidesContainer.velocity({translateX:this.pointer+"%"},{duration:this.slideDuration,easing:this.slideEasing,complete:function(){e.refreshSlides()}}):this.$slidesContainer.velocity({translateX:-this.pointer+"%"},{duration:this.slideDuration,easing:this.slideEasing,complete:function(){e.refreshSlides()}})):this.pointer>-100?("ltr"===this.documentDirection?this.$slidesContainer.velocity({translateX:this.imageDelta+"%"},{duration:this.deltaDuration,easing:this.deltaEasing,complete:function(t){$(t).velocity({translateX:"0%"},{duration:e.deltaDuration,easing:e.deltaEasing})}}):this.$slidesContainer.velocity({translateX:-this.imageDelta+"%"},{duration:this.deltaDuration,easing:this.deltaEasing,complete:function(t){$(t).velocity({translateX:"0%"},{duration:e.deltaDuration,easing:e.deltaEasing})}}),this.pointer=0):(this.pointer+=100,"ltr"===this.documentDirection?this.$slidesContainer.velocity({translateX:this.pointer+"%"},{duration:this.slideDuration,easing:this.slideEasing,complete:function(){e.refreshSlides()}}):this.$slidesContainer.velocity({translateX:-this.pointer+"%"},{duration:this.slideDuration,easing:this.slideEasing,complete:function(){e.refreshSlides()}}))},MASERATI.UspSlider.prototype.triggerAction=function(e,t){"prev"==e?"start"==t?"ltr"===this.documentDirection?this.$slidesContainer.velocity("stop").velocity({translateX:this.pointer+this.imageDelta+"%"},{duration:this.deltaDuration,easing:this.deltaEasing}):this.$slidesContainer.velocity("stop").velocity({translateX:-(this.pointer+this.imageDelta)+"%"},{duration:this.deltaDuration,easing:this.deltaEasing}):"ltr"===this.documentDirection?this.$slidesContainer.velocity("stop").velocity({translateX:this.pointer+"%"},{duration:this.deltaDuration,easing:this.deltaEasing}):this.$slidesContainer.velocity("stop").velocity({translateX:-this.pointer+"%"},{duration:this.deltaDuration,easing:this.deltaEasing}):"start"==t?"ltr"===this.documentDirection?this.$slidesContainer.velocity("stop").velocity({translateX:this.pointer-this.imageDelta+"%"},{duration:this.deltaDuration,easing:this.deltaEasing}):this.$slidesContainer.velocity("stop").velocity({translateX:-(this.pointer-this.imageDelta)+"%"},{duration:this.deltaDuration,easing:this.deltaEasing}):(this.documentDirection,this.$slidesContainer.velocity("stop").velocity({translateX:this.pointer+"%"},{duration:this.deltaDuration,easing:this.deltaEasing}))},MASERATI.UspSlider.prototype.deinitTriggersAnimation=function(){this.$prevTrigger.unbind("hover"),this.$nextTrigger.unbind("hover")},MASERATI.UspSlider.prototype.refreshThumbs=function(){var e=this,t=$(this.$thumbs.get(this.$slidesContainer.find(".active").index())),i=$(this.$dots.get(this.$slidesContainer.find(".active").index())),n=this.$dots.filter(":focus");this.$thumbs.each((function(){$(this).velocity("stop").velocity({opacity:e.thumbsOpacity},{duration:e.thumbsDuration,easing:e.thumbsEasing}),$(this).removeClass("active")})),t.velocity("stop").velocity({opacity:1},{duration:e.thumbsDuration,easing:e.thumbsEasing,complete:function(){t.addClass("active")}}),this.$dots.removeClass("active").attr("tabindex","-1"),i.addClass("active").attr("tabindex","0"),n.length>0&&i.focus()},MASERATI.UspSlider.prototype.refreshSlides=function(e){var t=$(this.$slides.get(Math.floor(this.pointer/-100)));this.$slides.removeClass("active").attr("tabindex","-1"),this.$slides.find("a,[role=button]").attr("tabindex","-1"),t.addClass("active").attr("tabindex","0"),t.find("a,[role=button]").attr("tabindex","0"),this.refreshThumbs(),e||this.focusWithin(t),t.find(".text-container.lightgrey").length>0?this.$dotsContainer.addClass("black"):this.$dotsContainer.removeClass("black"),t.hasClass("right")?this.$dotsContainer.addClass("right"):this.$dotsContainer.removeClass("right"),t.hasClass("left")?this.$dotsContainer.addClass("left"):this.$dotsContainer.removeClass("left"),t.hasClass("lightgrey")?this.$dotsContainer.addClass("lightgrey"):this.$dotsContainer.removeClass("lightgrey"),this.update()},MASERATI.UspSlider.prototype.initWaypoints=function(e){this.$el.waypoint({handler:function(e){},offset:"40%"}),this.$el.waypoint({handler:function(e){},offset:"-80%"})},MASERATI.UspSlider.prototype.bind=function(){this.inViewHandler()},MASERATI.UspSlider.prototype.inViewHandler=function(){var e=this;function t(){e.loadComponent()&&$(window).off("scroll",t)}$(window).on("scroll",t)},MASERATI.UspSlider.prototype.loadComponent=function(){var e=this.$el.offset().top+.01*$(window).height();return e=e<0?0:e,!this.$el.hasClass("in-view")&&$(window).scrollTop()+$(window).height()>=e&&(this.update(),this.$el.addClass("in-view")),this.$el.hasClass("in-view")},MASERATI.UspSlider.prototype.update=function(){this.$el.find(".slide.active").find("img.lazy-load").not(".lazy-loaded").each((function(){var e=$(this);e.one("load",(function(){e.addClass("lazy-loaded")})),e.data("src")&&(e.attr("src",e.data("src")),e.removeAttr("data-src"),e.removeData("src")),e.data("srcset")&&(e.attr("srcset",e.data("srcset")),e.removeAttr("data-srcset"),e.removeData("srcset"))}))},MASERATI.UspSlider.prototype.addBackgroundImages=function(){this.$el.find(".backgroundImage").each((function(){var e=$(this).attr("data-src");$(this).css("background-image","url("+e+")")}))},MASERATI.UspSlider.prototype.fixBackgroundSize=function(){var e=this.$el.find(".fullBackground ").find(".background-image"),t=this.$el.find(".background-container ").find(".background-image-mobile");e.each((function(){$(this).width("auto"),$(this).height("auto");var e=$(this).height(),t=$(this).width(),i=t/e,n=$(window).height();$(window).width()/n>=i&&0!=e&&0!=t?$(this).width("100vw"):0!=e&&0!=t&&$(this).height("100vh")})),t.each((function(){$(this).width("auto"),$(this).height("auto");var e=$(this).height(),t=$(this).width(),i=t/e,n=$(window).height();$(window).width()/n>=i&&0!=e&&0!=t?$(this).width("100vw"):0!=e&&0!=t&&$(this).height("100vh")}))},$((function(){$(".usp-slider").each((function(){new MASERATI.UspSlider($(this),6e3,!0)}))}))},function(e,t){MASERATI.V360Exterior=function(e,t){this.$el=e,this.$parent=t,this.$walkaround=this.$el.children(".walkaround"),this.$controls=this.$walkaround.children(".controls"),this.$hotspotContainer=this.$controls.children(".hotspot_container"),this.$arcLabelsContainer=this.$controls.find(".labels_container"),this.$vbuttons=this.$walkaround.children(".view-buttons"),this.$overlay=this.$walkaround.children(".overlay"),this.$scenes=this.$walkaround.children(".scenes"),this.$dataObj=this.$walkaround.children('div[data-type="data"]'),this.$dragExpMsg=this.$controls.find(".drag-to-explore"),this.$carPositions=["front","right","left","rear"],this.steps,this.startStep,this.svgPath,this.moving,this.dragging,this.dragStartX,this.dragStartY,this.dragSensitivity=20,this.isChanged=!1,this.init()},MASERATI.V360Exterior.prototype.init=function(){this.data=this.loadData(),this.initWalkaround(),this.bindEvents(),this.$el.hasClass("active")||this.$el.hide()},MASERATI.V360Exterior.prototype.loadData=function(){this.scenes=exteriorTrims.scenes||{},this.steps=parseInt(this.$dataObj.children('div[data-type="steps"]').data("value"),10),this.startStep=parseInt(this.$dataObj.children('div[data-type="startStep"]').data("value"),10),this.svgPath=this.$dataObj.children('div[data-type="svgPath"]').data("value"),this.$dataObj.remove()},MASERATI.V360Exterior.prototype.initWalkaround=function(){this.initScenes(),this.initControls()},MASERATI.V360Exterior.prototype.initScenes=function(){let e=this;var t=this.$scenes.children(".scene.dummy");let i="";for(var n in this.scenes)if(this.scenes.hasOwnProperty(n)){""==i&&(i=n);var s=t.clone();s.attr("data-scene",n);var o={};for(var a in this.scenes[n].orientations)switch(a){case"landscape":case"portrait":o=this.scenes[n].orientations[a],this.appendImagesOnScene(s,o,a).remove();var r=this.appendHotspotsOnScene(n,e,a)}this.$scenes.append(s)}r.remove(),t.remove(),this.$scenes.find(".dummy").removeClass("dummy");var l=this.$scenes.children(".scene:first-child").addClass("active");let d=this.$parent.$el.attr("data-orientation"),c=l.children(".images_container."+d);this.lazyLoadImage(c,this.startStep,!0),c.find("img.active").load((function(){e.repositionHotspots()})),this.$hotspotContainer.find(".custom-hotspot").removeClass("currentScene"),this.$hotspotContainer.find(".custom-hotspot[data-scene='"+i+"']").addClass("currentScene")},MASERATI.V360Exterior.prototype.initControls=function(){this.loadArc(),this.toggleHotspotsVisibility(),this.toggleArcLabelsVisibility()},MASERATI.V360Exterior.prototype.loadArc=function(){var e=this;let t=MASERATI.Helpers.pad(this.$walkaround.data("step"),2),i=this.$controls.children(".arc");i.load(this.svgPath+"arc-"+t+".svg",(function(){e.bindArcEvents(i),e.fixDotLabelPosition(),i.find("svg #dot_front, svg #dot_left, svg #dot_right, svg #dot_rear").attr({tabindex:0,role:"button"}),MASERATI.Wcag.EnterBind(i)}))},MASERATI.V360Exterior.prototype.bindArcEvents=function(e){var t=this;e.find("svg #dot_front").click((function(){MASERATI.AdobeTracking.tracker.setV360Action("360view:front"),MASERATI.AdobeTracking.tracker.setSatelliteTrack("View360LinkEngage"),t.animateToStep(t.getStep("front"))})),e.find("svg #dot_right").click((function(){MASERATI.AdobeTracking.tracker.setV360Action("360view:right"),MASERATI.AdobeTracking.tracker.setSatelliteTrack("View360LinkEngage"),t.animateToStep(t.getStep("right"))})),e.find("svg #dot_left").click((function(){MASERATI.AdobeTracking.tracker.setV360Action("360view:left"),MASERATI.AdobeTracking.tracker.setSatelliteTrack("View360LinkEngage"),t.animateToStep(t.getStep("left"))})),e.find("svg #dot_rear").click((function(){MASERATI.AdobeTracking.tracker.setV360Action("360view:rear"),MASERATI.AdobeTracking.tracker.setSatelliteTrack("View360LinkEngage"),t.animateToStep(t.getStep("rear"))})),e.find("svg #dot_front").mouseenter((function(){t.toggleVisibilityLabelMouseOver("front",!0)})).mouseleave((function(){t.toggleVisibilityLabelMouseOver("front",!1)})),e.find("svg #dot_right").mouseenter((function(){t.toggleVisibilityLabelMouseOver("right",!0)})).mouseleave((function(){t.toggleVisibilityLabelMouseOver("right",!1)})),e.find("svg #dot_left").mouseenter((function(){t.toggleVisibilityLabelMouseOver("left",!0)})).mouseleave((function(){t.toggleVisibilityLabelMouseOver("left",!1)})),e.find("svg #dot_rear").mouseenter((function(){t.toggleVisibilityLabelMouseOver("rear",!0)})).mouseleave((function(){t.toggleVisibilityLabelMouseOver("rear",!1)})),t.$carPositions.forEach((function(i){e.find("svg #dot_"+i)[0].addEventListener("keydown",(function(e){switch(KEY_ESC=27,KEY_ENTER=13,e.keyCode){case KEY_ESC:return void t.$vbuttons.find(".exterior").focus();case KEY_ENTER:return void setTimeout((function(){t.$hotspotContainer.find(".custom-hotspot.currentScene."+i+":first").focus()}),1200)}}))}))},MASERATI.V360Exterior.prototype.getStep=function(e){let t=1;switch(e){case"front":break;case"right":t=1+Math.round(this.steps/4);break;case"rear":t=1+Math.round(this.steps/2);break;case"left":t=this.steps+1-Math.round(this.steps/4)}return t},MASERATI.V360Exterior.prototype.animateToStep=function(e){var t=this;if(this.moving)return;let i=this.$walkaround.data("step"),n=(e-i+this.steps)%this.steps>this.steps/2?-1:1;this.moving=setInterval((function(){e==i?(clearInterval(t.moving),t.moving=null):(i+=n,i<1&&(i+=t.steps),i>t.steps&&(i%=t.steps),t.gotoStep(i))}),66)},MASERATI.V360Exterior.prototype.gotoStep=function(e){var t=this;if(this.$dragExpMsg.is(":visible")&&(this.$dragExpMsg.hide(),t.$parent.$el.addClass("user-rotate-interaction"),t.$parent.showPriceModelActive()),this.closeOverlay(),this.$arcLabelsContainer.children(".arc-label").removeClass("hover"),e>=1&&e<=this.steps){this.$walkaround.data("step",e);var i=t.$scenes.children(".scene.active"),n=t.$parent.$el.data("orientation");i.each((function(i,s){var o=$(s).find(".images_container."+n);t.lazyLoadImage(o,e)})),this.toggleHotspotsVisibility(),this.toggleArcLabelsVisibility(),this.loadArc()}},MASERATI.V360Exterior.prototype.toggleHotspotsVisibility=function(){let e=this.$walkaround.data("step"),t=this;this.$hotspotContainer.removeClass("front right left rear"),this.$carPositions.forEach((function(i){e==t.getStep(i)&&t.$hotspotContainer.addClass(i).attr("position",i)}))},MASERATI.V360Exterior.prototype.repositionHotspots=function(){if(!this.$el.hasClass("active"))return;let e=this.$parent.$el.attr("data-orientation"),t=this.$scenes.find(".scene.active .images_container."+e+" img.active"),i=this.$controls.find(".custom-hotspot"),n=this.$walkaround.width(),s=this.$walkaround.height(),o=t[0].naturalWidth,a=t[0].naturalHeight,r=i.width(),l=1;l=n/s<o/a?this.$walkaround.height()/a:this.$walkaround.width()/o,i.each((function(){let e=parseInt($(this).attr("x-offset"),10),t=parseInt($(this).attr("y-offset"),10),i=$('html[dir="rtl"]').length>0?"right":"left";$(this).css(i,n/2+l*e-r/2+"px"),$(this).css("top",s/2+l*t-r/2+"px")}))},MASERATI.V360Exterior.prototype.fixDotLabelPosition=function(){var e=this,t=e.$parent.$el.offset().top,i=$(".new-menu").height();this.$carPositions.forEach((function(n){let s=e.$controls.children(".arc").find("svg #dot_"+n);var o=s.offset();let a=e.$arcLabelsContainer.children("#dot-lbl-"+n),r=a.width(),l=s[0].getBoundingClientRect().width;o.left=o.left-r/2+l/2,o.top=o.top-t+i,a.css(o)}))},MASERATI.V360Exterior.prototype.toggleArcLabelsVisibility=function(){let e=this.$walkaround.data("step"),t=this;this.$arcLabelsContainer.removeClass("front right left rear"),this.$carPositions.forEach((function(i){e!=t.getStep(i)||t.$dragExpMsg.is(":visible")||t.$arcLabelsContainer.addClass(i)}))},MASERATI.V360Exterior.prototype.toggleVisibilityLabelMouseOver=function(e,t){t?this.$arcLabelsContainer.children("#dot-lbl-"+e).addClass("hover"):this.$arcLabelsContainer.children("#dot-lbl-"+e).removeClass("hover")},MASERATI.V360Exterior.prototype.appendHotspotsOnScene=function(e,t,i){var n=this.$controls.children(".hotspot_container"),s=n.children("div.dummy"),o=this.scenes[e].orientations[i].hotspots||{};for(let c=0;c<o.length;c++){let o=this.scenes[e].orientations[i].hotspots[c],h=o.positions||{};for(var a in o.container=".walkaround",h)if(h.hasOwnProperty(a)){var r=s.clone(),l=h[a].x,d=h[a].y;r.addClass(a),r.removeClass("dummy"),r.attr("data-scene",e),r.attr("data-orientation",i),r.attr("x-offset",l),r.attr("y-offset",d),r.attr("aria-label",o.title),r.on("click",(function(){t.$parent.openOverlay(this,o)})),n.append(r)}}return MASERATI.Wcag.EnterBind(this.$el),s},MASERATI.V360Exterior.prototype.lazyLoadImage=function(e,t,n){var s=$(e).find("img");if(n){this.lazyLoadNextImageFromStep(4,s,t),this.lazyLoadPrevImageFromStep(4,s,t)}else for(i=0;i<s.length;i++){var o=$(s[i]);o.one("load",(function(){$(this).addClass("lazy-loaded")})),o.data("src")&&(o.attr("src",o.data("src")),o.removeAttr("data-src"),o.removeData("src")),o.data("srcset")&&(o.attr("srcset",o.data("srcset")),o.removeAttr("data-srcset"),o.removeData("srcset"))}$(s).removeClass("active"),$(e).find("img:nth-child("+t+")").addClass("active")},MASERATI.V360Exterior.prototype.lazyLoadNextImageFromStep=function(e,t,i){for(x=e;x>0;x--){var n=t[i-1+x],s=$(n);s.one("load",(function(){$(this).addClass("lazy-loaded")})),s.data("src")&&(s.attr("src",s.data("src")),s.removeAttr("data-src"),s.removeData("src")),s.data("srcset")&&(s.attr("srcset",s.data("srcset")),s.removeAttr("data-srcset"),s.removeData("srcset"))}},MASERATI.V360Exterior.prototype.lazyLoadPrevImageFromStep=function(e,t,i){for(y=-1;y<=e+1;y++){var n=t[(i-y).mod(this.steps)],s=$(n);s.one("load",(function(){$(this).addClass("lazy-loaded")})),s.data("src")&&(s.attr("src",s.data("src")),s.removeAttr("data-src"),s.removeData("src")),s.data("srcset")&&(s.attr("srcset",s.data("srcset")),s.removeAttr("data-srcset"),s.removeData("srcset"))}},MASERATI.V360Exterior.prototype.appendImagesOnScene=function(e,t,i){var n=e.children(".images_container."+i),s=n.children("img.dummy");for(let e=1;e<=this.steps;e++){var o=s.clone();e==this.startStep&&o.addClass("active");let i="";i="Y"==t.addOriginalPath||"y"==t.addOriginalPath||"true"==t.addOriginalPath||"True"==t.addOriginalPath||"TRUE"==t.addOriginalPath||!1?t.imgRoot+t.imgBaseName+MASERATI.Helpers.pad(e,2)+"/original/"+t.imgBaseName+MASERATI.Helpers.pad(e,2)+t.imgExtension:t.imgRoot+t.imgBaseName+MASERATI.Helpers.pad(e,2)+t.imgExtension,o.attr("data-src",i),t.hasOwnProperty("imgsAltDescription")&&o.attr("alt",t.imgsAltDescription[MASERATI.Helpers.pad(e,2)]),n.append(o)}return s},MASERATI.V360Exterior.prototype.bindEvents=function(){var e=this;function t(){e.percentageSeen()&&$(window).off("scroll",t)}$(window).keydown((function(t){e.rotateFromKeyboard(t)})),this.$walkaround.bind("touchstart mousedown",(function(t){e.startRotate(t)})),this.$walkaround.bind("touchmove mousemove",(function(t){e.dragRotate(t)})),this.$walkaround.bind("touchend mouseup",(function(t){e.endRotate(t)})),$(window).resize((function(){window.innerHeight>window.innerWidth?e.$parent.$el.attr("data-orientation","portrait"):e.$parent.$el.attr("data-orientation","landscape"),e.repositionHotspots(),e.fixDotLabelPosition()})),$(window).on("orientationchange",(function(t){var i="portrait"==e.$parent.$el.data("orientation")?"landscape":"portrait";e.$parent.$el.attr("data-orientation",i),e.$parent.$el.data("orientation",i);var n=e.$scenes.children(".scene.active").find(".images_container."+i),s=e.$walkaround.data("step");e.lazyLoadImage(n,s),e.repositionHotspots(),e.fixDotLabelPosition()})),$(window).on("scroll",t),this.$overlay.children(".overlay-close").click((function(){e.closeOverlay()})),$(".custom-hotspot",e.$hotspotContainer).each((function(t,i){i.addEventListener("keydown",(function(t){switch(KEYCODE_ESC=27,KEYCODE_LEFT=37,KEYCODE_RIGHT=39,t.keyCode){case KEYCODE_LEFT:case KEYCODE_RIGHT:e.rotateFromKeyboard(t);break;case KEYCODE_ESC:let i=e.$hotspotContainer.attr("position");e.$controls.children(".arc").find("svg #dot_"+i).focus()}}))}))},MASERATI.V360Exterior.prototype.rotateFromKeyboard=function(e){!this.moving&&this.$el.hasClass("active")&&MASERATI.Helpers.inViewport(this.$el)&&(37==e.keyCode?(this.closeOverlay(),this.clockwiseRotate()):39==e.keyCode&&(this.closeOverlay(),this.counterclockwiseRotate()))},MASERATI.V360Exterior.prototype.startRotate=function(e){this.dragging=!0,this.dragStartX="mousedown"==e.type?e.clientX:e.originalEvent.targetTouches[0].clientX,this.dragStartY="mousedown"==e.type?e.clientY:e.originalEvent.targetTouches[0].clientY},MASERATI.V360Exterior.prototype.dragRotate=function(e){if(this.dragging){var t="mousemove"==e.type?e.clientX:e.originalEvent.targetTouches[0].clientX,i="mousemove"==e.type?e.clientY:e.originalEvent.targetTouches[0].clientY;this.isChanged=t!=this.dragStartX,Math.abs(i-this.dragStartY)<.7*Math.abs(t-this.dragStartX)&&(e.preventDefault(),this.closeOverlay(),t-this.dragStartX>this.dragSensitivity?(this.dragStartX=t,this.dragStartY=i,this.counterclockwiseRotate()):t-this.dragStartX<-this.dragSensitivity&&(this.dragStartX=t,this.dragStartY=i,this.clockwiseRotate()))}},MASERATI.V360Exterior.prototype.endRotate=function(e){this.dragging=!1,this.isChanged&&(MASERATI.AdobeTracking.tracker.set360VehicleModelName(this.$parent.getCurrentModel()),MASERATI.AdobeTracking.tracker.setSatelliteTrack("View360Interaction"),setTimeout((function(){MASERATI.AdobeTracking.tracker.restoreVehicleModelName()}),500),this.isChanged=!1)},MASERATI.V360Exterior.prototype.clockwiseRotate=function(){let e=this.$walkaround.data("step")-1;e<1&&(e+=this.steps),this.gotoStep(e)},MASERATI.V360Exterior.prototype.counterclockwiseRotate=function(){let e=this.$walkaround.data("step")+1;e>this.steps&&(e%=this.steps),this.gotoStep(e)},MASERATI.V360Exterior.prototype.percentageSeen=function(){if(this.$el.hasClass("animated"))return!0;var e=this.$el.offset().top,t=$(window).scrollTop()+$(window).height();if(t>=e+.3*$(window).height()){var i=this.startStep;return this.animateToStep(i),this.$el.addClass("animated"),console.log("v360: 30%"),!0}if(t>=e+.2*$(window).height()){i=(this.startStep+3)%36;return this.animateToStep(i),console.log("v360: 20%"),!1}if(t>=e+.1*$(window).height()){i=(this.startStep+6)%36;return this.animateToStep(i),console.log("v360: 10%"),!1}return!1},MASERATI.V360Exterior.prototype.closeOverlay=function(){this.$walkaround.find(".custom-hotspot.active").focus(),this.$overlay.removeClass("opened"),this.$overlay.find(".overlay-close, .overlay-description, .cta a").removeAttr("role"),this.$overlay.attr("tabindex","-1"),this.$overlay.find(".overlay-close, .overlay-description, .cta a").attr("tabindex","-1"),this.$walkaround.find(".custom-hotspot").removeClass("off active")},MASERATI.V360Exterior.prototype.loadScene=function(e){var t=this.$parent.$el.data("orientation"),i=this.$scenes.children('.scene[data-scene="'+e+'"]'),n=i.find(".images_container."+t),s=this.$walkaround.data("step");i.length>0&&(this.lazyLoadImage(n,s,!0),this.$scenes.children(".scene").not(i).removeClass("active"),i.addClass("active"),this.$hotspotContainer.find(".custom-hotspot").removeClass("currentScene"),this.$hotspotContainer.find(".custom-hotspot[data-scene='"+e+"']").addClass("currentScene"))},MASERATI.V360Exterior.prototype.changeScene=function(e){this.closeOverlay(),this.loadScene(e)},MASERATI.V360Exterior.prototype.onShown=function(){this.repositionHotspots(),this.fixDotLabelPosition()}},function(e,t){MASERATI.V360Interior=function(e,t){this.$el=e,this.$parent=t,this.$panorama=this.$el.children(".panorama"),this.$controls=this.$panorama.children(".controls"),this.$overlay=this.$panorama.children(".overlay"),this.$vbuttons=this.$panorama.children(".view-buttons"),this.$dataObj=this.$panorama.children('div[data-type="data"]'),this.panoramaId="panorama-"+Math.floor(1e3*Math.random()),this.autoload=!1,this.viewer,this.scenes,this.loaderHTML,this.firstScene,this.forceScene,this.init()},MASERATI.V360Interior.prototype.init=function(){this.data=this.loadData(),this.initPanorama(),this.bindEvents(),this.$el.hasClass("active")||this.$el.hide()},MASERATI.V360Interior.prototype.refresh=function(){this.viewer.destroy(),this.initPannellum(),this.$vbuttons.insertAfter(".pnlm-render-container",this.$panorama),this.$controls.insertAfter(".pnlm-render-container",this.$panorama),this.$panorama.append(this.$overlay),this.bindEvents()},MASERATI.V360Interior.prototype.loadData=function(){this.loaderHTML=this.$dataObj.find('div[data-type="common"] div[data-type="loading"]').html(),this.scenes=interiorTrims.scenes||{},this.$dataObj.remove()},MASERATI.V360Interior.prototype.initPanorama=function(){this.$panorama.attr("id",this.panoramaId),this.parseScenes(),this.initPannellum()},MASERATI.V360Interior.prototype.parseScenes=function(){var e=this;for(var t in this.scenes)null==this.firstScene&&(this.firstScene=t),this.scenes.hasOwnProperty(t)&&null!=this.scenes[t].hotSpots&&this.scenes[t].hotSpots.forEach((function(t){t.clickHandlerFunc=function(i){e.$parent.openOverlay(i,t.clickHandlerArgs)}}))},MASERATI.V360Interior.prototype.initPannellum=function(){var e=this.getParams();this.viewer=pannellum.viewer(this.panoramaId,e)},MASERATI.V360Interior.prototype.bindEvents=function(){var e=this;this.viewer.on("load",(function(){e.$panorama.removeClass("loading"),e.$controls.removeClass("hidden"),e.$vbuttons.insertAfter(".pnlm-render-container",e.$panorama),e.$controls.insertAfter(".pnlm-render-container",e.$panorama),e.hotspotsTabNavigation(),e.viewer.isOrientationSupported()||e.$controls.find("#orientation").remove()})),this.viewer.on("error",(function(){e.$panorama.removeClass("loading"),e.$controls.addClass("hidden")})),this.$controls.find("#zoom-in").click((function(t){e.viewer.setHfov(e.viewer.getHfov()-10)})),this.$controls.find("#zoom-out").click((function(t){e.viewer.setHfov(e.viewer.getHfov()+10)})),this.$controls.find("#fullscreen").click((function(t){e.viewer.toggleFullscreen()})),this.$controls.find("#orientation").click((function(t){e.viewer.isOrientationActive()?(e.viewer.stopOrientation(),this.innerHTML="&#x25ca;"):(e.viewer.startOrientation(),this.innerHTML="&#x25ce;")})),this.$overlay.children(".overlay-close").click((function(){e.closeOverlay()})),MASERATI.Wcag.EnterBind(this.$controls)},MASERATI.V360Interior.prototype.getParams=function(){return{default:{firstScene:this.firstScene,sceneFadeDuration:1e3,autoLoad:this.autoload,maxHfov:90,hfov:75,minHfov:window.innerWidth<window.innerHeight?25:50,yaw:-15.5,pitch:-14.5,orientationOnByDefault:!0,showControls:!1},scenes:this.scenes,strings:{loadButtonLabel:this.loaderHTML,loadingLabel:this.loaderHTML}}},MASERATI.V360Interior.prototype.closeOverlay=function(){this.$panorama.find(".custom-hotspot.active").focus(),this.$overlay.removeClass("opened"),this.$overlay.find(".overlay-close, .overlay-description, .cta a").removeAttr("role"),this.$overlay.attr("tabindex","-1"),this.$overlay.find(".overlay-close, .overlay-description, .cta a").attr("tabindex","-1"),this.$panorama.find(".custom-hotspot").removeClass("off active")},MASERATI.V360Interior.prototype.hotspotsTabNavigation=function(){var e=this;e.$panorama.find(".custom-hotspot").attr({tabindex:0,role:"button"}),MASERATI.Wcag.EnterBind(e.$panorama);let t=$(".custom-hotspot",e.$panorama);KEYCODE_TAB=9,KEYCODE_ESC=27,t.each((function(t,i){i.addEventListener("keydown",(function(t){if(t.keyCode!==KEYCODE_ESC&&("Tab"===t.key||t.keyCode===KEYCODE_TAB||t.keyCode===KEYCODE_ESC))if(t.shiftKey){var i=$(this)[0];let n=$(this).index()-2,s=e.viewer.getConfig().hotSpots[n];void 0!==s&&(t.preventDefault(),e.viewer.lookAt(s.pitch,s.yaw,e.viewer.hfov,1e3,(function(){$(i).prev().focus()})))}else{i=$(this)[0];let n=$(this).index(),s=e.viewer.getConfig().hotSpots[n];void 0!==s&&(t.preventDefault(),e.viewer.lookAt(s.pitch,s.yaw,e.viewer.hfov,1e3,(function(){$(i).next().focus()})))}}))}))},MASERATI.V360Interior.prototype.changeScene=function(e){this.closeOverlay(),this.$el.hasClass("active")?this.viewer&&(this.viewer.isLoaded()?(this.$panorama.addClass("loading"),this.viewer.loadScene(e,this.viewer.getPitch(),this.viewer.getYaw(),this.viewer.getHfov())):(this.firstScene=e,this.refresh())):this.forceScene=e},MASERATI.V360Interior.prototype.onShown=function(){this.$panorama.find(".pnlm-load-button").trigger("click"),this.$panorama.find(".pnlm-load-button, .pnlm-load-box").hide(),null!=this.forceScene&&this.forceScene!=this.viewer.getScene()&&this.changeScene(this.forceScene)}},function(e,t){MASERATI.V360=function(e){this.$el=e,this.$exterior=this.$el.children(".exterior"),this.$interior=this.$el.children(".interior"),this.$ctaOverlay=this.$el.find(".overlay .cta"),this.$vbuttons=this.$el.find(".view-buttons"),this.$vbtnInt=this.$vbuttons.children(".interior"),this.$vbtnExt=this.$vbuttons.children(".exterior"),this.$models=this.$el.find(".models .model"),this.loadComponent(),this.exteriorObj,this.interiorObj,this.switchingTimer,this.init()},MASERATI.V360.prototype.getCurrentModel=function(){return"cta"==this.$el.find(".models").find(".model.active").attr("data-linktracking").split(":")[0]?this.$el.find(".models").find(".model.active").attr("data-linktracking").split(":")[2]:this.$el.find(".models").find(".model.active").attr("data-linktracking").split(":")[0]},MASERATI.V360.prototype.init=function(){window.innerHeight>window.innerWidth?this.$el.attr("data-orientation","portrait"):this.$el.attr("data-orientation","landscape");var e=this;this.$exterior.each((function(){e.exteriorObj=new MASERATI.V360Exterior($(this),e)})),this.$interior.each((function(){e.interiorObj=new MASERATI.V360Interior($(this),e)})),this.$vbtnInt.click((function(){e.showInterior()})),this.$vbtnExt.click((function(){e.showExterior()})),this.$models.click((function(){e.changeScene($(this))})),this.inViewHandler()},MASERATI.V360.prototype.showInterior=function(){this.swicthExtInt(this.$interior,this.$vbtnInt,this.$exterior,this.$vbtnExt);var e=this;requestAnimationFrame((function(){e.interiorObj.onShown()}))},MASERATI.V360.prototype.showExterior=function(){this.swicthExtInt(this.$exterior,this.$vbtnExt,this.$interior,this.$vbtnInt);var e=this;requestAnimationFrame((function(){e.exteriorObj.onShown()}))},MASERATI.V360.prototype.swicthExtInt=function(e,t,i,n){var s=this;e.show(),requestAnimationFrame((function(){n.removeClass("active"),i.removeClass("active"),t.addClass("active"),e.addClass("active"),s.switchingTimer&&clearTimeout(s.switchingTimer),s.switchingTimer=setTimeout((function(){i.hide()}),300)}))},MASERATI.V360.prototype.changeScene=function(e){if(!e.hasClass("active")){this.$models.removeClass("active"),e.addClass("active");var t=e.data("scene");this.interiorObj&&this.interiorObj.changeScene(t),this.exteriorObj&&this.exteriorObj.changeScene(t),this.showPriceModelActive()}},MASERATI.V360.prototype.scrollTo360Component=function(){var e=0,t=this.$el[0],i=$("body").find("#maserati_menu").length>0&&!$("body").find("#maserati_menu").hasClass("not-sticky");i=i||$("body").find("#maserati_menu_2018").length>0&&!$("body").find("#maserati_menu_2018").hasClass("not-sticky");var n=$("body").find(".nav-anchor").length>0;i&&(e=$("#maserati_menu").outerHeight()||$("#maserati_menu_2018").outerHeight()),n&&$(t).offset().top>$(window).height()&&(e=$("body").find(".nav-anchor").outerHeight()),$(t).velocity("scroll",{duration:MASERATI.Animations.ctaScrollSpeed,easing:MASERATI.Animations.ctaEasing,offset:-e})},MASERATI.V360.prototype.openOverlay=function(e,t){if(t){var i=this;console.log(i.$el),this.scrollTo360Component();var n=$(e.srcElement||e).parents(t.container),s=n.find(".overlay"),o=n.find(".overlay-close"),a=s.find(".overlay-title"),r=s.find(".overlay-description"),l=s.find(".cta a");t.title=t.title.replace(/&quot;/g,'"'),a.text(t.title),r.html(t.description),s.attr({tabindex:0}),r.attr({tabindex:1}),o.attr({tabindex:4,role:"button"}),t.ctaText&&t.ctaLink?(l.text(t.ctaText),l.attr("href",t.ctaLink),l.attr({tabindex:2,role:"button","data-linktracking":t.ctaTracking+t.id}),l.parent().show()):l.parent().hide();var d=n.find(".custom-hotspot");d.addClass("off"),d.removeClass("active");var c=e.srcElement||e;if(c.classList.add("active"),c.classList.remove("off"),MASERATI.Wcag.EnterBind(s),MASERATI.AdobeTracking.tracker.setV360Action(t.hotspostTracking+t.id),MASERATI.AdobeTracking.tracker.setSatelliteTrack("View360LinkEngage"),!s.hasClass("opened")){var h=0,u=$("#maserati_menu").outerHeight()||$("#maserati_menu_2018").outerHeight();$(".maserati_menu_otherelement").each((function(){h+=$(this).outerHeight()})),null!==u&&(h+=u),$("html, body").animate({scrollTop:i.$el.offset().top-h},200,(function(){s.addClass("opened"),s.one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",(function(e){i.trapOverlayFocus(s),e.preventDefault()}))}))}}},MASERATI.V360.prototype.changeCtaStyle=function(e,t){switch(t){case"white":e.attr("class","cta border-grey");break;default:e.attr("class","cta bg-blue color-white")}},MASERATI.V360.prototype.trapOverlayFocus=function(e){var t=this,i=e[0].querySelectorAll("a[href]:not([disabled]), .overlay-close, .overlay-description"),n=i[i.length-2],s=i[0],o=i[i.length-1];KEYCODE_TAB=9,KEYCODE_ESC=27,$(window).on("keydown",(function(i){i.keyCode===KEYCODE_ESC&&e.hasClass("opened")&&(t.exteriorObj.closeOverlay(),t.interiorObj.closeOverlay())})),s.addEventListener("keydown",(function(e){if("Tab"===e.key||e.keyCode===KEYCODE_TAB||e.keyCode===KEYCODE_ESC)if(e.shiftKey)document.activeElement===n&&(d.focus(),e.preventDefault());else if(e.keyCode===KEYCODE_ESC)t.exteriorObj.closeOverlay(),t.interiorObj.closeOverlay();else if(document.activeElement===s)return void e.preventDefault()})),n.addEventListener("keydown",(function(e){if("Tab"===e.key||e.keyCode===KEYCODE_TAB||e.keyCode===KEYCODE_ESC)if(e.shiftKey){if(document.activeElement===n)return void e.preventDefault()}else e.keyCode===KEYCODE_ESC&&(t.exteriorObj.closeOverlay(),t.interiorObj.closeOverlay())})),o.addEventListener("keydown",(function(i){i.keyCode===KEYCODE_ESC&&e.hasClass("opened")&&(t.exteriorObj.closeOverlay(),t.interiorObj.closeOverlay())})),i[1].focus()},MASERATI.V360.prototype.showPriceModelActive=function(){this.$el.hasClass("user-rotate-interaction")&&(this.$el.find(".single-model").removeClass("active-show-price"),this.$el.find(".models").find(".model.active").parent(".single-model").addClass("active-show-price"))},MASERATI.V360.prototype.inViewHandler=function(){var e=this;function t(){e.loadComponent()&&$(window).off("scroll",t)}$(window).on("scroll",t)},MASERATI.V360.prototype.loadComponent=function(){var e=this.$el.offset().top+.01*$(window).height();return e=e<0?0:e,!this.$el.hasClass("in-view")&&$(window).scrollTop()+$(window).height()>=e&&this.$el.addClass("in-view"),this.$el.hasClass("in-view")},$((function(){$(".v360.component").each((function(){new MASERATI.V360($(this))}))}))},function(e,t){MASERATI.VideoCta=function(e){this.$element=e,this.videoContainer=this.$element.find(".video-container"),this.videoLooperContainer=this.$element.find(".videolooper-container"),this.videoTag=this.videoContainer.find(".video-tag"),this.videoTagId=this.videoTag.attr("id"),this.videoId=this.$element.data("video"),this.videoControls=this.$element.data("controls"),this.provider=this.$element.data("provider"),this.cc=this.$element.data("cc"),this.playWhenReady=!1,this.initialTitle=this.$element.find(".title"),this.playButton=this.$element.find(".play-button"),this.resumeButton=this.$element.find(".resume-button"),this.overlayTitle=this.$element.find(".titleOverlay"),this.initialOverlay=this.$element.find(".initial-overlay"),this.subTitle=this.$element.find(".subtitle"),this.ctaButton=this.$element.find(".cta-container"),this.overlay=this.$element.find(".overlay-container"),this.overlayTime=!!this.$element.attr("data-overlay-time")&&this.$element.attr("data-overlay-time"),this.textShade=this.$element.find(".text-shade"),this.closeButton=this.$element.find(".overlay-close"),this.showOverlaySequence=null,this.playVideoSequence=null,this.resumeVideoSequence=null,this.isFullScreen=!1,this.showOverlayWhenExitFullScreen=!1,this.$element[0].maseratiObject=this,this.player=null,this.goingAnimation=null,this.poller=null,this.status=null,this.progressPoller=0,this.pauseProgressPolling=!1,this.progressEvents=["0","25","50","75","100"],this.sentProgressEvent=null,this.duration=0,this.title=""},MASERATI.VideoCta.prototype.getOverlayTime=function(){return this.overlayTime?this.overlayTime:this.player.getDuration()},MASERATI.VideoCta.prototype.setupVideo=function(){"YouKu"==this.provider&&(this.videoControls="always",this.overlay.css("pointer-events","none"),this.textShade.css("pointer-events","none"),this.initialOverlay.css("pointer-events","all"));let e=0;switch(this.videoControls){case"always":e=1;break;case"mobile":e=MASERATI.Helpers.Mobile.isMobile()?1:0}let t="true"===this.cc||!0===this.cc;this.player="YouKu"==this.provider?new MASERATI.YuokuInterface(this,!0,!0):MASERATI.getYouTubePlayer(this,0,e,t),"YouKu"==this.provider&&this.onPlayerReady()},MASERATI.VideoCta.prototype.setupButtons=function(){var e=this;this.playButton.click((function(){MASERATI.Helpers.log("click on play "),e.playButton.css("pointer-events","none"),e.showVideo(),e.closeButton.focus()})).velocity("fadeIn"),this.closeButton.click((function(){MASERATI.Helpers.log("click on close "),e.stop(),setTimeout((function(){e.playButton.focus()}),MASERATI.Animations.openOverlaySlideSpeed),e.playButton.css("pointer-events","auto")})),this.$element.find(".resume-button").css("display","none"),this.$element.on("click",".resume-button__click",(function(t){t.preventDefault(),e.$element.removeClass("nopolling"),MASERATI.Helpers.log("resuming "),MASERATI.Helpers.Mobile.isMobile()&&e.videoContainer.show(),e.playAnimationSequence(e.resumeVideoSequence2.slice(0),(function(){e.playButton.css("pointer-events","none"),e.play()})),e.status=null})),document.addEventListener("fullscreenchange",(function(){e.changeFullScreen(e)}),!1),document.addEventListener("webkitfullscreenchange",(function(){e.changeFullScreen(e)}),!1),document.addEventListener("mozfullscreenchange",(function(){e.changeFullScreen(e)}),!1),this.showOverlaySequence=[{o:this.overlay,a:{opacity:1},t:MASERATI.Animations.videoCtaFadeSpeed,p:0,s:!1},{o:this.textShade,a:{opacity:.7},t:MASERATI.Animations.videoCtaFadeSpeed,p:0,s:!1},{o:this.initialTitle,a:{opacity:0},t:0,p:MASERATI.Animations.videoCtaPauseBetween,s:!1},{o:this.ctaButton,a:{opacity:1},t:MASERATI.Animations.videoCtaFadeSpeed,p:MASERATI.Animations.videoCtaPauseBetween,s:!1},{o:this.overlayTitle,a:{opacity:1},t:MASERATI.Animations.videoCtaFadeSpeed,p:MASERATI.Animations.videoCtaPauseBetween,s:!1},{o:this.subTitle,a:{opacity:1},t:MASERATI.Animations.videoCtaFadeSpeed,p:MASERATI.Animations.videoCtaPauseBetween,s:!0}],this.showOverlayVideoLoopSequence=[{o:this.videoContainer,a:{opacity:0},t:0,p:0,s:!1},{o:this.videoLooperContainer,a:{opacity:1},t:0,p:0,s:!1},{o:this.ctaButton,a:"fadeIn",t:MASERATI.Animations.videoCtaFadeSpeed,p:MASERATI.Animations.videoCtaPauseBetween,s:!1},{o:this.overlayTitle,a:"fadeIn",t:MASERATI.Animations.videoCtaFadeSpeed,p:MASERATI.Animations.videoCtaPauseBetween,s:!1},{o:this.subTitle,a:{opacity:1},t:MASERATI.Animations.videoCtaFadeSpeed,p:MASERATI.Animations.videoCtaPauseBetween,s:!0},{o:this.resumeButton,a:{opacity:1},t:MASERATI.Animations.videoCtaFadeSpeed,p:0,s:!1}],this.endVideoSequence=[{o:this.resumeButton,a:{opacity:1},t:MASERATI.Animations.videoCtaFadeSpeed,p:0,s:!1}],this.playVideoSequence=[{o:this.overlayTitle,a:{opacity:0},t:0,p:0,s:!1},{o:this.playButton,a:{opacity:0},t:0,p:0,s:!1},{o:this.textShade,a:"fadeOut",t:MASERATI.Animations.videoCtaFadeSpeed,p:0,s:!1},{o:this.videoContainer,a:"fadeIn",t:MASERATI.Animations.videoCtaFadeSpeed,p:0,s:!1}],this.resumeVideoSequence2=[{o:this.overlay,a:"fadeOut",t:MASERATI.Helpers.Mobile.isMobile()?MASERATI.Animations.videoCtaFadeSpeed:0,p:0,s:!1},{o:this.textShade,a:"fadeOut",t:MASERATI.Helpers.Mobile.isMobile()?MASERATI.Animations.videoCtaFadeSpeed:0,p:0,s:!1},{o:this.ctaButton,a:{opacity:0},t:0,p:0,s:!1},{o:this.overlayTitle,a:{opacity:0},t:0,p:0,s:!1},{o:this.subTitle,a:{opacity:0},t:0,p:0,s:!0},{o:this.resumeButton,a:"fadeOut",t:0,p:0,s:!1},{o:this.videoContainer,a:"fadeIn",t:MASERATI.Helpers.Mobile.isMobile()?MASERATI.Animations.videoCtaFadeSpeed:0,p:0,s:!1}],this.resumeVideoSequence=[{o:this.ctaButton,a:{opacity:0},t:0,p:0,s:!1},{o:this.overlayTitle,a:{opacity:0},t:0,p:0,s:!1},{o:this.subTitle,a:{opacity:0},t:0,p:0,s:!0},{o:this.videoContainer,a:"fadeIn",t:MASERATI.Animations.videoCtaFadeSpeed,p:0,s:!1}],this.textShadeSequence=[{o:this.textShade,a:{opacity:1},t:MASERATI.Animations.videoCtaFadeSpeed,p:1,s:!1},{o:this.textShade,a:{opacity:.6},t:MASERATI.Animations.videoCtaFadeSpeed,p:0,s:!1}],this.resumeInitialPlaySequence=[{o:this.ctaButton,a:{opacity:0},t:0,p:0,s:!1},{o:this.overlayTitle,a:{opacity:0},t:0,p:0,s:!1},{o:this.subTitle,a:{opacity:0},t:0,p:0,s:!0},{o:this.resumeButton,a:"fadeOut",t:0,p:0,s:!1},{o:this.videoContainer,a:{opacity:0},t:0,p:0,s:!1},{o:this.overlay,a:"fadeIn",t:0,p:0,s:!1},{o:this.textShade,a:{opacity:.3},t:0,p:0,s:!1},{o:this.initialTitle,a:{opacity:1},t:0,p:0,s:!1},{o:this.initialOverlay,a:"fadeIn",t:0,p:0,s:!1},{o:this.playButton,a:{opacity:1},t:0,p:0,s:!1},{o:this.closeButton,a:"fadeOut",t:0,p:0,s:!1}]},MASERATI.VideoCta.prototype.playAnimationSequence=function(e,t){var i=this;if(this.isClosing)return void 0!==t&&t(),void(null!==i.goingAnimation&&(window.clearTimeout(i.goingAnimation),i.goingAnimation=null));if(0==e.length)return void 0!==t&&t(),null!==i.goingAnimation&&(window.clearTimeout(i.goingAnimation),i.goingAnimation=null),!0;var n=e,s=t,o=n.shift(),a=o.o;if(0==a.length)return MASERATI.Helpers.log("skip not existing elem: ",a),this.playAnimationSequence(n,s);if(void 0!==o.s&&o.s&&"none"==getComputedStyle(a[0]).display)return MASERATI.Helpers.log("skip hidden elem: "+a.attr("class")),a.css(o.a),this.playAnimationSequence(n,s);var r=o.a,l=o.t,d=o.p;if(0==d)return a.velocity(r,l),this.playAnimationSequence(n,s);i=this;a.velocity(r,l,(function(){i.goingAnimation=setTimeout((function(){i.playAnimationSequence(n,s)}),d)}))},MASERATI.VideoCta.prototype.changeFullScreen=function(e){e.isFullScreen=!e.isFullScreen,MASERATI.Helpers.log("FULLSCREEN -> "+e.isFullScreen),e.showOverlayWhenExitFullScreen&&!e.isFullScreen&&(e.showOverlayWhenExitFullScreen=!1,e.showOverlay())},MASERATI.VideoCta.prototype.onPlayerReady=function(e){if(this.duration=this.player.getDuration?this.player.getDuration():0,this.player.getVideoData){var t=this.player.getVideoData();this.title=t.title}else this.title=this.videoId;this.setupButtons(),this.playWhenReady&&(MASERATI.Helpers.Mobile.isMobile()||(this.triggerProgressChangeEvent("0"),this.player.playVideo()),this.playWhenReady=!1)},MASERATI.VideoCta.prototype.attachPoller=function(){var e=this;MASERATI.Helpers.log("Poller attacched"),this.poller=window.setInterval((function(){e.player.getCurrentTime()>=e.getOverlayTime()&&(e.$element.addClass("nopolling"),e.detachPoller(),e.overlay.show(),e.textShade.css("display","block").css("opacity",0),e.initialOverlay.hide(),e.playAnimationSequence(e.showOverlaySequence.slice(0)),MASERATI.Helpers.log("Time to overlay"))}),16)},MASERATI.VideoCta.prototype.detachPoller=function(){null!==this.poller&&(clearInterval(this.poller),this.poller=null),MASERATI.Helpers.log("Poller detached")},MASERATI.VideoCta.prototype.pollProgress=function(){if(this.pauseProgressPolling)return MASERATI.Helpers.log("Tracker poller muted"),!1;var e=this.player.getCurrentTime();e<.5?this.triggerProgressChangeEvent("0"):e>.25*this.duration&&e<.5*this.duration?this.triggerProgressChangeEvent("25"):e>.5*this.duration&&e<.75*this.duration?this.triggerProgressChangeEvent("50"):e>.75*this.duration&&e<this.duration&&this.triggerProgressChangeEvent("75"),MASERATI.Helpers.log("Tracker poller poll "+this.player.getCurrentTime())},MASERATI.VideoCta.prototype.triggerProgressChangeEvent=function(e){this.progressEvents.indexOf(e)>-1&&this.sentProgressEvent!=e&&(this.sentProgressEvent=e,this.$element[0].dispatchEvent(new CustomEvent("videoprogresschange",{detail:{progress:e}})),"0"==e?MASERATI.AdobeTracking.tracker.setSatelliteTrack("MediaStreamStart"):MASERATI.AdobeTracking.tracker.setSatelliteTrack("MediaStream"+e))},MASERATI.VideoCta.prototype.triggerPlayerOpenEvent=function(){this.sentProgressEvent=null,MASERATI.Helpers.log("dispatching event videoplayeropen "+this.title),this.$element[0].dispatchEvent(new CustomEvent("videoplayeropen",{detail:{title:this.title}})),"YouKu"==this.provider&&this.triggerProgressChangeEvent("0")},MASERATI.VideoCta.prototype.onPlayerStateChange=function(e){var t=this;switch(MASERATI.Helpers.log("Video state: "+this.player.getPlayerState()),e.data){case YT.PlayerState.ENDED:clearInterval(this.progressPoller),MASERATI.Helpers.log("Tracker poller detached"),this.triggerProgressChangeEvent("100");break;case YT.PlayerState.PLAYING:this.pauseProgressPolling=!1;break;default:this.pauseProgressPolling=!0}this.player.getPlayerState()==YT.PlayerState.ENDED&&(this.playAnimationSequence([{o:this.resumeButton,a:"fadeIn",t:MASERATI.Animations.videoCtaFadeSpeed,p:0,s:!1}],(function(){MASERATI.Helpers.Mobile.isMobile()||"YouKu"==t.provider?t.videoContainer.hide():(t.player.seekTo(0),t.player.mute())})),MASERATI.Helpers.log("Time to resume button")),null!==this.poller||this.$element.hasClass("nopolling")||this.player.getPlayerState()!=YT.PlayerState.PLAYING||this.attachPoller()},MASERATI.VideoCta.prototype.showOverlay=function(){if(MASERATI.Helpers.log("isfullscreen? "+this.isFullScreen),this.isFullScreen)return this.showOverlayWhenExitFullScreen=!0,!1;this.$element.addClass("overlay"),this.overlay.show();var e=this.showOverlaySequence.slice(0);this.player&&("YouKu"!=this.provider&&this.player.seekTo(0),this.player.stopVideo()),this.textShade.css("display","block").css("opacity",0),this.playAnimationSequence(e)},MASERATI.VideoCta.prototype.showVideo=function(){var e=this;MASERATI.Helpers.log(" video container is ",this.videoContainer),MASERATI.AdobeTracking.tracker.setMediaName("video:"+this.title),this.closeButton.show(),this.playAnimationSequence([{o:e.closeButton,a:{opacity:1},t:MASERATI.Animations.videoCtaFadeSpeed,p:0,s:!1}]);var t=this.playVideoSequence.slice(0);this.$element.hasClass("overlay")&&(t=this.resumeVideoSequence.slice(0),this.$element.hasClass("videoLoop")&&("YouKu"!=this.provider&&this.looperPlayer.seekTo(0),this.looperPlayer.stopVideo(),this.looperPlayerInterval&&window.clearInterval(this.looperPlayerInterval))),this.playAnimationSequence(t,(function(){e.$element.removeClass("overlay"),e.overlay.hide(),e.play()}))},MASERATI.VideoCta.prototype.play=function(){if(this.player){"YouKu"!=this.provider&&this.player.unMute(),this.$element.hasClass("videoLoop")&&"YouKu"!=this.provider&&this.player.seekTo(0);var e=this;"YouKu"!=this.provider&&(this.triggerProgressChangeEvent("0"),MASERATI.Helpers.log("Tracker poller attacched"),this.progressPoller=setInterval((function(){e.pollProgress()}),1e3*this.duration/16),MASERATI.Helpers.log("Tracker SetMediaName "+this.title),MASERATI.AdobeTracking.tracker.setMediaName("video:"+this.title)),MASERATI.Helpers.log(this.player),MASERATI.Helpers.log(" starting play"),this.player.playVideo()}else this.playWhenReady=!0;this.ctaButton.show()},MASERATI.VideoCta.prototype.stop=function(){var e=this;clearInterval(this.progressPoller),MASERATI.Helpers.log("Tracker poller detached"),this.player.pauseVideo(),"YouKu"!=this.provider&&this.player.unMute(),this.isClosing=!0,e.detachPoller(),e.$element.removeClass("nopolling"),e.closeButton.velocity("stop",!0),e.overlayTitle.velocity("stop",!0),e.subTitle.velocity("stop",!0),e.ctaButton.velocity("stop",!0),MASERATI.Helpers.log("resuming play btn"),this.isClosing=!1,this.playAnimationSequence(this.resumeInitialPlaySequence.slice(0),(function(){e.textShade.show()})),this.ctaButton.hide()};var i=[];$((function(){$(".video-cta").each((function(){MASERATI.Helpers.log("initializing video-cta");var e=new MASERATI.VideoCta($(this));i.push(e),"YouKu"==$(this).data("provider")?e.setupVideo():MASERATI.YoutubeManager.addVideoCallback((function(){e.setupVideo()}))}))}))},function(e,t){MASERATI.VideoGallery=function(e){this.$el=e,this.$slidesContainer=this.$el.find(".main-slide"),this.$slides=this.$slidesContainer.find(".slide"),this.$prevTrigger=this.$el.find(".prevTrigger"),this.$nextTrigger=this.$el.find(".nextTrigger"),this.$mobileText=this.$el.find(".mobile-text-container"),this.$videoContainer=this.$el.find(".video-container"),this.$videoTag=this.$videoContainer.find(".video-tag"),this.$videoTagOriginal=this.$videoTag.clone(),this.$playBtns=this.$slidesContainer.find(".play-button,.replay-button"),this.$closeButton=this.$videoContainer.find(".overlay-close"),this.$volumeButton=this.$videoContainer.find(".overlay-volume"),this.$volumeIcon=this.$videoContainer.find(".icon-volume"),this.$overlay=this.$videoContainer.find(".overlay-container"),this.documentDirection="rtl"===$("html").attr("dir")?"rtl":"ltr",this.currentSlide=1,this.totalSlides=this.$slides.length,this.slideAmount=-67,this.slideAmountMob=-80,this.delay=25,this.tabItemsSelector="a, [role=button]","rtl"===this.documentDirection&&(this.slideAmount*=-1,this.slideAmountMob*=-1),this.player=null,this.videoTagId=this.$videoTag.attr("id"),this.videoId="",this.provider=null,this.providerChanged=!1,this.starting=!1,this.closing=!1,this.viewportIn=!0,this.muted=!1,this.progressPoller=0,this.pauseProgressPolling=!1,this.progressEvents=["0","25","50","75","100"],this.sentProgressEvent=null,this.setMobileText(),this.bind(),this.refreshSlides(),this.refreshTriggers(),this.loadComponent()},MASERATI.VideoGallery.prototype.setMobileText=function(){var e=this.$slidesContainer.find(".slide.active .text-container");this.$mobileText.empty(),e.children().clone().appendTo(this.$mobileText),this.$mobileText.css("opacity",1);let t=this;this.$mobileText.find("a").keydown((function(e){t.focusMoveCtaMobile(e)}))},MASERATI.VideoGallery.prototype.hideMobileText=function(){this.$mobileText.css("opacity",0)},MASERATI.VideoGallery.prototype.triggerSlideChangeEvent=function(){MASERATI.AdobeTracking.tracker.setSatelliteTrack("GalleryEngage"),this.$el[0].dispatchEvent(new CustomEvent("slidechange"))},MASERATI.VideoGallery.prototype.bind=function(){var e=this;this.$prevTrigger.click((function(){e.prev()})),this.$nextTrigger.click((function(){e.next()})),this.$slidesContainer.on("swipeleft",(function(){e.next()})),this.$slidesContainer.on("swiperight",(function(){e.prev()})),this.$prevTrigger.on("swipeleft",(function(){e.next()})),this.$prevTrigger.on("swiperight",(function(){e.prev()})),this.$nextTrigger.on("swipeleft",(function(){e.next()})),this.$nextTrigger.on("swiperight",(function(){e.prev()})),this.$slides.find(this.tabItemsSelector).keydown((function(t){e.focusMove(t)})),this.$playBtns.click((function(){e.play(this)})),this.$closeButton.click((function(){e.stop(this)})),this.$volumeButton.click((function(){e.toggleAudio()})),this.$overlay.dblclick((function(){e.player&&e.requestFullScreen()})),$(window).scroll((function(){e.checkViewportIn()})),$(window).resize((function(){e.$slidesContainer.addClass("no-animate"),e.move(0),requestAnimationFrame((function(){e.$slidesContainer.removeClass("no-animate")}))})),this.inViewHandler()},MASERATI.VideoGallery.prototype.inViewHandler=function(){var e=this;function t(){e.loadComponent()&&$(window).off("scroll",t)}$(window).on("scroll",t)},MASERATI.VideoGallery.prototype.loadComponent=function(){var e=this.$el.offset().top+.25*this.$el.outerHeight();return e=e<0?0:e,!this.$el.hasClass("in-view")&&$(window).scrollTop()+$(window).height()>=e&&(this.$el.addClass("in-view"),!0)},MASERATI.VideoGallery.prototype.areSlidesAnimating=function(){return this.$slidesContainer.hasClass("velocity-animating")},MASERATI.VideoGallery.prototype.setSlidesAnimating=function(){return this.$slidesContainer.addClass("velocity-animating")},MASERATI.VideoGallery.prototype.unsetSlidesAnimating=function(){return this.$slidesContainer.removeClass("velocity-animating")},MASERATI.VideoGallery.prototype.isVideoStarting=function(){return this.$el.hasClass("video-loading")},MASERATI.VideoGallery.prototype.prev=function(){MASERATI.Helpers.log("Tracker setGalleryAction arrow"),MASERATI.AdobeTracking.tracker.setGalleryAction("video-gallery:arrow"),this.areSlidesAnimating()||this.isVideoStarting()||(this.triggerSlideChangeEvent(),this.move(-1))},MASERATI.VideoGallery.prototype.next=function(){MASERATI.Helpers.log("Tracker setGalleryAction arrow"),MASERATI.AdobeTracking.tracker.setGalleryAction("video-gallery:arrow"),this.areSlidesAnimating()||this.isVideoStarting()||(this.triggerSlideChangeEvent(),this.move(1))},MASERATI.VideoGallery.prototype.move=function(e){var t=this,i=window.innerWidth<1024?this.slideAmountMob:this.slideAmount;this.currentSlide+e>=1&&this.currentSlide+e<=this.totalSlides&&(this.setSlidesAnimating(),this.hideMobileText(),this.$slidesContainer.css("transform","translateX("+(this.currentSlide+e-1)*i+"%)"),this.currentSlide+=e,setTimeout((function(){t.refreshSlides(),t.setMobileText(),t.refreshTriggers(),t.unsetSlidesAnimating(),t.$el.hasClass("playing")&&t.play()}),this.delay))},MASERATI.VideoGallery.prototype.refreshSlides=function(){var e=$(this.$slides.get(this.currentSlide-1));this.$slides.removeClass("active"),e.addClass("active"),this.setFocusable(e)},MASERATI.VideoGallery.prototype.refreshTriggers=function(){this.$prevTrigger.show(),this.$nextTrigger.show(),this.$el.removeClass("first last"),1==this.currentSlide&&(this.$prevTrigger.hide(),this.$el.addClass("first")),this.currentSlide==this.totalSlides&&(this.$nextTrigger.hide(),this.$el.addClass("last"))},MASERATI.VideoGallery.prototype.requestFullScreen=function(){var e=this.$videoContainer.get(0),t=e.requestFullscreen||e.mozRequestFullScreen||e.webkitRequestFullscreen||e.msRequestFullscreen;t&&t.call(e)},MASERATI.VideoGallery.prototype.cancelFullScreen=function(){var e=document,t=e.exitFullscreen||e.mozCancelFullScreen||e.webkitCancelFullScreen||e.msExitFullscreen;if(t&&!1!==e.fullscreen)try{t.call(e)}catch(e){}},MASERATI.VideoGallery.prototype.checkViewportIn=function(){var e=this.$videoContainer.offset().top,t=e+this.$videoContainer.outerHeight(),i=$(window).scrollTop()+window.innerHeight,n=$(window).scrollTop();i>e&&n<t?this.closing||!1!==this.viewportIn||null==this.player||null==this.player||null==this.player.getPlayerState||2!=this.player.getPlayerState()||(this.player.playVideo(),this.viewportIn=!0):this.closing||!0!==this.viewportIn||null==this.player||null==this.player||null==this.player.getPlayerState||1!=this.player.getPlayerState()||(this.player.pauseVideo(),this.viewportIn=!1)},MASERATI.VideoGallery.prototype.onPlayerReady=function(e){if(this.duration=this.player.getDuration(),MASERATI.Helpers.log("video onPlayerReady. duration:"+this.duration),this.player.getVideoData){var t=this.player.getVideoData();this.title=t.title}else this.title=this.videoId;MASERATI.Helpers.log("video onPlayerReady."),this.playVideo(),this.toggleAudio(!this.muted)},MASERATI.VideoGallery.prototype.onPlayerError=function(e){MASERATI.Helpers.log("player in error ("+e.data+") ");var t=this;setTimeout((function(){t.stop()}),1e3)},MASERATI.VideoGallery.prototype.onPlayerStateChange=function(e){switch(MASERATI.Helpers.log("Video state: "+this.player.getPlayerState()),e.data){case YT.PlayerState.ENDED:cancelAnimationFrame(this.progressPoller),MASERATI.Helpers.log("Tracker poller detached"),this.triggerProgressChangeEvent("100"),this.stop();break;case YT.PlayerState.PLAYING:this.starting&&(starting=!1,this.showVideo()),this.pauseProgressPolling=!1;break;case YT.PlayerState.PAUSED:this.closing&&(this.closing=!1,this.player.stopVideo(),this.hideVideo());break;default:this.pauseProgressPolling=!0}},MASERATI.VideoGallery.prototype.showVideo=function(){this.$videoContainer.fadeIn(),this.$overlay.removeClass("black"),this.$el.removeClass("video-loading"),this.focusOverlay()},MASERATI.VideoGallery.prototype.hideVideo=function(){this.$videoContainer.fadeOut(),this.$overlay.addClass("black").css("pointer-events",""),this.$el.removeClass("video-loading"),this.cancelFullScreen(),this.focusSlide()},MASERATI.VideoGallery.prototype.play=function(e){MASERATI.Helpers.log(void 0===e?"changed video ":"click on play ");var t=void 0!==e?$(e).parentsUntil(".main-slide").last():this.$slidesContainer.find(".slide.active");this.videoId=t.data("video");let i=t.data("provider");this.providerChanged=this.provider!=i,this.provider=i;let n="true"===t.data("cc")||!0===t.data("cc");t.removeClass("played"),this.$el.hasClass("playing")||this.$el.addClass("playing"),this.$el.hasClass("video-loading")||this.$el.addClass("video-loading"),"YouKu"==this.provider?(this.$videoContainer.find(".video-tag").remove(),this.$videoContainer.prepend(this.$videoTagOriginal.clone()),this.player=new MASERATI.YuokuInterface(this,!0,!0),this.$volumeButton.addClass("hidden"),this.$overlay.css("pointer-events","none"),this.playVideo(),this.showVideo()):(this.providerChanged&&(this.$videoContainer.find(".video-tag").remove(),this.$videoContainer.prepend(this.$videoTagOriginal.clone())),this.player=this.providerChanged?MASERATI.getYouTubePlayer(this,1,1,n):this.player.loadVideoById(this.videoId),this.starting=!0,this.$volumeButton.removeClass("hidden"),this.$overlay.css("pointer-events","")),this.$videoTag=this.$videoContainer.find(".video-tag")},MASERATI.VideoGallery.prototype.stop=function(e){void 0!==e&&MASERATI.Helpers.log("click on close ");var t=this,i=this.$slidesContainer.find(".slide.active");void 0===e&&i.addClass("played"),setTimeout((function(){t.$el.removeClass("playing")}),this.delay),"YouKu"!=this.provider&&void 0!==e?(this.player.pauseVideo(),this.closing=!0):(this.player.stopVideo(),this.hideVideo())},MASERATI.VideoGallery.prototype.toggleAudio=function(e){if("YouKu"==this.provider)return;null==e&&MASERATI.Helpers.log("click on volume ");let t=void 0!==e&&null!=e?e:this.player.isMuted();this.$volumeButton.attr("aria-pressed",t?"false":"true"),t?(this.player.unMute(),this.$volumeIcon.removeClass("volume-off"),this.muted=!1):(this.player.mute(),this.$volumeIcon.addClass("volume-off"),this.muted=!0)},MASERATI.VideoGallery.prototype.playVideo=function(){this.player.playVideo(),this.fixSafariPlay(),this.attachPoller(),this.triggerPlayerOpenEvent(),this.$videoContainer.css("opacity",1)},MASERATI.VideoGallery.prototype.fixSafariPlay=function(){if("YouKu"!=this.provider)var e=0,t=this,i=setInterval((function(){var n=t.player.getPlayerState();n==YT.PlayerState.PAUSED?t.player.playVideo():(++e>50||n==YT.PlayerState.PLAYING)&&clearInterval(i)}),100)},MASERATI.VideoGallery.prototype.attachPoller=function(){if("YouKu"!=this.provider){MASERATI.Helpers.log("Tracker poller attacched");var e=this,t=function(){e.pollProgress(),e.progressPoller&&(e.progressPoller=requestAnimationFrame(t))};MASERATI.Helpers.log("Tracker SetMediaName "+this.title),MASERATI.AdobeTracking.tracker.setMediaName("video:"+this.title),this.progressPoller=requestAnimationFrame(t)}else this.pauseProgressPolling=!0},MASERATI.VideoGallery.prototype.pollProgress=function(){if(this.pauseProgressPolling)return MASERATI.Helpers.log("Tracker poller muted"),!1;var e=this.player.getCurrentTime();e<.5?this.triggerProgressChangeEvent("0"):e>.25*this.duration&&e<.5*this.duration?this.triggerProgressChangeEvent("25"):e>.5*this.duration&&e<.75*this.duration?this.triggerProgressChangeEvent("50"):e>.75*this.duration&&e<this.duration&&this.triggerProgressChangeEvent("75"),MASERATI.Helpers.log("Tracker poller poll "+this.player.getCurrentTime())},MASERATI.VideoGallery.prototype.triggerProgressChangeEvent=function(e){"YouKu"!=this.provider&&this.progressEvents.indexOf(e)>-1&&this.sentProgressEvent!=e&&(this.sentProgressEvent=e,this.$el[0].dispatchEvent(new CustomEvent("videoprogresschange",{detail:{progress:e}})),"0"==e?(console.log("MediaName: "+this.title),MASERATI.AdobeTracking.tracker.setSatelliteTrack("MediaStreamStart")):MASERATI.AdobeTracking.tracker.setSatelliteTrack("MediaStream"+e))},MASERATI.VideoGallery.prototype.triggerPlayerOpenEvent=function(){this.sentProgressEvent=null,MASERATI.Helpers.log("dispatching event videoplayeropen "+this.title),this.$el[0].dispatchEvent(new CustomEvent("videoplayeropen",{detail:{title:this.title}})),this.triggerProgressChangeEvent("0")},MASERATI.VideoGallery.prototype.focusMove=function(e){if(9==e.keyCode&&!this.areSlidesAnimating()){let t=this.$slides.filter(".active"),i=t.find(this.tabItemsSelector).filter("[tabindex=0]:visible"),n=t.find(":focus"),s=i.index(n);0==s&&e.shiftKey&&this.currentSlide>1?(e.preventDefault(),this.prev(),this.focusSlide(!0)):s==i.length-1&&!e.shiftKey&&this.currentSlide<this.totalSlides&&(e.preventDefault(),this.focusNextOrCtaMobile())}},MASERATI.VideoGallery.prototype.focusNextOrCtaMobile=function(){let e=this.$mobileText.find("a:visible");e.length>0?e.focus():(this.next(),this.focusSlide())},MASERATI.VideoGallery.prototype.focusMoveCtaMobile=function(e){9!=e.keyCode||this.areSlidesAnimating()||(e.shiftKey?(e.preventDefault(),this.focusSlide(!0)):this.currentSlide<this.totalSlides&&(e.preventDefault(),this.next(),this.focusSlide()))},MASERATI.VideoGallery.prototype.focusSlide=function(e){this.$volumeButton.attr("tabindex","-1"),this.$closeButton.attr("tabindex","-1");let t=$(this.$slides.get(this.currentSlide-1));this.setFocusable(t),t.find(this.tabItemsSelector).filter("[tabindex=0]:visible:"+(e?"last":"first")).focus()},MASERATI.VideoGallery.prototype.focusOverlay=function(){this.$slides.find(this.tabItemsSelector).attr("tabindex","-1"),this.$mobileText.find("a").attr("tabindex","-1"),this.$volumeButton.attr("tabindex","0"),this.$closeButton.attr("tabindex","0"),this.$volumeButton.hasClass("hidden")||window.innerWidth<1024?this.$closeButton.focus():this.$volumeButton.focus()},MASERATI.VideoGallery.prototype.setFocusable=function(e){this.$slides.find(this.tabItemsSelector).attr("tabindex","-1"),e.find(this.tabItemsSelector).attr("tabindex","0"),e.find(e.hasClass("played")?".play-button":".replay-button").attr("tabindex","-1"),this.$mobileText.find("a").attr("tabindex","0")},$((function(){$(".video-gallery").each((function(){new MASERATI.VideoGallery($(this))})),MASERATI.YoutubeManager.init()}))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";i.r(t);i(131),i(132),i(87),i(146),i(89),i(148),i(115),i(91),i(163),i(122),i(94);window.MASERATI=window.MASERATI||{},MASERATI.Helpers={showLogCheck:null,logCookieName:"maserati_show_js_log",prefillManager:null,Footer2018:null},MASERATI.Helpers.showLog=function(){if(null!==this.showLogCheck)return this.showLogCheck;Cookies.get(this.logCookieName)?this.showLogCheck=!0:this.showLogCheck=!1},MASERATI.Helpers.enableLog=function(){return Cookies.set(this.logCookieName,"1",{expires:7}),"logs enabled"},MASERATI.Helpers.disableLog=function(){return Cookies.remove(this.logCookieName),"logs disabled"},MASERATI.Helpers.log=function(){if(this.showLog()&&void 0!==window.console)if(arguments.length>0)for(var e=0;e<arguments.length;e++)console.log(arguments[e]);else console.log(arguments[0])},MASERATI.Helpers.bindSubmit=function(){$("form a.cta").click((function(e){e.preventDefault(),$(this).closest("form").submit()}))},MASERATI.Helpers.preloadImage=function(e){$("<img />").attr("src",e)},MASERATI.Helpers.scrollToTarget=function(e,t){if(0!=MASERATI.Helpers.referenceMirror(e.get(0))){var i=MASERATI.Helpers.referenceMirror(e.get(0));if(MASERATI.Helpers.log(i),"function"==typeof i.openFromCta)return i.openFromCta(t),MASERATI.Helpers.scrollToTargetFixed(e,t,e.selector),!1}MASERATI.Helpers.scrollToTargetFixed(e,t,e.selector)},MASERATI.Helpers.scrollToTargetFixed=function(e,t,i){var n=window.location.href.split("#")[0];window.location.href=n+i,MASERATI.Helpers.scrollToHash(i)},MASERATI.Helpers.scrollAnimationsInit=function(){$("a.scroll-animated").click((function(e){var t=$(this).attr("href");if(t.length>0&&"#"==t[0]){e.preventDefault();var i=$($(this).attr("href")),n=0,s=$(this).attr("class");if(void 0!==s)void 0!==s.match(/\boffset\b/)&&(n=$("#maserati_menu").outerHeight()||$("#maserati_menu_2018").outerHeight());return MASERATI.Helpers.log(i),MASERATI.Helpers.scrollToTarget(i,n),!1}return!0}))},MASERATI.Helpers.debounce=function(e,t,i){var n,s=function(){var s=this,o=arguments,a=function(){n=null,i||e.apply(s,o)},r=i&&!n;return clearTimeout(n),n=setTimeout(a,t),r&&e.apply(s,o),s};return s.isDebounced=!0,s.now=function(){return clearTimeout(n),e.apply(this,arguments)},s},MASERATI.Helpers.getWindowHeight=function(){return parseInt(window.innerHeight,10)},MASERATI.Helpers.getWindowWidth=function(){return parseInt(window.innerWidth,10)},MASERATI.Helpers.inViewport=function(e){var t=e.offset().top,i=t+e.outerHeight(),n=$(window).scrollTop()+window.innerHeight,s=$(window).scrollTop();return n>t&&s<i},MASERATI.Helpers.referenceMirror=function(e){return void 0!==e.maseratiObject&&e.maseratiObject},MASERATI.Helpers.referenceCreate=function(e,t){e.maseratiObject=t},MASERATI.Helpers.Mobile={detector:null,deviceCookieName:"_device",getDetector:function(){return null===this.detector&&(this.detector=new MobileDetect(window.navigator.userAgent)),this.detector},setDeviceCookie:function(){this.getDetector().phone()?Cookies.get(this.deviceCookieName)||Cookies.set(this.deviceCookieName,"smartphone"):Cookies.get(this.deviceCookieName)&&Cookies.remove(this.deviceCookieName)},isMobile:function(){return null!==this.getDetector().mobile()}},MASERATI.Helpers.scrollTo=function(e){if((e=$(e)).length){var t=0,i=$("#maserati_menu").outerHeight()||$("#maserati_menu_2018").outerHeight();$(".maserati_menu_otherelement").each((function(){t+=$(this).outerHeight()})),null!==i?t+=i:t=0,MASERATI.Helpers.scrollToTarget(e,t)}},MASERATI.Helpers.checkExternalAnchor=function(){window.location.hash&&null!==/^#[a-zA-Z][\w:.-]*$/.exec(window.location.hash)&&1!=window.performance.navigation.type&&MASERATI.Helpers.scrollToHash(window.location.hash)},MASERATI.Helpers.scrollToHash=function(e){if((e=$(e)).length){var t=0,i=$("body").find("#maserati_menu").length>0&&!$("body").find("#maserati_menu").hasClass("not-sticky");i=i||$("body").find("#maserati_menu_2018").length>0&&!$("body").find("#maserati_menu_2018").hasClass("not-sticky");var n=$("body").find(".nav-anchor").length>0;i&&(t=$("#maserati_menu").outerHeight()||$("#maserati_menu_2018").outerHeight()),n&&$(e).offset().top>$(window).height()&&(t=$("body").find(".nav-anchor").outerHeight()),MASERATI.Helpers.fixPositionOnJumpToAnchor(e,t)}},MASERATI.Helpers.fixPositionOnJumpToAnchor=function(e,t){var i=$(document).scrollTop();var n=setInterval((function(){i==$(document).scrollTop()?(clearInterval(n),setTimeout((function(){document.location.href=document.location.href,$(e).velocity("scroll",{duration:MASERATI.Animations.ctaScrollSpeed,easing:MASERATI.Animations.ctaEasing,offset:-t})}),2100)):i=$(document).scrollTop()}),800)},MASERATI.Helpers.getUrlParameter2=function(e,t){var i,n,s=(t?decodeURIComponent(window.location.search.substring(1)):window.location.search.substring(1)).split("&");for(n=0;n<s.length;n++)if((i=s[n].split("="))[0]===e)return void 0===i[1]||(t?i[1]:decodeURIComponent(i[1]));return!1},MASERATI.Helpers.getUrlParameter=function(e){return MASERATI.Helpers.getUrlParameter2(e,!0)},MASERATI.Helpers.initVerticalLayout=function(){if($(".vertical-layout-container").length>0){$(".vertical-layout-container .textimage-background-fullheight").removeClass("fullScreen");$(".sticky-wrapper.new-menu").height();var e=$(".vertical-layout-container > div:not(.right):first"),t=$(".vertical-layout-container > div:not(.right):last"),i=$(".vertical-layout-container > div.right");e.height()+t.height()<i.height()&&(i=$(".vertical-layout-container > div:not(.right):first"),(e=$(".vertical-layout-container > div.right")).css("margin-top","0px")),!t.height()>0&&t.css("display","none"),i.css("margin-top","0px");var n=window.scrollY;window.innerHeight,e.offset().top;!t.height()>0?e[0].getBoundingClientRect().height:t.offset().top+t.height();var s=i.offset().top;i.height();$(window).resize((function(o){MASERATI.Helpers.getWindowWidth()<768?i.css("margin-top",0):(n=window.scrollY,n+window.innerHeight,e.offset().top,!t.height()>0?e[0].getBoundingClientRect().height:t.offset().top+t.height(),s=i.offset().top,s+i.height(),$(window).scroll())})),$(window).on("scroll",(function(e){if(!(MASERATI.Helpers.getWindowWidth()<768)){var t=$(".sticky-wrapper.new-menu").height(),i=$(".vertical-layout-container > div:not(.right):first"),n=$(".vertical-layout-container > div:not(.right):last"),s=$(".vertical-layout-container > div.right");i.height()+n.height()<s.height()&&(s=$(".vertical-layout-container > div:not(.right):first"),(i=$(".vertical-layout-container > div.right")).css("margin-top","0px")),!n.height()>0&&n.css("display","none"),i.css("margin-top","0px"),s.css("margin-top","0px");var o=window.scrollY,a=window.innerHeight,r=(i.offset().top,0);r=!n.height()>0?i[0].getBoundingClientRect().height:n.offset().top+n.height();var l=s.offset().top,d=l+s.height();a=(o=window.scrollY)+window.innerHeight;var c=r<d?d:Math.min(r,a),h=0;o>=l&&(h=a>d&&d-l<window.innerHeight?o-l+t:c-d+t),h=Math.min(h,r-d+l),h=Math.max(0,h),s.css("margin-top",h)}}))}},MASERATI.Helpers.isSmallDeviceLandscape=function(){return MASERATI.Helpers.getWindowHeight()<MASERATI.Helpers.getWindowWidth()&MASERATI.Helpers.getWindowWidth()<=1024},MASERATI.Helpers.isAfter=function(e,t){return 0!==e.prevAll().filter(t).length},MASERATI.Helpers.isBefore=function(e,t){return 0!==e.nextAll().filter(t).length},MASERATI.Helpers.pad=function(e,t,i){return i=i||"0",(e+="").length>=t?e:new Array(t-e.length+1).join(i)+e},MASERATI.Helpers.mod=function(e,t){var i=e%t;return Math.floor(i>=0?i:i+t)},MASERATI.Helpers.getCountryCode=function(){return"undefined"!=typeof digitalData&&digitalData&&digitalData.pageInfo&&digitalData.pageInfo.countryCode?digitalData.pageInfo.countryCode:null},MASERATI.Helpers.sleep=function(e){return new Promise((function(t){return setTimeout(t,e)}))};i(167),i(168),i(169),i(123),i(170),i(171),i(125);MASERATI.dealerContact=function(){},MASERATI.dealerContact.prototype.callService=function(e,t,i){var n=this;t=t||"en";e=e.split(",");for(var s="",o=0;o<e.length;o++)s=s+"[dealercode]=["+e[o]+"]",o!=e.length-1&&(s+="OR");MASERATI.callback=function(e){e=e.toString();return i(n.successResponse(e)),0},$.ajax({url:"https://www.geocms.it/Server/servlet/S3JXServletCall?parameters="+escape("method_name=GetObject&callback=MASERATI.callback&licenza=")+"geo-maseratispa"+escape("&progetto=DealerLocator&lang="+t+"&id=1&query=")+escape(s)+"&encoding=UTF-8",type:"POST",dataType:"jsonp",crossDomain:!0})},MASERATI.dealerContact.prototype.successResponse=function(e){return this.formatData(e)},MASERATI.dealerContact.prototype.formatData=function(e){var t=this,i=JSON.parse(e).L[0].O;console.log("service data:"),console.log(i);for(var n=[],s=0;s<i.length;s++){var o=i[s],a=o.U,r=a.agencyname,l=(o.D,o.id),d=(o.pk,a.address),c=a.city,h=(a.civicNum,a.countryDescription,a.countryIsoCode2,a.dealername);void 0!==h&&null!=h&&""!=h||(h=r),void 0!==h&&null!=h&&""!=h||(h=o.D);a.emailAddr,a.fax;var u=a.phone,p=a.postcode,f=a.province,g=(a.sales,o.G[0].P[0].y),m=o.G[0].P[0].x,v=[],y=o.U.url;void 0!==a.G&&(v=a.G.opening_hours);var A="",$="",S="",E="",C="",T="",b="";v.forEach((function(e){A==e.amFrom&&$==e.amTo&&S==e.pmFrom&&E==e.pmTo?C=C+", "+LABEL["day_"+e.giorno]:(b=e.giorno,""!==C&&(T=t.handleOpeningTimes(v,A,S,C,E,$)),C=LABEL["day_"+b],A=e.amFrom,$=e.amTo,S=e.pmFrom,E=e.pmTo)}));var M="";void 0!==d&&(M+=d),void 0!==c&&(M=M+", "+c),void 0!==f&&(M=M+", "+f),void 0!==p&&(M=M+", "+p);var w={dealerName:h,openingResult:T+=t.handleOpeningTimes(v,A,S,C,E,$),phone:u,address:M,location:g+","+m,dealerId:l,url:y};n.push(w)}return console.log(n),n},MASERATI.dealerContact.prototype.handleOpeningTimes=function(e,t,i,n,s,o){return n=null!=t&&null!=t||null!=i&&null!=i?null==t||null==t?'<div class="days">'+n+'</div><div class="hours">'+i+" - "+s+"</div>":null==i||null==i?'<div class="days">'+n+'</div><div class="hours">'+t+" - "+o+"</div>":'<div class="days">'+n+'</div><div class="hours">'+t+" - "+o+" / "+i+" - "+s+"</div>":'<div class="days">'+n+'</div><div class="hours">Closed</div>',0===e.length&&(n=""),n},$((function(){MASERATI.dealerContact=new MASERATI.dealerContact}));i(126);MASERATI.EmbedVideoContainer=function(e,t,i,s,o){this.$el=e,this.provider=this.$el.data("provider"),this.videoContainer=this.$el,this.videoTag=this.videoContainer.find(".video-tag"),this.videoTag.attr("id",this.videoTag.attr("id")+n()),this.autoplay=this.$el.data("autoplay"),this.videoTagId=this.videoTag.attr("id"),this.videoId=this.$el.data("video"),this.videoCc=this.$el.data("cc"),this.playWhenReady=!1,this.playButton=this.$el.find(".play-button"),this.playLoader=this.$el.find(".play-loader"),this.controls=this.$el.find(".controls"),this.overlayControls=this.$el.find(".overlay-controls"),this.closeButton=this.$el.find(".icon-close"),this.volumeIcon=this.$el.find(".icon-volume"),this.$el[0].maseratiObject=this,this.player=null,this.showControls=t?0:1,this.showCaptions="true"===this.videoCc||!0===this.videoCc,this.forceAutoplay="true"===this.autoplay||!0===this.autoplay||1===this.autoplay||"1"===this.autoplay,this.progressPoller=0,this.pauseProgressPolling=!1,this.progressEvents=["0","25","50","75","100"],this.sentProgressEvent=null,this.duration=0,this.title="",this.isClosed=!1,this.forceUnMute=!1,this.videoShown=!1,this.viewportIn=null,this.youkuFirstInitialized=!1,this.noOverlayCloseEvent=o,"YouKu"==this.provider&&this.volumeIcon.hide(),this.overlayCloseBtn=this.$el.closest(".overlayComponent").find(".overlayData .close"),this.delegate=i,this.onError=s},MASERATI.EmbedVideoContainer.prototype.playerInViewport=function(){var e=this.videoContainer.offset().top,t=e+this.videoContainer.outerHeight(),i=$(window).scrollTop()+window.innerHeight,n=$(window).scrollTop();return"none"!==this.videoContainer.css("display")&&i>e&&n<t},MASERATI.EmbedVideoContainer.prototype.setupVideo=function(){"YouKu"==this.provider?(this.player=new MASERATI.YuokuInterface(this,!0,!0),this.videoTag.addClass("youKuPlayer"),this.setupButtons(),this.delegate&&"function"==typeof this.delegate&&this.delegate()):(this.player=MASERATI.getYouTubePlayer(this,0,this.showControls,this.showCaptions,this.forceAutoplay),this.videoTag=this.videoContainer.find(".video-tag")),this.viewportIn=!0;var e=this;$(window).scroll((function(){e.player.getPlayerState&&(e.playerInViewport()?MASERATI.Helpers.Mobile.isMobile()?e.viewportIn=!0:e.isClosed||!1!==e.viewportIn||2!=e.player.getPlayerState()||(e.toggleAudio(0),e.player.playVideo(),e.viewportIn=!0):!0===e.viewportIn&&1==e.player.getPlayerState()&&(MASERATI.Helpers.Mobile.isMobile()?e.closeButton.click():e.player.pauseVideo(),e.viewportIn=!1))}))},MASERATI.EmbedVideoContainer.prototype.getPlayer=function(){return this.player},MASERATI.EmbedVideoContainer.prototype.toggleAudio=function(e,t){"YouKu"!=this.provider&&((void 0!==e?e:this.player.isMuted())?(t||this.player.unMute(),this.volumeIcon.removeClass("volume-off")):(t||this.player.mute(),this.volumeIcon.addClass("volume-off")))},MASERATI.EmbedVideoContainer.prototype.setupButtons=function(){var e=this;this.playButton.click((function(){MASERATI.Helpers.log("click on play "),e.showVideo()})),this.playButton.velocity("fadeIn"),this.closeButton.click((function(){MASERATI.Helpers.log("click on close "),e.overlayControls.velocity("fadeOut"),e.controls.show(),e.playLoader.hide().css("opacity",1),e.playButton.css("opacity",0).velocity("fadeIn"),e.isClosed=!0,e.stop(),e.videoShown=!1})),this.volumeIcon.click((function(){MASERATI.Helpers.log("click on volume "),e.toggleAudio()})),this.noOverlayCloseEvent||this.overlayCloseBtn.click((function(){"YouKu"==e.provider?e.closeButton.click():1==e.player.getPlayerState()&&(MASERATI.Helpers.Mobile.isMobile()?e.closeButton.click():e.player.pauseVideo(),e.viewportIn=!1)}))},MASERATI.EmbedVideoContainer.prototype.onPlayerError=function(e){MASERATI.Helpers.log("player in error ("+e.data+") ");var t=this;setTimeout((function(){t.closeButton.click(),t.onError&&"function"==typeof t.onError&&t.onError()}),1e3)},MASERATI.EmbedVideoContainer.prototype.onPlayerReady=function(e){if(this.duration=this.player.getDuration(),this.player.getVideoData){var t=this.player.getVideoData();this.title=t.title}else this.title=this.videoId;this.setupButtons(),!this.isClosed&&this.delegate&&"function"==typeof this.delegate&&this.delegate(),this.isClosed=!1},MASERATI.EmbedVideoContainer.prototype.pollProgress=function(){if(this.pauseProgressPolling)return!1;var e=this.player.getCurrentTime();return e<.5?(this.triggerProgressChangeEvent("0"),!0):e>.25*this.duration&&e<.5*this.duration?(this.triggerProgressChangeEvent("25"),!0):e>.5*this.duration&&e<.75*this.duration?(this.triggerProgressChangeEvent("50"),!0):!(e>.75*this.duration&&e<this.duration)||(this.triggerProgressChangeEvent("75"),!0)},MASERATI.EmbedVideoContainer.prototype.triggerProgressChangeEvent=function(e){this.progressEvents.indexOf(e)>-1&&this.sentProgressEvent!=e&&(this.sentProgressEvent=e,this.$el[0].dispatchEvent(new CustomEvent("videoprogresschange",{detail:{progress:e}})),"0"==e?(MASERATI.AdobeTracking.tracker.setMediaName("video:"+this.title),MASERATI.AdobeTracking.tracker.setSatelliteTrack("MediaStreamStart")):MASERATI.AdobeTracking.tracker.setSatelliteTrack("MediaStream"+e))},MASERATI.EmbedVideoContainer.prototype.onPlayerStateChange=function(e){switch(console.log(e.data),e.data){case YT.PlayerState.ENDED:cancelAnimationFrame(this.progressPoller),this.triggerProgressChangeEvent("100"),this.player.seekTo(0);break;case YT.PlayerState.PLAYING:this.pauseProgressPolling=!1,this.pollProgress(),this.showVideoContainer(),this.toggleAudio(this.player.isMuted()?0:1,!0);break;default:this.pauseProgressPolling=!0}},MASERATI.EmbedVideoContainer.prototype.showVideoContainer=function(){var e=this;this.videoShown||(this.videoTag.velocity("fadeIn",MASERATI.Animations.opacityDelay,(function(){e.player.pauseVideo&&!e.playerInViewport()&&e.player.pauseVideo(),e.viewportIn=!0})),this.videoTag.css("pointer-events","all"),this.playLoader.velocity("fadeOut",MASERATI.Animations.opacityDelay),this.overlayControls.velocity("fadeIn",MASERATI.Animations.opacityDelay),this.controls.hide(),this.videoShown=!0)},MASERATI.EmbedVideoContainer.prototype.showVideo=function(){MASERATI.Helpers.log(" video container is ",this.videoContainer),MASERATI.Helpers.log(" triggered play"),this.play()},MASERATI.EmbedVideoContainer.prototype.play=function(){if(this.player){this.forceUnMute&&this.toggleAudio(1,!1),this.forceUnMute=!1,this.playButton.hide(),this.playLoader.show();var e=this;if("YouKu"!=this.provider){this.progressPoller=requestAnimationFrame((function t(){e.pollProgress(),e.progressPoller&&(e.progressPoller=requestAnimationFrame(t))}))}MASERATI.Helpers.log("Tracker SetMediaName "+this.title),MASERATI.AdobeTracking.tracker.setMediaName("video:"+this.title),MASERATI.Helpers.log(this.player),MASERATI.Helpers.log(" starting play"),this.player.playVideo(),this.isClosed=!1,"YouKu"==this.provider&&(this.youkuFirstInitialized||(this.player.stopVideo(),this.player.playVideo(),this.youkuFirstInitialized=!0),this.showVideoContainer())}else this.playWhenReady=!0},MASERATI.EmbedVideoContainer.prototype.stop=function(){this.videoTag.velocity("fadeOut",MASERATI.Animations.opacityDelay),this.videoTag.css("pointer-events","none"),this.player&&(cancelAnimationFrame(this.progressPoller),this.player.stopVideo())};var n=function(){var e=0;return function(){return e++}}();i(173);Array.prototype.max=function(){return Math.max.apply(null,this)},Array.prototype.min=function(){return Math.min.apply(null,this)},Number.prototype.mod=function(e){return(this%e+e)%e};i(176),i(178);var s=s||{};s.config={cookieName:"maserati_cookie_agree",cookiePath:"/"};var o=o||{};function a(e){console.log(e)}o.PrefillManager=function(){o.PrefillManager.UNKNOWN="unknown",o.PrefillManager.COOKIE_MODEL_VISITS_NAME="maserati_models_visits",o.PrefillManager.COOKIE_LASTPAGE_NAME="maserati_lastpage_visit",o.PrefillManager.COOKIE_MODEL_USERCHOISE_NAME="maserati_models_user_choise",o.PrefillManager.COOKIE_MODEL_USERCHOISE_NAME_FULL="maserati_models_user_choise_full",o.PrefillManager.COOKIE_ZIP_USERCHOISE_NAME="maserati_zip_user_choise",o.PrefillManager.COOKIE_LOCALIZATIONDATA_USERCHOISE_NAME="maserati_localizationdata_user_choise",this.previousPage,o.PrefillManager.models=["ghibli","levante","quattroporte","grancabrio","granturismo"],o.PrefillManager.families={ghibli:"GH",levante:"LV",quattroporte:"QP",grancabrio:"GC",granturismo:"GT","granturismo-convertible":"GC"},this.modelsHistory=this.deserializeModelVisits(),this.previousPage=Cookies.get(o.PrefillManager.COOKIE_LASTPAGE_NAME)},o.PrefillManager.GoogleKey="AIzaSyBGyRlfkIN5nl0AcDG6LhKjjQozr4siC8I",o.PrefillManager.GoogleLibraries="places",o.PrefillManager.prototype.checkCookiesEnabled=function(){var e=!1;if("undefined"!=typeof OptanonActiveGroups){var t=OptanonActiveGroups;console.log("Cookie acceptance groups: "+t),null!=t&&void 0!==t&&(e=t.search("C0003")>0,console.log("Cookie acceptance result: "+e))}return e},o.PrefillManager.prototype.scheduleList=[],o.PrefillManager.prototype.loadGoogleAPI=function(e,t,i,n,s,a){var r=this;if(void 0!==e&&null!=e&&e||i&&n&&i!=n&&null!=i){var l=document.body.getAttribute("data-google");if("loaded"==l)console.log("Google API loading - APs already loaded"),t();else if(this.scheduleList.length>0||"loading"==l)this.scheduleList.push(t);else{this.scheduleList.push(t),document.body.setAttribute("data-google","loading"),console.log("Google API loading - Loading new script");var d=document.getElementsByTagName("head")[0],c=document.createElement("script");c.onload=function(){document.body.setAttribute("data-google","loaded");var e=r.scheduleList;r.scheduleList=[];for(var t=0;t<e.length;t++)e[t]()},c.src="//maps.googleapis.com/maps/api/js?sensor=false",c.src+="&libraries="+o.PrefillManager.GoogleLibraries,i&&n&&i!=n&&null!=i?(c.src+="&client="+i,c.src+="&channel="+n):c.src+="&key="+e,(s||null!=s)&&(c.src+="&region="+s),(a||null!=a)&&(c.src+="&language="+a),d.appendChild(c)}}else console.warn("loadGoogleAPI - specify key or the pair client & channel")},o.PrefillManager.prototype.setPreferredZipCode=function(e){if(a("Overriding zip cookie value with:"+e),void 0!==e&&null!=e){s.config;this.checkCookiesEnabled()&&Cookies.set(o.PrefillManager.COOKIE_ZIP_USERCHOISE_NAME,e)}},o.PrefillManager.prototype.setPreferredLocalizationData=function(e){if(void 0!==e&&null!=e){s.config;this.checkCookiesEnabled()&&Cookies.set(o.PrefillManager.COOKIE_LOCALIZATIONDATA_USERCHOISE_NAME,JSON.stringify(e))}},o.PrefillManager.prototype.getGeolocalizationData=function(e,t){var i=null;if(t=t||!1)a("skipped cookie search.");else{if(void 0!==Cookies.get(o.PrefillManager.COOKIE_LOCALIZATIONDATA_USERCHOISE_NAME)&&(i=JSON.parse(Cookies.get(o.PrefillManager.COOKIE_LOCALIZATIONDATA_USERCHOISE_NAME))),null!=i)return a("found a value in cookie."+i),void e(i);a("not found a value in cookie."+i)}return i=invokeGeolocalization(this,e,i,!1)},o.PrefillManager.prototype.getGeolocalizationZipCode=function(e,t){var i=null;if(t=t||!1)a("skipped cookie search.");else{if(void 0!==Cookies.get(o.PrefillManager.COOKIE_ZIP_USERCHOISE_NAME)&&(i=Cookies.get(o.PrefillManager.COOKIE_ZIP_USERCHOISE_NAME)),null!=i)return a("found a value in cookie."+i),void e(i);a("not found a value in cookie."+i)}return i=invokeGeolocalization(this,e,i,!0)},o.PrefillManager.prototype.getIPlocalizationZipCode=function(e,t){var i=null,n=this;if(t=t||!1)a("skipped cookie search.");else{if(void 0!==Cookies.get(o.PrefillManager.COOKIE_ZIP_USERCHOISE_NAME)&&(i=Cookies.get(o.PrefillManager.COOKIE_ZIP_USERCHOISE_NAME)),null!=i)return a("found a value in cookie."+i),void e(i);a("not found a value in cookie."+i)}return invokeMaxMindServices((function(t){t.zipCode?(n.setPreferredLocalizationData(t),a("Handling return of MaxMind API data"),a(t),e(t.zipCode),i=t.zipCode):(e(null),i=null)})),i},o.PrefillManager.prototype.getIPlocalizationData=function(e,t){var i=null,n=this;if(t=t||!1)a("skipped cookie search.");else{if(void 0!==Cookies.get(o.PrefillManager.COOKIE_LOCALIZATIONDATA_USERCHOISE_NAME)&&(i=JSON.parse(Cookies.get(o.PrefillManager.COOKIE_LOCALIZATIONDATA_USERCHOISE_NAME))),null!=i)return a("found a value in cookie."+i),void e(i);a("not found a value in cookie."+i)}return invokeMaxMindServices((function(t){t.zipCode?(n.setPreferredLocalizationData(t),a("Handling return of MaxMind API data"),a(t),e(t),i=t):(e(null),i=null)})),i},o.PrefillManager.prototype.setPreferredModel=function(e){if(void 0!==e&&null!=e){s.config;if(this.checkCookiesEnabled()){var t=o.PrefillManager.families[e],i={};i.model=e,i.family=t,Cookies.set(o.PrefillManager.COOKIE_MODEL_USERCHOISE_NAME_FULL,JSON.stringify(i)),Cookies.set(o.PrefillManager.COOKIE_MODEL_USERCHOISE_NAME,e)}}},o.PrefillManager.prototype.getPreferredModelAndFamily=function(){var e=this.getPreferredModel(),t=null;s.config;if(this.checkCookiesEnabled()&&null!=e){var i=o.PrefillManager.families[e],n={};n.model=e,n.family=i,t=n}return t},o.PrefillManager.prototype.getPreferredModel=function(){var e=null;if(void 0!==Cookies.get(o.PrefillManager.COOKIE_MODEL_USERCHOISE_NAME)&&(e=Cookies.get(o.PrefillManager.COOKIE_MODEL_USERCHOISE_NAME)),null!=e)return a("found a value in cookie."+e),e;if(this.previousPage){var t=this.previousPage.split(":");if("models"==t[0])return t[1]}if(Cookies.get(o.PrefillManager.COOKIE_MODEL_VISITS_NAME)){var i=JSON.parse(Cookies.get(o.PrefillManager.COOKIE_MODEL_VISITS_NAME));return Object.keys(i).reduce((function(e,t){return i[e]>i[t]?e:t}))}return null},o.PrefillManager.prototype.checkLastPage=function(){o.PrefillManager.UNKNOWN;var e=o.PrefillManager.UNKNOWN;s.config;this.checkCookiesEnabled()&&"undefined"!=typeof digitalData&&null!=digitalData&&null!=digitalData.pageInfo&&null!=digitalData.pageInfo.pageName&&(e=digitalData.pageInfo.pageName),a("Previous page: "+this.previousPage+". Current page, set to cookie: "+e),Cookies.set(o.PrefillManager.COOKIE_LASTPAGE_NAME,e)},o.PrefillManager.prototype.checkIsModelPage=function(){s.config;var e=o.PrefillManager.UNKNOWN,t=o.PrefillManager.UNKNOWN,i=this;this.checkCookiesEnabled()?(a("checking if in ModelPage. "),"undefined"!=typeof digitalData&&null!=digitalData&&null!=digitalData.pageInfo&&null!=digitalData.pageInfo.pageName&&(e=digitalData.pageInfo.pageName.split(":")[0],t=digitalData.pageInfo.pageName),a("pagetype: "+e),"models"==e&&t!=o.PrefillManager.UNKNOWN&&(a("pagetype: "+e+" and pageName : "+t+". Checking for models already stored."),a(this.modelsHistory),o.PrefillManager.models.forEach((function(e){t.indexOf(e)>=0&&(i.modelsHistory[e]=i.modelsHistory[e]+1)})),this.serializeModelVisits(this.modelsHistory))):console.log("cookies not accepted")},o.PrefillManager.prototype.serializeModelVisits=function(e){Cookies.set(o.PrefillManager.COOKIE_MODEL_VISITS_NAME,JSON.stringify(e))},o.PrefillManager.prototype.deserializeModelVisits=function(){var e={};return void 0!==Cookies.get(o.PrefillManager.COOKIE_MODEL_VISITS_NAME)?e=JSON.parse(Cookies.get(o.PrefillManager.COOKIE_MODEL_VISITS_NAME)):o.PrefillManager.models.forEach((function(t){e[t]=0})),e},$((function(){var e=window.MASERATI.Helpers.prefillManager=new o.PrefillManager;e.checkLastPage(),e.checkIsModelPage()})),window.invokeGeolocalization=function(e,t,i,n){var s=!1,o=!1,r=window.MASERATI.Helpers.getCountryCode();return 1!=r&&41!=r||(s=!0),48!=r&&180!=r&&95!=r||(o=!0),s?invokeMaxMindServices((function(s){if(s&&s.zipCode){e.setPreferredLocalizationData(s),e.setPreferredZipCode(s.zipCode);a("Handling return of MaxMind API data"),a(s),a("MaxMind Accuracy: "+s.confidence),40<s.confidence?n?(t(s.zipCode),i=s.zipCode):(t(s),i=s):(a("MaxMind Accuracy not enought. Invoking Google services"),invokeGoogleServices((function(s){s&&s.zipCode?(e.setPreferredLocalizationData(s),e.setPreferredZipCode(s.zipCode),a("Handling return of Google API data"),a(s),n?(t(s.zipCode),i=s.zipCode):(t(s),i=s)):(t(null),i=null)})))}else t(null),i=null})):o?invokeMaxMindServices((function(s){s&&s.zipCode?(e.setPreferredLocalizationData(s),e.setPreferredZipCode(s.zipCode),a("Handling return of MaxMind API data"),a(s),n?(t(s.zipCode),i=s.zipCode):(t(s),i=s)):(t(null),i=null)})):invokeGoogleServices((function(s){s&&s.zipCode?(e.setPreferredLocalizationData(s),e.setPreferredZipCode(s.zipCode),a("Handling return of Google API data"),a(s),n?(t(s.zipCode),i=s.zipCode):(t(s),i=s)):(t(null),i=null)})),i},window.invokeGoogleServices=function(e){o.PrefillManager.prototype.loadGoogleAPI(o.PrefillManager.GoogleKey,(function(){var t={};navigator.geolocation?navigator.geolocation.getCurrentPosition((function(n){var s=new google.maps.LatLng(n.coords.latitude,n.coords.longitude);(new google.maps.Geocoder).geocode({latLng:s},(function(s,o){if(console.log("google response:"),console.log(s),o==google.maps.GeocoderStatus.OK&&void 0!==s[0]){for(var a=0;a<s[0].address_components.length;a++)for(var r=0;r<s[0].address_components[a].types.length;r++)"postal_code"==s[0].address_components[a].types[r]&&(t.zipCode=s[0].address_components[a].long_name),"street_number"==s[0].address_components[a].types[r]&&(t.street_number=s[0].address_components[a].long_name),"route"==s[0].address_components[a].types[r]&&(t.street=s[0].address_components[a].long_name),"locality"==s[0].address_components[a].types[r]&&(t.locality=s[0].address_components[a].long_name),"administrative_area_level_2"==s[0].address_components[a].types[r]&&(t.province=s[0].address_components[a].long_name),"administrative_area_level_1"==s[0].address_components[a].types[r]&&(t.region=s[0].address_components[a].long_name),"country"==s[0].address_components[a].types[r]&&(t.country=s[0].address_components[a].long_name,t.countryCode=s[0].address_components[a].short_name);if(t.latitude=n.coords.latitude,t.longitude=n.coords.longitude,t.confidence=99,t.zipCode)return e(t);i("Unable to look-up postal code")}else i("Unable to look-up geolocation")}))}),(function(e){i(e.message)})):i("Unable to find your location.");function i(t){return console.log("err",t),e(null)}}))},window.invokeMaxMindServices=function(e){window.geoip2.insights((function(t){invokeMaxMindSuccess(e,t)}),(function(t){invokeMaxMindFail(e,t)}),null)},window.invokeMaxMindSuccess=function(e,t){if(null!=t&&void 0!==t){console.log("Data found in MaxMind IP Database"),console.log(t);var i={};if(null!=t.postal&&null!=t.postal.code&&(i.zipCode=t.postal.code),i.street_number="",i.street="",null!=t.city&&null!=t.city.names&&null!=t.city.names.en&&(i.confidence=t.city.confidence,i.locality=t.city.names.en),null!=t.subdivisions&&t.subdivisions.length>0){t.subdivisions.length;for(var n=0;n<t.subdivisions.length;n++){var s=t.subdivisions[n];0==n&&null!=s.names&&(i.region=s.names.en),1==n&&null!=s.names&&(i.province=s.names.en)}}if(null!=t.country&&null!=t.country.names&&null!=t.country.names.en&&(i.country=t.country.names.en,i.countryCode=t.country.iso_code),null!=t.location&&(i.latitude=t.location.latitude,i.longitude=t.location.longitude),i.zipCode)return e(i);console.log("Error in processing MaxMind IP Database"),e(null)}else console.log("Data not found in MaxMind IP Database"),e(null)},window.invokeMaxMindFail=function(e,t){console.log("Data not found in MaxMind IP Database"),console.log(t),e(null)},MASERATI.Wcag={},MASERATI.Wcag.bindEnterClick=function(e){$(e).trigger("click")},MASERATI.Wcag.formEvents=function(){$("form").each((function(){var e=this;$(this).find('label[role="checkbox"]').each((function(){var e=this;$(this).off("keydown").on("keydown",(function(t){if(32==t.which){MASERATI.Wcag.bindEnterClick(e),console.log("SPACE BAR"),t.preventDefault();var i=$(e).attr("for");$("#"+i).is(":checked")?$(e).attr("aria-checked","true"):$(e).attr("aria-checked","false")}}))})),$(this).find('input[type="checkbox"]').on("click",(function(){var t=$(this).attr("id");$(this).is(":checked")?$(e).find('label[role="checkbox"][for="'+t+'"]').attr("aria-checked","true"):$(e).find('label[role="checkbox"][for="'+t+'"]').attr("aria-checked","false")}));var t=$(this).find('input[type="submit"]');$(this).off("keydown").on("keydown",(function(e){$(document.activeElement).is('select, a, [role="button"], .date_picker_calendar')||(e.stopPropagation(),13==e.which&&(MASERATI.Wcag.bindEnterClick(t),console.log("submit form")))})),MASERATI.Wcag.EnterBind($(this))}))},MASERATI.Wcag.EnterBind=function(e){e.find('div[role="button"],span[role="button"], label[role="button"],a[role="button"],div[role=option],g[role=button]').each((function(){var e=this;$(this).off("keydown").on("keydown",(function(t){t.stopPropagation(),13==t.which&&MASERATI.Wcag.bindEnterClick(e)}))}))},$((function(){$('img[role="button"],div[role="button"],span[role="button"],div[role="tab"],div[role="menuitem"],div[role="search"],label[role="button"],a[role="button"],div[role=option]').each((function(){var e=this;$(this).keypress((function(t){t.stopPropagation(),13==t.which&&MASERATI.Wcag.bindEnterClick(e)}))})),MASERATI.Wcag.formEvents()}));i(179),i(180),i(181),i(182),i(184),i(185),i(186),i(187),i(188),i(189),i(190),i(191),i(192),i(193),i(194),i(195),i(196),i(197),i(198),i(199),i(200),i(201),i(202),i(203),i(204),i(205),i(206),i(207),i(208),i(209),i(210),i(211),i(212),i(213),i(214),i(215),i(216),i(217),i(218),i(219),i(220),i(221),i(222),i(223),i(224),i(225),i(226),i(227),i(228),i(229),i(230),i(231),i(232),i(233),i(234),i(235),i(236),i(237),i(238),i(239),i(240),i(241),i(242),i(243),i(244),i(245);MASERATI.SearchResults=function(e){this.$element=e,this.isLoading=!1,this.url=e.find(".loadMore").attr("data-more"),this.page=1,this.reload=!1,this.hasReloaded=!1,this.$selector=e,this.$boxesSelector=e.find(".results"),this.boxes=[],this.setPage(),this.init()},MASERATI.SearchResults.prototype.setPage=function(){if(window.location.hash){var e=parseInt(window.location.hash.substr(1));e&&(this.page=e,this.reload=this.page>1)}},MASERATI.SearchResults.prototype.init=function(){var e=this,t=MASERATI.Helpers.getUrlParameter2("q",!1);0!=t&&$("input[name=q]").val(t),e.$selector.find(".box").each((function(){e.boxes.push($(this))})),this.bindClickOnBox(),this.loadMoreBind(this.$selector.find(".loadMore")),this.reload&&this.reloadContents()},MASERATI.SearchResults.prototype.reset=function(){this.deAnimate(),this.$selector.find(".loadMore").unbind()},MASERATI.SearchResults.prototype.reInit=function(){this.bindClickOnBox(),this.animate(),this.loadMoreBind(this.$selector.find(".loadMore"))},MASERATI.SearchResults.prototype.setClickedBoxCookie=function(e){Cookies.set(this.clickedBoxCookie,e)},MASERATI.SearchResults.prototype.getClickedBoxCookie=function(){return Cookies.get(this.clickedBoxCookie)},MASERATI.SearchResults.prototype.bindClickOnBox=function(){var e=this;this.boxes.forEach((function(t,i){t.$element.data("progressiveId",i).unbind("click.onBox").bind("click.onBox",(function(){e.setClickedBoxCookie($(this).data("progressiveId"))}))}))},MASERATI.SearchResults.prototype.reloadContents=function(){this.showMainLoading();var e=this.$selector.find(".loading"),t=$("#maserati_menu, #maserati_menu_2018");e.velocity("scroll",{duration:0,easing:MASERATI.Animations.ctaEasing,offset:t.length?-t.height():0,queue:!1}),this.loadMore()},MASERATI.SearchResults.prototype.loadMoreBind=function(e){MASERATI.Helpers.log(e);var t=this;e.click((function(e){return e.preventDefault(),t.isLoading||t.loadMore(),!1}))},MASERATI.SearchResults.prototype.loadMoreRotation=function(e){},MASERATI.SearchResults.prototype.getCurrentPage=function(){return this.page},MASERATI.SearchResults.prototype.isReloading=function(){return this.reload},MASERATI.SearchResults.prototype.loadMore=function(e){var t=this;t.startLoading();var i={};t.isReloading()?(i.allNewsUpToPage=1,i.page=t.getCurrentPage()):(i.allNewsUpToPage=0,i.page=t.getCurrentPage()+1),$.get(t.url,i,(function(e){t.loadMoreSuccess(e)})).fail((function(){t.loadMoreFailure()})).always((function(){t.isLoading=!1}))},MASERATI.SearchResults.prototype.startLoading=function(){this.$boxesSelector.css("max-height",this.$boxesSelector.height()),this.showAJAXMessage("loading")},MASERATI.SearchResults.prototype.loadMoreSuccess=function(e){if(e.content){var t=$($.parseHTML($.trim(e.content))).find(".result").toArray();t.length?(this.animateLoadedBoxes(this.writeBoxes(t)),this.reload?(this.reload=!1,this.hasReloaded=!0):(this.page=this.page+1,window.location.hash=this.page),0!=e.nextPage?(this.$selector.find(".loadMore").attr("href",e.nextPage).find(".cta").show(),this.$selector.find(".loadMore .icon").hide()):this.$selector.find(".loadMore").attr("href","").hide()):this.loadMoreFailure()}else if(e&&e.length>0){var i='<ul aria-live="polite" role="region" id="results" class="results">';e.length<10&&this.$selector.find(".loadMore").attr("href","").hide(),e.forEach((function(e){var t=e.url,n=e.title;i=i+' <li class="result"> <a href=" '+t+'"> <h2 class="title"> '+n+'</h2> <div aria-hidden="true" class="link"> '+t+'</div> </a> <div class="excerpt"></div> </li>'})),i+="</ul>",this.animateLoadedBoxes(this.writeBoxes($($.parseHTML($.trim(i))).find(".result").toArray())),this.reload?(this.reload=!1,this.hasReloaded=!0):(this.page=this.page+1,window.location.hash=this.page),0!=e.nextPage?(this.$selector.find(".loadMore").attr("href",e.nextPage).find(".cta").show(),this.$selector.find(".loadMore .icon").hide()):this.$selector.find(".loadMore").attr("href","").hide()}else this.loadMoreFailure()},MASERATI.SearchResults.prototype.writeBoxes=function(e){var t=$('<div class="ajax-helper"></div>');this.reload&&(this.$boxesSelector.empty(),this.boxes=[]),this.$boxesSelector.append(t);var i=this,n=!0;return e.forEach((function(e){MASERATI.Helpers.log(" box loaded ");var t=$(e).appendTo(this.$boxesSelector);i.boxes.push(t),n&&(console.log(t),t.find("a").focus(),n=!1)}),this),this.reload&&this.hideMainLoading(),{destination:t,offset:parseInt($(e[0]).css("margin-bottom").replace("px",""),10)}},MASERATI.SearchResults.prototype.animateLoadedBoxes=function(e){if(this.reload){var t=parseInt(this.getClickedBoxCookie());t&&this.boxes[t]&&(e.destination=this.boxes[t].$element)}$("#maserati_menu, #maserati_menu_2018");this.$boxesSelector.velocity({"max-height":this.$boxesSelector.height()+MASERATI.Helpers.getWindowHeight()+"px"},{duration:MASERATI.Animations.SearchResultsAjaxDuration,complete:function(e){$(e).removeAttr("style")}})},MASERATI.SearchResults.prototype.loadMoreFailure=function(){this.showAJAXMessage("fail")},MASERATI.SearchResults.prototype.showMainLoading=function(){this.$selector.find(".loadMore .cta").hide(),this.$selector.find(".loading").show()},MASERATI.SearchResults.prototype.hideMainLoading=function(){this.$selector.find(".loading").hide(),this.$selector.find(".loadMore .icon").hide(),this.$selector.find(".loadMore .cta").show()},MASERATI.SearchResults.prototype.showAJAXMessage=function(e){this.$selector.find(".loadMore .icon").hide(),this.$selector.find(".loadMore .cta").hide(),this.$selector.find(".loadMore .ajax-"+e).show()},MASERATI.SearchResults.prototype.endPoint=function(){this.$selector.velocity({opacity:0,height:0},{duration:MASERATI.Animations.SearchResultsDuration})},$((function(){new MASERATI.SearchResults($(".search-results"))}));i(249),i(250),i(251),i(252),i(253),i(254),i(255),i(256),i(257),i(258),i(259),i(260),i(261),i(262),i(263),i(264),i(265),i(266),i(267),i(268),i(269),i(270),i(271),i(272),i(273)}]));